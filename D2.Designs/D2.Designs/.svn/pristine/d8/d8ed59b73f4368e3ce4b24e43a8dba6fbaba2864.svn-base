#include <Include/ld_db_interface.h>
#include <Include/modules_id.h>
#include <Include/tag_def.h>
#include <Include/ts_subcall_interface.h>
#include <Include/fastmsg_factory_interface.h>
#include <Include/subpub_interface.h>

#include <Include/comexport.h>
#include <Include/biz_tag_def.h>
#include <pub/ldstring.h>
#include <pub/lddate.h>
#include <math.h>

ITS_Subcall_interface* glpTSSubcallSerives = NULL;
IFastmsgFactory_Interface* glpFastMsgFactory = NULL;
IPubSub_interface* glpPubSub_Interface = NULL;

int LD_CALL_MODE fnFunc0(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc1(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc2(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc3(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc4(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc5(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc6(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc7(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc8(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc9(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc10(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc11(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc12(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc13(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc14(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc15(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc16(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc17(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc18(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);
int LD_CALL_MODE fnFunc19(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect);

API_EXPORT void LD_CALL_MODE Onload(char*, Icontainer_interface* lpContainer)
{
    IUnKnown* lpProcessor = lpContainer->GetMouleByName(MODULE_PROCESSOR);
    IUnKnown* lpTSSubcallSerives = NULL;
    lpProcessor->QueryInterface(TS_SUBCALL_INTERFACE, &lpTSSubcallSerives);
    glpTSSubcallSerives = (ITS_Subcall_interface*)lpTSSubcallSerives;
    glpFastMsgFactory = (IFastmsgFactory_Interface*)lpContainer->GetMouleByName(MODULE_FASTMSG);

    IUnKnown* lpPubSubInt = NULL;
    IUnKnown* lpPubSubSvr = lpContainer->GetMouleByName(MODULE_PUBSUBSVR);
    if(lpPubSubSvr)
    {
        lpPubSubSvr->QueryInterface(MODULE_PUBSUBINT, &lpPubSubInt);
        glpPubSub_Interface=(IPubSub_interface*)lpPubSubInt;
    }

    return;
}
API_EXPORT void LD_CALL_MODE Onunload()
{

    return;
}

API_EXPORT void LD_CALL_MODE Onstart()
{
    return;
}

API_EXPORT void LD_CALL_MODE Onstop()
{
    return;
}

API_EXPORT int LD_CALL_MODE QueryInterface(int iFunIndex, LPBIZ_FUNC_INFO bizFuncInfo)
{
    int nRet = 0;
    if (iFunIndex==0)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.1");
        bizFuncInfo->lpFunc = fnFunc0;
    }
    else if (iFunIndex==1)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.11");
        bizFuncInfo->lpFunc = fnFunc1;
    }
    else if (iFunIndex==2)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.21");
        bizFuncInfo->lpFunc = fnFunc2;
    }
    else if (iFunIndex==3)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.31");
        bizFuncInfo->lpFunc = fnFunc3;
    }
    else if (iFunIndex==4)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.41");
        bizFuncInfo->lpFunc = fnFunc4;
    }
    else if (iFunIndex==5)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.51");
        bizFuncInfo->lpFunc = fnFunc5;
    }
    else if (iFunIndex==6)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.52");
        bizFuncInfo->lpFunc = fnFunc6;
    }
    else if (iFunIndex==7)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.53");
        bizFuncInfo->lpFunc = fnFunc7;
    }
    else if (iFunIndex==8)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.101");
        bizFuncInfo->lpFunc = fnFunc8;
    }
    else if (iFunIndex==9)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.121");
        bizFuncInfo->lpFunc = fnFunc9;
    }
    else if (iFunIndex==10)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.122");
        bizFuncInfo->lpFunc = fnFunc10;
    }
    else if (iFunIndex==11)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.123");
        bizFuncInfo->lpFunc = fnFunc11;
    }
    else if (iFunIndex==12)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.124");
        bizFuncInfo->lpFunc = fnFunc12;
    }
    else if (iFunIndex==13)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.125");
        bizFuncInfo->lpFunc = fnFunc13;
    }
    else if (iFunIndex==14)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.126");
        bizFuncInfo->lpFunc = fnFunc14;
    }
    else if (iFunIndex==15)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.127");
        bizFuncInfo->lpFunc = fnFunc15;
    }
    else if (iFunIndex==16)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.128");
        bizFuncInfo->lpFunc = fnFunc16;
    }
    else if (iFunIndex==17)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.129");
        bizFuncInfo->lpFunc = fnFunc17;
    }
    else if (iFunIndex==18)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.130");
        bizFuncInfo->lpFunc = fnFunc18;
    }
    else if (iFunIndex==19)
    {
        strcpy(bizFuncInfo->szFuncName, "tdsecuL.5.131");
        bizFuncInfo->lpFunc = fnFunc19;
    }
    else
    {
        strcpy(bizFuncInfo->szFuncName, "");
        bizFuncInfo->lpFunc = NULL;
        nRet = -1;
    }
    return nRet;
}

API_EXPORT const char* LD_CALL_MODE GetLibVersion()
{
    return "20190614";
}

//逻辑_交易证券_报盘_处理订单回报
int LD_CALL_MODE fnFunc0(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    char v_stock_acco[17];
    char v_stock_code[7];
    int v_report_date;
    int v_report_time;
    char v_report_no[33];
    int v_order_date;
    int64 v_order_id;
    int v_order_dir;
    double v_order_price;
    double v_order_qty;
    char v_rsp_info[256];
    char v_order_rsp_status[3];
    int v_price_type;
    char v_contra_no[33];
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_init_date;
    char v_co_busi_config_str[65];
    int v_tmp_pass_no;
    char v_tmp_out_acco[33];
    int v_tmp_report_date;
    int v_tmp_report_time;
    char v_tmp_report_no[33];
    int v_busi_opor_no;
    char v_order_oper_way[3];
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    int v_asset_acco_no;
    int v_stock_acco_no;
    int v_stock_code_no;
    int v_stock_type;
    int v_asset_type;
    int64 v_comm_id;
    int v_comm_batch_no;
    int v_order_time;
    double v_order_frozen_qty;
    double v_order_frozen_amt;
    char v_order_status[3];
    double v_strike_qty;
    double v_strike_amt;
    double v_all_fee;
    double v_wtdraw_qty;
    int v_wtdraw_time;
    int v_exter_comm_flag;
    int v_cost_calc_type;
    char v_combo_code[33];
    int64 v_combo_posi_id;
    int64 v_strategy_id;
    int v_order_batch_no;
    int v_asset_acco_type;
    int v_exist_debt_flag;
    int v_update_times;
    char v_sys_config_str[65];
    char v_crncy_type[4];
    char v_exch_crncy_type[4];
    double v_buy_ref_rate;
    double v_sell_ref_rate;
    int v_capit_reback_days;
    int v_posi_reback_days;
    int v_trade_code_no;
    int v_target_code_no;
    int v_net_price_flag;
    double v_bond_accr_intrst;
    int v_bond_rate_type;
    double v_par_value;
    double v_impawn_ratio;
    int v_min_unit;
    int v_fina_return_type;
    int v_sell_auto_back_debt;
    int64 v_external_no;
    int v_comm_date;
    int v_comm_executor;
    double v_strike_bond_accr_intrst;
    char v_old_order_status[3];
    int64 v_row_id;
    int v_debt_type;
    double v_curr_strike_price;
    double v_curr_strike_amt;
    double v_curr_strike_qty;
    int64 v_strike_id;
    char v_wtdraw_status[3];
    double v_source_stock_qty;
    double v_single_limit_qty;
    double v_assigned_qty;
    double v_trade_releas_qty;
    double v_trade_capt_qty;
    double v_strike_releas_qty;
    double v_strike_capt_qty;
    double v_over_night_pandl;
    double v_sum_realize_pandl;
    double v_total_open_posi_fee;
    double v_total_close_posi_fee;
    double v_out_order_releas_qty;
    double v_out_order_capt_qty;
    double v_out_strike_releas_qty;
    double v_out_strike_capt_qty;
    char v_remark_info[256];
    double v_buy_avail_qty;
    double v_sell_avail_qty;
    double v_posi_qty;
    double v_today_trade_fee;
    double v_today_pandl;
    double v_diff_qty;
    double v_over_night_trade_buy_qty;
    double v_over_night_trade_sell_qty;
    double v_over_night_strike_sell_qty;
    double v_over_night_sumtrd_sell_qty;
    double v_over_night_sumstk_sell_qty;
    double v_trade_amt;
    double v_trade_qty;
    double v_realize_pandl;
    double v_yield_rate;
    double v_avail_amt;
    double v_begin_amt;
    double v_curr_amt;
    double v_frozen_amt;
    double v_unfroz_amt;
    double v_comm_frozen_amt;
    double v_comm_unfroz_amt;
    double v_comm_capt_amt;
    double v_comm_releas_amt;
    double v_trade_frozen_amt;
    double v_trade_unfroz_amt;
    double v_trade_capt_amt;
    double v_trade_releas_amt;
    double v_strike_capt_amt;
    double v_strike_releas_amt;
    int64 v_sum_order_row_id;
    int v_sum_order_opor_no;
    int v_sum_order_co_no;
    int v_sum_order_pd_no;
    int v_sum_order_exch_group_no;
    int v_sum_order_asset_acco_no;
    int v_sum_order_pass_no;
    char v_sum_order_exch_crncy_type[4];
    int v_sum_order_stock_code_no;
    int v_sum_order_trade_code_no;
    int v_sum_order_target_code_no;
    int64 v_sum_order_external_no;
    int v_sum_order_date;
    int v_sum_order_batch_no;
    int v_sum_order_dir;
    int v_sum_order_price_type;
    double v_sum_order_price;
    double v_sum_order_qty;
    char v_order_sum_status[3];
    double v_sum_order_wtdraw_qty;
    double v_sum_order_waste_qty;
    double v_sum_order_strike_amt;
    double v_sum_order_strike_qty;
    double v_sum_order_strike_aver_price;
    int v_sum_order_net_price_flag;
    double v_sum_order_bond_accr_intrst;
    int v_sum_order_bond_rate_type;
    double v_sum_order_par_value;
    double v_sum_order_impawn_ratio;
    char v_sum_order_oper_way[3];
    int v_sum_order_update_times;
    int64 v_sum_strike_row_id;
    int v_sum_strike_opor_no;
    int v_sum_strike_co_no;
    int v_sum_strike_pd_no;
    int v_sum_strike_exch_group_no;
    int v_sum_strike_asset_acco_no;
    int v_sum_strike_pass_no;
    char v_sum_strike_out_acco[33];
    int v_sum_strike_stock_acco_no;
    int v_sum_strike_stock_code_no;
    int64 v_sum_strike_comm_id;
    int v_sum_strike_report_date;
    char v_sum_strike_report_no[33];
    int v_sum_strike_order_date;
    int64 v_sum_strike_order_id;
    int v_sum_strike_order_dir;
    double v_sum_strike_order_price;
    double v_sum_strike_order_qty;
    double v_sum_strike_strike_qty;
    double v_sum_strike_strike_amt;
    double v_sum_strike_all_fee;
    double v_sum_strike_stamp_tax;
    double v_sum_strike_trans_fee;
    double v_sum_strike_brkage_fee;
    double v_sum_strike_SEC_charges;
    double v_sum_strike_other_fee;
    double v_sum_strike_trade_commis;
    double v_sum_strike_other_commis;
    double v_sum_trade_tax;
    double v_sum_trade_cost_fee;
    double v_sum_trade_system_use_fee;
    double v_sum_stock_settle_fee;
    int v_sum_strike_net_price_flag;
    double v_sum_strike_bond_accr_intrst;
    int v_sum_strike_bond_rate_type;
    char v_sum_strike_order_oper_way[3];
    int v_sum_strike_exter_comm_flag;
    int v_sum_strike_update_times;
    int v_sum_strike_order_batch_no;
    int64 v_sum_external_no;
    int v_comm_time;
    int v_comm_opor;
    int v_comm_dir;
    double v_comm_limit_price;
    double v_limit_actual_price;
    double v_comm_qty;
    double v_comm_amt;
    double v_comm_cancel_qty;
    double v_comm_frozen_qty;
    char v_strike_status[3];
    char v_comm_status[3];
    int v_comm_begin_date;
    int v_comm_end_date;
    int v_comm_begin_time;
    int v_comm_end_time;
    int v_comm_comple_date;
    int v_comm_comple_time;
    int v_comm_appr_date;
    int v_comm_appr_time;
    char v_comm_appr_status[3];
    int v_comm_appr_oper;
    char v_comm_appr_remark[256];
    int64 v_basket_id;
    char v_comm_oper_way[3];
    int v_comm_comple_flag;
    double v_strategy_capt_qty;
    double v_strategy_order_qty;
    char v_comm_remark_info[1025];
    int v_disp_opor;
    int v_disp_status;
    int v_read_flag;
    int64 v_sum_comm_row_id;
    int v_sum_comm_co_no;
    int v_sum_comm_pd_no;
    int v_sum_comm_exch_group_no;
    int v_sum_comm_asset_acco_no;
    int v_sum_comm_pass_no;
    char v_sum_comm_out_acco[33];
    char v_sum_comm_exch_crncy_type[4];
    int v_sum_comm_stock_code_no;
    int v_sum_comm_date;
    int v_sum_comm_time;
    int v_sum_comm_batch_no;
    int v_sum_comm_opor;
    int v_sum_comm_executor;
    int v_sum_comm_dir;
    double v_sum_comm_limit_price;
    double v_sum_comm_qty;
    double v_sum_comm_amt;
    double v_sum_comm_order_qty;
    double v_sum_comm_cancel_qty;
    double v_sum_comm_await_cancel_qty;
    double v_sum_comm_strike_amt;
    double v_sum_comm_strike_qty;
    char v_sum_comm_strike_status[3];
    char v_comm_sum_status[3];
    int v_sum_comm_begin_date;
    int v_sum_comm_end_date;
    int v_sum_comm_begin_time;
    int v_sum_comm_end_time;
    int v_sum_comm_comple_date;
    int v_sum_comm_comple_time;
    int v_sum_comm_max_comm_comple_date;
    int v_sum_comm_max_comm_comple_time;
    int v_sum_comm_appr_date;
    int v_sum_comm_appr_time;
    double v_sum_comm_appr_qty;
    char v_comm_sum_approve_status[3];
    int64 v_sum_comm_basket_id;
    int v_sum_comm_net_price_flag;
    double v_sum_comm_bond_accr_intrst;
    int v_sum_comm_bond_rate_type;
    char v_sum_comm_oper_way[3];
    int v_sum_comm_exter_comm_flag;
    double v_sum_buy_order_qty;
    double v_sum_sell_order_qty;
    double v_sum_buy_comm_qty;
    double v_sum_sell_comm_qty;
    double v_sum_buy_strike_qty;
    double v_sum_sell_strike_qty;
    double v_sum_buy_strike_amt;
    double v_sum_sell_strike_amt;
    double v_sum_buy_comm_amt;
    double v_sum_sell_comm_amt;
    char v_sum_comm_remark_info[256];
    int v_sum_comm_update_times;
    char v_acco_concat_info[4097];
    int64 v_exgp_cash_id;
    double v_exgp_frozen_amt;
    double v_exgp_unfroz_amt;
    double v_exgp_comm_frozen_amt;
    double v_exgp_comm_unfroz_amt;
    double v_exgp_comm_capt_amt;
    double v_exgp_comm_releas_amt;
    double v_exgp_trade_frozen_amt;
    double v_exgp_trade_unfroz_amt;
    double v_exgp_trade_capt_amt;
    double v_exgp_trade_releas_amt;
    double v_exgp_strike_capt_amt;
    double v_exgp_strike_releas_amt;
    int v_exgp_cash_update_times;
    int64 v_exgp_posi_id;
    double v_exgp_frozen_qty;
    double v_exgp_unfroz_qty;
    double v_exgp_comm_frozen_qty;
    double v_exgp_comm_unfroz_qty;
    double v_exgp_comm_capt_qty;
    double v_exgp_comm_releas_qty;
    double v_exgp_trade_frozen_qty;
    double v_exgp_trade_unfroz_qty;
    double v_exgp_trade_capt_qty;
    double v_exgp_trade_releas_qty;
    double v_exgp_strike_capt_qty;
    double v_exgp_strike_releas_qty;
    double v_exgp_strike_frozen_qty;
    double v_exgp_strike_unfroz_qty;
    double v_exgp_realize_pandl;
    double v_exgp_cost_amt;
    double v_exgp_intrst_cost_amt;
    double v_exgp_intrst_pandl;
    int v_exgp_posi_update_times;
    int64 v_asac_cash_id;
    double v_asac_frozen_amt;
    double v_asac_unfroz_amt;
    double v_asac_comm_frozen_amt;
    double v_asac_comm_unfroz_amt;
    double v_asac_comm_capt_amt;
    double v_asac_comm_releas_amt;
    double v_asac_trade_frozen_amt;
    double v_asac_trade_unfroz_amt;
    double v_asac_trade_capt_amt;
    double v_asac_trade_releas_amt;
    double v_asac_strike_capt_amt;
    double v_asac_strike_releas_amt;
    int v_asac_cash_update_times;
    int64 v_asac_posi_id;
    double v_asac_frozen_qty;
    double v_asac_unfroz_qty;
    double v_asac_comm_frozen_qty;
    double v_asac_comm_unfroz_qty;
    double v_asac_comm_capt_qty;
    double v_asac_comm_releas_qty;
    double v_asac_trade_frozen_qty;
    double v_asac_trade_unfroz_qty;
    double v_asac_trade_capt_qty;
    double v_asac_trade_releas_qty;
    double v_asac_strike_capt_qty;
    double v_asac_strike_releas_qty;
    double v_asac_strike_frozen_qty;
    double v_asac_strike_unfroz_qty;
    double v_asac_realize_pandl;
    double v_asac_cost_amt;
    double v_asac_intrst_cost_amt;
    double v_asac_intrst_pandl;
    int v_asac_posi_update_times;
    int64 v_exgp_target_posi_id;
    double v_exgp_target_frozen_qty;
    double v_exgp_target_unfroz_qty;
    double v_exgp_target_comm_frozen_qty;
    double v_exgp_target_comm_unfroz_qty;
    double v_exgp_target_comm_capt_qty;
    double v_exgp_target_comm_releas_qty;
    double v_exgp_target_trade_frozen_qty;
    double v_exgp_target_trade_unfroz_qty;
    double v_exgp_target_trade_capt_qty;
    double v_exgp_target_trade_releas_qty;
    double v_exgp_target_strike_capt_qty;
    double v_exgp_target_strike_releas_qty;
    double v_exgp_target_strike_frozen_qty;
    double v_exgp_target_strike_unfroz_qty;
    double v_exgp_target_realize_pandl;
    double v_exgp_target_cost_amt;
    double v_exgp_target_intrst_cost_amt;
    double v_exgp_target_intrst_pandl;
    int v_exgp_target_posi_update_times;
    int64 v_asac_target_posi_id;
    double v_asac_target_frozen_qty;
    double v_asac_target_unfroz_qty;
    double v_asac_target_comm_frozen_qty;
    double v_asac_target_comm_unfroz_qty;
    double v_asac_target_comm_capt_qty;
    double v_asac_target_comm_releas_qty;
    double v_asac_target_trade_frozen_qty;
    double v_asac_target_trade_unfroz_qty;
    double v_asac_target_trade_capt_qty;
    double v_asac_target_trade_releas_qty;
    double v_asac_target_strike_capt_qty;
    double v_asac_target_strike_releas_qty;
    double v_asac_target_strike_frozen_qty;
    double v_asac_target_strike_unfroz_qty;
    double v_asac_target_realize_pandl;
    double v_asac_target_cost_amt;
    double v_asac_target_intrst_cost_amt;
    double v_asac_target_intrst_pandl;
    int v_asac_target_posi_update_times;
    double v_exgp_put_impawn_qty;
    double v_asac_put_impawn_qty;
    int v_invest_type;
    double v_debt_fina_buy_strike_qty;
    double v_fina_return_strike_qty;
    double v_debt_loan_sell_strike_qty;
    double v_loan_return_strike_qty;
    double v_debt_fina_buy_order_qty;
    double v_fina_return_order_qty;
    double v_debt_loan_sell_order_qty;
    double v_loan_return_order_qty;
    double v_debt_fina_buy_comm_qty;
    double v_fina_return_comm_qty;
    double v_debt_loan_sell_comm_qty;
    double v_loan_return_comm_qty;
    double v_debt_fina_buy_strike_amt;
    double v_fina_return_strike_amt;
    double v_debt_loan_sell_strike_amt;
    double v_loan_return_strike_amt;
    double v_debt_fina_buy_order_amt;
    double v_fina_return_order_amt;
    double v_debt_loan_sell_order_amt;
    double v_loan_return_order_amt;
    double v_debt_fina_buy_comm_amt;
    double v_fina_return_comm_amt;
    double v_debt_loan_sell_comm_amt;
    double v_loan_return_comm_amt;
    double v_debt_strike_fee;
    double v_return_strike_fee;
    double v_debt_interest;
    double v_return_interest_amt;
    int v_repo_days;
    int v_repo_cale_days;
    int v_repo_back_date;
    double v_strike_price;
    double v_trade_commis;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    int v_strike_date;
    int v_strike_time;
    char v_strike_no[65];
    int v_strike_deal_type;
    double v_exgp_curr_qty;
    double v_asac_curr_qty;
    int64 v_rsp_id;
    char v_target_code[7];
    double v_total_strike_amt;
    double v_total_strike_qty;
    double v_trade_occur_amt;
    int v_open_posi_date;
    int v_original_order_dir;
    int v_record_valid_flag;
    int64 v_repo_strike_id;
    double v_exch_rate;
    double v_repo_qty;
    double v_repo_amt;
    double v_repo_rate;
    int v_repo_trade_date;
    int64 v_repo_order_id;
    double v_repo_back_amt;
    double v_repo_back_intrst;
    int v_repo_back_trade_date;
    char v_repo_status[3];
    int64 v_bond_repo_id;
    char v_log_error_code[33];
    char v_log_error_info[256];


IFastMessage* lpPubMsg = NULL;
int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    strcpy(v_stock_acco, " ");
    strcpy(v_stock_code, " ");
    v_report_date=0;
    v_report_time=0;
    strcpy(v_report_no, " ");
    v_order_date=0;
    v_order_id=0;
    v_order_dir=0;
    v_order_price=0;
    v_order_qty=0;
    strcpy(v_rsp_info, " ");
    strcpy(v_order_rsp_status, "0");
    v_price_type=0;
    strcpy(v_contra_no, " ");
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_init_date=0;
    strcpy(v_co_busi_config_str, " ");
    v_tmp_pass_no=0;
    strcpy(v_tmp_out_acco, " ");
    v_tmp_report_date=0;
    v_tmp_report_time=0;
    strcpy(v_tmp_report_no, " ");
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    v_asset_acco_no=0;
    v_stock_acco_no=0;
    v_stock_code_no=0;
    v_stock_type=0;
    v_asset_type=0;
    v_comm_id=0;
    v_comm_batch_no=0;
    v_order_time=0;
    v_order_frozen_qty=0;
    v_order_frozen_amt=0;
    strcpy(v_order_status, "0");
    v_strike_qty=0;
    v_strike_amt=0;
    v_all_fee=0;
    v_wtdraw_qty=0;
    v_wtdraw_time=0;
    v_exter_comm_flag=0;
    v_cost_calc_type=0;
    strcpy(v_combo_code, " ");
    v_combo_posi_id=0;
    v_strategy_id=0;
    v_order_batch_no=0;
    v_asset_acco_type=0;
    v_exist_debt_flag=0;
    v_update_times=1;
    strcpy(v_sys_config_str, " ");
    strcpy(v_crncy_type, "CNY");
    strcpy(v_exch_crncy_type, "CNY");
    v_buy_ref_rate=0;
    v_sell_ref_rate=0;
    v_capit_reback_days=0;
    v_posi_reback_days=0;
    v_trade_code_no=0;
    v_target_code_no=0;
    v_net_price_flag=0;
    v_bond_accr_intrst=0;
    v_bond_rate_type=0;
    v_par_value=0;
    v_impawn_ratio=0;
    v_min_unit=0;
    v_fina_return_type=0;
    v_sell_auto_back_debt=0;
    v_external_no=0;
    v_comm_date=0;
    v_comm_executor=0;
    v_strike_bond_accr_intrst=0;
    strcpy(v_old_order_status, "0");
    v_row_id=0;
    v_debt_type=0;
    v_curr_strike_price=0;
    v_curr_strike_amt=0;
    v_curr_strike_qty=0;
    v_strike_id=0;
    strcpy(v_wtdraw_status, "0");
    v_source_stock_qty=0;
    v_single_limit_qty=0;
    v_assigned_qty=0;
    v_trade_releas_qty=0;
    v_trade_capt_qty=0;
    v_strike_releas_qty=0;
    v_strike_capt_qty=0;
    v_over_night_pandl=0;
    v_sum_realize_pandl=0;
    v_total_open_posi_fee=0;
    v_total_close_posi_fee=0;
    v_out_order_releas_qty=0;
    v_out_order_capt_qty=0;
    v_out_strike_releas_qty=0;
    v_out_strike_capt_qty=0;
    strcpy(v_remark_info, " ");
    v_buy_avail_qty=0;
    v_sell_avail_qty=0;
    v_posi_qty=0;
    v_today_trade_fee=0;
    v_today_pandl=0;
    v_diff_qty=0;
    v_over_night_trade_buy_qty=0;
    v_over_night_trade_sell_qty=0;
    v_over_night_strike_sell_qty=0;
    v_over_night_sumtrd_sell_qty=0;
    v_over_night_sumstk_sell_qty=0;
    v_trade_amt=0;
    v_trade_qty=0;
    v_realize_pandl=0;
    v_yield_rate=0;
    v_avail_amt=0;
    v_begin_amt=0;
    v_curr_amt=0;
    v_frozen_amt=0;
    v_unfroz_amt=0;
    v_comm_frozen_amt=0;
    v_comm_unfroz_amt=0;
    v_comm_capt_amt=0;
    v_comm_releas_amt=0;
    v_trade_frozen_amt=0;
    v_trade_unfroz_amt=0;
    v_trade_capt_amt=0;
    v_trade_releas_amt=0;
    v_strike_capt_amt=0;
    v_strike_releas_amt=0;
    v_sum_order_row_id=0;
    v_sum_order_opor_no=0;
    v_sum_order_co_no=0;
    v_sum_order_pd_no=0;
    v_sum_order_exch_group_no=0;
    v_sum_order_asset_acco_no=0;
    v_sum_order_pass_no=0;
    strcpy(v_sum_order_exch_crncy_type, "CNY");
    v_sum_order_stock_code_no=0;
    v_sum_order_trade_code_no=0;
    v_sum_order_target_code_no=0;
    v_sum_order_external_no=0;
    v_sum_order_date=0;
    v_sum_order_batch_no=0;
    v_sum_order_dir=0;
    v_sum_order_price_type=0;
    v_sum_order_price=0;
    v_sum_order_qty=0;
    strcpy(v_order_sum_status, "0");
    v_sum_order_wtdraw_qty=0;
    v_sum_order_waste_qty=0;
    v_sum_order_strike_amt=0;
    v_sum_order_strike_qty=0;
    v_sum_order_strike_aver_price=0;
    v_sum_order_net_price_flag=0;
    v_sum_order_bond_accr_intrst=0;
    v_sum_order_bond_rate_type=0;
    v_sum_order_par_value=0;
    v_sum_order_impawn_ratio=0;
    strcpy(v_sum_order_oper_way, " ");
    v_sum_order_update_times=1;
    v_sum_strike_row_id=0;
    v_sum_strike_opor_no=0;
    v_sum_strike_co_no=0;
    v_sum_strike_pd_no=0;
    v_sum_strike_exch_group_no=0;
    v_sum_strike_asset_acco_no=0;
    v_sum_strike_pass_no=0;
    strcpy(v_sum_strike_out_acco, " ");
    v_sum_strike_stock_acco_no=0;
    v_sum_strike_stock_code_no=0;
    v_sum_strike_comm_id=0;
    v_sum_strike_report_date=0;
    strcpy(v_sum_strike_report_no, " ");
    v_sum_strike_order_date=0;
    v_sum_strike_order_id=0;
    v_sum_strike_order_dir=0;
    v_sum_strike_order_price=0;
    v_sum_strike_order_qty=0;
    v_sum_strike_strike_qty=0;
    v_sum_strike_strike_amt=0;
    v_sum_strike_all_fee=0;
    v_sum_strike_stamp_tax=0;
    v_sum_strike_trans_fee=0;
    v_sum_strike_brkage_fee=0;
    v_sum_strike_SEC_charges=0;
    v_sum_strike_other_fee=0;
    v_sum_strike_trade_commis=0;
    v_sum_strike_other_commis=0;
    v_sum_trade_tax=0;
    v_sum_trade_cost_fee=0;
    v_sum_trade_system_use_fee=0;
    v_sum_stock_settle_fee=0;
    v_sum_strike_net_price_flag=0;
    v_sum_strike_bond_accr_intrst=0;
    v_sum_strike_bond_rate_type=0;
    strcpy(v_sum_strike_order_oper_way, " ");
    v_sum_strike_exter_comm_flag=0;
    v_sum_strike_update_times=1;
    v_sum_strike_order_batch_no=0;
    v_sum_external_no=0;
    v_comm_time=0;
    v_comm_opor=0;
    v_comm_dir=0;
    v_comm_limit_price=0;
    v_limit_actual_price=0;
    v_comm_qty=0;
    v_comm_amt=0;
    v_comm_cancel_qty=0;
    v_comm_frozen_qty=0;
    strcpy(v_strike_status, "0");
    strcpy(v_comm_status, "0");
    v_comm_begin_date=0;
    v_comm_end_date=0;
    v_comm_begin_time=0;
    v_comm_end_time=0;
    v_comm_comple_date=0;
    v_comm_comple_time=0;
    v_comm_appr_date=0;
    v_comm_appr_time=0;
    strcpy(v_comm_appr_status, " ");
    v_comm_appr_oper=0;
    strcpy(v_comm_appr_remark, " ");
    v_basket_id=0;
    strcpy(v_comm_oper_way, " ");
    v_comm_comple_flag=0;
    v_strategy_capt_qty=0;
    v_strategy_order_qty=0;
    strcpy(v_comm_remark_info, " ");
    v_disp_opor=0;
    v_disp_status=0;
    v_read_flag=0;
    v_sum_comm_row_id=0;
    v_sum_comm_co_no=0;
    v_sum_comm_pd_no=0;
    v_sum_comm_exch_group_no=0;
    v_sum_comm_asset_acco_no=0;
    v_sum_comm_pass_no=0;
    strcpy(v_sum_comm_out_acco, " ");
    strcpy(v_sum_comm_exch_crncy_type, "CNY");
    v_sum_comm_stock_code_no=0;
    v_sum_comm_date=0;
    v_sum_comm_time=0;
    v_sum_comm_batch_no=0;
    v_sum_comm_opor=0;
    v_sum_comm_executor=0;
    v_sum_comm_dir=0;
    v_sum_comm_limit_price=0;
    v_sum_comm_qty=0;
    v_sum_comm_amt=0;
    v_sum_comm_order_qty=0;
    v_sum_comm_cancel_qty=0;
    v_sum_comm_await_cancel_qty=0;
    v_sum_comm_strike_amt=0;
    v_sum_comm_strike_qty=0;
    strcpy(v_sum_comm_strike_status, "0");
    strcpy(v_comm_sum_status, "0");
    v_sum_comm_begin_date=0;
    v_sum_comm_end_date=0;
    v_sum_comm_begin_time=0;
    v_sum_comm_end_time=0;
    v_sum_comm_comple_date=0;
    v_sum_comm_comple_time=0;
    v_sum_comm_max_comm_comple_date=0;
    v_sum_comm_max_comm_comple_time=0;
    v_sum_comm_appr_date=0;
    v_sum_comm_appr_time=0;
    v_sum_comm_appr_qty=0;
    strcpy(v_comm_sum_approve_status, "0");
    v_sum_comm_basket_id=0;
    v_sum_comm_net_price_flag=0;
    v_sum_comm_bond_accr_intrst=0;
    v_sum_comm_bond_rate_type=0;
    strcpy(v_sum_comm_oper_way, " ");
    v_sum_comm_exter_comm_flag=0;
    v_sum_buy_order_qty=0;
    v_sum_sell_order_qty=0;
    v_sum_buy_comm_qty=0;
    v_sum_sell_comm_qty=0;
    v_sum_buy_strike_qty=0;
    v_sum_sell_strike_qty=0;
    v_sum_buy_strike_amt=0;
    v_sum_sell_strike_amt=0;
    v_sum_buy_comm_amt=0;
    v_sum_sell_comm_amt=0;
    strcpy(v_sum_comm_remark_info, " ");
    v_sum_comm_update_times=1;
    strcpy(v_acco_concat_info, " ");
    v_exgp_cash_id=0;
    v_exgp_frozen_amt=0;
    v_exgp_unfroz_amt=0;
    v_exgp_comm_frozen_amt=0;
    v_exgp_comm_unfroz_amt=0;
    v_exgp_comm_capt_amt=0;
    v_exgp_comm_releas_amt=0;
    v_exgp_trade_frozen_amt=0;
    v_exgp_trade_unfroz_amt=0;
    v_exgp_trade_capt_amt=0;
    v_exgp_trade_releas_amt=0;
    v_exgp_strike_capt_amt=0;
    v_exgp_strike_releas_amt=0;
    v_exgp_cash_update_times=1;
    v_exgp_posi_id=0;
    v_exgp_frozen_qty=0;
    v_exgp_unfroz_qty=0;
    v_exgp_comm_frozen_qty=0;
    v_exgp_comm_unfroz_qty=0;
    v_exgp_comm_capt_qty=0;
    v_exgp_comm_releas_qty=0;
    v_exgp_trade_frozen_qty=0;
    v_exgp_trade_unfroz_qty=0;
    v_exgp_trade_capt_qty=0;
    v_exgp_trade_releas_qty=0;
    v_exgp_strike_capt_qty=0;
    v_exgp_strike_releas_qty=0;
    v_exgp_strike_frozen_qty=0;
    v_exgp_strike_unfroz_qty=0;
    v_exgp_realize_pandl=0;
    v_exgp_cost_amt=0;
    v_exgp_intrst_cost_amt=0;
    v_exgp_intrst_pandl=0;
    v_exgp_posi_update_times=1;
    v_asac_cash_id=0;
    v_asac_frozen_amt=0;
    v_asac_unfroz_amt=0;
    v_asac_comm_frozen_amt=0;
    v_asac_comm_unfroz_amt=0;
    v_asac_comm_capt_amt=0;
    v_asac_comm_releas_amt=0;
    v_asac_trade_frozen_amt=0;
    v_asac_trade_unfroz_amt=0;
    v_asac_trade_capt_amt=0;
    v_asac_trade_releas_amt=0;
    v_asac_strike_capt_amt=0;
    v_asac_strike_releas_amt=0;
    v_asac_cash_update_times=1;
    v_asac_posi_id=0;
    v_asac_frozen_qty=0;
    v_asac_unfroz_qty=0;
    v_asac_comm_frozen_qty=0;
    v_asac_comm_unfroz_qty=0;
    v_asac_comm_capt_qty=0;
    v_asac_comm_releas_qty=0;
    v_asac_trade_frozen_qty=0;
    v_asac_trade_unfroz_qty=0;
    v_asac_trade_capt_qty=0;
    v_asac_trade_releas_qty=0;
    v_asac_strike_capt_qty=0;
    v_asac_strike_releas_qty=0;
    v_asac_strike_frozen_qty=0;
    v_asac_strike_unfroz_qty=0;
    v_asac_realize_pandl=0;
    v_asac_cost_amt=0;
    v_asac_intrst_cost_amt=0;
    v_asac_intrst_pandl=0;
    v_asac_posi_update_times=1;
    v_exgp_target_posi_id=0;
    v_exgp_target_frozen_qty=0;
    v_exgp_target_unfroz_qty=0;
    v_exgp_target_comm_frozen_qty=0;
    v_exgp_target_comm_unfroz_qty=0;
    v_exgp_target_comm_capt_qty=0;
    v_exgp_target_comm_releas_qty=0;
    v_exgp_target_trade_frozen_qty=0;
    v_exgp_target_trade_unfroz_qty=0;
    v_exgp_target_trade_capt_qty=0;
    v_exgp_target_trade_releas_qty=0;
    v_exgp_target_strike_capt_qty=0;
    v_exgp_target_strike_releas_qty=0;
    v_exgp_target_strike_frozen_qty=0;
    v_exgp_target_strike_unfroz_qty=0;
    v_exgp_target_realize_pandl=0;
    v_exgp_target_cost_amt=0;
    v_exgp_target_intrst_cost_amt=0;
    v_exgp_target_intrst_pandl=0;
    v_exgp_target_posi_update_times=0;
    v_asac_target_posi_id=0;
    v_asac_target_frozen_qty=0;
    v_asac_target_unfroz_qty=0;
    v_asac_target_comm_frozen_qty=0;
    v_asac_target_comm_unfroz_qty=0;
    v_asac_target_comm_capt_qty=0;
    v_asac_target_comm_releas_qty=0;
    v_asac_target_trade_frozen_qty=0;
    v_asac_target_trade_unfroz_qty=0;
    v_asac_target_trade_capt_qty=0;
    v_asac_target_trade_releas_qty=0;
    v_asac_target_strike_capt_qty=0;
    v_asac_target_strike_releas_qty=0;
    v_asac_target_strike_frozen_qty=0;
    v_asac_target_strike_unfroz_qty=0;
    v_asac_target_realize_pandl=0;
    v_asac_target_cost_amt=0;
    v_asac_target_intrst_cost_amt=0;
    v_asac_target_intrst_pandl=0;
    v_asac_target_posi_update_times=0;
    v_exgp_put_impawn_qty=0;
    v_asac_put_impawn_qty=0;
    v_invest_type=0;
    v_debt_fina_buy_strike_qty=0;
    v_fina_return_strike_qty=0;
    v_debt_loan_sell_strike_qty=0;
    v_loan_return_strike_qty=0;
    v_debt_fina_buy_order_qty=0;
    v_fina_return_order_qty=0;
    v_debt_loan_sell_order_qty=0;
    v_loan_return_order_qty=0;
    v_debt_fina_buy_comm_qty=0;
    v_fina_return_comm_qty=0;
    v_debt_loan_sell_comm_qty=0;
    v_loan_return_comm_qty=0;
    v_debt_fina_buy_strike_amt=0;
    v_fina_return_strike_amt=0;
    v_debt_loan_sell_strike_amt=0;
    v_loan_return_strike_amt=0;
    v_debt_fina_buy_order_amt=0;
    v_fina_return_order_amt=0;
    v_debt_loan_sell_order_amt=0;
    v_loan_return_order_amt=0;
    v_debt_fina_buy_comm_amt=0;
    v_fina_return_comm_amt=0;
    v_debt_loan_sell_comm_amt=0;
    v_loan_return_comm_amt=0;
    v_debt_strike_fee=0;
    v_return_strike_fee=0;
    v_debt_interest=0;
    v_return_interest_amt=0;
    v_repo_days=0;
    v_repo_cale_days=0;
    v_repo_back_date=0;
    v_strike_price=0;
    v_trade_commis=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_strike_date=0;
    v_strike_time=0;
    strcpy(v_strike_no, " ");
    v_strike_deal_type=0;
    v_exgp_curr_qty=0;
    v_asac_curr_qty=0;
    v_rsp_id=0;
    strcpy(v_target_code, " ");
    v_total_strike_amt=0;
    v_total_strike_qty=0;
    v_trade_occur_amt=0;
    v_open_posi_date=0;
    v_original_order_dir=0;
    v_record_valid_flag=0;
    v_repo_strike_id=0;
    v_exch_rate=0;
    v_repo_qty=0;
    v_repo_amt=0;
    v_repo_rate=0;
    v_repo_trade_date=0;
    v_repo_order_id=0;
    v_repo_back_amt=0;
    v_repo_back_intrst=0;
    v_repo_back_trade_date=0;
    strcpy(v_repo_status, "0");
    v_bond_repo_id=0;
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_pass_no = lpInBizMsg->GetInt32(LDBIZ_PASS_NO_INT);
    strncpy(v_out_acco, lpInBizMsg->GetString(LDBIZ_OUT_ACCO_STR),32);
    v_out_acco[32] = '\0';
    v_exch_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_NO_INT);
    strncpy(v_stock_acco, lpInBizMsg->GetString(LDBIZ_STOCK_ACCO_STR),16);
    v_stock_acco[16] = '\0';
    strncpy(v_stock_code, lpInBizMsg->GetString(LDBIZ_STOCK_CODE_STR),6);
    v_stock_code[6] = '\0';
    v_report_date = lpInBizMsg->GetInt32(LDBIZ_REPORT_DATE_INT);
    v_report_time = lpInBizMsg->GetInt32(LDBIZ_REPORT_TIME_INT);
    strncpy(v_report_no, lpInBizMsg->GetString(LDBIZ_REPORT_NO_STR),32);
    v_report_no[32] = '\0';
    v_order_date = lpInBizMsg->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_id = lpInBizMsg->GetInt64(LDBIZ_ORDER_ID_INT64);
    v_order_dir = lpInBizMsg->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_order_price = lpInBizMsg->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpInBizMsg->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    strncpy(v_rsp_info, lpInBizMsg->GetString(LDBIZ_RSP_INFO_STR),255);
    v_rsp_info[255] = '\0';
    strncpy(v_order_rsp_status, lpInBizMsg->GetString(LDBIZ_ORDER_RSP_STATUS_STR),2);
    v_order_rsp_status[2] = '\0';
    v_price_type = lpInBizMsg->GetInt32(LDBIZ_PRICE_TYPE_INT);
    strncpy(v_contra_no, lpInBizMsg->GetString(LDBIZ_CONTRA_NO_STR),32);
    v_contra_no[32] = '\0';

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;
    IFastMessage* lpTSCall1Req3 = NULL;
    IFastMessage* lpTSCall1Ans3 = NULL;
    IFastMessage* lpTSCall1Req4 = NULL;
    IFastMessage* lpTSCall1Ans4 = NULL;
    IFastMessage* lpTSCall1Req5 = NULL;
    IFastMessage* lpTSCall1Ans5 = NULL;
    IFastMessage* lpTSCall1Req6 = NULL;
    IFastMessage* lpTSCall1Ans6 = NULL;
    IFastMessage* lpTSCall1Req7 = NULL;
    IFastMessage* lpTSCall1Ans7 = NULL;
    IFastMessage* lpTSCall1Req8 = NULL;
    IFastMessage* lpTSCall1Ans8 = NULL;
    IFastMessage* lpTSCall1Req9 = NULL;
    IFastMessage* lpTSCall1Ans9 = NULL;
    IFastMessage* lpTSCall1Req10 = NULL;
    IFastMessage* lpTSCall1Ans10 = NULL;
    IFastMessage* lpTSCall1Req11 = NULL;
    IFastMessage* lpTSCall1Ans11 = NULL;
    IFastMessage* lpTSCall1Req12 = NULL;
    IFastMessage* lpTSCall1Ans12 = NULL;
    IFastMessage* lpTSCall1Req13 = NULL;
    IFastMessage* lpTSCall1Ans13 = NULL;
    IFastMessage* lpTSCall1Req14 = NULL;
    IFastMessage* lpTSCall1Ans14 = NULL;
    IFastMessage* lpTSCall1Req15 = NULL;
    IFastMessage* lpTSCall1Ans15 = NULL;
    IFastMessage* lpTSCall1Req16 = NULL;
    IFastMessage* lpTSCall1Ans16 = NULL;
    IFastMessage* lpTSCall1Req17 = NULL;
    IFastMessage* lpTSCall1Ans17 = NULL;
    IFastMessage* lpTSCall1Req18 = NULL;
    IFastMessage* lpTSCall1Ans18 = NULL;
    IFastMessage* lpTSCall1Req19 = NULL;
    IFastMessage* lpTSCall1Ans19 = NULL;
    IFastMessage* lpTSCall1Req20 = NULL;
    IFastMessage* lpTSCall1Ans20 = NULL;
    IFastMessage* lpTSCall1Req21 = NULL;
    IFastMessage* lpTSCall1Ans21 = NULL;
    IFastMessage* lpTSCall1Req22 = NULL;
    IFastMessage* lpTSCall1Ans22 = NULL;
    IFastMessage* lpTSCall1Req23 = NULL;
    IFastMessage* lpTSCall1Ans23 = NULL;
    IFastMessage* lpTSCall1Req24 = NULL;
    IFastMessage* lpTSCall1Ans24 = NULL;
    IFastMessage* lpTSCall1Req25 = NULL;
    IFastMessage* lpTSCall1Ans25 = NULL;
    IFastMessage* lpTSCall1Req26 = NULL;
    IFastMessage* lpTSCall1Ans26 = NULL;
    IFastMessage* lpTSCall1Req27 = NULL;
    IFastMessage* lpTSCall1Ans27 = NULL;
    IFastMessage* lpTSCall1Req28 = NULL;
    IFastMessage* lpTSCall1Ans28 = NULL;

    //调用过程[事务_公共_公共接口_检查系统状态权限身份]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.1", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.1]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));

    //预防报盘接口有些字段不正确，取原订单信息的值

    // set @临时_通道编号# = @通道编号#;
    v_tmp_pass_no = v_pass_no;

    // set @临时_外部账号# = @外部账号#;
    strcpy(v_tmp_out_acco,v_out_acco);

    // set @临时_申报日期# = @申报日期#;
    v_tmp_report_date = v_report_date;

    // set @临时_申报时间# = @申报时间#;
    v_tmp_report_time = v_report_time;

    // set @临时_申报编号# = @申报编号#;
    strcpy(v_tmp_report_no,v_report_no);
    //调用过程[事务_交易证券_交易_获取订单信息]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.71", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpTSCall1Req1->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.71]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
    v_busi_opor_no = lpTSCall1Ans1->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strcpy(v_order_oper_way, lpTSCall1Ans1->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    v_co_no = lpTSCall1Ans1->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpTSCall1Ans1->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans1->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans1->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    v_pass_no = lpTSCall1Ans1->GetInt32(LDBIZ_PASS_NO_INT);
    v_exch_no = lpTSCall1Ans1->GetInt32(LDBIZ_EXCH_NO_INT);
    v_stock_acco_no = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_acco, lpTSCall1Ans1->GetString(LDBIZ_STOCK_ACCO_STR));
    v_stock_code_no = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strcpy(v_stock_code, lpTSCall1Ans1->GetString(LDBIZ_STOCK_CODE_STR));
    v_stock_type = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans1->GetInt32(LDBIZ_ASSET_TYPE_INT);
    v_comm_id = lpTSCall1Ans1->GetInt64(LDBIZ_COMM_ID_INT64);
    v_comm_batch_no = lpTSCall1Ans1->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
    v_report_date = lpTSCall1Ans1->GetInt32(LDBIZ_REPORT_DATE_INT);
    v_report_time = lpTSCall1Ans1->GetInt32(LDBIZ_REPORT_TIME_INT);
    strcpy(v_report_no, lpTSCall1Ans1->GetString(LDBIZ_REPORT_NO_STR));
    v_order_time = lpTSCall1Ans1->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_order_dir = lpTSCall1Ans1->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_order_price = lpTSCall1Ans1->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans1->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    v_order_frozen_qty = lpTSCall1Ans1->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
    v_order_frozen_amt = lpTSCall1Ans1->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans1->GetString(LDBIZ_ORDER_STATUS_STR));
    v_price_type = lpTSCall1Ans1->GetInt32(LDBIZ_PRICE_TYPE_INT);
    v_strike_qty = lpTSCall1Ans1->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_amt = lpTSCall1Ans1->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    v_all_fee = lpTSCall1Ans1->GetDouble(LDBIZ_ALL_FEE_FLOAT);
    v_wtdraw_qty = lpTSCall1Ans1->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
    v_wtdraw_time = lpTSCall1Ans1->GetInt32(LDBIZ_WTDRAW_TIME_INT);
    v_exter_comm_flag = lpTSCall1Ans1->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_cost_calc_type = lpTSCall1Ans1->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
    strcpy(v_combo_code, lpTSCall1Ans1->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans1->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    v_strategy_id = lpTSCall1Ans1->GetInt64(LDBIZ_STRATEGY_ID_INT64);
    v_order_batch_no = lpTSCall1Ans1->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    strcpy(v_out_acco, lpTSCall1Ans1->GetString(LDBIZ_OUT_ACCO_STR));
    v_asset_acco_type = lpTSCall1Ans1->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    strcpy(v_contra_no, lpTSCall1Ans1->GetString(LDBIZ_CONTRA_NO_STR));
    v_exist_debt_flag = lpTSCall1Ans1->GetInt32(LDBIZ_EXIST_DEBT_FLAG_INT);
    v_update_times = lpTSCall1Ans1->GetInt32(LDBIZ_UPDATE_TIMES_INT);


    // set @通道编号# = @临时_通道编号#;
    v_pass_no = v_tmp_pass_no;

    // set @外部账号# = @临时_外部账号#;
    strcpy(v_out_acco,v_tmp_out_acco);

    // set @申报日期# = @临时_申报日期#;
    v_report_date = v_tmp_report_date;

    // set @申报时间# = @临时_申报时间#;
    v_report_time = v_tmp_report_time;

    // set @申报编号# = @临时_申报编号#;
    strcpy(v_report_no,v_tmp_report_no);
    //公共子系统检查
    //调用过程[事务_公共_交易接口_检查回报业务控制]
    //组织事务请求
    if(lpTSCall1Ans2)
    {
      lpTSCall1Ans2->FreeMsg();
      lpTSCall1Ans2=NULL;
    }
    lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.25.31", 0);
    lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req2->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req2->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
    if(!lpTSCall1Ans2)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.31]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans2->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans2->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_sys_config_str, lpTSCall1Ans2->GetString(LDBIZ_SYS_CONFIG_STR_STR));
    strcpy(v_crncy_type, lpTSCall1Ans2->GetString(LDBIZ_CRNCY_TYPE_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans2->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_buy_ref_rate = lpTSCall1Ans2->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
    v_sell_ref_rate = lpTSCall1Ans2->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
    v_stock_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_capit_reback_days = lpTSCall1Ans2->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
    v_posi_reback_days = lpTSCall1Ans2->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);
    v_trade_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_net_price_flag = lpTSCall1Ans2->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_bond_accr_intrst = lpTSCall1Ans2->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans2->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_par_value = lpTSCall1Ans2->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans2->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_min_unit = lpTSCall1Ans2->GetInt32(LDBIZ_MIN_UNIT_INT);


    // if @资产账户类型# = 《资产账户类型-融资融券》 then
    if (v_asset_acco_type == 5)
    {
        //调用过程[事务_产品_交易接口_获取融资融券卖券还款方式]
        //组织事务请求
        if(lpTSCall1Ans3)
        {
          lpTSCall1Ans3->FreeMsg();
          lpTSCall1Ans3=NULL;
        }
        lpTSCall1Req3=glpFastMsgFactory->CreateFastMessage("prodT.8.112", 0);
        lpTSCall1Req3->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req3->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req3->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req3->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req3->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req3->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req3->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req3->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req3->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req3->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req3->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req3->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        glpTSSubcallSerives->SubCall(lpTSCall1Req3, &lpTSCall1Ans3, 5000);
        if(!lpTSCall1Ans3)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.8.112]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans3->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
        v_fina_return_type = lpTSCall1Ans3->GetInt32(LDBIZ_FINA_RETURN_TYPE_INT);
        v_sell_auto_back_debt = lpTSCall1Ans3->GetInt32(LDBIZ_SELL_AUTO_BACK_DEBT_INT);

    // end if;
    }

    //处理订单回报

    // if @资产账户类型# = 《资产账户类型-融资融券》 and ((@订单方向# = 《订单方向-融资买入》 or @订单方向# = 《订单方向-融券卖出》 or @订单方向# = 《订单方向-卖券还款》 or @订单方向# = 《订单方向-买券还券》 or @订单方向# = 《订单方向-直接还款》 or @订单方向# = 《订单方向-直接还券》) or  (@资产账户类型# = 《资产账户类型-融资融券》 and @订单方向# = 《订单方向-卖出》 and  @存在负债标志# = 《存在负债标志-存在》 and @卖出自动还款# = 《卖出自动还款-是》)) then
    if (v_asset_acco_type == 5 && ((v_order_dir == 5 || v_order_dir == 6 || v_order_dir == 7 || v_order_dir == 8 || v_order_dir == 14 || v_order_dir == 15) ||  (v_asset_acco_type == 5 && v_order_dir == 2 &&  v_exist_debt_flag == 2 && v_sell_auto_back_debt == 0)))
    {
        //调用过程[事务_交易证券_报盘_融资融券处理订单回报]
        //组织事务请求
        if(lpTSCall1Ans4)
        {
          lpTSCall1Ans4->FreeMsg();
          lpTSCall1Ans4=NULL;
        }
        lpTSCall1Req4=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.134", 0);
        lpTSCall1Req4->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req4->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req4->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req4->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req4->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req4->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req4->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req4->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req4->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req4->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req4->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpTSCall1Req4->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req4->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
        lpTSCall1Req4->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpTSCall1Req4->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpTSCall1Req4->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
        lpTSCall1Req4->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpTSCall1Req4->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req4->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
        lpTSCall1Req4->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpTSCall1Req4->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        lpTSCall1Req4->SetString(LDBIZ_ORDER_RSP_STATUS_STR,v_order_rsp_status);
        lpTSCall1Req4->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
        lpTSCall1Req4->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req4, &lpTSCall1Ans4, 5000);
        if(!lpTSCall1Ans4)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.134]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans4->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
        v_co_no = lpTSCall1Ans4->GetInt32(LDBIZ_CO_NO_INT);
        v_busi_opor_no = lpTSCall1Ans4->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
        v_pd_no = lpTSCall1Ans4->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans4->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans4->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        v_stock_acco_no = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_external_no = lpTSCall1Ans4->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
        strcpy(v_exch_crncy_type, lpTSCall1Ans4->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
        v_comm_date = lpTSCall1Ans4->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_id = lpTSCall1Ans4->GetInt64(LDBIZ_COMM_ID_INT64);
        v_comm_batch_no = lpTSCall1Ans4->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_executor = lpTSCall1Ans4->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_order_time = lpTSCall1Ans4->GetInt32(LDBIZ_ORDER_TIME_INT);
        v_stock_type = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_TYPE_INT);
        v_net_price_flag = lpTSCall1Ans4->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
        v_bond_accr_intrst = lpTSCall1Ans4->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
        v_bond_rate_type = lpTSCall1Ans4->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
        v_par_value = lpTSCall1Ans4->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
        v_impawn_ratio = lpTSCall1Ans4->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
        v_order_frozen_amt = lpTSCall1Ans4->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
        v_order_frozen_qty = lpTSCall1Ans4->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
        strcpy(v_order_status, lpTSCall1Ans4->GetString(LDBIZ_ORDER_STATUS_STR));
        v_order_batch_no = lpTSCall1Ans4->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
        v_wtdraw_qty = lpTSCall1Ans4->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
        v_strike_amt = lpTSCall1Ans4->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
        v_strike_qty = lpTSCall1Ans4->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
        v_strike_bond_accr_intrst = lpTSCall1Ans4->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
        strcpy(v_order_oper_way, lpTSCall1Ans4->GetString(LDBIZ_ORDER_OPER_WAY_STR));
        strcpy(v_old_order_status, lpTSCall1Ans4->GetString(LDBIZ_OLD_ORDER_STATUS_STR));
        v_row_id = lpTSCall1Ans4->GetInt64(LDBIZ_ROW_ID_INT64);
        strcpy(v_combo_code, lpTSCall1Ans4->GetString(LDBIZ_COMBO_CODE_STR));
        v_combo_posi_id = lpTSCall1Ans4->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
        v_strategy_id = lpTSCall1Ans4->GetInt64(LDBIZ_STRATEGY_ID_INT64);
        v_update_times = lpTSCall1Ans4->GetInt32(LDBIZ_UPDATE_TIMES_INT);
        v_debt_type = lpTSCall1Ans4->GetInt32(LDBIZ_DEBT_TYPE_INT);

    }
    // else
    else
    {

        //调用过程[事务_交易证券_报盘_处理订单回报]
        //组织事务请求
        if(lpTSCall1Ans5)
        {
          lpTSCall1Ans5->FreeMsg();
          lpTSCall1Ans5=NULL;
        }
        lpTSCall1Req5=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.1", 0);
        lpTSCall1Req5->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req5->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req5->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req5->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req5->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req5->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req5->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req5->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req5->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req5->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req5->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpTSCall1Req5->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req5->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
        lpTSCall1Req5->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpTSCall1Req5->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpTSCall1Req5->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
        lpTSCall1Req5->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpTSCall1Req5->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpTSCall1Req5->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req5->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req5->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
        lpTSCall1Req5->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpTSCall1Req5->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        lpTSCall1Req5->SetString(LDBIZ_ORDER_RSP_STATUS_STR,v_order_rsp_status);
        lpTSCall1Req5->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req5, &lpTSCall1Ans5, 5000);
        if(!lpTSCall1Ans5)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.1]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans5->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
        v_co_no = lpTSCall1Ans5->GetInt32(LDBIZ_CO_NO_INT);
        v_busi_opor_no = lpTSCall1Ans5->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
        v_pd_no = lpTSCall1Ans5->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans5->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        v_stock_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_external_no = lpTSCall1Ans5->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
        strcpy(v_exch_crncy_type, lpTSCall1Ans5->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
        v_comm_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_id = lpTSCall1Ans5->GetInt64(LDBIZ_COMM_ID_INT64);
        v_comm_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_executor = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_order_time = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_TIME_INT);
        v_stock_type = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_TYPE_INT);
        v_net_price_flag = lpTSCall1Ans5->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
        v_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
        v_bond_rate_type = lpTSCall1Ans5->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
        v_par_value = lpTSCall1Ans5->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
        v_impawn_ratio = lpTSCall1Ans5->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
        v_order_frozen_amt = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
        v_order_frozen_qty = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
        strcpy(v_order_status, lpTSCall1Ans5->GetString(LDBIZ_ORDER_STATUS_STR));
        v_order_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
        v_wtdraw_qty = lpTSCall1Ans5->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
        v_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
        v_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
        v_strike_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
        strcpy(v_order_oper_way, lpTSCall1Ans5->GetString(LDBIZ_ORDER_OPER_WAY_STR));
        strcpy(v_old_order_status, lpTSCall1Ans5->GetString(LDBIZ_OLD_ORDER_STATUS_STR));
        v_row_id = lpTSCall1Ans5->GetInt64(LDBIZ_ROW_ID_INT64);
        strcpy(v_combo_code, lpTSCall1Ans5->GetString(LDBIZ_COMBO_CODE_STR));
        v_combo_posi_id = lpTSCall1Ans5->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
        v_strategy_id = lpTSCall1Ans5->GetInt64(LDBIZ_STRATEGY_ID_INT64);
        v_update_times = lpTSCall1Ans5->GetInt32(LDBIZ_UPDATE_TIMES_INT);

    // end if;
    }


    // set @操作员编号# =@业务操作员编号#;
    v_opor_no =v_busi_opor_no;

    // set @当笔成交价格# = 0;
    v_curr_strike_price = 0;

    // set @当笔成交金额# = 0;
    v_curr_strike_amt = 0;

    // set @当笔成交数量# = 0;
    v_curr_strike_qty = 0;

    // set @成交序号# = 0;
    v_strike_id = 0;

    // set @全部费用# = 0;
    v_all_fee = 0;

    // set @撤单状态# = "0";
    strcpy(v_wtdraw_status,"0");

    // set @合同编号# = " ";
    strcpy(v_contra_no," ");

    // [主动推送][secu.order][证券主推_订单_订单主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
    lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
    lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);

    //废单时回退券源，增加T0主推 modify by wjp 20190327

    // if (@订单操作方式# = 《订单操作方式-增强交易》 or @订单操作方式# = 《订单操作方式-增强交易平仓》) then
    if ((strcmp(v_order_oper_way , "14")==0 || strcmp(v_order_oper_way , "51")==0))
    {
        //增强交易主推
        //调用过程[事务_交易证券_主推接口_获取券源信息]
        //组织事务请求
        if(lpTSCall1Ans6)
        {
          lpTSCall1Ans6->FreeMsg();
          lpTSCall1Ans6=NULL;
        }
        lpTSCall1Req6=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.35", 0);
        lpTSCall1Req6->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req6->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req6->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req6->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req6->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req6->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req6->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        lpTSCall1Req6->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req6->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req6->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req6->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req6->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req6, &lpTSCall1Ans6, 5000);
        if(!lpTSCall1Ans6)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.35]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans6->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans6->GetInt64(LDBIZ_ROW_ID_INT64);
        v_co_no = lpTSCall1Ans6->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans6->GetInt32(LDBIZ_PD_NO_INT);
        strcpy(v_stock_code, lpTSCall1Ans6->GetString(LDBIZ_STOCK_CODE_STR));
        v_exch_no = lpTSCall1Ans6->GetInt32(LDBIZ_EXCH_NO_INT);
        v_source_stock_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SOURCE_STOCK_QTY_FLOAT);
        v_single_limit_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SINGLE_LIMIT_QTY_FLOAT);
        v_assigned_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASSIGNED_QTY_FLOAT);
        v_trade_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT);
        v_trade_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT);
        v_strike_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT);
        v_strike_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT);
        v_over_night_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_total_open_posi_fee = lpTSCall1Ans6->GetDouble(LDBIZ_TOTAL_OPEN_POSI_FEE_FLOAT);
        v_total_close_posi_fee = lpTSCall1Ans6->GetDouble(LDBIZ_TOTAL_CLOSE_POSI_FEE_FLOAT);
        v_out_order_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_OUT_ORDER_RELEAS_QTY_FLOAT);
        v_out_order_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_OUT_ORDER_CAPT_QTY_FLOAT);
        v_out_strike_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_OUT_STRIKE_RELEAS_QTY_FLOAT);
        v_out_strike_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_OUT_STRIKE_CAPT_QTY_FLOAT);
        strcpy(v_remark_info, lpTSCall1Ans6->GetString(LDBIZ_REMARK_INFO_STR));
        v_buy_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_BUY_AVAIL_QTY_FLOAT);
        v_sell_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SELL_AVAIL_QTY_FLOAT);
        v_posi_qty = lpTSCall1Ans6->GetDouble(LDBIZ_POSI_QTY_FLOAT);
        v_today_trade_fee = lpTSCall1Ans6->GetDouble(LDBIZ_TODAY_TRADE_FEE_FLOAT);
        v_today_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_TODAY_PANDL_FLOAT);
        v_diff_qty = lpTSCall1Ans6->GetDouble(LDBIZ_DIFF_QTY_FLOAT);
        v_over_night_trade_buy_qty = lpTSCall1Ans6->GetDouble(LDBIZ_OVER_NIGHT_TRADE_BUY_QTY_FLOAT);
        v_over_night_trade_sell_qty = lpTSCall1Ans6->GetDouble(LDBIZ_OVER_NIGHT_TRADE_SELL_QTY_FLOAT);
        v_over_night_strike_sell_qty = lpTSCall1Ans6->GetDouble(LDBIZ_OVER_NIGHT_STRIKE_SELL_QTY_FLOAT);
        v_over_night_sumtrd_sell_qty = lpTSCall1Ans6->GetDouble(LDBIZ_OVER_NIGHT_SUMTRD_SELL_QTY_FLOAT);
        v_over_night_sumstk_sell_qty = lpTSCall1Ans6->GetDouble(LDBIZ_OVER_NIGHT_SUMSTK_SELL_QTY_FLOAT);
        v_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0stocksource][证券主推_增强交易_券源变化主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.701", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetDouble(LDBIZ_SOURCE_STOCK_QTY_FLOAT,v_source_stock_qty);
        lpPubMsg->SetDouble(LDBIZ_SINGLE_LIMIT_QTY_FLOAT,v_single_limit_qty);
        lpPubMsg->SetDouble(LDBIZ_ASSIGNED_QTY_FLOAT,v_assigned_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT,v_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT,v_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT,v_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT,v_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
        lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_OPEN_POSI_FEE_FLOAT,v_total_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_CLOSE_POSI_FEE_FLOAT,v_total_close_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_OUT_ORDER_RELEAS_QTY_FLOAT,v_out_order_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_OUT_ORDER_CAPT_QTY_FLOAT,v_out_order_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_OUT_STRIKE_RELEAS_QTY_FLOAT,v_out_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_OUT_STRIKE_CAPT_QTY_FLOAT,v_out_strike_capt_qty);
        lpPubMsg->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
        lpPubMsg->SetDouble(LDBIZ_BUY_AVAIL_QTY_FLOAT,v_buy_avail_qty);
        lpPubMsg->SetDouble(LDBIZ_SELL_AVAIL_QTY_FLOAT,v_sell_avail_qty);
        lpPubMsg->SetDouble(LDBIZ_POSI_QTY_FLOAT,v_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_TODAY_TRADE_FEE_FLOAT,v_today_trade_fee);
        lpPubMsg->SetDouble(LDBIZ_TODAY_PANDL_FLOAT,v_today_pandl);
        lpPubMsg->SetDouble(LDBIZ_DIFF_QTY_FLOAT,v_diff_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_TRADE_BUY_QTY_FLOAT,v_over_night_trade_buy_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_TRADE_SELL_QTY_FLOAT,v_over_night_trade_sell_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_STRIKE_SELL_QTY_FLOAT,v_over_night_strike_sell_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_SUMTRD_SELL_QTY_FLOAT,v_over_night_sumtrd_sell_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_SUMSTK_SELL_QTY_FLOAT,v_over_night_sumstk_sell_qty);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0stocksource", lpPubMsg);

        //调用过程[事务_交易证券_主推接口_获取账户汇总信息查询]
        //组织事务请求
        if(lpTSCall1Ans7)
        {
          lpTSCall1Ans7->FreeMsg();
          lpTSCall1Ans7=NULL;
        }
        lpTSCall1Req7=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.37", 0);
        lpTSCall1Req7->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req7->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req7->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req7->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req7->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req7->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req7->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req7->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req7->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req7, &lpTSCall1Ans7, 5000);
        if(!lpTSCall1Ans7)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.37]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans7->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
        v_trade_amt = lpTSCall1Ans7->GetDouble(LDBIZ_TRADE_AMT_FLOAT);
        v_trade_qty = lpTSCall1Ans7->GetDouble(LDBIZ_TRADE_QTY_FLOAT);
        v_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
        v_yield_rate = lpTSCall1Ans7->GetDouble(LDBIZ_YIELD_RATE_FLOAT);
        v_all_fee = lpTSCall1Ans7->GetDouble(LDBIZ_ALL_FEE_FLOAT);
        v_over_night_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0accosum][证券主推_增强交易_t0账户汇总主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.703", 0);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetDouble(LDBIZ_TRADE_AMT_FLOAT,v_trade_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_QTY_FLOAT,v_trade_qty);
        lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_YIELD_RATE_FLOAT,v_yield_rate);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
        lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0accosum", lpPubMsg);

        //调用过程[事务_交易证券_主推接口_获取t0操作员可用金额]
        //组织事务请求
        if(lpTSCall1Ans8)
        {
          lpTSCall1Ans8->FreeMsg();
          lpTSCall1Ans8=NULL;
        }
        lpTSCall1Req8=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.38", 0);
        lpTSCall1Req8->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req8->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req8->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req8->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req8->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req8->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req8->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req8->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req8->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req8->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req8, &lpTSCall1Ans8, 5000);
        if(!lpTSCall1Ans8)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.38]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans8->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
        v_avail_amt = lpTSCall1Ans8->GetDouble(LDBIZ_AVAIL_AMT_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0availcapital][证券主推_增强交易_t0操作员可用金额主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.704", 0);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetDouble(LDBIZ_AVAIL_AMT_FLOAT,v_avail_amt);
        lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0availcapital", lpPubMsg);

        //调用过程[事务_交易证券_主推接口_获取操作员可用交易组资金信息]
        //组织事务请求
        if(lpTSCall1Ans9)
        {
          lpTSCall1Ans9->FreeMsg();
          lpTSCall1Ans9=NULL;
        }
        lpTSCall1Req9=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.46", 0);
        lpTSCall1Req9->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req9->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req9->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req9->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req9->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req9->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req9->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req9->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req9->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req9->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req9->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req9->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req9->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        lpTSCall1Req9->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req9, &lpTSCall1Ans9, 5000);
        if(!lpTSCall1Ans9)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.46]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans9->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans9->GetInt64(LDBIZ_ROW_ID_INT64);
        v_begin_amt = lpTSCall1Ans9->GetDouble(LDBIZ_BEGIN_AMT_FLOAT);
        v_curr_amt = lpTSCall1Ans9->GetDouble(LDBIZ_CURR_AMT_FLOAT);
        v_frozen_amt = lpTSCall1Ans9->GetDouble(LDBIZ_FROZEN_AMT_FLOAT);
        v_unfroz_amt = lpTSCall1Ans9->GetDouble(LDBIZ_UNFROZ_AMT_FLOAT);
        v_comm_frozen_amt = lpTSCall1Ans9->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
        v_comm_unfroz_amt = lpTSCall1Ans9->GetDouble(LDBIZ_COMM_UNFROZ_AMT_FLOAT);
        v_comm_capt_amt = lpTSCall1Ans9->GetDouble(LDBIZ_COMM_CAPT_AMT_FLOAT);
        v_comm_releas_amt = lpTSCall1Ans9->GetDouble(LDBIZ_COMM_RELEAS_AMT_FLOAT);
        v_trade_frozen_amt = lpTSCall1Ans9->GetDouble(LDBIZ_TRADE_FROZEN_AMT_FLOAT);
        v_trade_unfroz_amt = lpTSCall1Ans9->GetDouble(LDBIZ_TRADE_UNFROZ_AMT_FLOAT);
        v_trade_capt_amt = lpTSCall1Ans9->GetDouble(LDBIZ_TRADE_CAPT_AMT_FLOAT);
        v_trade_releas_amt = lpTSCall1Ans9->GetDouble(LDBIZ_TRADE_RELEAS_AMT_FLOAT);
        v_strike_capt_amt = lpTSCall1Ans9->GetDouble(LDBIZ_STRIKE_CAPT_AMT_FLOAT);
        v_strike_releas_amt = lpTSCall1Ans9->GetDouble(LDBIZ_STRIKE_RELEAS_AMT_FLOAT);
        v_update_times = lpTSCall1Ans9->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0oporallowexgrpcap][证券主推_增强交易_操作员可用交易组资金变化主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.710", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_BEGIN_AMT_FLOAT,v_begin_amt);
        lpPubMsg->SetDouble(LDBIZ_CURR_AMT_FLOAT,v_curr_amt);
        lpPubMsg->SetDouble(LDBIZ_FROZEN_AMT_FLOAT,v_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_UNFROZ_AMT_FLOAT,v_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_UNFROZ_AMT_FLOAT,v_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_CAPT_AMT_FLOAT,v_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_RELEAS_AMT_FLOAT,v_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_FROZEN_AMT_FLOAT,v_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_UNFROZ_AMT_FLOAT,v_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_CAPT_AMT_FLOAT,v_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_RELEAS_AMT_FLOAT,v_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_CAPT_AMT_FLOAT,v_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_RELEAS_AMT_FLOAT,v_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0oporallowexgrpcap", lpPubMsg);

    // end if;
    }


    // if @订单回报状态# <> 《订单回报状态-已报》 then
    if (strcmp(v_order_rsp_status , "1")!=0)
    {

        // if  @订单批号# > 0 then
        if ( v_order_batch_no > 0)
        {

            // set @成交序号# = 0;
            v_strike_id = 0;
            //调用过程[事务_交易证券_主推接口_获取汇总订单成交信息]
            //组织事务请求
            if(lpTSCall1Ans10)
            {
              lpTSCall1Ans10->FreeMsg();
              lpTSCall1Ans10=NULL;
            }
            lpTSCall1Req10=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.21", 0);
            lpTSCall1Req10->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req10->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req10->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req10->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req10->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req10->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req10->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req10->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req10->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req10->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpTSCall1Req10->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req10->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
            lpTSCall1Req10->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req10, &lpTSCall1Ans10, 5000);
            if(!lpTSCall1Ans10)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.21]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans10->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
            v_sum_order_row_id = lpTSCall1Ans10->GetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64);
            v_sum_order_opor_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT);
            v_sum_order_co_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_CO_NO_INT);
            v_sum_order_pd_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_PD_NO_INT);
            v_sum_order_exch_group_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT);
            v_sum_order_asset_acco_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT);
            v_sum_order_pass_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT);
            strcpy(v_sum_order_exch_crncy_type, lpTSCall1Ans10->GetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR));
            v_sum_order_stock_code_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT);
            v_sum_order_trade_code_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT);
            v_sum_order_target_code_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT);
            v_sum_order_external_no = lpTSCall1Ans10->GetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64);
            v_sum_order_date = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_DATE_INT);
            v_sum_order_batch_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT);
            v_sum_order_dir = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_DIR_INT);
            v_sum_order_price_type = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT);
            v_sum_order_price = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT);
            v_sum_order_qty = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT);
            strcpy(v_order_sum_status, lpTSCall1Ans10->GetString(LDBIZ_ORDER_SUM_STATUS_STR));
            v_sum_order_wtdraw_qty = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT);
            v_sum_order_waste_qty = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT);
            v_sum_order_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT);
            v_sum_order_strike_qty = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT);
            v_sum_order_strike_aver_price = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT);
            v_sum_order_net_price_flag = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT);
            v_sum_order_bond_accr_intrst = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT);
            v_sum_order_bond_rate_type = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT);
            v_sum_order_par_value = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT);
            v_sum_order_impawn_ratio = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT);
            strcpy(v_sum_order_oper_way, lpTSCall1Ans10->GetString(LDBIZ_SUM_ORDER_OPER_WAY_STR));
            v_sum_order_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT);
            v_sum_strike_row_id = lpTSCall1Ans10->GetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64);
            v_sum_strike_opor_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT);
            v_sum_strike_co_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT);
            v_sum_strike_pd_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT);
            v_sum_strike_exch_group_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT);
            v_sum_strike_asset_acco_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT);
            v_sum_strike_pass_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT);
            strcpy(v_sum_strike_out_acco, lpTSCall1Ans10->GetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR));
            v_sum_strike_stock_acco_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT);
            v_sum_strike_stock_code_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT);
            v_sum_strike_comm_id = lpTSCall1Ans10->GetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64);
            v_sum_strike_report_date = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT);
            strcpy(v_sum_strike_report_no, lpTSCall1Ans10->GetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR));
            v_sum_strike_order_date = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT);
            v_sum_strike_order_id = lpTSCall1Ans10->GetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64);
            v_sum_strike_order_dir = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT);
            v_sum_strike_order_price = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT);
            v_sum_strike_order_qty = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT);
            v_sum_strike_strike_qty = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT);
            v_sum_strike_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT);
            v_sum_strike_all_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT);
            v_sum_strike_stamp_tax = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT);
            v_sum_strike_trans_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT);
            v_sum_strike_brkage_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT);
            v_sum_strike_SEC_charges = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT);
            v_sum_strike_other_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT);
            v_sum_strike_trade_commis = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT);
            v_sum_strike_other_commis = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT);
            v_sum_trade_tax = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT);
            v_sum_trade_cost_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT);
            v_sum_trade_system_use_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT);
            v_sum_stock_settle_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT);
            v_sum_strike_net_price_flag = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT);
            v_sum_strike_bond_accr_intrst = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT);
            v_sum_strike_bond_rate_type = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT);
            strcpy(v_sum_strike_order_oper_way, lpTSCall1Ans10->GetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR));
            v_sum_strike_exter_comm_flag = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT);
            v_sum_strike_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT);
            v_sum_strike_order_batch_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT);
            v_sum_external_no = lpTSCall1Ans10->GetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64);


            // [主动推送][secu.ordertotal][证券主推_订单_订单汇总主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.21", 0);
            lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64,v_sum_order_row_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT,v_sum_order_opor_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_CO_NO_INT,v_sum_order_co_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PD_NO_INT,v_sum_order_pd_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT,v_sum_order_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT,v_sum_order_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT,v_sum_order_pass_no);
            lpPubMsg->SetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR,v_sum_order_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT,v_sum_order_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT,v_sum_order_trade_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT,v_sum_order_target_code_no);
            lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64,v_sum_order_external_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DATE_INT,v_sum_order_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT,v_sum_order_batch_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DIR_INT,v_sum_order_dir);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT,v_sum_order_price_type);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT,v_sum_order_price);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT,v_sum_order_qty);
            lpPubMsg->SetString(LDBIZ_ORDER_SUM_STATUS_STR,v_order_sum_status);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT,v_sum_order_wtdraw_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT,v_sum_order_waste_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT,v_sum_order_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT,v_sum_order_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT,v_sum_order_strike_aver_price);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT,v_sum_order_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT,v_sum_order_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT,v_sum_order_bond_rate_type);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT,v_sum_order_par_value);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT,v_sum_order_impawn_ratio);
            lpPubMsg->SetString(LDBIZ_SUM_ORDER_OPER_WAY_STR,v_sum_order_oper_way);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT,v_sum_order_update_times);
            glpPubSub_Interface->PubTopics("secu.ordertotal", lpPubMsg);

        // end if;
        }


        // if @指令序号# > 0 then
        if (v_comm_id > 0)
        {
            //调用过程[事务_交易证券_主推接口_获取指令混合信息]
            //组织事务请求
            if(lpTSCall1Ans11)
            {
              lpTSCall1Ans11->FreeMsg();
              lpTSCall1Ans11=NULL;
            }
            lpTSCall1Req11=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
            lpTSCall1Req11->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req11->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req11->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req11->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req11->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req11->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req11->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req11->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req11->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req11, &lpTSCall1Ans11, 5000);
            if(!lpTSCall1Ans11)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans11->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
            v_init_date = lpTSCall1Ans11->GetInt32(LDBIZ_INIT_DATE_INT);
            v_co_no = lpTSCall1Ans11->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans11->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpTSCall1Ans11->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpTSCall1Ans11->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_pass_no = lpTSCall1Ans11->GetInt32(LDBIZ_PASS_NO_INT);
            strcpy(v_out_acco, lpTSCall1Ans11->GetString(LDBIZ_OUT_ACCO_STR));
            strcpy(v_exch_crncy_type, lpTSCall1Ans11->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
            v_stock_acco_no = lpTSCall1Ans11->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_stock_code_no = lpTSCall1Ans11->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            v_stock_type = lpTSCall1Ans11->GetInt32(LDBIZ_STOCK_TYPE_INT);
            v_comm_date = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_DATE_INT);
            v_comm_time = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_TIME_INT);
            v_comm_batch_no = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
            v_comm_opor = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_OPOR_INT);
            v_comm_executor = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
            v_comm_dir = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_DIR_INT);
            v_comm_limit_price = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
            v_limit_actual_price = lpTSCall1Ans11->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
            v_comm_qty = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_QTY_FLOAT);
            v_comm_amt = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_AMT_FLOAT);
            v_order_qty = lpTSCall1Ans11->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
            v_comm_cancel_qty = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
            v_strike_amt = lpTSCall1Ans11->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
            v_strike_qty = lpTSCall1Ans11->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
            v_comm_frozen_amt = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
            v_comm_frozen_qty = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
            strcpy(v_strike_status, lpTSCall1Ans11->GetString(LDBIZ_STRIKE_STATUS_STR));
            strcpy(v_comm_status, lpTSCall1Ans11->GetString(LDBIZ_COMM_STATUS_STR));
            v_comm_begin_date = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
            v_comm_end_date = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_END_DATE_INT);
            v_comm_begin_time = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
            v_comm_end_time = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_END_TIME_INT);
            v_comm_comple_date = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
            v_comm_comple_time = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
            v_comm_appr_date = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
            v_comm_appr_time = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
            strcpy(v_comm_appr_status, lpTSCall1Ans11->GetString(LDBIZ_COMM_APPR_STATUS_STR));
            v_comm_appr_oper = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
            strcpy(v_comm_appr_remark, lpTSCall1Ans11->GetString(LDBIZ_COMM_APPR_REMARK_STR));
            v_basket_id = lpTSCall1Ans11->GetInt64(LDBIZ_BASKET_ID_INT64);
            v_net_price_flag = lpTSCall1Ans11->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
            v_bond_accr_intrst = lpTSCall1Ans11->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
            v_bond_rate_type = lpTSCall1Ans11->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
            strcpy(v_comm_oper_way, lpTSCall1Ans11->GetString(LDBIZ_COMM_OPER_WAY_STR));
            v_exter_comm_flag = lpTSCall1Ans11->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
            v_comm_comple_flag = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
            v_strategy_capt_qty = lpTSCall1Ans11->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
            v_strategy_order_qty = lpTSCall1Ans11->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
            strcpy(v_contra_no, lpTSCall1Ans11->GetString(LDBIZ_CONTRA_NO_STR));
            strcpy(v_comm_remark_info, lpTSCall1Ans11->GetString(LDBIZ_COMM_REMARK_INFO_STR));
            v_disp_opor = lpTSCall1Ans11->GetInt32(LDBIZ_DISP_OPOR_INT);
            v_disp_status = lpTSCall1Ans11->GetInt32(LDBIZ_DISP_STATUS_INT);
            v_read_flag = lpTSCall1Ans11->GetInt32(LDBIZ_READ_FLAG_INT);
            v_update_times = lpTSCall1Ans11->GetInt32(LDBIZ_UPDATE_TIMES_INT);
            v_sum_comm_row_id = lpTSCall1Ans11->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
            v_sum_comm_co_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
            v_sum_comm_pd_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
            v_sum_comm_exch_group_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
            v_sum_comm_asset_acco_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
            v_sum_comm_pass_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
            strcpy(v_sum_comm_out_acco, lpTSCall1Ans11->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
            strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans11->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
            v_sum_comm_stock_code_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
            v_sum_comm_date = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
            v_sum_comm_time = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
            v_sum_comm_batch_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
            v_sum_comm_opor = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
            v_sum_comm_executor = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
            v_sum_comm_dir = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
            v_sum_comm_limit_price = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
            v_sum_comm_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
            v_sum_comm_amt = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
            v_sum_comm_order_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
            v_sum_comm_cancel_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
            v_sum_comm_await_cancel_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
            v_sum_comm_strike_amt = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
            v_sum_comm_strike_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
            strcpy(v_sum_comm_strike_status, lpTSCall1Ans11->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
            strcpy(v_comm_sum_status, lpTSCall1Ans11->GetString(LDBIZ_COMM_SUM_STATUS_STR));
            v_sum_comm_begin_date = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
            v_sum_comm_end_date = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
            v_sum_comm_begin_time = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
            v_sum_comm_end_time = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
            v_sum_comm_comple_date = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
            v_sum_comm_comple_time = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
            v_sum_comm_max_comm_comple_date = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
            v_sum_comm_max_comm_comple_time = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
            v_sum_comm_appr_date = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
            v_sum_comm_appr_time = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
            v_sum_comm_appr_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
            strcpy(v_comm_sum_approve_status, lpTSCall1Ans11->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
            v_sum_comm_basket_id = lpTSCall1Ans11->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
            v_sum_comm_net_price_flag = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
            v_sum_comm_bond_accr_intrst = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
            v_sum_comm_bond_rate_type = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
            strcpy(v_sum_comm_oper_way, lpTSCall1Ans11->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
            v_sum_comm_exter_comm_flag = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
            v_sum_buy_order_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
            v_sum_sell_order_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
            v_sum_buy_comm_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
            v_sum_sell_comm_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
            v_sum_buy_strike_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
            v_sum_sell_strike_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
            v_sum_buy_strike_amt = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
            v_sum_sell_strike_amt = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
            v_sum_buy_comm_amt = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
            v_sum_sell_comm_amt = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
            strcpy(v_sum_comm_remark_info, lpTSCall1Ans11->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
            v_sum_comm_update_times = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
            strcpy(v_acco_concat_info, lpTSCall1Ans11->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


            // [主动推送][secu.comm][证券主推_指令_指令主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
            lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
            lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
            lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
            lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
            lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
            lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
            lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
            lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
            lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
            lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
            lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
            lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
            lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
            lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
            lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
            lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
            lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
            lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
            lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


            // if @指令批号# > 0 then
            if (v_comm_batch_no > 0)
            {

                // set @指令备注信息#= @汇总指令备注信息#;
                strcpy(v_comm_remark_info,v_sum_comm_remark_info);

                // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
                lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
                lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
                lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
                lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
                lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
                glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

            // end if;
            }

        // end if;
        }

      //质押提交和质押转回，要推交易代码和标准券代码

      // if @订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》 then
      if (v_order_dir == 21 || v_order_dir == 22)
      {
        //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
        //组织事务请求
        if(lpTSCall1Ans12)
        {
          lpTSCall1Ans12->FreeMsg();
          lpTSCall1Ans12=NULL;
        }
        lpTSCall1Req12=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
        lpTSCall1Req12->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req12->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req12->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req12->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req12->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req12->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req12->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req12->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req12->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req12->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req12->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req12->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req12->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req12->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
        lpTSCall1Req12->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpTSCall1Req12->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req12, &lpTSCall1Ans12, 5000);
        if(!lpTSCall1Ans12)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans12->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
        v_exgp_cash_id = lpTSCall1Ans12->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
        v_exgp_frozen_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
        v_exgp_unfroz_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
        v_exgp_comm_frozen_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
        v_exgp_comm_unfroz_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
        v_exgp_comm_capt_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
        v_exgp_comm_releas_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
        v_exgp_trade_frozen_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
        v_exgp_trade_unfroz_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
        v_exgp_trade_capt_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
        v_exgp_trade_releas_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
        v_exgp_strike_capt_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
        v_exgp_strike_releas_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
        v_exgp_cash_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
        v_exgp_posi_id = lpTSCall1Ans12->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
        v_exgp_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
        v_exgp_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
        v_exgp_comm_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
        v_exgp_comm_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
        v_exgp_comm_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
        v_exgp_comm_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
        v_exgp_trade_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
        v_exgp_trade_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
        v_exgp_trade_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
        v_exgp_trade_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
        v_exgp_strike_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
        v_exgp_strike_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
        v_exgp_strike_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
        v_exgp_strike_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
        v_exgp_realize_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
        v_exgp_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
        v_exgp_intrst_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
        v_exgp_intrst_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
        v_exgp_posi_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
        v_asac_cash_id = lpTSCall1Ans12->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
        v_asac_frozen_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
        v_asac_unfroz_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
        v_asac_comm_frozen_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
        v_asac_comm_unfroz_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
        v_asac_comm_capt_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
        v_asac_comm_releas_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
        v_asac_trade_frozen_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
        v_asac_trade_unfroz_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
        v_asac_trade_capt_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
        v_asac_trade_releas_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
        v_asac_strike_capt_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
        v_asac_strike_releas_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
        v_asac_cash_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
        v_asac_posi_id = lpTSCall1Ans12->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
        v_asac_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
        v_asac_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
        v_asac_comm_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
        v_asac_comm_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
        v_asac_comm_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
        v_asac_comm_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
        v_asac_trade_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
        v_asac_trade_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
        v_asac_trade_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
        v_asac_trade_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
        v_asac_strike_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
        v_asac_strike_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
        v_asac_strike_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
        v_asac_strike_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
        v_asac_realize_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
        v_asac_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
        v_asac_intrst_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
        v_asac_intrst_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
        v_asac_posi_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
        v_exgp_target_posi_id = lpTSCall1Ans12->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
        v_exgp_target_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
        v_exgp_target_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
        v_exgp_target_comm_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
        v_exgp_target_comm_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
        v_exgp_target_comm_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
        v_exgp_target_comm_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
        v_exgp_target_trade_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
        v_exgp_target_trade_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
        v_exgp_target_trade_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
        v_exgp_target_trade_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
        v_exgp_target_strike_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
        v_exgp_target_strike_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
        v_exgp_target_strike_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
        v_exgp_target_strike_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
        v_exgp_target_realize_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
        v_exgp_target_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
        v_exgp_target_intrst_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
        v_exgp_target_intrst_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
        v_exgp_target_posi_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
        v_asac_target_posi_id = lpTSCall1Ans12->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
        v_asac_target_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
        v_asac_target_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
        v_asac_target_comm_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
        v_asac_target_comm_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
        v_asac_target_comm_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
        v_asac_target_comm_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
        v_asac_target_trade_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
        v_asac_target_trade_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
        v_asac_target_trade_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
        v_asac_target_trade_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
        v_asac_target_strike_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
        v_asac_target_strike_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
        v_asac_target_strike_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
        v_asac_target_strike_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
        v_asac_target_realize_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
        v_asac_target_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
        v_asac_target_intrst_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
        v_asac_target_intrst_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
        v_asac_target_posi_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
        v_exgp_put_impawn_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
        v_asac_put_impawn_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


        // set @证券代码编号# = @交易代码编号#;
        v_stock_code_no = v_trade_code_no;

        // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
        glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


        // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


        // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
        glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


        // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


        // set @交易组提交质押数量# = 0;
        v_exgp_put_impawn_qty = 0;

        // set @资产账户提交质押数量# = 0;
        v_asac_put_impawn_qty = 0;

        // set @证券代码编号# = @标的代码编号#;
        v_stock_code_no = v_target_code_no;

        // set @交易组持仓序号# = @交易组标的持仓序号#;
        v_exgp_posi_id = v_exgp_target_posi_id;

        // set @交易组冻结数量# = @交易组标的冻结数量#;
        v_exgp_frozen_qty = v_exgp_target_frozen_qty;

        // set @交易组解冻数量# = @交易组标的解冻数量#;
        v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

        // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
        v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

        // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
        v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

        // set @交易组指令占用数量# = @交易组标的指令占用数量#;
        v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

        // set @交易组指令释放数量# = @交易组标的指令释放数量#;
        v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

        // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
        v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

        // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
        v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

        // set @交易组交易占用数量# = @交易组标的交易占用数量#;
        v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

        // set @交易组交易释放数量# = @交易组标的交易释放数量#;
        v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

        // set @交易组成交占用数量# = @交易组标的成交占用数量#;
        v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

        // set @交易组成交释放数量# = @交易组标的成交释放数量#;
        v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

        // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
        v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

        // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
        v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

        // set @交易组实现盈亏# = @交易组标的实现盈亏#;
        v_exgp_realize_pandl = v_exgp_target_realize_pandl;

        // set @交易组成本金额# = @交易组标的成本金额#;
        v_exgp_cost_amt = v_exgp_target_cost_amt;

        // set @交易组利息成本金额# = @交易组标的利息成本金额#;
        v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

        // set @交易组利息收益# = @交易组标的利息收益#;
        v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

        // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
        v_exgp_posi_update_times = v_exgp_target_posi_update_times;

        // set @资产账户持仓序号# = @资产账户标的持仓序号#;
        v_asac_posi_id = v_asac_target_posi_id;

        // set @资产账户冻结数量# = @资产账户标的冻结数量#;
        v_asac_frozen_qty = v_asac_target_frozen_qty;

        // set @资产账户解冻数量# = @资产账户标的解冻数量#;
        v_asac_unfroz_qty = v_asac_target_unfroz_qty;

        // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
        v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

        // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
        v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

        // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
        v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

        // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
        v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

        // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
        v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

        // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
        v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

        // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
        v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

        // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
        v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

        // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
        v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

        // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
        v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

        // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
        v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

        // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
        v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

        // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
        v_asac_realize_pandl = v_asac_target_realize_pandl;

        // set @资产账户成本金额# = @资产账户标的成本金额#;
        v_asac_cost_amt = v_asac_target_cost_amt;

        // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
        v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

        // set @资产账户利息收益# = @资产账户标的利息收益#;
        v_asac_intrst_pandl = v_asac_target_intrst_pandl;

        // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
        v_asac_posi_update_times = v_asac_target_posi_update_times;

        // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


        // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


      }
      // else if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
      else if (v_order_dir == 3 || v_order_dir == 4)
      {

        // set @证券代码编号# = @标的代码编号#;
        v_stock_code_no = v_target_code_no;
        //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
        //组织事务请求
        if(lpTSCall1Ans13)
        {
          lpTSCall1Ans13->FreeMsg();
          lpTSCall1Ans13=NULL;
        }
        lpTSCall1Req13=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
        lpTSCall1Req13->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req13->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req13->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req13->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req13->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req13->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req13->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req13->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req13->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req13->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req13->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req13->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req13->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req13->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req13->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req13, &lpTSCall1Ans13, 5000);
        if(!lpTSCall1Ans13)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans13->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));
        v_exgp_cash_id = lpTSCall1Ans13->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
        v_exgp_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
        v_exgp_unfroz_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
        v_exgp_comm_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
        v_exgp_comm_unfroz_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
        v_exgp_comm_capt_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
        v_exgp_comm_releas_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
        v_exgp_trade_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
        v_exgp_trade_unfroz_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
        v_exgp_trade_capt_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
        v_exgp_trade_releas_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
        v_exgp_strike_capt_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
        v_exgp_strike_releas_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
        v_exgp_cash_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
        v_exgp_posi_id = lpTSCall1Ans13->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
        v_exgp_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
        v_exgp_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
        v_exgp_comm_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
        v_exgp_comm_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
        v_exgp_comm_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
        v_exgp_comm_releas_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
        v_exgp_trade_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
        v_exgp_trade_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
        v_exgp_trade_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
        v_exgp_trade_releas_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
        v_exgp_strike_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
        v_exgp_strike_releas_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
        v_exgp_strike_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
        v_exgp_strike_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
        v_exgp_realize_pandl = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
        v_exgp_cost_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
        v_exgp_intrst_cost_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
        v_exgp_intrst_pandl = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
        v_exgp_posi_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
        v_asac_cash_id = lpTSCall1Ans13->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
        v_asac_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
        v_asac_unfroz_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
        v_asac_comm_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
        v_asac_comm_unfroz_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
        v_asac_comm_capt_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
        v_asac_comm_releas_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
        v_asac_trade_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
        v_asac_trade_unfroz_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
        v_asac_trade_capt_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
        v_asac_trade_releas_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
        v_asac_strike_capt_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
        v_asac_strike_releas_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
        v_asac_cash_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
        v_asac_posi_id = lpTSCall1Ans13->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
        v_asac_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
        v_asac_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
        v_asac_comm_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
        v_asac_comm_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
        v_asac_comm_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
        v_asac_comm_releas_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
        v_asac_trade_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
        v_asac_trade_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
        v_asac_trade_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
        v_asac_trade_releas_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
        v_asac_strike_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
        v_asac_strike_releas_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
        v_asac_strike_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
        v_asac_strike_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
        v_asac_realize_pandl = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
        v_asac_cost_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
        v_asac_intrst_cost_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
        v_asac_intrst_pandl = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
        v_asac_posi_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


        // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
        glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


        // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


        // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
        glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


        // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


      }
      // else if @资产账户类型# = 《资产账户类型-融资融券》 and ((@订单方向# = 《订单方向-融资买入》 or @订单方向# = 《订单方向-融券卖出》 or @订单方向# = 《订单方向-卖券还款》 or @订单方向# = 《订单方向-买券还券》 or @订单方向# = 《订单方向-直接还款》 or @订单方向# = 《订单方向-直接还券》) or  (@资产账户类型# = 《资产账户类型-融资融券》 and @订单方向# = 《订单方向-卖出》 and  @存在负债标志# = 《存在负债标志-存在》 and @卖出自动还款# = 《卖出自动还款-是》)) then
      else if (v_asset_acco_type == 5 && ((v_order_dir == 5 || v_order_dir == 6 || v_order_dir == 7 || v_order_dir == 8 || v_order_dir == 14 || v_order_dir == 15) ||  (v_asset_acco_type == 5 && v_order_dir == 2 &&  v_exist_debt_flag == 2 && v_sell_auto_back_debt == 0)))
      {

            // set @交易组提交质押数量# = 0;
            v_exgp_put_impawn_qty = 0;

            // set @资产账户提交质押数量# = 0;
            v_asac_put_impawn_qty = 0;
            //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
            //组织事务请求
            if(lpTSCall1Ans14)
            {
              lpTSCall1Ans14->FreeMsg();
              lpTSCall1Ans14=NULL;
            }
            lpTSCall1Req14=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
            lpTSCall1Req14->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req14->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req14->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req14->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req14->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req14->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req14->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req14->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req14->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req14->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req14->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpTSCall1Req14->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req14->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpTSCall1Req14->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req14->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req14, &lpTSCall1Ans14, 5000);
            if(!lpTSCall1Ans14)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans14->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
            v_exgp_cash_id = lpTSCall1Ans14->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
            v_exgp_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
            v_exgp_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
            v_exgp_comm_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
            v_exgp_comm_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
            v_exgp_comm_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
            v_exgp_comm_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
            v_exgp_trade_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
            v_exgp_trade_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
            v_exgp_trade_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
            v_exgp_trade_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
            v_exgp_strike_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
            v_exgp_strike_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
            v_exgp_cash_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
            v_exgp_posi_id = lpTSCall1Ans14->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
            v_exgp_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
            v_exgp_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
            v_exgp_comm_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
            v_exgp_comm_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
            v_exgp_comm_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
            v_exgp_comm_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
            v_exgp_trade_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
            v_exgp_trade_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
            v_exgp_trade_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
            v_exgp_trade_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
            v_exgp_strike_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
            v_exgp_strike_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
            v_exgp_strike_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
            v_exgp_strike_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
            v_exgp_realize_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
            v_exgp_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
            v_exgp_intrst_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
            v_exgp_intrst_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
            v_exgp_posi_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
            v_asac_cash_id = lpTSCall1Ans14->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
            v_asac_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
            v_asac_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
            v_asac_comm_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
            v_asac_comm_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
            v_asac_comm_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
            v_asac_comm_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
            v_asac_trade_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
            v_asac_trade_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
            v_asac_trade_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
            v_asac_trade_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
            v_asac_strike_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
            v_asac_strike_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
            v_asac_cash_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
            v_asac_posi_id = lpTSCall1Ans14->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
            v_asac_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
            v_asac_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
            v_asac_comm_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
            v_asac_comm_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
            v_asac_comm_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
            v_asac_comm_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
            v_asac_trade_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
            v_asac_trade_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
            v_asac_trade_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
            v_asac_trade_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
            v_asac_strike_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
            v_asac_strike_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
            v_asac_strike_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
            v_asac_strike_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
            v_asac_realize_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
            v_asac_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
            v_asac_intrst_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
            v_asac_intrst_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
            v_asac_posi_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


            // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
            lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
            lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
            glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


            // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
            lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
            lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
            glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


            // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
            lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
            lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
            glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


            // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
            lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
            lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
            glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

            //主推：交易证券_账户_交易组业务资金负债表、交易证券_账户_资产账户业务资金负债表、交易证券_账户_交易组业务持仓负债表、交易证券_账户_资产账户业务持仓负债表、交易证券_账户_资产账户负债明细表、交易证券_账户_交易组负债明细表
            //调用过程[事务_交易证券_账户_查询交易组业务持仓负债]
            //组织事务请求
            if(lpTSCall1Ans15)
            {
              lpTSCall1Ans15->FreeMsg();
              lpTSCall1Ans15=NULL;
            }
            lpTSCall1Req15=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.76", 0);
            lpTSCall1Req15->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req15->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req15->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req15->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req15->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req15->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req15->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req15->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req15->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req15->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req15->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req15->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req15->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpTSCall1Req15->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpTSCall1Req15->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req15->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req15, &lpTSCall1Ans15, 5000);
            if(!lpTSCall1Ans15)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.76]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans15->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
            v_row_id = lpTSCall1Ans15->GetInt64(LDBIZ_ROW_ID_INT64);
            v_exch_no = lpTSCall1Ans15->GetInt32(LDBIZ_EXCH_NO_INT);
            v_stock_type = lpTSCall1Ans15->GetInt32(LDBIZ_STOCK_TYPE_INT);
            v_asset_type = lpTSCall1Ans15->GetInt32(LDBIZ_ASSET_TYPE_INT);
            v_invest_type = lpTSCall1Ans15->GetInt32(LDBIZ_INVEST_TYPE_INT);
            v_debt_fina_buy_strike_qty = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT);
            v_fina_return_strike_qty = lpTSCall1Ans15->GetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT);
            v_debt_loan_sell_strike_qty = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT);
            v_loan_return_strike_qty = lpTSCall1Ans15->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT);
            v_debt_fina_buy_order_qty = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT);
            v_fina_return_order_qty = lpTSCall1Ans15->GetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT);
            v_debt_loan_sell_order_qty = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT);
            v_loan_return_order_qty = lpTSCall1Ans15->GetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT);
            v_debt_fina_buy_comm_qty = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT);
            v_fina_return_comm_qty = lpTSCall1Ans15->GetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT);
            v_debt_loan_sell_comm_qty = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT);
            v_loan_return_comm_qty = lpTSCall1Ans15->GetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT);
            v_debt_fina_buy_strike_amt = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT);
            v_fina_return_strike_amt = lpTSCall1Ans15->GetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT);
            v_debt_loan_sell_strike_amt = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
            v_loan_return_strike_amt = lpTSCall1Ans15->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
            v_debt_fina_buy_order_amt = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT);
            v_fina_return_order_amt = lpTSCall1Ans15->GetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT);
            v_debt_loan_sell_order_amt = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT);
            v_loan_return_order_amt = lpTSCall1Ans15->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
            v_debt_fina_buy_comm_amt = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT);
            v_fina_return_comm_amt = lpTSCall1Ans15->GetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT);
            v_debt_loan_sell_comm_amt = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT);
            v_loan_return_comm_amt = lpTSCall1Ans15->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
            v_debt_strike_fee = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
            v_return_strike_fee = lpTSCall1Ans15->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
            v_debt_interest = lpTSCall1Ans15->GetDouble(LDBIZ_DEBT_INTEREST_FLOAT);
            v_return_interest_amt = lpTSCall1Ans15->GetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT);
            v_update_times = lpTSCall1Ans15->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.exgpposidebt][证券主推_持仓_交易组业务持仓负债主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.928", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
            lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
            lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
            lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.exgpposidebt", lpPubMsg);

            //调用过程[事务_交易证券_账户_查询资产账户业务持仓负债]
            //组织事务请求
            if(lpTSCall1Ans16)
            {
              lpTSCall1Ans16->FreeMsg();
              lpTSCall1Ans16=NULL;
            }
            lpTSCall1Req16=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.77", 0);
            lpTSCall1Req16->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req16->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req16->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req16->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req16->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req16->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req16->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req16->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req16->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req16->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req16->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req16->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req16->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpTSCall1Req16->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req16->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req16, &lpTSCall1Ans16, 5000);
            if(!lpTSCall1Ans16)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.77]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans16->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans16->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans16->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));


            // [主动推送][secu.asacposidebt][证券主推_持仓_资产账户业务持仓负债主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.929", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
            lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
            lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
            lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.asacposidebt", lpPubMsg);

            //调用过程[事务_交易证券_账户_查询资产账户业务资金负债]
            //组织事务请求
            if(lpTSCall1Ans17)
            {
              lpTSCall1Ans17->FreeMsg();
              lpTSCall1Ans17=NULL;
            }
            lpTSCall1Req17=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.75", 0);
            lpTSCall1Req17->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req17->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req17->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req17->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req17->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req17->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req17->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req17->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req17->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req17->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req17->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req17->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            glpTSSubcallSerives->SubCall(lpTSCall1Req17, &lpTSCall1Ans17, 5000);
            if(!lpTSCall1Ans17)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.75]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans17->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans17->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans17->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans17->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans17->GetString(LDBIZ_ERROR_INFO_STR));
            v_row_id = lpTSCall1Ans17->GetInt64(LDBIZ_ROW_ID_INT64);
            v_debt_loan_sell_strike_amt = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
            v_debt_strike_fee = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
            v_loan_return_strike_amt = lpTSCall1Ans17->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
            v_loan_return_order_amt = lpTSCall1Ans17->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
            v_loan_return_comm_amt = lpTSCall1Ans17->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
            v_return_strike_fee = lpTSCall1Ans17->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
            v_update_times = lpTSCall1Ans17->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.asaccapitaldebt][证券主推_资金_资产账户业务资金负债主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.930", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.asaccapitaldebt", lpPubMsg);

            //调用过程[事务_交易证券_账户_查询交易组业务资金负债]
            //组织事务请求
            if(lpTSCall1Ans18)
            {
              lpTSCall1Ans18->FreeMsg();
              lpTSCall1Ans18=NULL;
            }
            lpTSCall1Req18=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.74", 0);
            lpTSCall1Req18->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req18->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req18->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req18->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req18->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req18->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req18->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req18->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req18->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req18->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req18->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req18->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req18->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            glpTSSubcallSerives->SubCall(lpTSCall1Req18, &lpTSCall1Ans18, 5000);
            if(!lpTSCall1Ans18)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.74]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans18->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans18->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans18->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans18->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans18->GetString(LDBIZ_ERROR_INFO_STR));
            v_row_id = lpTSCall1Ans18->GetInt64(LDBIZ_ROW_ID_INT64);
            v_debt_loan_sell_strike_amt = lpTSCall1Ans18->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
            v_debt_strike_fee = lpTSCall1Ans18->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
            v_loan_return_strike_amt = lpTSCall1Ans18->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
            v_loan_return_order_amt = lpTSCall1Ans18->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
            v_loan_return_comm_amt = lpTSCall1Ans18->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
            v_return_strike_fee = lpTSCall1Ans18->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
            v_update_times = lpTSCall1Ans18->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.exgpcapitaldebt][证券主推_资金_交易组业务资金负债主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.931", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.exgpcapitaldebt", lpPubMsg);

      }
      // else
      else
      {

        //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
        //组织事务请求
        if(lpTSCall1Ans19)
        {
          lpTSCall1Ans19->FreeMsg();
          lpTSCall1Ans19=NULL;
        }
        lpTSCall1Req19=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
        lpTSCall1Req19->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req19->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req19->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req19->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req19->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req19->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req19->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req19->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req19->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req19->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req19->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req19->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req19->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req19->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req19->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req19, &lpTSCall1Ans19, 5000);
        if(!lpTSCall1Ans19)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans19->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans19->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans19->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans19->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans19->GetString(LDBIZ_ERROR_INFO_STR));
        v_exgp_cash_id = lpTSCall1Ans19->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
        v_exgp_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
        v_exgp_unfroz_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
        v_exgp_comm_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
        v_exgp_comm_unfroz_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
        v_exgp_comm_capt_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
        v_exgp_comm_releas_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
        v_exgp_trade_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
        v_exgp_trade_unfroz_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
        v_exgp_trade_capt_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
        v_exgp_trade_releas_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
        v_exgp_strike_capt_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
        v_exgp_strike_releas_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
        v_exgp_cash_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
        v_exgp_posi_id = lpTSCall1Ans19->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
        v_exgp_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
        v_exgp_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
        v_exgp_comm_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
        v_exgp_comm_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
        v_exgp_comm_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
        v_exgp_comm_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
        v_exgp_trade_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
        v_exgp_trade_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
        v_exgp_trade_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
        v_exgp_trade_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
        v_exgp_strike_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
        v_exgp_strike_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
        v_exgp_strike_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
        v_exgp_strike_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
        v_exgp_realize_pandl = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
        v_exgp_cost_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
        v_exgp_intrst_cost_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
        v_exgp_intrst_pandl = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
        v_exgp_posi_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
        v_asac_cash_id = lpTSCall1Ans19->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
        v_asac_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
        v_asac_unfroz_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
        v_asac_comm_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
        v_asac_comm_unfroz_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
        v_asac_comm_capt_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
        v_asac_comm_releas_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
        v_asac_trade_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
        v_asac_trade_unfroz_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
        v_asac_trade_capt_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
        v_asac_trade_releas_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
        v_asac_strike_capt_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
        v_asac_strike_releas_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
        v_asac_cash_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
        v_asac_posi_id = lpTSCall1Ans19->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
        v_asac_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
        v_asac_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
        v_asac_comm_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
        v_asac_comm_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
        v_asac_comm_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
        v_asac_comm_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
        v_asac_trade_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
        v_asac_trade_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
        v_asac_trade_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
        v_asac_trade_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
        v_asac_strike_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
        v_asac_strike_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
        v_asac_strike_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
        v_asac_strike_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
        v_asac_realize_pandl = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
        v_asac_cost_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
        v_asac_intrst_cost_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
        v_asac_intrst_pandl = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
        v_asac_posi_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


        // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
        glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


        // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


        // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
        glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


        // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

      // end if;
      }

    // end if;
    }


    // set @回购天数# = 0;
    v_repo_days = 0;

    // set @回购实际天数# = 0;
    v_repo_cale_days = 0;

    // set @回购到期日期# = 0;
    v_repo_back_date = 0;
    //如果卖出方向，回报成功需要处理质押提交或质押转回

    // if @订单回报状态# = 《订单回报状态-已报》 then
    if (strcmp(v_order_rsp_status , "1")==0)
    {

        // if @订单方向# = 《订单方向-质押提交》 or  @订单方向# = 《订单方向-质押转回》 then
        if (v_order_dir == 21 ||  v_order_dir == 22)
        {

            // set @成交价格# = @订单价格#;
            v_strike_price = v_order_price;

            // set @成交数量# = @订单数量#;
            v_strike_qty = v_order_qty;
            //调用过程[事务_公共_公共接口_计算证券成交费用]
            //组织事务请求
            if(lpTSCall1Ans20)
            {
              lpTSCall1Ans20->FreeMsg();
              lpTSCall1Ans20=NULL;
            }
            lpTSCall1Req20=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
            lpTSCall1Req20->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req20->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req20->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req20->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req20->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req20->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req20->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req20->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req20->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpTSCall1Req20->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req20->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpTSCall1Req20->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req20->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpTSCall1Req20->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpTSCall1Req20->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpTSCall1Req20->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
            lpTSCall1Req20->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
            lpTSCall1Req20->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
            lpTSCall1Req20->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
            lpTSCall1Req20->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
            lpTSCall1Req20->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            glpTSSubcallSerives->SubCall(lpTSCall1Req20, &lpTSCall1Ans20, 5000);
            if(!lpTSCall1Ans20)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans20->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans20->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans20->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans20->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans20->GetString(LDBIZ_ERROR_INFO_STR));
            v_trade_commis = lpTSCall1Ans20->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
            v_all_fee = lpTSCall1Ans20->GetDouble(LDBIZ_ALL_FEE_FLOAT);
            v_stamp_tax = lpTSCall1Ans20->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
            v_trans_fee = lpTSCall1Ans20->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
            v_brkage_fee = lpTSCall1Ans20->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
            v_SEC_charges = lpTSCall1Ans20->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
            v_other_fee = lpTSCall1Ans20->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
            v_other_commis = lpTSCall1Ans20->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
            v_trade_tax = lpTSCall1Ans20->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
            v_trade_cost_fee = lpTSCall1Ans20->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
            v_trade_system_use_fee = lpTSCall1Ans20->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
            v_stock_settle_fee = lpTSCall1Ans20->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);


            // set @成交日期# = @申报日期#;
            v_strike_date = v_report_date;

            // set @成交时间# = @申报时间#;
            v_strike_time = v_report_time;

            // set @成交编号# = concat("P_", @订单序号#);
            snprintf(v_strike_no,sizeof(v_strike_no),"%s%ld","P_",v_order_id);

            // set @成交金额# = @成交价格# * @成交数量#;
            v_strike_amt = v_strike_price * v_strike_qty;

            // set @回报信息# = "订单回报触发质押成交。";
            strcpy(v_rsp_info,"订单回报触发质押成交。");

            // set @成交处理方式# = 《成交处理方式-分笔》;
            v_strike_deal_type = 1;

            // set @交易组成本金额# = 0;
            v_exgp_cost_amt = 0;

            // set @交易组利息成本金额# = 0;
            v_exgp_intrst_cost_amt = 0;

            // set @交易组当前数量# = 0;
            v_exgp_curr_qty = 0;

            // set @资产账户成本金额# = 0;
            v_asac_cost_amt = 0;

            // set @资产账户利息成本金额# = 0;
            v_asac_intrst_cost_amt = 0;

            // set @资产账户当前数量# = 0;
            v_asac_curr_qty = 0;

            // set @回报序号# = 0;
            v_rsp_id = 0;

            // set @当笔成交价格# = @成交价格#;
            v_curr_strike_price = v_strike_price;

            // set @当笔成交金额# = @成交金额#;
            v_curr_strike_amt = v_strike_amt;

            // set @当笔成交数量# = @成交数量#;
            v_curr_strike_qty = v_strike_qty;

            // set @组合代码# = " ";
            strcpy(v_combo_code," ");

            // set @撤单状态# = "0";
            strcpy(v_wtdraw_status,"0");
            //调用过程[事务_交易证券_报盘_处理成交回报]
            //组织事务请求
            if(lpTSCall1Ans21)
            {
              lpTSCall1Ans21->FreeMsg();
              lpTSCall1Ans21=NULL;
            }
            lpTSCall1Req21=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.21", 0);
            lpTSCall1Req21->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req21->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req21->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req21->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req21->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req21->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req21->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req21->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req21->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req21->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpTSCall1Req21->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpTSCall1Req21->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpTSCall1Req21->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
            lpTSCall1Req21->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
            lpTSCall1Req21->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
            lpTSCall1Req21->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpTSCall1Req21->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
            lpTSCall1Req21->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpTSCall1Req21->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
            lpTSCall1Req21->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
            lpTSCall1Req21->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
            lpTSCall1Req21->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpTSCall1Req21->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
            lpTSCall1Req21->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpTSCall1Req21->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpTSCall1Req21->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
            lpTSCall1Req21->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
            lpTSCall1Req21->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
            lpTSCall1Req21->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
            lpTSCall1Req21->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
            lpTSCall1Req21->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
            lpTSCall1Req21->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
            lpTSCall1Req21->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpTSCall1Req21->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpTSCall1Req21->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
            lpTSCall1Req21->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpTSCall1Req21->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpTSCall1Req21->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
            lpTSCall1Req21->SetInt64(LDBIZ_RSP_ID_INT64,v_rsp_id);
            lpTSCall1Req21->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req21->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
            lpTSCall1Req21->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
            lpTSCall1Req21->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
            lpTSCall1Req21->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpTSCall1Req21->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
            lpTSCall1Req21->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req21, &lpTSCall1Ans21, 5000);
            if(!lpTSCall1Ans21)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.21]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans21->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans21->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans21->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans21->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans21->GetString(LDBIZ_ERROR_INFO_STR));
            v_strike_id = lpTSCall1Ans21->GetInt64(LDBIZ_STRIKE_ID_INT64);
            v_co_no = lpTSCall1Ans21->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans21->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpTSCall1Ans21->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpTSCall1Ans21->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_stock_acco_no = lpTSCall1Ans21->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_stock_code_no = lpTSCall1Ans21->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            strcpy(v_target_code, lpTSCall1Ans21->GetString(LDBIZ_TARGET_CODE_STR));
            v_order_date = lpTSCall1Ans21->GetInt32(LDBIZ_ORDER_DATE_INT);
            v_order_batch_no = lpTSCall1Ans21->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
            v_report_time = lpTSCall1Ans21->GetInt32(LDBIZ_REPORT_TIME_INT);
            v_comm_date = lpTSCall1Ans21->GetInt32(LDBIZ_COMM_DATE_INT);
            v_comm_id = lpTSCall1Ans21->GetInt64(LDBIZ_COMM_ID_INT64);
            v_comm_batch_no = lpTSCall1Ans21->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
            v_comm_executor = lpTSCall1Ans21->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
            v_external_no = lpTSCall1Ans21->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
            v_busi_opor_no = lpTSCall1Ans21->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
            strcpy(v_order_oper_way, lpTSCall1Ans21->GetString(LDBIZ_ORDER_OPER_WAY_STR));
            v_total_strike_amt = lpTSCall1Ans21->GetDouble(LDBIZ_TOTAL_STRIKE_AMT_FLOAT);
            v_total_strike_qty = lpTSCall1Ans21->GetDouble(LDBIZ_TOTAL_STRIKE_QTY_FLOAT);
            v_cost_calc_type = lpTSCall1Ans21->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
            v_order_frozen_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
            v_order_frozen_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
            v_strike_bond_accr_intrst = lpTSCall1Ans21->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
            v_wtdraw_qty = lpTSCall1Ans21->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
            strcpy(v_order_status, lpTSCall1Ans21->GetString(LDBIZ_ORDER_STATUS_STR));
            v_update_times = lpTSCall1Ans21->GetInt32(LDBIZ_UPDATE_TIMES_INT);
            v_trade_occur_amt = lpTSCall1Ans21->GetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT);
            v_open_posi_date = lpTSCall1Ans21->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
            v_original_order_dir = lpTSCall1Ans21->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);


            // [主动推送][secu.order][证券主推_订单_订单主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
            lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
            lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
            lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
            lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
            lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
            lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
            lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
            lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
            lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
            lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
            lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
            lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
            lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
            lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
            lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
            lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
            lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
            lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
            lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


            // set @更新次数# = 1;
            v_update_times = 1;

            // set @记录有效标志# =《记录有效标志-有效》;
            v_record_valid_flag =1;

            // [主动推送][secu.rptstrike][证券主推_报盘_成交主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.33", 0);
            lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
            lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
            lpPubMsg->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
            lpPubMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
            lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
            lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
            lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
            lpPubMsg->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
            lpPubMsg->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
            lpPubMsg->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
            lpPubMsg->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
            lpPubMsg->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
            lpPubMsg->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
            lpPubMsg->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
            lpPubMsg->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
            lpPubMsg->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
            lpPubMsg->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
            lpPubMsg->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
            lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
            lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
            lpPubMsg->SetInt32(LDBIZ_RECORD_VALID_FLAG_INT,v_record_valid_flag);
            lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
            lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.rptstrike", lpPubMsg);


            // if  @订单批号# > 0 then
            if ( v_order_batch_no > 0)
            {
                //调用过程[事务_交易证券_主推接口_获取汇总订单成交信息]
                //组织事务请求
                if(lpTSCall1Ans22)
                {
                  lpTSCall1Ans22->FreeMsg();
                  lpTSCall1Ans22=NULL;
                }
                lpTSCall1Req22=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.21", 0);
                lpTSCall1Req22->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req22->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req22->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req22->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req22->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req22->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req22->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req22->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req22->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpTSCall1Req22->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
                lpTSCall1Req22->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
                lpTSCall1Req22->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
                lpTSCall1Req22->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
                glpTSSubcallSerives->SubCall(lpTSCall1Req22, &lpTSCall1Ans22, 5000);
                if(!lpTSCall1Ans22)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.21]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans22->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans22->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans22->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans22->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans22->GetString(LDBIZ_ERROR_INFO_STR));
                v_sum_order_row_id = lpTSCall1Ans22->GetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64);
                v_sum_order_opor_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT);
                v_sum_order_co_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_CO_NO_INT);
                v_sum_order_pd_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_PD_NO_INT);
                v_sum_order_exch_group_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT);
                v_sum_order_asset_acco_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT);
                v_sum_order_pass_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT);
                strcpy(v_sum_order_exch_crncy_type, lpTSCall1Ans22->GetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR));
                v_sum_order_stock_code_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT);
                v_sum_order_trade_code_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT);
                v_sum_order_target_code_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT);
                v_sum_order_external_no = lpTSCall1Ans22->GetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64);
                v_sum_order_date = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_DATE_INT);
                v_sum_order_batch_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT);
                v_sum_order_dir = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_DIR_INT);
                v_sum_order_price_type = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT);
                v_sum_order_price = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT);
                v_sum_order_qty = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT);
                strcpy(v_order_sum_status, lpTSCall1Ans22->GetString(LDBIZ_ORDER_SUM_STATUS_STR));
                v_sum_order_wtdraw_qty = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT);
                v_sum_order_waste_qty = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT);
                v_sum_order_strike_amt = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT);
                v_sum_order_strike_qty = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT);
                v_sum_order_strike_aver_price = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT);
                v_sum_order_net_price_flag = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT);
                v_sum_order_bond_accr_intrst = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT);
                v_sum_order_bond_rate_type = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT);
                v_sum_order_par_value = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT);
                v_sum_order_impawn_ratio = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT);
                strcpy(v_sum_order_oper_way, lpTSCall1Ans22->GetString(LDBIZ_SUM_ORDER_OPER_WAY_STR));
                v_sum_order_update_times = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT);
                v_sum_strike_row_id = lpTSCall1Ans22->GetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64);
                v_sum_strike_opor_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT);
                v_sum_strike_co_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT);
                v_sum_strike_pd_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT);
                v_sum_strike_exch_group_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT);
                v_sum_strike_asset_acco_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT);
                v_sum_strike_pass_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT);
                strcpy(v_sum_strike_out_acco, lpTSCall1Ans22->GetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR));
                v_sum_strike_stock_acco_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT);
                v_sum_strike_stock_code_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT);
                v_sum_strike_comm_id = lpTSCall1Ans22->GetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64);
                v_sum_strike_report_date = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT);
                strcpy(v_sum_strike_report_no, lpTSCall1Ans22->GetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR));
                v_sum_strike_order_date = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT);
                v_sum_strike_order_id = lpTSCall1Ans22->GetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64);
                v_sum_strike_order_dir = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT);
                v_sum_strike_order_price = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT);
                v_sum_strike_order_qty = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT);
                v_sum_strike_strike_qty = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT);
                v_sum_strike_strike_amt = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT);
                v_sum_strike_all_fee = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT);
                v_sum_strike_stamp_tax = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT);
                v_sum_strike_trans_fee = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT);
                v_sum_strike_brkage_fee = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT);
                v_sum_strike_SEC_charges = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT);
                v_sum_strike_other_fee = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT);
                v_sum_strike_trade_commis = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT);
                v_sum_strike_other_commis = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT);
                v_sum_trade_tax = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT);
                v_sum_trade_cost_fee = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT);
                v_sum_trade_system_use_fee = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT);
                v_sum_stock_settle_fee = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT);
                v_sum_strike_net_price_flag = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT);
                v_sum_strike_bond_accr_intrst = lpTSCall1Ans22->GetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT);
                v_sum_strike_bond_rate_type = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT);
                strcpy(v_sum_strike_order_oper_way, lpTSCall1Ans22->GetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR));
                v_sum_strike_exter_comm_flag = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT);
                v_sum_strike_update_times = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT);
                v_sum_strike_order_batch_no = lpTSCall1Ans22->GetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT);
                v_sum_external_no = lpTSCall1Ans22->GetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64);


                // [主动推送][secu.ordertotal][证券主推_订单_订单汇总主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.21", 0);
                lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64,v_sum_order_row_id);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT,v_sum_order_opor_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_CO_NO_INT,v_sum_order_co_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PD_NO_INT,v_sum_order_pd_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT,v_sum_order_exch_group_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT,v_sum_order_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT,v_sum_order_pass_no);
                lpPubMsg->SetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR,v_sum_order_exch_crncy_type);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT,v_sum_order_stock_code_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT,v_sum_order_trade_code_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT,v_sum_order_target_code_no);
                lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64,v_sum_order_external_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DATE_INT,v_sum_order_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT,v_sum_order_batch_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DIR_INT,v_sum_order_dir);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT,v_sum_order_price_type);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT,v_sum_order_price);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT,v_sum_order_qty);
                lpPubMsg->SetString(LDBIZ_ORDER_SUM_STATUS_STR,v_order_sum_status);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT,v_sum_order_wtdraw_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT,v_sum_order_waste_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT,v_sum_order_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT,v_sum_order_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT,v_sum_order_strike_aver_price);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT,v_sum_order_net_price_flag);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT,v_sum_order_bond_accr_intrst);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT,v_sum_order_bond_rate_type);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT,v_sum_order_par_value);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT,v_sum_order_impawn_ratio);
                lpPubMsg->SetString(LDBIZ_SUM_ORDER_OPER_WAY_STR,v_sum_order_oper_way);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT,v_sum_order_update_times);
                glpPubSub_Interface->PubTopics("secu.ordertotal", lpPubMsg);

            // end if;
            }


            // if @指令序号# > 0 then
            if (v_comm_id > 0)
            {
                //调用过程[事务_交易证券_主推接口_获取指令混合信息]
                //组织事务请求
                if(lpTSCall1Ans23)
                {
                  lpTSCall1Ans23->FreeMsg();
                  lpTSCall1Ans23=NULL;
                }
                lpTSCall1Req23=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
                lpTSCall1Req23->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req23->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req23->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req23->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req23->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req23->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req23->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req23->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req23->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
                glpTSSubcallSerives->SubCall(lpTSCall1Req23, &lpTSCall1Ans23, 5000);
                if(!lpTSCall1Ans23)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans23->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans23->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans23->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans23->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans23->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans23->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans23->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans23->GetString(LDBIZ_ERROR_INFO_STR));
                v_init_date = lpTSCall1Ans23->GetInt32(LDBIZ_INIT_DATE_INT);
                v_co_no = lpTSCall1Ans23->GetInt32(LDBIZ_CO_NO_INT);
                v_pd_no = lpTSCall1Ans23->GetInt32(LDBIZ_PD_NO_INT);
                v_exch_group_no = lpTSCall1Ans23->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
                v_asset_acco_no = lpTSCall1Ans23->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
                v_pass_no = lpTSCall1Ans23->GetInt32(LDBIZ_PASS_NO_INT);
                strcpy(v_out_acco, lpTSCall1Ans23->GetString(LDBIZ_OUT_ACCO_STR));
                strcpy(v_exch_crncy_type, lpTSCall1Ans23->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
                v_stock_acco_no = lpTSCall1Ans23->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
                v_stock_code_no = lpTSCall1Ans23->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
                v_stock_type = lpTSCall1Ans23->GetInt32(LDBIZ_STOCK_TYPE_INT);
                v_comm_date = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_DATE_INT);
                v_comm_time = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_TIME_INT);
                v_comm_batch_no = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
                v_comm_opor = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_OPOR_INT);
                v_comm_executor = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
                v_comm_dir = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_DIR_INT);
                v_comm_limit_price = lpTSCall1Ans23->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
                v_limit_actual_price = lpTSCall1Ans23->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
                v_comm_qty = lpTSCall1Ans23->GetDouble(LDBIZ_COMM_QTY_FLOAT);
                v_comm_amt = lpTSCall1Ans23->GetDouble(LDBIZ_COMM_AMT_FLOAT);
                v_order_qty = lpTSCall1Ans23->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
                v_comm_cancel_qty = lpTSCall1Ans23->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
                v_strike_amt = lpTSCall1Ans23->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
                v_strike_qty = lpTSCall1Ans23->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
                v_comm_frozen_amt = lpTSCall1Ans23->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
                v_comm_frozen_qty = lpTSCall1Ans23->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
                strcpy(v_strike_status, lpTSCall1Ans23->GetString(LDBIZ_STRIKE_STATUS_STR));
                strcpy(v_comm_status, lpTSCall1Ans23->GetString(LDBIZ_COMM_STATUS_STR));
                v_comm_begin_date = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
                v_comm_end_date = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_END_DATE_INT);
                v_comm_begin_time = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
                v_comm_end_time = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_END_TIME_INT);
                v_comm_comple_date = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
                v_comm_comple_time = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
                v_comm_appr_date = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
                v_comm_appr_time = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
                strcpy(v_comm_appr_status, lpTSCall1Ans23->GetString(LDBIZ_COMM_APPR_STATUS_STR));
                v_comm_appr_oper = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
                strcpy(v_comm_appr_remark, lpTSCall1Ans23->GetString(LDBIZ_COMM_APPR_REMARK_STR));
                v_basket_id = lpTSCall1Ans23->GetInt64(LDBIZ_BASKET_ID_INT64);
                v_net_price_flag = lpTSCall1Ans23->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
                v_bond_accr_intrst = lpTSCall1Ans23->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
                v_bond_rate_type = lpTSCall1Ans23->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
                strcpy(v_comm_oper_way, lpTSCall1Ans23->GetString(LDBIZ_COMM_OPER_WAY_STR));
                v_exter_comm_flag = lpTSCall1Ans23->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
                v_comm_comple_flag = lpTSCall1Ans23->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
                v_strategy_capt_qty = lpTSCall1Ans23->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
                v_strategy_order_qty = lpTSCall1Ans23->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
                strcpy(v_contra_no, lpTSCall1Ans23->GetString(LDBIZ_CONTRA_NO_STR));
                strcpy(v_comm_remark_info, lpTSCall1Ans23->GetString(LDBIZ_COMM_REMARK_INFO_STR));
                v_disp_opor = lpTSCall1Ans23->GetInt32(LDBIZ_DISP_OPOR_INT);
                v_disp_status = lpTSCall1Ans23->GetInt32(LDBIZ_DISP_STATUS_INT);
                v_read_flag = lpTSCall1Ans23->GetInt32(LDBIZ_READ_FLAG_INT);
                v_update_times = lpTSCall1Ans23->GetInt32(LDBIZ_UPDATE_TIMES_INT);
                v_sum_comm_row_id = lpTSCall1Ans23->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
                v_sum_comm_co_no = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
                v_sum_comm_pd_no = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
                v_sum_comm_exch_group_no = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
                v_sum_comm_asset_acco_no = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
                v_sum_comm_pass_no = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
                strcpy(v_sum_comm_out_acco, lpTSCall1Ans23->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
                strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans23->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
                v_sum_comm_stock_code_no = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
                v_sum_comm_date = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
                v_sum_comm_time = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
                v_sum_comm_batch_no = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
                v_sum_comm_opor = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
                v_sum_comm_executor = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
                v_sum_comm_dir = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
                v_sum_comm_limit_price = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
                v_sum_comm_qty = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
                v_sum_comm_amt = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
                v_sum_comm_order_qty = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
                v_sum_comm_cancel_qty = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
                v_sum_comm_await_cancel_qty = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
                v_sum_comm_strike_amt = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
                v_sum_comm_strike_qty = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
                strcpy(v_sum_comm_strike_status, lpTSCall1Ans23->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
                strcpy(v_comm_sum_status, lpTSCall1Ans23->GetString(LDBIZ_COMM_SUM_STATUS_STR));
                v_sum_comm_begin_date = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
                v_sum_comm_end_date = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
                v_sum_comm_begin_time = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
                v_sum_comm_end_time = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
                v_sum_comm_comple_date = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
                v_sum_comm_comple_time = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
                v_sum_comm_max_comm_comple_date = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
                v_sum_comm_max_comm_comple_time = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
                v_sum_comm_appr_date = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
                v_sum_comm_appr_time = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
                v_sum_comm_appr_qty = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
                strcpy(v_comm_sum_approve_status, lpTSCall1Ans23->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
                v_sum_comm_basket_id = lpTSCall1Ans23->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
                v_sum_comm_net_price_flag = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
                v_sum_comm_bond_accr_intrst = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
                v_sum_comm_bond_rate_type = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
                strcpy(v_sum_comm_oper_way, lpTSCall1Ans23->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
                v_sum_comm_exter_comm_flag = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
                v_sum_buy_order_qty = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
                v_sum_sell_order_qty = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
                v_sum_buy_comm_qty = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
                v_sum_sell_comm_qty = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
                v_sum_buy_strike_qty = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
                v_sum_sell_strike_qty = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
                v_sum_buy_strike_amt = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
                v_sum_sell_strike_amt = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
                v_sum_buy_comm_amt = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
                v_sum_sell_comm_amt = lpTSCall1Ans23->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
                strcpy(v_sum_comm_remark_info, lpTSCall1Ans23->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
                v_sum_comm_update_times = lpTSCall1Ans23->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
                strcpy(v_acco_concat_info, lpTSCall1Ans23->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


                // [主动推送][secu.comm][证券主推_指令_指令主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
                lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
                lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
                lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
                lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
                lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
                lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
                lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
                lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
                lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
                lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
                lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
                lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
                lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
                lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
                lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
                lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
                lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
                lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
                lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
                lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
                lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
                lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
                lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
                lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
                lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
                lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
                lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
                lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
                lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
                lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
                lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
                lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
                lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
                lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
                lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
                lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


                // if @指令批号# > 0 then
                if (v_comm_batch_no > 0)
                {

                    // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
                    lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
                    lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
                    lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
                    lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
                    lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
                    lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
                    lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
                    lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
                    lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
                    lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                    lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                    lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
                    glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

                // end if;
                }

            // end if;
            }

            //质押提交和质押转回，要推交易代码和标准券代码

            // if @订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》 then
            if (v_order_dir == 21 || v_order_dir == 22)
            {
              //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
              //组织事务请求
              if(lpTSCall1Ans24)
              {
                lpTSCall1Ans24->FreeMsg();
                lpTSCall1Ans24=NULL;
              }
              lpTSCall1Req24=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
              lpTSCall1Req24->SetInt32(LDTAG_PRIORITY, iPriority);
              lpTSCall1Req24->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
              lpTSCall1Req24->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
              lpTSCall1Req24->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
              lpTSCall1Req24->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
              lpTSCall1Req24->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
              lpTSCall1Req24->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
              lpTSCall1Req24->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
              lpTSCall1Req24->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpTSCall1Req24->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpTSCall1Req24->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpTSCall1Req24->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpTSCall1Req24->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpTSCall1Req24->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
              lpTSCall1Req24->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpTSCall1Req24->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
              glpTSSubcallSerives->SubCall(lpTSCall1Req24, &lpTSCall1Ans24, 5000);
              if(!lpTSCall1Ans24)  //  超时错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(lpTSCall1Ans24->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans24->GetInt32(LDTAG_ERRORNO));
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans24->GetString(LDTAG_ERRORINFO));
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(strcmp(lpTSCall1Ans24->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
              {
                  strcpy(v_error_code, lpTSCall1Ans24->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans24->GetString(LDBIZ_ERROR_INFO_STR));
                  iRet=-1;
                  goto END;
              }
              //获取输出参数值
              strcpy(v_error_code, lpTSCall1Ans24->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans24->GetString(LDBIZ_ERROR_INFO_STR));
              v_exgp_cash_id = lpTSCall1Ans24->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
              v_exgp_frozen_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
              v_exgp_unfroz_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
              v_exgp_comm_frozen_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
              v_exgp_comm_unfroz_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
              v_exgp_comm_capt_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
              v_exgp_comm_releas_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
              v_exgp_trade_frozen_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
              v_exgp_trade_unfroz_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
              v_exgp_trade_capt_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
              v_exgp_trade_releas_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
              v_exgp_strike_capt_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
              v_exgp_strike_releas_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
              v_exgp_cash_update_times = lpTSCall1Ans24->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
              v_exgp_posi_id = lpTSCall1Ans24->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
              v_exgp_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
              v_exgp_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
              v_exgp_comm_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
              v_exgp_comm_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
              v_exgp_comm_capt_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
              v_exgp_comm_releas_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
              v_exgp_trade_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
              v_exgp_trade_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
              v_exgp_trade_capt_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
              v_exgp_trade_releas_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
              v_exgp_strike_capt_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
              v_exgp_strike_releas_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
              v_exgp_strike_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
              v_exgp_strike_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
              v_exgp_realize_pandl = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
              v_exgp_cost_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
              v_exgp_intrst_cost_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
              v_exgp_intrst_pandl = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
              v_exgp_posi_update_times = lpTSCall1Ans24->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
              v_asac_cash_id = lpTSCall1Ans24->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
              v_asac_frozen_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
              v_asac_unfroz_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
              v_asac_comm_frozen_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
              v_asac_comm_unfroz_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
              v_asac_comm_capt_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
              v_asac_comm_releas_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
              v_asac_trade_frozen_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
              v_asac_trade_unfroz_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
              v_asac_trade_capt_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
              v_asac_trade_releas_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
              v_asac_strike_capt_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
              v_asac_strike_releas_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
              v_asac_cash_update_times = lpTSCall1Ans24->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
              v_asac_posi_id = lpTSCall1Ans24->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
              v_asac_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
              v_asac_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
              v_asac_comm_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
              v_asac_comm_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
              v_asac_comm_capt_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
              v_asac_comm_releas_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
              v_asac_trade_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
              v_asac_trade_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
              v_asac_trade_capt_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
              v_asac_trade_releas_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
              v_asac_strike_capt_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
              v_asac_strike_releas_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
              v_asac_strike_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
              v_asac_strike_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
              v_asac_realize_pandl = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
              v_asac_cost_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
              v_asac_intrst_cost_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
              v_asac_intrst_pandl = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
              v_asac_posi_update_times = lpTSCall1Ans24->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
              v_exgp_target_posi_id = lpTSCall1Ans24->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
              v_exgp_target_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
              v_exgp_target_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
              v_exgp_target_comm_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
              v_exgp_target_comm_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
              v_exgp_target_comm_capt_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
              v_exgp_target_comm_releas_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
              v_exgp_target_trade_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
              v_exgp_target_trade_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
              v_exgp_target_trade_capt_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
              v_exgp_target_trade_releas_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
              v_exgp_target_strike_capt_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
              v_exgp_target_strike_releas_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
              v_exgp_target_strike_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
              v_exgp_target_strike_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
              v_exgp_target_realize_pandl = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
              v_exgp_target_cost_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
              v_exgp_target_intrst_cost_amt = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
              v_exgp_target_intrst_pandl = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
              v_exgp_target_posi_update_times = lpTSCall1Ans24->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
              v_asac_target_posi_id = lpTSCall1Ans24->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
              v_asac_target_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
              v_asac_target_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
              v_asac_target_comm_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
              v_asac_target_comm_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
              v_asac_target_comm_capt_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
              v_asac_target_comm_releas_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
              v_asac_target_trade_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
              v_asac_target_trade_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
              v_asac_target_trade_capt_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
              v_asac_target_trade_releas_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
              v_asac_target_strike_capt_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
              v_asac_target_strike_releas_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
              v_asac_target_strike_frozen_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
              v_asac_target_strike_unfroz_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
              v_asac_target_realize_pandl = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
              v_asac_target_cost_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
              v_asac_target_intrst_cost_amt = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
              v_asac_target_intrst_pandl = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
              v_asac_target_posi_update_times = lpTSCall1Ans24->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
              v_exgp_put_impawn_qty = lpTSCall1Ans24->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
              v_asac_put_impawn_qty = lpTSCall1Ans24->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


              // set @证券代码编号# = @交易代码编号#;
              v_stock_code_no = v_trade_code_no;

              // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
              lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
              glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


              // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


              // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
              lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
              glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


              // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


              // set @证券代码编号# = @标的代码编号#;
              v_stock_code_no = v_target_code_no;

              // set @交易组提交质押数量# = 0;
              v_exgp_put_impawn_qty = 0;

              // set @资产账户提交质押数量# = 0;
              v_asac_put_impawn_qty = 0;

              // set @交易组持仓序号# = @交易组标的持仓序号#;
              v_exgp_posi_id = v_exgp_target_posi_id;

              // set @交易组冻结数量# = @交易组标的冻结数量#;
              v_exgp_frozen_qty = v_exgp_target_frozen_qty;

              // set @交易组解冻数量# = @交易组标的解冻数量#;
              v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

              // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
              v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

              // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
              v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

              // set @交易组指令占用数量# = @交易组标的指令占用数量#;
              v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

              // set @交易组指令释放数量# = @交易组标的指令释放数量#;
              v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

              // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
              v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

              // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
              v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

              // set @交易组交易占用数量# = @交易组标的交易占用数量#;
              v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

              // set @交易组交易释放数量# = @交易组标的交易释放数量#;
              v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

              // set @交易组成交占用数量# = @交易组标的成交占用数量#;
              v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

              // set @交易组成交释放数量# = @交易组标的成交释放数量#;
              v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

              // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
              v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

              // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
              v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

              // set @交易组实现盈亏# = @交易组标的实现盈亏#;
              v_exgp_realize_pandl = v_exgp_target_realize_pandl;

              // set @交易组成本金额# = @交易组标的成本金额#;
              v_exgp_cost_amt = v_exgp_target_cost_amt;

              // set @交易组利息成本金额# = @交易组标的利息成本金额#;
              v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

              // set @交易组利息收益# = @交易组标的利息收益#;
              v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

              // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
              v_exgp_posi_update_times = v_exgp_target_posi_update_times;

              // set @资产账户持仓序号# = @资产账户标的持仓序号#;
              v_asac_posi_id = v_asac_target_posi_id;

              // set @资产账户冻结数量# = @资产账户标的冻结数量#;
              v_asac_frozen_qty = v_asac_target_frozen_qty;

              // set @资产账户解冻数量# = @资产账户标的解冻数量#;
              v_asac_unfroz_qty = v_asac_target_unfroz_qty;

              // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
              v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

              // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
              v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

              // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
              v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

              // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
              v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

              // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
              v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

              // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
              v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

              // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
              v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

              // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
              v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

              // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
              v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

              // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
              v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

              // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
              v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

              // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
              v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

              // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
              v_asac_realize_pandl = v_asac_target_realize_pandl;

              // set @资产账户成本金额# = @资产账户标的成本金额#;
              v_asac_cost_amt = v_asac_target_cost_amt;

              // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
              v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

              // set @资产账户利息收益# = @资产账户标的利息收益#;
              v_asac_intrst_pandl = v_asac_target_intrst_pandl;

              // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
              v_asac_posi_update_times = v_asac_target_posi_update_times;

              // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


              // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


            }
            // else if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
            else if (v_order_dir == 3 || v_order_dir == 4)
            {

              // set @证券代码编号# = @标的代码编号#;
              v_stock_code_no = v_target_code_no;
              //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
              //组织事务请求
              if(lpTSCall1Ans25)
              {
                lpTSCall1Ans25->FreeMsg();
                lpTSCall1Ans25=NULL;
              }
              lpTSCall1Req25=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
              lpTSCall1Req25->SetInt32(LDTAG_PRIORITY, iPriority);
              lpTSCall1Req25->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
              lpTSCall1Req25->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
              lpTSCall1Req25->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
              lpTSCall1Req25->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
              lpTSCall1Req25->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
              lpTSCall1Req25->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
              lpTSCall1Req25->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
              lpTSCall1Req25->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpTSCall1Req25->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpTSCall1Req25->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpTSCall1Req25->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpTSCall1Req25->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpTSCall1Req25->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpTSCall1Req25->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              glpTSSubcallSerives->SubCall(lpTSCall1Req25, &lpTSCall1Ans25, 5000);
              if(!lpTSCall1Ans25)  //  超时错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(lpTSCall1Ans25->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans25->GetInt32(LDTAG_ERRORNO));
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans25->GetString(LDTAG_ERRORINFO));
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(strcmp(lpTSCall1Ans25->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
              {
                  strcpy(v_error_code, lpTSCall1Ans25->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans25->GetString(LDBIZ_ERROR_INFO_STR));
                  iRet=-1;
                  goto END;
              }
              //获取输出参数值
              strcpy(v_error_code, lpTSCall1Ans25->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans25->GetString(LDBIZ_ERROR_INFO_STR));
              v_exgp_cash_id = lpTSCall1Ans25->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
              v_exgp_frozen_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
              v_exgp_unfroz_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
              v_exgp_comm_frozen_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
              v_exgp_comm_unfroz_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
              v_exgp_comm_capt_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
              v_exgp_comm_releas_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
              v_exgp_trade_frozen_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
              v_exgp_trade_unfroz_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
              v_exgp_trade_capt_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
              v_exgp_trade_releas_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
              v_exgp_strike_capt_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
              v_exgp_strike_releas_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
              v_exgp_cash_update_times = lpTSCall1Ans25->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
              v_exgp_posi_id = lpTSCall1Ans25->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
              v_exgp_frozen_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
              v_exgp_unfroz_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
              v_exgp_comm_frozen_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
              v_exgp_comm_unfroz_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
              v_exgp_comm_capt_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
              v_exgp_comm_releas_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
              v_exgp_trade_frozen_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
              v_exgp_trade_unfroz_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
              v_exgp_trade_capt_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
              v_exgp_trade_releas_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
              v_exgp_strike_capt_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
              v_exgp_strike_releas_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
              v_exgp_strike_frozen_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
              v_exgp_strike_unfroz_qty = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
              v_exgp_realize_pandl = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
              v_exgp_cost_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
              v_exgp_intrst_cost_amt = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
              v_exgp_intrst_pandl = lpTSCall1Ans25->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
              v_exgp_posi_update_times = lpTSCall1Ans25->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
              v_asac_cash_id = lpTSCall1Ans25->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
              v_asac_frozen_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
              v_asac_unfroz_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
              v_asac_comm_frozen_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
              v_asac_comm_unfroz_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
              v_asac_comm_capt_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
              v_asac_comm_releas_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
              v_asac_trade_frozen_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
              v_asac_trade_unfroz_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
              v_asac_trade_capt_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
              v_asac_trade_releas_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
              v_asac_strike_capt_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
              v_asac_strike_releas_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
              v_asac_cash_update_times = lpTSCall1Ans25->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
              v_asac_posi_id = lpTSCall1Ans25->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
              v_asac_frozen_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
              v_asac_unfroz_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
              v_asac_comm_frozen_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
              v_asac_comm_unfroz_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
              v_asac_comm_capt_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
              v_asac_comm_releas_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
              v_asac_trade_frozen_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
              v_asac_trade_unfroz_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
              v_asac_trade_capt_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
              v_asac_trade_releas_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
              v_asac_strike_capt_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
              v_asac_strike_releas_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
              v_asac_strike_frozen_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
              v_asac_strike_unfroz_qty = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
              v_asac_realize_pandl = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
              v_asac_cost_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
              v_asac_intrst_cost_amt = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
              v_asac_intrst_pandl = lpTSCall1Ans25->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
              v_asac_posi_update_times = lpTSCall1Ans25->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


              // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
              lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
              glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


              // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


              // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
              lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
              glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


              // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


              // set @回购成交序号# = @成交序号#;
              v_repo_strike_id = v_strike_id;
              //调用过程[事务_交易证券_主推接口_获取债券回购信息]
              //组织事务请求
              if(lpTSCall1Ans26)
              {
                lpTSCall1Ans26->FreeMsg();
                lpTSCall1Ans26=NULL;
              }
              lpTSCall1Req26=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.30", 0);
              lpTSCall1Req26->SetInt32(LDTAG_PRIORITY, iPriority);
              lpTSCall1Req26->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
              lpTSCall1Req26->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
              lpTSCall1Req26->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
              lpTSCall1Req26->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
              lpTSCall1Req26->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
              lpTSCall1Req26->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
              lpTSCall1Req26->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
              lpTSCall1Req26->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
              glpTSSubcallSerives->SubCall(lpTSCall1Req26, &lpTSCall1Ans26, 5000);
              if(!lpTSCall1Ans26)  //  超时错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.30]subcall timed out!");
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(lpTSCall1Ans26->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans26->GetInt32(LDTAG_ERRORNO));
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans26->GetString(LDTAG_ERRORINFO));
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(strcmp(lpTSCall1Ans26->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
              {
                  strcpy(v_error_code, lpTSCall1Ans26->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans26->GetString(LDBIZ_ERROR_INFO_STR));
                  iRet=-1;
                  goto END;
              }
              //获取输出参数值
              strcpy(v_error_code, lpTSCall1Ans26->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans26->GetString(LDBIZ_ERROR_INFO_STR));
              v_init_date = lpTSCall1Ans26->GetInt32(LDBIZ_INIT_DATE_INT);
              v_co_no = lpTSCall1Ans26->GetInt32(LDBIZ_CO_NO_INT);
              v_pd_no = lpTSCall1Ans26->GetInt32(LDBIZ_PD_NO_INT);
              v_exch_group_no = lpTSCall1Ans26->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
              v_asset_acco_no = lpTSCall1Ans26->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
              strcpy(v_crncy_type, lpTSCall1Ans26->GetString(LDBIZ_CRNCY_TYPE_STR));
              strcpy(v_exch_crncy_type, lpTSCall1Ans26->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
              v_exch_rate = lpTSCall1Ans26->GetDouble(LDBIZ_EXCH_RATE_FLOAT);
              v_exch_no = lpTSCall1Ans26->GetInt32(LDBIZ_EXCH_NO_INT);
              v_stock_acco_no = lpTSCall1Ans26->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
              v_stock_code_no = lpTSCall1Ans26->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
              v_target_code_no = lpTSCall1Ans26->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
              v_comm_id = lpTSCall1Ans26->GetInt64(LDBIZ_COMM_ID_INT64);
              v_order_dir = lpTSCall1Ans26->GetInt32(LDBIZ_ORDER_DIR_INT);
              v_repo_qty = lpTSCall1Ans26->GetDouble(LDBIZ_REPO_QTY_FLOAT);
              v_repo_amt = lpTSCall1Ans26->GetDouble(LDBIZ_REPO_AMT_FLOAT);
              v_repo_rate = lpTSCall1Ans26->GetDouble(LDBIZ_REPO_RATE_FLOAT);
              v_repo_trade_date = lpTSCall1Ans26->GetInt32(LDBIZ_REPO_TRADE_DATE_INT);
              v_repo_order_id = lpTSCall1Ans26->GetInt64(LDBIZ_REPO_ORDER_ID_INT64);
              v_repo_days = lpTSCall1Ans26->GetInt32(LDBIZ_REPO_DAYS_INT);
              v_repo_cale_days = lpTSCall1Ans26->GetInt32(LDBIZ_REPO_CALE_DAYS_INT);
              v_repo_back_date = lpTSCall1Ans26->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
              v_repo_back_amt = lpTSCall1Ans26->GetDouble(LDBIZ_REPO_BACK_AMT_FLOAT);
              v_repo_back_intrst = lpTSCall1Ans26->GetDouble(LDBIZ_REPO_BACK_INTRST_FLOAT);
              v_repo_back_trade_date = lpTSCall1Ans26->GetInt32(LDBIZ_REPO_BACK_TRADE_DATE_INT);
              strcpy(v_repo_status, lpTSCall1Ans26->GetString(LDBIZ_REPO_STATUS_STR));
              v_bond_repo_id = lpTSCall1Ans26->GetInt64(LDBIZ_BOND_REPO_ID_INT64);
              v_update_times = lpTSCall1Ans26->GetInt32(LDBIZ_UPDATE_TIMES_INT);


              // [主动推送][secu.exgpbondrepo][证券主推_持仓_交易组债券回购主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.82", 0);
              lpPubMsg->SetInt64(LDBIZ_BOND_REPO_ID_INT64,v_bond_repo_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_EXCH_RATE_FLOAT,v_exch_rate);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
              lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
              lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
              lpPubMsg->SetDouble(LDBIZ_REPO_QTY_FLOAT,v_repo_qty);
              lpPubMsg->SetDouble(LDBIZ_REPO_AMT_FLOAT,v_repo_amt);
              lpPubMsg->SetDouble(LDBIZ_REPO_RATE_FLOAT,v_repo_rate);
              lpPubMsg->SetInt32(LDBIZ_REPO_TRADE_DATE_INT,v_repo_trade_date);
              lpPubMsg->SetInt64(LDBIZ_REPO_ORDER_ID_INT64,v_repo_order_id);
              lpPubMsg->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
              lpPubMsg->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
              lpPubMsg->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
              lpPubMsg->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
              lpPubMsg->SetDouble(LDBIZ_REPO_BACK_AMT_FLOAT,v_repo_back_amt);
              lpPubMsg->SetDouble(LDBIZ_REPO_BACK_INTRST_FLOAT,v_repo_back_intrst);
              lpPubMsg->SetInt32(LDBIZ_REPO_BACK_TRADE_DATE_INT,v_repo_back_trade_date);
              lpPubMsg->SetString(LDBIZ_REPO_STATUS_STR,v_repo_status);
              lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
              glpPubSub_Interface->PubTopics("secu.exgpbondrepo", lpPubMsg);

            }
            // else
            else
            {

              //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
              //组织事务请求
              if(lpTSCall1Ans27)
              {
                lpTSCall1Ans27->FreeMsg();
                lpTSCall1Ans27=NULL;
              }
              lpTSCall1Req27=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
              lpTSCall1Req27->SetInt32(LDTAG_PRIORITY, iPriority);
              lpTSCall1Req27->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
              lpTSCall1Req27->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
              lpTSCall1Req27->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
              lpTSCall1Req27->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
              lpTSCall1Req27->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
              lpTSCall1Req27->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
              lpTSCall1Req27->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
              lpTSCall1Req27->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpTSCall1Req27->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpTSCall1Req27->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpTSCall1Req27->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpTSCall1Req27->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpTSCall1Req27->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpTSCall1Req27->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              glpTSSubcallSerives->SubCall(lpTSCall1Req27, &lpTSCall1Ans27, 5000);
              if(!lpTSCall1Ans27)  //  超时错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(lpTSCall1Ans27->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans27->GetInt32(LDTAG_ERRORNO));
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans27->GetString(LDTAG_ERRORINFO));
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(strcmp(lpTSCall1Ans27->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
              {
                  strcpy(v_error_code, lpTSCall1Ans27->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans27->GetString(LDBIZ_ERROR_INFO_STR));
                  iRet=-1;
                  goto END;
              }
              //获取输出参数值
              strcpy(v_error_code, lpTSCall1Ans27->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans27->GetString(LDBIZ_ERROR_INFO_STR));
              v_exgp_cash_id = lpTSCall1Ans27->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
              v_exgp_frozen_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
              v_exgp_unfroz_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
              v_exgp_comm_frozen_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
              v_exgp_comm_unfroz_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
              v_exgp_comm_capt_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
              v_exgp_comm_releas_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
              v_exgp_trade_frozen_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
              v_exgp_trade_unfroz_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
              v_exgp_trade_capt_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
              v_exgp_trade_releas_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
              v_exgp_strike_capt_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
              v_exgp_strike_releas_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
              v_exgp_cash_update_times = lpTSCall1Ans27->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
              v_exgp_posi_id = lpTSCall1Ans27->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
              v_exgp_frozen_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
              v_exgp_unfroz_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
              v_exgp_comm_frozen_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
              v_exgp_comm_unfroz_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
              v_exgp_comm_capt_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
              v_exgp_comm_releas_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
              v_exgp_trade_frozen_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
              v_exgp_trade_unfroz_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
              v_exgp_trade_capt_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
              v_exgp_trade_releas_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
              v_exgp_strike_capt_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
              v_exgp_strike_releas_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
              v_exgp_strike_frozen_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
              v_exgp_strike_unfroz_qty = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
              v_exgp_realize_pandl = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
              v_exgp_cost_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
              v_exgp_intrst_cost_amt = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
              v_exgp_intrst_pandl = lpTSCall1Ans27->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
              v_exgp_posi_update_times = lpTSCall1Ans27->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
              v_asac_cash_id = lpTSCall1Ans27->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
              v_asac_frozen_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
              v_asac_unfroz_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
              v_asac_comm_frozen_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
              v_asac_comm_unfroz_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
              v_asac_comm_capt_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
              v_asac_comm_releas_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
              v_asac_trade_frozen_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
              v_asac_trade_unfroz_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
              v_asac_trade_capt_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
              v_asac_trade_releas_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
              v_asac_strike_capt_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
              v_asac_strike_releas_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
              v_asac_cash_update_times = lpTSCall1Ans27->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
              v_asac_posi_id = lpTSCall1Ans27->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
              v_asac_frozen_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
              v_asac_unfroz_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
              v_asac_comm_frozen_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
              v_asac_comm_unfroz_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
              v_asac_comm_capt_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
              v_asac_comm_releas_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
              v_asac_trade_frozen_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
              v_asac_trade_unfroz_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
              v_asac_trade_capt_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
              v_asac_trade_releas_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
              v_asac_strike_capt_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
              v_asac_strike_releas_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
              v_asac_strike_frozen_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
              v_asac_strike_unfroz_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
              v_asac_realize_pandl = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
              v_asac_cost_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
              v_asac_intrst_cost_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
              v_asac_intrst_pandl = lpTSCall1Ans27->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
              v_asac_posi_update_times = lpTSCall1Ans27->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


              // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
              lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
              glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


              // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


              // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
              lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
              glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


              // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

            // end if;
            }

        // end if;
        }

    // end if;
    }


END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans28)
        {
          lpTSCall1Ans28->FreeMsg();
          lpTSCall1Ans28=NULL;
        }
        lpTSCall1Req28=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req28->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req28->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req28->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req28->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req28->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req28->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req28->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req28->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req28->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req28->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req28, &lpTSCall1Ans28, 5000);
        if (lpTSCall1Ans28)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans28->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans28->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans28->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans28->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans28->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
    lpOutBizMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpOutBizMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpOutBizMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpOutBizMsg->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpOutBizMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpOutBizMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpOutBizMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpOutBizMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpOutBizMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpOutBizMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpOutBizMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpOutBizMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpOutBizMsg->SetString(LDBIZ_ORDER_RSP_STATUS_STR,v_order_rsp_status);
    lpOutBizMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpOutBizMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    if(lpTSCall1Ans3)
        lpTSCall1Ans3->FreeMsg();
    if(lpTSCall1Ans4)
        lpTSCall1Ans4->FreeMsg();
    if(lpTSCall1Ans5)
        lpTSCall1Ans5->FreeMsg();
    if(lpTSCall1Ans6)
        lpTSCall1Ans6->FreeMsg();
    if(lpTSCall1Ans7)
        lpTSCall1Ans7->FreeMsg();
    if(lpTSCall1Ans8)
        lpTSCall1Ans8->FreeMsg();
    if(lpTSCall1Ans9)
        lpTSCall1Ans9->FreeMsg();
    if(lpTSCall1Ans10)
        lpTSCall1Ans10->FreeMsg();
    if(lpTSCall1Ans11)
        lpTSCall1Ans11->FreeMsg();
    if(lpTSCall1Ans12)
        lpTSCall1Ans12->FreeMsg();
    if(lpTSCall1Ans13)
        lpTSCall1Ans13->FreeMsg();
    if(lpTSCall1Ans14)
        lpTSCall1Ans14->FreeMsg();
    if(lpTSCall1Ans15)
        lpTSCall1Ans15->FreeMsg();
    if(lpTSCall1Ans16)
        lpTSCall1Ans16->FreeMsg();
    if(lpTSCall1Ans17)
        lpTSCall1Ans17->FreeMsg();
    if(lpTSCall1Ans18)
        lpTSCall1Ans18->FreeMsg();
    if(lpTSCall1Ans19)
        lpTSCall1Ans19->FreeMsg();
    if(lpTSCall1Ans20)
        lpTSCall1Ans20->FreeMsg();
    if(lpTSCall1Ans21)
        lpTSCall1Ans21->FreeMsg();
    if(lpTSCall1Ans22)
        lpTSCall1Ans22->FreeMsg();
    if(lpTSCall1Ans23)
        lpTSCall1Ans23->FreeMsg();
    if(lpTSCall1Ans24)
        lpTSCall1Ans24->FreeMsg();
    if(lpTSCall1Ans25)
        lpTSCall1Ans25->FreeMsg();
    if(lpTSCall1Ans26)
        lpTSCall1Ans26->FreeMsg();
    if(lpTSCall1Ans27)
        lpTSCall1Ans27->FreeMsg();
    if(lpTSCall1Ans28)
        lpTSCall1Ans28->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_处理撤单回报
int LD_CALL_MODE fnFunc1(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    char v_stock_code[7];
    int v_report_date;
    int v_report_time;
    char v_report_no[33];
    double v_wtdraw_qty;
    char v_rsp_status[3];
    char v_rsp_info[256];
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_pd_no;
    int v_exch_group_no;
    int v_asset_acco_no;
    int64 v_order_id;
    int64 v_external_no;
    int v_order_batch_no;
    char v_order_status[3];
    char v_wtdraw_status[3];
    int v_init_date;
    char v_co_busi_config_str[65];
    int v_tmp_opor_no;
    int v_co_no;
    int v_stock_acco_no;
    char v_stock_acco[17];
    int v_stock_code_no;
    int v_stock_type;
    int v_asset_type;
    int64 v_comm_id;
    int v_order_date;
    int v_order_time;
    int v_order_dir;
    double v_order_price;
    double v_order_qty;
    double v_order_frozen_amt;
    int v_price_type;
    int v_busi_opor_no;
    char v_order_oper_way[3];
    char v_combo_code[33];
    int64 v_combo_posi_id;
    char v_mac_addr[33];
    char v_ip_addr[33];
    int64 v_strategy_id;
    char v_target_stock_code[7];
    int v_target_stock_code_no;
    char v_contra_no[33];
    int v_asset_acco_type;
    int v_exist_debt_flag;
    int64 v_ori_order_id;
    double v_tmp_order_qty;
    char v_sys_config_str[65];
    char v_crncy_type[4];
    char v_exch_crncy_type[4];
    double v_buy_ref_rate;
    double v_sell_ref_rate;
    int v_capit_reback_days;
    int v_posi_reback_days;
    int v_trade_code_no;
    int v_target_code_no;
    int v_net_price_flag;
    double v_bond_accr_intrst;
    int v_bond_rate_type;
    double v_par_value;
    double v_impawn_ratio;
    int v_min_unit;
    int v_fina_return_type;
    int v_sell_auto_back_debt;
    int v_comm_date;
    int v_comm_batch_no;
    int v_comm_executor;
    int v_comm_opor;
    int v_intrst_days;
    double v_strike_qty;
    double v_strike_amt;
    double v_strike_bond_accr_intrst;
    double v_order_frozen_qty;
    char v_old_order_status[3];
    int v_open_posi_date;
    int v_update_times;
    int v_debt_type;
    double v_curr_strike_price;
    double v_curr_strike_amt;
    double v_curr_strike_qty;
    int64 v_strike_id;
    double v_all_fee;
    int64 v_row_id;
    double v_source_stock_qty;
    double v_single_limit_qty;
    double v_assigned_qty;
    double v_trade_releas_qty;
    double v_trade_capt_qty;
    double v_strike_releas_qty;
    double v_strike_capt_qty;
    double v_over_night_pandl;
    double v_sum_realize_pandl;
    double v_total_open_posi_fee;
    double v_total_close_posi_fee;
    double v_out_order_releas_qty;
    double v_out_order_capt_qty;
    double v_out_strike_releas_qty;
    double v_out_strike_capt_qty;
    char v_remark_info[256];
    double v_buy_avail_qty;
    double v_sell_avail_qty;
    double v_posi_qty;
    double v_today_trade_fee;
    double v_today_pandl;
    double v_diff_qty;
    double v_over_night_trade_buy_qty;
    double v_over_night_trade_sell_qty;
    double v_over_night_strike_sell_qty;
    double v_over_night_sumtrd_sell_qty;
    double v_over_night_sumstk_sell_qty;
    double v_trade_amt;
    double v_trade_qty;
    double v_realize_pandl;
    double v_yield_rate;
    double v_avail_amt;
    double v_begin_amt;
    double v_curr_amt;
    double v_frozen_amt;
    double v_unfroz_amt;
    double v_comm_frozen_amt;
    double v_comm_unfroz_amt;
    double v_comm_capt_amt;
    double v_comm_releas_amt;
    double v_trade_frozen_amt;
    double v_trade_unfroz_amt;
    double v_trade_capt_amt;
    double v_trade_releas_amt;
    double v_strike_capt_amt;
    double v_strike_releas_amt;
    int64 v_sum_order_row_id;
    int v_sum_order_opor_no;
    int v_sum_order_co_no;
    int v_sum_order_pd_no;
    int v_sum_order_exch_group_no;
    int v_sum_order_asset_acco_no;
    int v_sum_order_pass_no;
    char v_sum_order_exch_crncy_type[4];
    int v_sum_order_stock_code_no;
    int v_sum_order_trade_code_no;
    int v_sum_order_target_code_no;
    int64 v_sum_order_external_no;
    int v_sum_order_date;
    int v_sum_order_batch_no;
    int v_sum_order_dir;
    int v_sum_order_price_type;
    double v_sum_order_price;
    double v_sum_order_qty;
    char v_order_sum_status[3];
    double v_sum_order_wtdraw_qty;
    double v_sum_order_waste_qty;
    double v_sum_order_strike_amt;
    double v_sum_order_strike_qty;
    double v_sum_order_strike_aver_price;
    int v_sum_order_net_price_flag;
    double v_sum_order_bond_accr_intrst;
    int v_sum_order_bond_rate_type;
    double v_sum_order_par_value;
    double v_sum_order_impawn_ratio;
    char v_sum_order_oper_way[3];
    int v_sum_order_update_times;
    int64 v_sum_strike_row_id;
    int v_sum_strike_opor_no;
    int v_sum_strike_co_no;
    int v_sum_strike_pd_no;
    int v_sum_strike_exch_group_no;
    int v_sum_strike_asset_acco_no;
    int v_sum_strike_pass_no;
    char v_sum_strike_out_acco[33];
    int v_sum_strike_stock_acco_no;
    int v_sum_strike_stock_code_no;
    int64 v_sum_strike_comm_id;
    int v_sum_strike_report_date;
    char v_sum_strike_report_no[33];
    int v_sum_strike_order_date;
    int64 v_sum_strike_order_id;
    int v_sum_strike_order_dir;
    double v_sum_strike_order_price;
    double v_sum_strike_order_qty;
    double v_sum_strike_strike_qty;
    double v_sum_strike_strike_amt;
    double v_sum_strike_all_fee;
    double v_sum_strike_stamp_tax;
    double v_sum_strike_trans_fee;
    double v_sum_strike_brkage_fee;
    double v_sum_strike_SEC_charges;
    double v_sum_strike_other_fee;
    double v_sum_strike_trade_commis;
    double v_sum_strike_other_commis;
    double v_sum_trade_tax;
    double v_sum_trade_cost_fee;
    double v_sum_trade_system_use_fee;
    double v_sum_stock_settle_fee;
    int v_sum_strike_net_price_flag;
    double v_sum_strike_bond_accr_intrst;
    int v_sum_strike_bond_rate_type;
    char v_sum_strike_order_oper_way[3];
    int v_sum_strike_exter_comm_flag;
    int v_sum_strike_update_times;
    int v_sum_strike_order_batch_no;
    int64 v_sum_external_no;
    int v_comm_time;
    int v_comm_dir;
    double v_comm_limit_price;
    double v_limit_actual_price;
    double v_comm_qty;
    double v_comm_amt;
    double v_comm_cancel_qty;
    double v_comm_frozen_qty;
    char v_strike_status[3];
    char v_comm_status[3];
    int v_comm_begin_date;
    int v_comm_end_date;
    int v_comm_begin_time;
    int v_comm_end_time;
    int v_comm_comple_date;
    int v_comm_comple_time;
    int v_comm_appr_date;
    int v_comm_appr_time;
    char v_comm_appr_status[3];
    int v_comm_appr_oper;
    char v_comm_appr_remark[256];
    int64 v_basket_id;
    char v_comm_oper_way[3];
    int v_exter_comm_flag;
    int v_comm_comple_flag;
    double v_strategy_capt_qty;
    double v_strategy_order_qty;
    char v_comm_remark_info[1025];
    int v_disp_opor;
    int v_disp_status;
    int v_read_flag;
    int64 v_sum_comm_row_id;
    int v_sum_comm_co_no;
    int v_sum_comm_pd_no;
    int v_sum_comm_exch_group_no;
    int v_sum_comm_asset_acco_no;
    int v_sum_comm_pass_no;
    char v_sum_comm_out_acco[33];
    char v_sum_comm_exch_crncy_type[4];
    int v_sum_comm_stock_code_no;
    int v_sum_comm_date;
    int v_sum_comm_time;
    int v_sum_comm_batch_no;
    int v_sum_comm_opor;
    int v_sum_comm_executor;
    int v_sum_comm_dir;
    double v_sum_comm_limit_price;
    double v_sum_comm_qty;
    double v_sum_comm_amt;
    double v_sum_comm_order_qty;
    double v_sum_comm_cancel_qty;
    double v_sum_comm_await_cancel_qty;
    double v_sum_comm_strike_amt;
    double v_sum_comm_strike_qty;
    char v_sum_comm_strike_status[3];
    char v_comm_sum_status[3];
    int v_sum_comm_begin_date;
    int v_sum_comm_end_date;
    int v_sum_comm_begin_time;
    int v_sum_comm_end_time;
    int v_sum_comm_comple_date;
    int v_sum_comm_comple_time;
    int v_sum_comm_max_comm_comple_date;
    int v_sum_comm_max_comm_comple_time;
    int v_sum_comm_appr_date;
    int v_sum_comm_appr_time;
    double v_sum_comm_appr_qty;
    char v_comm_sum_approve_status[3];
    int64 v_sum_comm_basket_id;
    int v_sum_comm_net_price_flag;
    double v_sum_comm_bond_accr_intrst;
    int v_sum_comm_bond_rate_type;
    char v_sum_comm_oper_way[3];
    int v_sum_comm_exter_comm_flag;
    double v_sum_buy_order_qty;
    double v_sum_sell_order_qty;
    double v_sum_buy_comm_qty;
    double v_sum_sell_comm_qty;
    double v_sum_buy_strike_qty;
    double v_sum_sell_strike_qty;
    double v_sum_buy_strike_amt;
    double v_sum_sell_strike_amt;
    double v_sum_buy_comm_amt;
    double v_sum_sell_comm_amt;
    char v_sum_comm_remark_info[256];
    int v_sum_comm_update_times;
    char v_acco_concat_info[4097];
    double v_curr_qty;
    double v_frozen_qty;
    double v_unfroz_qty;
    double v_pre_settle_qty;
    double v_trade_frozen_qty;
    double v_trade_unfroz_qty;
    double v_strike_frozen_qty;
    double v_strike_unfroz_qty;
    double v_cost_amt;
    double v_intrst_cost_amt;
    double v_intrst_pandl;
    double v_combo_copies;
    char v_combo_status[3];
    double v_combo_cost;
    double v_combo_market_value;
    int64 v_exgp_cash_id;
    double v_exgp_frozen_amt;
    double v_exgp_unfroz_amt;
    double v_exgp_comm_frozen_amt;
    double v_exgp_comm_unfroz_amt;
    double v_exgp_comm_capt_amt;
    double v_exgp_comm_releas_amt;
    double v_exgp_trade_frozen_amt;
    double v_exgp_trade_unfroz_amt;
    double v_exgp_trade_capt_amt;
    double v_exgp_trade_releas_amt;
    double v_exgp_strike_capt_amt;
    double v_exgp_strike_releas_amt;
    int v_exgp_cash_update_times;
    int64 v_exgp_posi_id;
    double v_exgp_frozen_qty;
    double v_exgp_unfroz_qty;
    double v_exgp_comm_frozen_qty;
    double v_exgp_comm_unfroz_qty;
    double v_exgp_comm_capt_qty;
    double v_exgp_comm_releas_qty;
    double v_exgp_trade_frozen_qty;
    double v_exgp_trade_unfroz_qty;
    double v_exgp_trade_capt_qty;
    double v_exgp_trade_releas_qty;
    double v_exgp_strike_capt_qty;
    double v_exgp_strike_releas_qty;
    double v_exgp_strike_frozen_qty;
    double v_exgp_strike_unfroz_qty;
    double v_exgp_realize_pandl;
    double v_exgp_cost_amt;
    double v_exgp_intrst_cost_amt;
    double v_exgp_intrst_pandl;
    int v_exgp_posi_update_times;
    int64 v_asac_cash_id;
    double v_asac_frozen_amt;
    double v_asac_unfroz_amt;
    double v_asac_comm_frozen_amt;
    double v_asac_comm_unfroz_amt;
    double v_asac_comm_capt_amt;
    double v_asac_comm_releas_amt;
    double v_asac_trade_frozen_amt;
    double v_asac_trade_unfroz_amt;
    double v_asac_trade_capt_amt;
    double v_asac_trade_releas_amt;
    double v_asac_strike_capt_amt;
    double v_asac_strike_releas_amt;
    int v_asac_cash_update_times;
    int64 v_asac_posi_id;
    double v_asac_frozen_qty;
    double v_asac_unfroz_qty;
    double v_asac_comm_frozen_qty;
    double v_asac_comm_unfroz_qty;
    double v_asac_comm_capt_qty;
    double v_asac_comm_releas_qty;
    double v_asac_trade_frozen_qty;
    double v_asac_trade_unfroz_qty;
    double v_asac_trade_capt_qty;
    double v_asac_trade_releas_qty;
    double v_asac_strike_capt_qty;
    double v_asac_strike_releas_qty;
    double v_asac_strike_frozen_qty;
    double v_asac_strike_unfroz_qty;
    double v_asac_realize_pandl;
    double v_asac_cost_amt;
    double v_asac_intrst_cost_amt;
    double v_asac_intrst_pandl;
    int v_asac_posi_update_times;
    int64 v_exgp_target_posi_id;
    double v_exgp_target_frozen_qty;
    double v_exgp_target_unfroz_qty;
    double v_exgp_target_comm_frozen_qty;
    double v_exgp_target_comm_unfroz_qty;
    double v_exgp_target_comm_capt_qty;
    double v_exgp_target_comm_releas_qty;
    double v_exgp_target_trade_frozen_qty;
    double v_exgp_target_trade_unfroz_qty;
    double v_exgp_target_trade_capt_qty;
    double v_exgp_target_trade_releas_qty;
    double v_exgp_target_strike_capt_qty;
    double v_exgp_target_strike_releas_qty;
    double v_exgp_target_strike_frozen_qty;
    double v_exgp_target_strike_unfroz_qty;
    double v_exgp_target_realize_pandl;
    double v_exgp_target_cost_amt;
    double v_exgp_target_intrst_cost_amt;
    double v_exgp_target_intrst_pandl;
    int v_exgp_target_posi_update_times;
    int64 v_asac_target_posi_id;
    double v_asac_target_frozen_qty;
    double v_asac_target_unfroz_qty;
    double v_asac_target_comm_frozen_qty;
    double v_asac_target_comm_unfroz_qty;
    double v_asac_target_comm_capt_qty;
    double v_asac_target_comm_releas_qty;
    double v_asac_target_trade_frozen_qty;
    double v_asac_target_trade_unfroz_qty;
    double v_asac_target_trade_capt_qty;
    double v_asac_target_trade_releas_qty;
    double v_asac_target_strike_capt_qty;
    double v_asac_target_strike_releas_qty;
    double v_asac_target_strike_frozen_qty;
    double v_asac_target_strike_unfroz_qty;
    double v_asac_target_realize_pandl;
    double v_asac_target_cost_amt;
    double v_asac_target_intrst_cost_amt;
    double v_asac_target_intrst_pandl;
    int v_asac_target_posi_update_times;
    double v_exgp_put_impawn_qty;
    double v_asac_put_impawn_qty;
    int v_invest_type;
    double v_debt_fina_buy_strike_qty;
    double v_fina_return_strike_qty;
    double v_debt_loan_sell_strike_qty;
    double v_loan_return_strike_qty;
    double v_debt_fina_buy_order_qty;
    double v_fina_return_order_qty;
    double v_debt_loan_sell_order_qty;
    double v_loan_return_order_qty;
    double v_debt_fina_buy_comm_qty;
    double v_fina_return_comm_qty;
    double v_debt_loan_sell_comm_qty;
    double v_loan_return_comm_qty;
    double v_debt_fina_buy_strike_amt;
    double v_fina_return_strike_amt;
    double v_debt_loan_sell_strike_amt;
    double v_loan_return_strike_amt;
    double v_debt_fina_buy_order_amt;
    double v_fina_return_order_amt;
    double v_debt_loan_sell_order_amt;
    double v_loan_return_order_amt;
    double v_debt_fina_buy_comm_amt;
    double v_fina_return_comm_amt;
    double v_debt_loan_sell_comm_amt;
    double v_loan_return_comm_amt;
    double v_debt_strike_fee;
    double v_return_strike_fee;
    double v_debt_interest;
    double v_return_interest_amt;
    int64 v_modi_order_id;
    int v_modi_order_date;
    int v_modi_order_time;
    int v_modi_batch_no;
    double v_modi_order_price;
    double v_modi_order_qty;
    int v_modi_price_type;
    char v_exgp_busi_config_str[65];
    char v_target_code[7];
    int v_target_code_stock_type;
    int v_target_code_asset_type;
    char v_trade_code[7];
    int v_trade_code_stock_type;
    int v_trade_code_asset_type;
    double v_up_limit_price;
    double v_down_limit_price;
    double v_last_price;
    char v_busi_config_str[65];
    char v_busi_ctrl_str[65];
    char v_asac_busi_config_str[65];
    char v_split_fee_typr_str[65];
    char v_busi_limit_str[2049];
    double v_nav_asset;
    double v_market_price_ratio;
    int v_market_price_type;
    int v_cost_calc_type;
    double v_order_market_price;
    int v_sys_type;
    char v_opor_no_str1[2049];
    char v_opor_no_str2[2049];
    char v_opor_no_str3[2049];
    double v_fina_limit_max;
    double v_loan_limit_max;
    double v_exgp_avail_amt;
    double v_asac_avail_amt;
    double v_asac_T_hk_buy_total_amt;
    double v_asac_T_hk_sell_total_amt;
    double v_asac_T1_hk_buy_total_amt;
    double v_asac_T1_hk_sell_total_amt;
    double v_exgp_T_hk_buy_total_amt;
    double v_exgp_T_hk_sell_total_amt;
    double v_exgp_T1_hk_buy_total_amt;
    double v_exgp_T1_hk_sell_total_amt;
    double v_exgp_avail_qty;
    double v_exgp_target_code_avail_qty;
    double v_exgp_trade_code_avail_qty;
    double v_asac_avail_qty;
    double v_asac_target_code_avail_qty;
    double v_asac_trade_code_avail_qty;
    double v_exgp_loan_sell_amt;
    double v_asac_loan_sell_amt;
    double v_exgp_debt_loan_sell_strike_qty;
    double v_exgp_debt_fina_buy_strike_amt;
    int v_record_count;
    int v_T0_opor_fee_set_flag;
    double v_opor_warn_tshold;
    double v_opor_stop_tshold;
    int v_order_limit_time;
    double v_per_secu_posi_ratio;
    int v_posi_limit_time;
    double v_order_ctrl_qty;
    double v_order_ctrl_amt;
    double v_stock_warn_ratio;
    double v_stock_stop_ratio;
    double v_stock_warn_amt;
    double v_stock_stop_amt;
    int v_trig_oper_type;
    int v_open_close_permission;
    int v_risk_oper;
    int v_fee_calc_type;
    int v_permit_margin_trade;
    double v_buy_fee_ratio;
    double v_sell_fee_ratio;
    double v_buy_min_fee;
    double v_sell_min_fee;
    double v_all_fee_for_tmp;
    double v_trade_commis;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    int v_trig_stage_type;
    int64 v_compli_trig_id;
    int v_subscription_trade_mark;
    int v_purchase_trade_mark;
    int v_rede_trade_mark;
    double v_first_minimum_amt;
    double v_minimum_purchase_amt;
    double v_minimum_subscription_amt;
    double v_minimum_rede_share;
    double v_minimum_holding_share;
    double v_fina_marg_ratio;
    double v_secu_loan_marg_ratio;
    double v_secu_loan_price_limit;
    double v_asac_converted_margin;
    double v_asac_fina_converted_pandl;
    double v_asac_loan_converted_pandl;
    double v_asac_fina_comm_capt_margin;
    double v_asac_loan_comm_capt_margin;
    double v_asac_fina_order_capt_margin;
    double v_asac_loan_order_capt_margin;
    double v_asac_fina_capt_margin;
    double v_asac_loan_capt_margin;
    double v_asac_keep_guarantee_ratio;
    double v_asac_cmmd_converted_margin;
    double v_asac_order_converted_margin;
    double v_asac_curr_converted_margin;
    double v_asac_fina_interest;
    double v_asac_loan_interest;
    double v_exgp_converted_margin;
    double v_exgp_fina_converted_pandl;
    double v_exgp_loan_converted_pandl;
    double v_exgp_fina_comm_capt_margin;
    double v_exgp_loan_comm_capt_margin;
    double v_exgp_fina_order_capt_margin;
    double v_exgp_loan_order_capt_margin;
    double v_exgp_fina_capt_margin;
    double v_exgp_loan_capt_margin;
    double v_exgp_keep_guarantee_ratio;
    double v_exgp_cmmd_converted_margin;
    double v_exgp_order_converted_margin;
    double v_exgp_curr_converted_margin;
    double v_exgp_fina_interest;
    double v_exgp_loan_interest;
    double v_order_amt;
    int v_deal_flag;
    char v_modi_order_status[3];
    int64 v_new_order_id;
    double v_strike_aver_price;
    char v_trade_acco[33];
    char v_registration_agency[33];
    int v_trade_time_flag;
    char v_log_error_code[33];
    char v_log_error_info[256];


IFastMessage* lpPubMsg = NULL;
int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    strcpy(v_stock_code, " ");
    v_report_date=0;
    v_report_time=0;
    strcpy(v_report_no, " ");
    v_wtdraw_qty=0;
    strcpy(v_rsp_status, "0");
    strcpy(v_rsp_info, " ");
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_pd_no=0;
    v_exch_group_no=0;
    v_asset_acco_no=0;
    v_order_id=0;
    v_external_no=0;
    v_order_batch_no=0;
    strcpy(v_order_status, "0");
    strcpy(v_wtdraw_status, "0");
    v_init_date=0;
    strcpy(v_co_busi_config_str, " ");
    v_tmp_opor_no=0;
    v_co_no=0;
    v_stock_acco_no=0;
    strcpy(v_stock_acco, " ");
    v_stock_code_no=0;
    v_stock_type=0;
    v_asset_type=0;
    v_comm_id=0;
    v_order_date=0;
    v_order_time=0;
    v_order_dir=0;
    v_order_price=0;
    v_order_qty=0;
    v_order_frozen_amt=0;
    v_price_type=0;
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    strcpy(v_combo_code, " ");
    v_combo_posi_id=0;
    strcpy(v_mac_addr, " ");
    strcpy(v_ip_addr, " ");
    v_strategy_id=0;
    strcpy(v_target_stock_code, " ");
    v_target_stock_code_no=0;
    strcpy(v_contra_no, " ");
    v_asset_acco_type=0;
    v_exist_debt_flag=0;
    v_ori_order_id=0;
    v_tmp_order_qty=0;
    strcpy(v_sys_config_str, " ");
    strcpy(v_crncy_type, "CNY");
    strcpy(v_exch_crncy_type, "CNY");
    v_buy_ref_rate=0;
    v_sell_ref_rate=0;
    v_capit_reback_days=0;
    v_posi_reback_days=0;
    v_trade_code_no=0;
    v_target_code_no=0;
    v_net_price_flag=0;
    v_bond_accr_intrst=0;
    v_bond_rate_type=0;
    v_par_value=0;
    v_impawn_ratio=0;
    v_min_unit=0;
    v_fina_return_type=0;
    v_sell_auto_back_debt=0;
    v_comm_date=0;
    v_comm_batch_no=0;
    v_comm_executor=0;
    v_comm_opor=0;
    v_intrst_days=0;
    v_strike_qty=0;
    v_strike_amt=0;
    v_strike_bond_accr_intrst=0;
    v_order_frozen_qty=0;
    strcpy(v_old_order_status, "0");
    v_open_posi_date=0;
    v_update_times=1;
    v_debt_type=0;
    v_curr_strike_price=0;
    v_curr_strike_amt=0;
    v_curr_strike_qty=0;
    v_strike_id=0;
    v_all_fee=0;
    v_row_id=0;
    v_source_stock_qty=0;
    v_single_limit_qty=0;
    v_assigned_qty=0;
    v_trade_releas_qty=0;
    v_trade_capt_qty=0;
    v_strike_releas_qty=0;
    v_strike_capt_qty=0;
    v_over_night_pandl=0;
    v_sum_realize_pandl=0;
    v_total_open_posi_fee=0;
    v_total_close_posi_fee=0;
    v_out_order_releas_qty=0;
    v_out_order_capt_qty=0;
    v_out_strike_releas_qty=0;
    v_out_strike_capt_qty=0;
    strcpy(v_remark_info, " ");
    v_buy_avail_qty=0;
    v_sell_avail_qty=0;
    v_posi_qty=0;
    v_today_trade_fee=0;
    v_today_pandl=0;
    v_diff_qty=0;
    v_over_night_trade_buy_qty=0;
    v_over_night_trade_sell_qty=0;
    v_over_night_strike_sell_qty=0;
    v_over_night_sumtrd_sell_qty=0;
    v_over_night_sumstk_sell_qty=0;
    v_trade_amt=0;
    v_trade_qty=0;
    v_realize_pandl=0;
    v_yield_rate=0;
    v_avail_amt=0;
    v_begin_amt=0;
    v_curr_amt=0;
    v_frozen_amt=0;
    v_unfroz_amt=0;
    v_comm_frozen_amt=0;
    v_comm_unfroz_amt=0;
    v_comm_capt_amt=0;
    v_comm_releas_amt=0;
    v_trade_frozen_amt=0;
    v_trade_unfroz_amt=0;
    v_trade_capt_amt=0;
    v_trade_releas_amt=0;
    v_strike_capt_amt=0;
    v_strike_releas_amt=0;
    v_sum_order_row_id=0;
    v_sum_order_opor_no=0;
    v_sum_order_co_no=0;
    v_sum_order_pd_no=0;
    v_sum_order_exch_group_no=0;
    v_sum_order_asset_acco_no=0;
    v_sum_order_pass_no=0;
    strcpy(v_sum_order_exch_crncy_type, "CNY");
    v_sum_order_stock_code_no=0;
    v_sum_order_trade_code_no=0;
    v_sum_order_target_code_no=0;
    v_sum_order_external_no=0;
    v_sum_order_date=0;
    v_sum_order_batch_no=0;
    v_sum_order_dir=0;
    v_sum_order_price_type=0;
    v_sum_order_price=0;
    v_sum_order_qty=0;
    strcpy(v_order_sum_status, "0");
    v_sum_order_wtdraw_qty=0;
    v_sum_order_waste_qty=0;
    v_sum_order_strike_amt=0;
    v_sum_order_strike_qty=0;
    v_sum_order_strike_aver_price=0;
    v_sum_order_net_price_flag=0;
    v_sum_order_bond_accr_intrst=0;
    v_sum_order_bond_rate_type=0;
    v_sum_order_par_value=0;
    v_sum_order_impawn_ratio=0;
    strcpy(v_sum_order_oper_way, " ");
    v_sum_order_update_times=1;
    v_sum_strike_row_id=0;
    v_sum_strike_opor_no=0;
    v_sum_strike_co_no=0;
    v_sum_strike_pd_no=0;
    v_sum_strike_exch_group_no=0;
    v_sum_strike_asset_acco_no=0;
    v_sum_strike_pass_no=0;
    strcpy(v_sum_strike_out_acco, " ");
    v_sum_strike_stock_acco_no=0;
    v_sum_strike_stock_code_no=0;
    v_sum_strike_comm_id=0;
    v_sum_strike_report_date=0;
    strcpy(v_sum_strike_report_no, " ");
    v_sum_strike_order_date=0;
    v_sum_strike_order_id=0;
    v_sum_strike_order_dir=0;
    v_sum_strike_order_price=0;
    v_sum_strike_order_qty=0;
    v_sum_strike_strike_qty=0;
    v_sum_strike_strike_amt=0;
    v_sum_strike_all_fee=0;
    v_sum_strike_stamp_tax=0;
    v_sum_strike_trans_fee=0;
    v_sum_strike_brkage_fee=0;
    v_sum_strike_SEC_charges=0;
    v_sum_strike_other_fee=0;
    v_sum_strike_trade_commis=0;
    v_sum_strike_other_commis=0;
    v_sum_trade_tax=0;
    v_sum_trade_cost_fee=0;
    v_sum_trade_system_use_fee=0;
    v_sum_stock_settle_fee=0;
    v_sum_strike_net_price_flag=0;
    v_sum_strike_bond_accr_intrst=0;
    v_sum_strike_bond_rate_type=0;
    strcpy(v_sum_strike_order_oper_way, " ");
    v_sum_strike_exter_comm_flag=0;
    v_sum_strike_update_times=1;
    v_sum_strike_order_batch_no=0;
    v_sum_external_no=0;
    v_comm_time=0;
    v_comm_dir=0;
    v_comm_limit_price=0;
    v_limit_actual_price=0;
    v_comm_qty=0;
    v_comm_amt=0;
    v_comm_cancel_qty=0;
    v_comm_frozen_qty=0;
    strcpy(v_strike_status, "0");
    strcpy(v_comm_status, "0");
    v_comm_begin_date=0;
    v_comm_end_date=0;
    v_comm_begin_time=0;
    v_comm_end_time=0;
    v_comm_comple_date=0;
    v_comm_comple_time=0;
    v_comm_appr_date=0;
    v_comm_appr_time=0;
    strcpy(v_comm_appr_status, " ");
    v_comm_appr_oper=0;
    strcpy(v_comm_appr_remark, " ");
    v_basket_id=0;
    strcpy(v_comm_oper_way, " ");
    v_exter_comm_flag=0;
    v_comm_comple_flag=0;
    v_strategy_capt_qty=0;
    v_strategy_order_qty=0;
    strcpy(v_comm_remark_info, " ");
    v_disp_opor=0;
    v_disp_status=0;
    v_read_flag=0;
    v_sum_comm_row_id=0;
    v_sum_comm_co_no=0;
    v_sum_comm_pd_no=0;
    v_sum_comm_exch_group_no=0;
    v_sum_comm_asset_acco_no=0;
    v_sum_comm_pass_no=0;
    strcpy(v_sum_comm_out_acco, " ");
    strcpy(v_sum_comm_exch_crncy_type, "CNY");
    v_sum_comm_stock_code_no=0;
    v_sum_comm_date=0;
    v_sum_comm_time=0;
    v_sum_comm_batch_no=0;
    v_sum_comm_opor=0;
    v_sum_comm_executor=0;
    v_sum_comm_dir=0;
    v_sum_comm_limit_price=0;
    v_sum_comm_qty=0;
    v_sum_comm_amt=0;
    v_sum_comm_order_qty=0;
    v_sum_comm_cancel_qty=0;
    v_sum_comm_await_cancel_qty=0;
    v_sum_comm_strike_amt=0;
    v_sum_comm_strike_qty=0;
    strcpy(v_sum_comm_strike_status, "0");
    strcpy(v_comm_sum_status, "0");
    v_sum_comm_begin_date=0;
    v_sum_comm_end_date=0;
    v_sum_comm_begin_time=0;
    v_sum_comm_end_time=0;
    v_sum_comm_comple_date=0;
    v_sum_comm_comple_time=0;
    v_sum_comm_max_comm_comple_date=0;
    v_sum_comm_max_comm_comple_time=0;
    v_sum_comm_appr_date=0;
    v_sum_comm_appr_time=0;
    v_sum_comm_appr_qty=0;
    strcpy(v_comm_sum_approve_status, "0");
    v_sum_comm_basket_id=0;
    v_sum_comm_net_price_flag=0;
    v_sum_comm_bond_accr_intrst=0;
    v_sum_comm_bond_rate_type=0;
    strcpy(v_sum_comm_oper_way, " ");
    v_sum_comm_exter_comm_flag=0;
    v_sum_buy_order_qty=0;
    v_sum_sell_order_qty=0;
    v_sum_buy_comm_qty=0;
    v_sum_sell_comm_qty=0;
    v_sum_buy_strike_qty=0;
    v_sum_sell_strike_qty=0;
    v_sum_buy_strike_amt=0;
    v_sum_sell_strike_amt=0;
    v_sum_buy_comm_amt=0;
    v_sum_sell_comm_amt=0;
    strcpy(v_sum_comm_remark_info, " ");
    v_sum_comm_update_times=1;
    strcpy(v_acco_concat_info, " ");
    v_curr_qty=0;
    v_frozen_qty=0;
    v_unfroz_qty=0;
    v_pre_settle_qty=0;
    v_trade_frozen_qty=0;
    v_trade_unfroz_qty=0;
    v_strike_frozen_qty=0;
    v_strike_unfroz_qty=0;
    v_cost_amt=0;
    v_intrst_cost_amt=0;
    v_intrst_pandl=0;
    v_combo_copies=0;
    strcpy(v_combo_status, "0");
    v_combo_cost=0;
    v_combo_market_value=0;
    v_exgp_cash_id=0;
    v_exgp_frozen_amt=0;
    v_exgp_unfroz_amt=0;
    v_exgp_comm_frozen_amt=0;
    v_exgp_comm_unfroz_amt=0;
    v_exgp_comm_capt_amt=0;
    v_exgp_comm_releas_amt=0;
    v_exgp_trade_frozen_amt=0;
    v_exgp_trade_unfroz_amt=0;
    v_exgp_trade_capt_amt=0;
    v_exgp_trade_releas_amt=0;
    v_exgp_strike_capt_amt=0;
    v_exgp_strike_releas_amt=0;
    v_exgp_cash_update_times=1;
    v_exgp_posi_id=0;
    v_exgp_frozen_qty=0;
    v_exgp_unfroz_qty=0;
    v_exgp_comm_frozen_qty=0;
    v_exgp_comm_unfroz_qty=0;
    v_exgp_comm_capt_qty=0;
    v_exgp_comm_releas_qty=0;
    v_exgp_trade_frozen_qty=0;
    v_exgp_trade_unfroz_qty=0;
    v_exgp_trade_capt_qty=0;
    v_exgp_trade_releas_qty=0;
    v_exgp_strike_capt_qty=0;
    v_exgp_strike_releas_qty=0;
    v_exgp_strike_frozen_qty=0;
    v_exgp_strike_unfroz_qty=0;
    v_exgp_realize_pandl=0;
    v_exgp_cost_amt=0;
    v_exgp_intrst_cost_amt=0;
    v_exgp_intrst_pandl=0;
    v_exgp_posi_update_times=1;
    v_asac_cash_id=0;
    v_asac_frozen_amt=0;
    v_asac_unfroz_amt=0;
    v_asac_comm_frozen_amt=0;
    v_asac_comm_unfroz_amt=0;
    v_asac_comm_capt_amt=0;
    v_asac_comm_releas_amt=0;
    v_asac_trade_frozen_amt=0;
    v_asac_trade_unfroz_amt=0;
    v_asac_trade_capt_amt=0;
    v_asac_trade_releas_amt=0;
    v_asac_strike_capt_amt=0;
    v_asac_strike_releas_amt=0;
    v_asac_cash_update_times=1;
    v_asac_posi_id=0;
    v_asac_frozen_qty=0;
    v_asac_unfroz_qty=0;
    v_asac_comm_frozen_qty=0;
    v_asac_comm_unfroz_qty=0;
    v_asac_comm_capt_qty=0;
    v_asac_comm_releas_qty=0;
    v_asac_trade_frozen_qty=0;
    v_asac_trade_unfroz_qty=0;
    v_asac_trade_capt_qty=0;
    v_asac_trade_releas_qty=0;
    v_asac_strike_capt_qty=0;
    v_asac_strike_releas_qty=0;
    v_asac_strike_frozen_qty=0;
    v_asac_strike_unfroz_qty=0;
    v_asac_realize_pandl=0;
    v_asac_cost_amt=0;
    v_asac_intrst_cost_amt=0;
    v_asac_intrst_pandl=0;
    v_asac_posi_update_times=1;
    v_exgp_target_posi_id=0;
    v_exgp_target_frozen_qty=0;
    v_exgp_target_unfroz_qty=0;
    v_exgp_target_comm_frozen_qty=0;
    v_exgp_target_comm_unfroz_qty=0;
    v_exgp_target_comm_capt_qty=0;
    v_exgp_target_comm_releas_qty=0;
    v_exgp_target_trade_frozen_qty=0;
    v_exgp_target_trade_unfroz_qty=0;
    v_exgp_target_trade_capt_qty=0;
    v_exgp_target_trade_releas_qty=0;
    v_exgp_target_strike_capt_qty=0;
    v_exgp_target_strike_releas_qty=0;
    v_exgp_target_strike_frozen_qty=0;
    v_exgp_target_strike_unfroz_qty=0;
    v_exgp_target_realize_pandl=0;
    v_exgp_target_cost_amt=0;
    v_exgp_target_intrst_cost_amt=0;
    v_exgp_target_intrst_pandl=0;
    v_exgp_target_posi_update_times=0;
    v_asac_target_posi_id=0;
    v_asac_target_frozen_qty=0;
    v_asac_target_unfroz_qty=0;
    v_asac_target_comm_frozen_qty=0;
    v_asac_target_comm_unfroz_qty=0;
    v_asac_target_comm_capt_qty=0;
    v_asac_target_comm_releas_qty=0;
    v_asac_target_trade_frozen_qty=0;
    v_asac_target_trade_unfroz_qty=0;
    v_asac_target_trade_capt_qty=0;
    v_asac_target_trade_releas_qty=0;
    v_asac_target_strike_capt_qty=0;
    v_asac_target_strike_releas_qty=0;
    v_asac_target_strike_frozen_qty=0;
    v_asac_target_strike_unfroz_qty=0;
    v_asac_target_realize_pandl=0;
    v_asac_target_cost_amt=0;
    v_asac_target_intrst_cost_amt=0;
    v_asac_target_intrst_pandl=0;
    v_asac_target_posi_update_times=0;
    v_exgp_put_impawn_qty=0;
    v_asac_put_impawn_qty=0;
    v_invest_type=0;
    v_debt_fina_buy_strike_qty=0;
    v_fina_return_strike_qty=0;
    v_debt_loan_sell_strike_qty=0;
    v_loan_return_strike_qty=0;
    v_debt_fina_buy_order_qty=0;
    v_fina_return_order_qty=0;
    v_debt_loan_sell_order_qty=0;
    v_loan_return_order_qty=0;
    v_debt_fina_buy_comm_qty=0;
    v_fina_return_comm_qty=0;
    v_debt_loan_sell_comm_qty=0;
    v_loan_return_comm_qty=0;
    v_debt_fina_buy_strike_amt=0;
    v_fina_return_strike_amt=0;
    v_debt_loan_sell_strike_amt=0;
    v_loan_return_strike_amt=0;
    v_debt_fina_buy_order_amt=0;
    v_fina_return_order_amt=0;
    v_debt_loan_sell_order_amt=0;
    v_loan_return_order_amt=0;
    v_debt_fina_buy_comm_amt=0;
    v_fina_return_comm_amt=0;
    v_debt_loan_sell_comm_amt=0;
    v_loan_return_comm_amt=0;
    v_debt_strike_fee=0;
    v_return_strike_fee=0;
    v_debt_interest=0;
    v_return_interest_amt=0;
    v_modi_order_id=0;
    v_modi_order_date=0;
    v_modi_order_time=0;
    v_modi_batch_no=0;
    v_modi_order_price=0;
    v_modi_order_qty=0;
    v_modi_price_type=0;
    strcpy(v_exgp_busi_config_str, " ");
    strcpy(v_target_code, " ");
    v_target_code_stock_type=0;
    v_target_code_asset_type=0;
    strcpy(v_trade_code, " ");
    v_trade_code_stock_type=0;
    v_trade_code_asset_type=0;
    v_up_limit_price=0;
    v_down_limit_price=0;
    v_last_price=0;
    strcpy(v_busi_config_str, " ");
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_asac_busi_config_str, " ");
    strcpy(v_split_fee_typr_str, " ");
    strcpy(v_busi_limit_str, " ");
    v_nav_asset=0;
    v_market_price_ratio=0;
    v_market_price_type=0;
    v_cost_calc_type=0;
    v_order_market_price=0;
    v_sys_type=0;
    strcpy(v_opor_no_str1, " ");
    strcpy(v_opor_no_str2, " ");
    strcpy(v_opor_no_str3, " ");
    v_fina_limit_max=0;
    v_loan_limit_max=0;
    v_exgp_avail_amt=0;
    v_asac_avail_amt=0;
    v_asac_T_hk_buy_total_amt=0;
    v_asac_T_hk_sell_total_amt=0;
    v_asac_T1_hk_buy_total_amt=0;
    v_asac_T1_hk_sell_total_amt=0;
    v_exgp_T_hk_buy_total_amt=0;
    v_exgp_T_hk_sell_total_amt=0;
    v_exgp_T1_hk_buy_total_amt=0;
    v_exgp_T1_hk_sell_total_amt=0;
    v_exgp_avail_qty=0;
    v_exgp_target_code_avail_qty=0;
    v_exgp_trade_code_avail_qty=0;
    v_asac_avail_qty=0;
    v_asac_target_code_avail_qty=0;
    v_asac_trade_code_avail_qty=0;
    v_exgp_loan_sell_amt=0;
    v_asac_loan_sell_amt=0;
    v_exgp_debt_loan_sell_strike_qty=0;
    v_exgp_debt_fina_buy_strike_amt=0;
    v_record_count=0;
    v_T0_opor_fee_set_flag=0;
    v_opor_warn_tshold=0;
    v_opor_stop_tshold=0;
    v_order_limit_time=0;
    v_per_secu_posi_ratio=0;
    v_posi_limit_time=5;
    v_order_ctrl_qty=0;
    v_order_ctrl_amt=0;
    v_stock_warn_ratio=0;
    v_stock_stop_ratio=0;
    v_stock_warn_amt=0;
    v_stock_stop_amt=0;
    v_trig_oper_type=0;
    v_open_close_permission=0;
    v_risk_oper=0;
    v_fee_calc_type=0;
    v_permit_margin_trade=0;
    v_buy_fee_ratio=0;
    v_sell_fee_ratio=0;
    v_buy_min_fee=0;
    v_sell_min_fee=0;
    v_all_fee_for_tmp=0;
    v_trade_commis=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_trig_stage_type=0;
    v_compli_trig_id=0;
    v_subscription_trade_mark=0;
    v_purchase_trade_mark=0;
    v_rede_trade_mark=0;
    v_first_minimum_amt=0;
    v_minimum_purchase_amt=0;
    v_minimum_subscription_amt=0;
    v_minimum_rede_share=0;
    v_minimum_holding_share=0;
    v_fina_marg_ratio=0;
    v_secu_loan_marg_ratio=0;
    v_secu_loan_price_limit=0;
    v_asac_converted_margin=0;
    v_asac_fina_converted_pandl=0;
    v_asac_loan_converted_pandl=0;
    v_asac_fina_comm_capt_margin=0;
    v_asac_loan_comm_capt_margin=0;
    v_asac_fina_order_capt_margin=0;
    v_asac_loan_order_capt_margin=0;
    v_asac_fina_capt_margin=0;
    v_asac_loan_capt_margin=0;
    v_asac_keep_guarantee_ratio=0;
    v_asac_cmmd_converted_margin=0;
    v_asac_order_converted_margin=0;
    v_asac_curr_converted_margin=0;
    v_asac_fina_interest=0;
    v_asac_loan_interest=0;
    v_exgp_converted_margin=0;
    v_exgp_fina_converted_pandl=0;
    v_exgp_loan_converted_pandl=0;
    v_exgp_fina_comm_capt_margin=0;
    v_exgp_loan_comm_capt_margin=0;
    v_exgp_fina_order_capt_margin=0;
    v_exgp_loan_order_capt_margin=0;
    v_exgp_fina_capt_margin=0;
    v_exgp_loan_capt_margin=0;
    v_exgp_keep_guarantee_ratio=0;
    v_exgp_cmmd_converted_margin=0;
    v_exgp_order_converted_margin=0;
    v_exgp_curr_converted_margin=0;
    v_exgp_fina_interest=0;
    v_exgp_loan_interest=0;
    v_order_amt=0;
    v_deal_flag=0;
    strcpy(v_modi_order_status, " ");
    v_new_order_id=0;
    v_strike_aver_price=0;
    strcpy(v_trade_acco, " ");
    strcpy(v_registration_agency, " ");
    v_trade_time_flag=0;
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_pass_no = lpInBizMsg->GetInt32(LDBIZ_PASS_NO_INT);
    strncpy(v_out_acco, lpInBizMsg->GetString(LDBIZ_OUT_ACCO_STR),32);
    v_out_acco[32] = '\0';
    v_exch_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_NO_INT);
    strncpy(v_stock_code, lpInBizMsg->GetString(LDBIZ_STOCK_CODE_STR),6);
    v_stock_code[6] = '\0';
    v_report_date = lpInBizMsg->GetInt32(LDBIZ_REPORT_DATE_INT);
    v_report_time = lpInBizMsg->GetInt32(LDBIZ_REPORT_TIME_INT);
    strncpy(v_report_no, lpInBizMsg->GetString(LDBIZ_REPORT_NO_STR),32);
    v_report_no[32] = '\0';
    v_wtdraw_qty = lpInBizMsg->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
    strncpy(v_rsp_status, lpInBizMsg->GetString(LDBIZ_RSP_STATUS_STR),2);
    v_rsp_status[2] = '\0';
    strncpy(v_rsp_info, lpInBizMsg->GetString(LDBIZ_RSP_INFO_STR),255);
    v_rsp_info[255] = '\0';

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;
    IFastMessage* lpTSCall1Req3 = NULL;
    IFastMessage* lpTSCall1Ans3 = NULL;
    IFastMessage* lpTSCall1Req4 = NULL;
    IFastMessage* lpTSCall1Ans4 = NULL;
    IFastMessage* lpTSCall1Req5 = NULL;
    IFastMessage* lpTSCall1Ans5 = NULL;
    IFastMessage* lpTSCall1Req6 = NULL;
    IFastMessage* lpTSCall1Ans6 = NULL;
    IFastMessage* lpTSCall1Req7 = NULL;
    IFastMessage* lpTSCall1Ans7 = NULL;
    IFastMessage* lpTSCall1Req8 = NULL;
    IFastMessage* lpTSCall1Ans8 = NULL;
    IFastMessage* lpTSCall1Req9 = NULL;
    IFastMessage* lpTSCall1Ans9 = NULL;
    IFastMessage* lpTSCall1Req10 = NULL;
    IFastMessage* lpTSCall1Ans10 = NULL;
    IFastMessage* lpTSCall1Req11 = NULL;
    IFastMessage* lpTSCall1Ans11 = NULL;
    IFastMessage* lpTSCall1Req12 = NULL;
    IFastMessage* lpTSCall1Ans12 = NULL;
    IFastMessage* lpTSCall1Req13 = NULL;
    IFastMessage* lpTSCall1Ans13 = NULL;
    IFastMessage* lpTSCall1Req14 = NULL;
    IFastMessage* lpTSCall1Ans14 = NULL;
    IFastMessage* lpTSCall1Req15 = NULL;
    IFastMessage* lpTSCall1Ans15 = NULL;
    IFastMessage* lpTSCall1Req16 = NULL;
    IFastMessage* lpTSCall1Ans16 = NULL;
    IFastMessage* lpTSCall1Req17 = NULL;
    IFastMessage* lpTSCall1Ans17 = NULL;
    IFastMessage* lpTSCall1Req18 = NULL;
    IFastMessage* lpTSCall1Ans18 = NULL;
    IFastMessage* lpTSCall1Req19 = NULL;
    IFastMessage* lpTSCall1Ans19 = NULL;
    IFastMessage* lpTSCall1Req20 = NULL;
    IFastMessage* lpTSCall1Ans20 = NULL;
    IFastMessage* lpTSCall1Req21 = NULL;
    IFastMessage* lpTSCall1Ans21 = NULL;
    IFastMessage* lpTSCall1Req22 = NULL;
    IFastMessage* lpTSCall1Ans22 = NULL;
    IFastMessage* lpTSCall1Req23 = NULL;
    IFastMessage* lpTSCall1Ans23 = NULL;
    IFastMessage* lpTSCall1Req24 = NULL;
    IFastMessage* lpTSCall1Ans24 = NULL;
    IFastMessage* lpTSCall1Req25 = NULL;
    IFastMessage* lpTSCall1Ans25 = NULL;
    IFastMessage* lpTSCall1Req26 = NULL;
    IFastMessage* lpTSCall1Ans26 = NULL;
    IFastMessage* lpTSCall1Req27 = NULL;
    IFastMessage* lpTSCall1Ans27 = NULL;
    IFastMessage* lpTSCall1Req28 = NULL;
    IFastMessage* lpTSCall1Ans28 = NULL;
    IFastMessage* lpTSCall1Req29 = NULL;
    IFastMessage* lpTSCall1Ans29 = NULL;
    IFastMessage* lpTSCall1Req30 = NULL;
    IFastMessage* lpTSCall1Ans30 = NULL;
    IFastMessage* lpTSCall1Req31 = NULL;
    IFastMessage* lpTSCall1Ans31 = NULL;
    IFastMessage* lpTSCall1Req32 = NULL;
    IFastMessage* lpTSCall1Ans32 = NULL;
    IFastMessage* lpTSCall1Req33 = NULL;
    IFastMessage* lpTSCall1Ans33 = NULL;
    IFastMessage* lpTSCall1Req34 = NULL;
    IFastMessage* lpTSCall1Ans34 = NULL;
    IFastMessage* lpTSCall1Req35 = NULL;
    IFastMessage* lpTSCall1Ans35 = NULL;
    IFastMessage* lpTSCall1Req36 = NULL;
    IFastMessage* lpTSCall1Ans36 = NULL;
    IFastMessage* lpTSCall1Req37 = NULL;
    IFastMessage* lpTSCall1Ans37 = NULL;
    IFastMessage* lpTSCall1Req38 = NULL;
    IFastMessage* lpTSCall1Ans38 = NULL;
    IFastMessage* lpTSCall1Req39 = NULL;
    IFastMessage* lpTSCall1Ans39 = NULL;
    IFastMessage* lpTSCall1Req40 = NULL;
    IFastMessage* lpTSCall1Ans40 = NULL;
    IFastMessage* lpTSCall1Req41 = NULL;
    IFastMessage* lpTSCall1Ans41 = NULL;
    IFastMessage* lpTSCall1Req42 = NULL;
    IFastMessage* lpTSCall1Ans42 = NULL;
    IFastMessage* lpTSCall1Req43 = NULL;
    IFastMessage* lpTSCall1Ans43 = NULL;
    IFastMessage* lpTSCall1Req44 = NULL;
    IFastMessage* lpTSCall1Ans44 = NULL;
    IFastMessage* lpTSCall1Req45 = NULL;
    IFastMessage* lpTSCall1Ans45 = NULL;
    IFastMessage* lpTSCall1Req46 = NULL;
    IFastMessage* lpTSCall1Ans46 = NULL;
    IFastMessage* lpTSCall1Req47 = NULL;
    IFastMessage* lpTSCall1Ans47 = NULL;
    IFastMessage* lpTSCall1Req48 = NULL;
    IFastMessage* lpTSCall1Ans48 = NULL;
    IFastMessage* lpTSCall1Req49 = NULL;
    IFastMessage* lpTSCall1Ans49 = NULL;
    IFastMessage* lpTSCall1Req50 = NULL;
    IFastMessage* lpTSCall1Ans50 = NULL;
    IFastMessage* lpTSCall1Req51 = NULL;
    IFastMessage* lpTSCall1Ans51 = NULL;
    IFastMessage* lpTSCall1Req52 = NULL;
    IFastMessage* lpTSCall1Ans52 = NULL;
    IFastMessage* lpTSCall1Req53 = NULL;
    IFastMessage* lpTSCall1Ans53 = NULL;
    IFastMessage* lpTSCall1Req54 = NULL;
    IFastMessage* lpTSCall1Ans54 = NULL;
    IFastMessage* lpTSCall1Req55 = NULL;
    IFastMessage* lpTSCall1Ans55 = NULL;
    IFastMessage* lpTSCall1Req56 = NULL;
    IFastMessage* lpTSCall1Ans56 = NULL;
    IFastMessage* lpTSCall1Req57 = NULL;
    IFastMessage* lpTSCall1Ans57 = NULL;
    IFastMessage* lpTSCall1Req58 = NULL;
    IFastMessage* lpTSCall1Ans58 = NULL;

    //调用过程[事务_公共_公共接口_检查系统状态权限身份]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.1", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.1]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));


    // set @临时_操作员编号# = @操作员编号#;
    v_tmp_opor_no = v_opor_no;
    //调用过程[事务_交易证券_报盘_检查撤单回报]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.137", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req1->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req1->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req1->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req1->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpTSCall1Req1->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpTSCall1Req1->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpTSCall1Req1->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpTSCall1Req1->SetString(LDBIZ_RSP_STATUS_STR,v_rsp_status);
    lpTSCall1Req1->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.137]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));

    //取原委托信息
    //调用过程[事务_交易证券_交易_获取回报订单信息]
    //组织事务请求
    if(lpTSCall1Ans2)
    {
      lpTSCall1Ans2->FreeMsg();
      lpTSCall1Ans2=NULL;
    }
    lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.72", 0);
    lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req2->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req2->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req2->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpTSCall1Req2->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
    if(!lpTSCall1Ans2)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.72]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans2->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
    v_co_no = lpTSCall1Ans2->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpTSCall1Ans2->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans2->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans2->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    v_stock_acco_no = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_acco, lpTSCall1Ans2->GetString(LDBIZ_STOCK_ACCO_STR));
    v_stock_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strcpy(v_stock_code, lpTSCall1Ans2->GetString(LDBIZ_STOCK_CODE_STR));
    v_stock_type = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans2->GetInt32(LDBIZ_ASSET_TYPE_INT);
    v_comm_id = lpTSCall1Ans2->GetInt64(LDBIZ_COMM_ID_INT64);
    v_order_date = lpTSCall1Ans2->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_time = lpTSCall1Ans2->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_order_id = lpTSCall1Ans2->GetInt64(LDBIZ_ORDER_ID_INT64);
    v_order_batch_no = lpTSCall1Ans2->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    v_order_dir = lpTSCall1Ans2->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_order_price = lpTSCall1Ans2->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans2->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    v_order_frozen_amt = lpTSCall1Ans2->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans2->GetString(LDBIZ_ORDER_STATUS_STR));
    v_price_type = lpTSCall1Ans2->GetInt32(LDBIZ_PRICE_TYPE_INT);
    v_busi_opor_no = lpTSCall1Ans2->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strcpy(v_order_oper_way, lpTSCall1Ans2->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    strcpy(v_combo_code, lpTSCall1Ans2->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans2->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    strcpy(v_mac_addr, lpTSCall1Ans2->GetString(LDBIZ_MAC_ADDR_STR));
    strcpy(v_ip_addr, lpTSCall1Ans2->GetString(LDBIZ_IP_ADDR_STR));
    v_strategy_id = lpTSCall1Ans2->GetInt64(LDBIZ_STRATEGY_ID_INT64);
    strcpy(v_target_stock_code, lpTSCall1Ans2->GetString(LDBIZ_TARGET_STOCK_CODE_STR));
    v_target_stock_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_TARGET_STOCK_CODE_NO_INT);
    strcpy(v_contra_no, lpTSCall1Ans2->GetString(LDBIZ_CONTRA_NO_STR));
    v_asset_acco_type = lpTSCall1Ans2->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    v_exist_debt_flag = lpTSCall1Ans2->GetInt32(LDBIZ_EXIST_DEBT_FLAG_INT);


    // set @原订单序号# = @订单序号#;
    v_ori_order_id = v_order_id;
    //回报状态为3的时候，报盘给不了撤单数量，所以进行特殊处理

    // if @回报状态# = 《回报状态-特殊撤单》 then
    if (strcmp(v_rsp_status , "3")==0)
    {

        // set @撤单数量# = @订单数量#;
        v_wtdraw_qty = v_order_qty;
    // end if;
    }


    // set @临时_订单数量# = @订单数量#;
    v_tmp_order_qty = v_order_qty;

    // set @操作MAC# = @MAC地址#;
    strcpy(v_oper_mac,v_mac_addr);

    // set @操作IP# = @IP地址#;
    strcpy(v_oper_ip_addr,v_ip_addr);

    // set @操作员编号# =@业务操作员编号#;
    v_opor_no =v_busi_opor_no;

    // set @操作员机构编号# =@机构编号#;
    v_opor_co_no =v_co_no;
    //调用过程[事务_公共_交易接口_检查交易系统状态权限]
    //组织事务请求
    if(lpTSCall1Ans3)
    {
      lpTSCall1Ans3->FreeMsg();
      lpTSCall1Ans3=NULL;
    }
    lpTSCall1Req3=glpFastMsgFactory->CreateFastMessage("pubT.25.232", 0);
    lpTSCall1Req3->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req3->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req3->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req3->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req3->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req3->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req3->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req3, &lpTSCall1Ans3, 5000);
    if(!lpTSCall1Ans3)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.232]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans3->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
    strcpy(v_co_busi_config_str, lpTSCall1Ans3->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));

    //公共子系统检查
    //调用过程[事务_公共_交易接口_检查回报业务控制]
    //组织事务请求
    if(lpTSCall1Ans4)
    {
      lpTSCall1Ans4->FreeMsg();
      lpTSCall1Ans4=NULL;
    }
    lpTSCall1Req4=glpFastMsgFactory->CreateFastMessage("pubT.25.31", 0);
    lpTSCall1Req4->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req4->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req4->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req4->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req4->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req4->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req4->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    glpTSSubcallSerives->SubCall(lpTSCall1Req4, &lpTSCall1Ans4, 5000);
    if(!lpTSCall1Ans4)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.31]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans4->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans4->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_sys_config_str, lpTSCall1Ans4->GetString(LDBIZ_SYS_CONFIG_STR_STR));
    strcpy(v_crncy_type, lpTSCall1Ans4->GetString(LDBIZ_CRNCY_TYPE_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans4->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_buy_ref_rate = lpTSCall1Ans4->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
    v_sell_ref_rate = lpTSCall1Ans4->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
    v_stock_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_capit_reback_days = lpTSCall1Ans4->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
    v_posi_reback_days = lpTSCall1Ans4->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);
    v_trade_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_net_price_flag = lpTSCall1Ans4->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_bond_accr_intrst = lpTSCall1Ans4->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans4->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_par_value = lpTSCall1Ans4->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans4->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_min_unit = lpTSCall1Ans4->GetInt32(LDBIZ_MIN_UNIT_INT);


    // if @资产账户类型# = 《资产账户类型-融资融券》 then
    if (v_asset_acco_type == 5)
    {
        //调用过程[事务_产品_交易接口_获取融资融券卖券还款方式]
        //组织事务请求
        if(lpTSCall1Ans5)
        {
          lpTSCall1Ans5->FreeMsg();
          lpTSCall1Ans5=NULL;
        }
        lpTSCall1Req5=glpFastMsgFactory->CreateFastMessage("prodT.8.112", 0);
        lpTSCall1Req5->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req5->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req5->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req5->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req5->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req5->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req5->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req5->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req5->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req5->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req5->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req5->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        glpTSSubcallSerives->SubCall(lpTSCall1Req5, &lpTSCall1Ans5, 5000);
        if(!lpTSCall1Ans5)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.8.112]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans5->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
        v_fina_return_type = lpTSCall1Ans5->GetInt32(LDBIZ_FINA_RETURN_TYPE_INT);
        v_sell_auto_back_debt = lpTSCall1Ans5->GetInt32(LDBIZ_SELL_AUTO_BACK_DEBT_INT);

    // end if;
    }

    //处理撤单回报

    // if @资产账户类型# = 《资产账户类型-融资融券》 and ((@订单方向# = 《订单方向-融资买入》 or @订单方向# = 《订单方向-融券卖出》 or @订单方向# = 《订单方向-卖券还款》 or @订单方向# = 《订单方向-买券还券》 or @订单方向# = 《订单方向-直接还款》 or @订单方向# = 《订单方向-直接还券》) or  (@资产账户类型# = 《资产账户类型-融资融券》 and @订单方向# = 《订单方向-卖出》 and  @存在负债标志# = 《存在负债标志-存在》 and @卖出自动还款# = 《卖出自动还款-是》)) then
    if (v_asset_acco_type == 5 && ((v_order_dir == 5 || v_order_dir == 6 || v_order_dir == 7 || v_order_dir == 8 || v_order_dir == 14 || v_order_dir == 15) ||  (v_asset_acco_type == 5 && v_order_dir == 2 &&  v_exist_debt_flag == 2 && v_sell_auto_back_debt == 0)))
    {
        //调用过程[事务_交易证券_报盘_融资融券处理撤单回报]
        //组织事务请求
        if(lpTSCall1Ans6)
        {
          lpTSCall1Ans6->FreeMsg();
          lpTSCall1Ans6=NULL;
        }
        lpTSCall1Req6=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.133", 0);
        lpTSCall1Req6->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req6->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req6->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req6->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req6->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req6->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req6->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req6->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpTSCall1Req6->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
        lpTSCall1Req6->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpTSCall1Req6->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req6->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpTSCall1Req6->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req6->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
        lpTSCall1Req6->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req6->SetString(LDBIZ_RSP_STATUS_STR,v_rsp_status);
        lpTSCall1Req6->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req6, &lpTSCall1Ans6, 5000);
        if(!lpTSCall1Ans6)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.133]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans6->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
        v_co_no = lpTSCall1Ans6->GetInt32(LDBIZ_CO_NO_INT);
        v_busi_opor_no = lpTSCall1Ans6->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
        v_pd_no = lpTSCall1Ans6->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans6->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_stock_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        v_trade_code_no = lpTSCall1Ans6->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
        v_target_code_no = lpTSCall1Ans6->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
        v_stock_type = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_TYPE_INT);
        v_external_no = lpTSCall1Ans6->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
        strcpy(v_exch_crncy_type, lpTSCall1Ans6->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
        v_comm_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_id = lpTSCall1Ans6->GetInt64(LDBIZ_COMM_ID_INT64);
        v_comm_batch_no = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_executor = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_comm_opor = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_OPOR_INT);
        v_order_date = lpTSCall1Ans6->GetInt32(LDBIZ_ORDER_DATE_INT);
        v_order_batch_no = lpTSCall1Ans6->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
        v_order_dir = lpTSCall1Ans6->GetInt32(LDBIZ_ORDER_DIR_INT);
        v_price_type = lpTSCall1Ans6->GetInt32(LDBIZ_PRICE_TYPE_INT);
        v_order_price = lpTSCall1Ans6->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
        v_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
        strcpy(v_order_status, lpTSCall1Ans6->GetString(LDBIZ_ORDER_STATUS_STR));
        v_net_price_flag = lpTSCall1Ans6->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
        v_intrst_days = lpTSCall1Ans6->GetInt32(LDBIZ_INTRST_DAYS_INT);
        v_par_value = lpTSCall1Ans6->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
        v_bond_accr_intrst = lpTSCall1Ans6->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
        v_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
        v_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
        v_strike_bond_accr_intrst = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
        v_impawn_ratio = lpTSCall1Ans6->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
        v_order_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
        v_order_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
        strcpy(v_wtdraw_status, lpTSCall1Ans6->GetString(LDBIZ_WTDRAW_STATUS_STR));
        strcpy(v_old_order_status, lpTSCall1Ans6->GetString(LDBIZ_OLD_ORDER_STATUS_STR));
        strcpy(v_combo_code, lpTSCall1Ans6->GetString(LDBIZ_COMBO_CODE_STR));
        v_combo_posi_id = lpTSCall1Ans6->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
        v_open_posi_date = lpTSCall1Ans6->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
        v_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_UPDATE_TIMES_INT);
        v_debt_type = lpTSCall1Ans6->GetInt32(LDBIZ_DEBT_TYPE_INT);

    }
    // else
    else
    {

        //调用过程[事务_交易证券_报盘_处理撤单回报]
        //组织事务请求
        if(lpTSCall1Ans7)
        {
          lpTSCall1Ans7->FreeMsg();
          lpTSCall1Ans7=NULL;
        }
        lpTSCall1Req7=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.11", 0);
        lpTSCall1Req7->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req7->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req7->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req7->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req7->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req7->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req7->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req7->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req7->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req7->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpTSCall1Req7->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
        lpTSCall1Req7->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpTSCall1Req7->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req7->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpTSCall1Req7->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req7->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
        lpTSCall1Req7->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req7->SetString(LDBIZ_RSP_STATUS_STR,v_rsp_status);
        lpTSCall1Req7->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req7, &lpTSCall1Ans7, 5000);
        if(!lpTSCall1Ans7)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.11]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans7->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
        v_co_no = lpTSCall1Ans7->GetInt32(LDBIZ_CO_NO_INT);
        v_busi_opor_no = lpTSCall1Ans7->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
        v_pd_no = lpTSCall1Ans7->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans7->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans7->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_stock_acco_no = lpTSCall1Ans7->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans7->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        v_trade_code_no = lpTSCall1Ans7->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
        v_target_code_no = lpTSCall1Ans7->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
        v_stock_type = lpTSCall1Ans7->GetInt32(LDBIZ_STOCK_TYPE_INT);
        v_external_no = lpTSCall1Ans7->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
        strcpy(v_exch_crncy_type, lpTSCall1Ans7->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
        v_comm_date = lpTSCall1Ans7->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_id = lpTSCall1Ans7->GetInt64(LDBIZ_COMM_ID_INT64);
        v_comm_batch_no = lpTSCall1Ans7->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_executor = lpTSCall1Ans7->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_comm_opor = lpTSCall1Ans7->GetInt32(LDBIZ_COMM_OPOR_INT);
        v_order_date = lpTSCall1Ans7->GetInt32(LDBIZ_ORDER_DATE_INT);
        v_order_batch_no = lpTSCall1Ans7->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
        v_order_dir = lpTSCall1Ans7->GetInt32(LDBIZ_ORDER_DIR_INT);
        v_price_type = lpTSCall1Ans7->GetInt32(LDBIZ_PRICE_TYPE_INT);
        v_order_price = lpTSCall1Ans7->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
        v_order_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
        strcpy(v_order_status, lpTSCall1Ans7->GetString(LDBIZ_ORDER_STATUS_STR));
        v_net_price_flag = lpTSCall1Ans7->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
        v_intrst_days = lpTSCall1Ans7->GetInt32(LDBIZ_INTRST_DAYS_INT);
        v_par_value = lpTSCall1Ans7->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
        v_bond_accr_intrst = lpTSCall1Ans7->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
        v_strike_qty = lpTSCall1Ans7->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
        v_strike_amt = lpTSCall1Ans7->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
        v_strike_bond_accr_intrst = lpTSCall1Ans7->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
        v_impawn_ratio = lpTSCall1Ans7->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
        v_order_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
        v_order_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
        strcpy(v_wtdraw_status, lpTSCall1Ans7->GetString(LDBIZ_WTDRAW_STATUS_STR));
        strcpy(v_old_order_status, lpTSCall1Ans7->GetString(LDBIZ_OLD_ORDER_STATUS_STR));
        strcpy(v_combo_code, lpTSCall1Ans7->GetString(LDBIZ_COMBO_CODE_STR));
        v_combo_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
        v_open_posi_date = lpTSCall1Ans7->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
        v_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_UPDATE_TIMES_INT);

    // end if;
    }


    // set @当笔成交价格# = 0;
    v_curr_strike_price = 0;

    // set @当笔成交金额# = 0;
    v_curr_strike_amt = 0;

    // set @当笔成交数量# = 0;
    v_curr_strike_qty = 0;

    // set @成交序号# = 0;
    v_strike_id = 0;

    // set @全部费用# = 0;
    v_all_fee = 0;
    //主动推送

    // [主动推送][secu.order][证券主推_订单_订单主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
    lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
    lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


    // if (@订单操作方式# = 《订单操作方式-增强交易》 or @订单操作方式# = 《订单操作方式-增强交易平仓》) then
    if ((strcmp(v_order_oper_way , "14")==0 || strcmp(v_order_oper_way , "51")==0))
    {
        //增强交易主推
        //调用过程[事务_交易证券_主推接口_获取券源信息]
        //组织事务请求
        if(lpTSCall1Ans8)
        {
          lpTSCall1Ans8->FreeMsg();
          lpTSCall1Ans8=NULL;
        }
        lpTSCall1Req8=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.35", 0);
        lpTSCall1Req8->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req8->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req8->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req8->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req8->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req8->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req8->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req8->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req8->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        lpTSCall1Req8->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req8->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req8->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req8->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req8->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req8, &lpTSCall1Ans8, 5000);
        if(!lpTSCall1Ans8)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.35]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans8->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans8->GetInt64(LDBIZ_ROW_ID_INT64);
        v_co_no = lpTSCall1Ans8->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans8->GetInt32(LDBIZ_PD_NO_INT);
        strcpy(v_stock_code, lpTSCall1Ans8->GetString(LDBIZ_STOCK_CODE_STR));
        v_exch_no = lpTSCall1Ans8->GetInt32(LDBIZ_EXCH_NO_INT);
        v_source_stock_qty = lpTSCall1Ans8->GetDouble(LDBIZ_SOURCE_STOCK_QTY_FLOAT);
        v_single_limit_qty = lpTSCall1Ans8->GetDouble(LDBIZ_SINGLE_LIMIT_QTY_FLOAT);
        v_assigned_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASSIGNED_QTY_FLOAT);
        v_trade_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT);
        v_trade_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT);
        v_strike_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT);
        v_strike_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT);
        v_over_night_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_total_open_posi_fee = lpTSCall1Ans8->GetDouble(LDBIZ_TOTAL_OPEN_POSI_FEE_FLOAT);
        v_total_close_posi_fee = lpTSCall1Ans8->GetDouble(LDBIZ_TOTAL_CLOSE_POSI_FEE_FLOAT);
        v_out_order_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_OUT_ORDER_RELEAS_QTY_FLOAT);
        v_out_order_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_OUT_ORDER_CAPT_QTY_FLOAT);
        v_out_strike_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_OUT_STRIKE_RELEAS_QTY_FLOAT);
        v_out_strike_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_OUT_STRIKE_CAPT_QTY_FLOAT);
        strcpy(v_remark_info, lpTSCall1Ans8->GetString(LDBIZ_REMARK_INFO_STR));
        v_buy_avail_qty = lpTSCall1Ans8->GetDouble(LDBIZ_BUY_AVAIL_QTY_FLOAT);
        v_sell_avail_qty = lpTSCall1Ans8->GetDouble(LDBIZ_SELL_AVAIL_QTY_FLOAT);
        v_posi_qty = lpTSCall1Ans8->GetDouble(LDBIZ_POSI_QTY_FLOAT);
        v_today_trade_fee = lpTSCall1Ans8->GetDouble(LDBIZ_TODAY_TRADE_FEE_FLOAT);
        v_today_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_TODAY_PANDL_FLOAT);
        v_diff_qty = lpTSCall1Ans8->GetDouble(LDBIZ_DIFF_QTY_FLOAT);
        v_over_night_trade_buy_qty = lpTSCall1Ans8->GetDouble(LDBIZ_OVER_NIGHT_TRADE_BUY_QTY_FLOAT);
        v_over_night_trade_sell_qty = lpTSCall1Ans8->GetDouble(LDBIZ_OVER_NIGHT_TRADE_SELL_QTY_FLOAT);
        v_over_night_strike_sell_qty = lpTSCall1Ans8->GetDouble(LDBIZ_OVER_NIGHT_STRIKE_SELL_QTY_FLOAT);
        v_over_night_sumtrd_sell_qty = lpTSCall1Ans8->GetDouble(LDBIZ_OVER_NIGHT_SUMTRD_SELL_QTY_FLOAT);
        v_over_night_sumstk_sell_qty = lpTSCall1Ans8->GetDouble(LDBIZ_OVER_NIGHT_SUMSTK_SELL_QTY_FLOAT);
        v_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0stocksource][证券主推_增强交易_券源变化主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.701", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetDouble(LDBIZ_SOURCE_STOCK_QTY_FLOAT,v_source_stock_qty);
        lpPubMsg->SetDouble(LDBIZ_SINGLE_LIMIT_QTY_FLOAT,v_single_limit_qty);
        lpPubMsg->SetDouble(LDBIZ_ASSIGNED_QTY_FLOAT,v_assigned_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT,v_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT,v_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT,v_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT,v_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
        lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_OPEN_POSI_FEE_FLOAT,v_total_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_CLOSE_POSI_FEE_FLOAT,v_total_close_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_OUT_ORDER_RELEAS_QTY_FLOAT,v_out_order_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_OUT_ORDER_CAPT_QTY_FLOAT,v_out_order_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_OUT_STRIKE_RELEAS_QTY_FLOAT,v_out_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_OUT_STRIKE_CAPT_QTY_FLOAT,v_out_strike_capt_qty);
        lpPubMsg->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
        lpPubMsg->SetDouble(LDBIZ_BUY_AVAIL_QTY_FLOAT,v_buy_avail_qty);
        lpPubMsg->SetDouble(LDBIZ_SELL_AVAIL_QTY_FLOAT,v_sell_avail_qty);
        lpPubMsg->SetDouble(LDBIZ_POSI_QTY_FLOAT,v_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_TODAY_TRADE_FEE_FLOAT,v_today_trade_fee);
        lpPubMsg->SetDouble(LDBIZ_TODAY_PANDL_FLOAT,v_today_pandl);
        lpPubMsg->SetDouble(LDBIZ_DIFF_QTY_FLOAT,v_diff_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_TRADE_BUY_QTY_FLOAT,v_over_night_trade_buy_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_TRADE_SELL_QTY_FLOAT,v_over_night_trade_sell_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_STRIKE_SELL_QTY_FLOAT,v_over_night_strike_sell_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_SUMTRD_SELL_QTY_FLOAT,v_over_night_sumtrd_sell_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_SUMSTK_SELL_QTY_FLOAT,v_over_night_sumstk_sell_qty);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0stocksource", lpPubMsg);

        //调用过程[事务_交易证券_主推接口_获取账户汇总信息查询]
        //组织事务请求
        if(lpTSCall1Ans9)
        {
          lpTSCall1Ans9->FreeMsg();
          lpTSCall1Ans9=NULL;
        }
        lpTSCall1Req9=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.37", 0);
        lpTSCall1Req9->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req9->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req9->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req9->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req9->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req9->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req9->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req9->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req9->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req9, &lpTSCall1Ans9, 5000);
        if(!lpTSCall1Ans9)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.37]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans9->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
        v_trade_amt = lpTSCall1Ans9->GetDouble(LDBIZ_TRADE_AMT_FLOAT);
        v_trade_qty = lpTSCall1Ans9->GetDouble(LDBIZ_TRADE_QTY_FLOAT);
        v_realize_pandl = lpTSCall1Ans9->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
        v_yield_rate = lpTSCall1Ans9->GetDouble(LDBIZ_YIELD_RATE_FLOAT);
        v_all_fee = lpTSCall1Ans9->GetDouble(LDBIZ_ALL_FEE_FLOAT);
        v_over_night_pandl = lpTSCall1Ans9->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans9->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_update_times = lpTSCall1Ans9->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0accosum][证券主推_增强交易_t0账户汇总主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.703", 0);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetDouble(LDBIZ_TRADE_AMT_FLOAT,v_trade_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_QTY_FLOAT,v_trade_qty);
        lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_YIELD_RATE_FLOAT,v_yield_rate);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
        lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0accosum", lpPubMsg);

        //调用过程[事务_交易证券_主推接口_获取t0操作员可用金额]
        //组织事务请求
        if(lpTSCall1Ans10)
        {
          lpTSCall1Ans10->FreeMsg();
          lpTSCall1Ans10=NULL;
        }
        lpTSCall1Req10=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.38", 0);
        lpTSCall1Req10->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req10->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req10->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req10->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req10->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req10->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req10->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req10->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req10->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req10->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req10, &lpTSCall1Ans10, 5000);
        if(!lpTSCall1Ans10)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.38]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans10->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
        v_avail_amt = lpTSCall1Ans10->GetDouble(LDBIZ_AVAIL_AMT_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0availcapital][证券主推_增强交易_t0操作员可用金额主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.704", 0);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetDouble(LDBIZ_AVAIL_AMT_FLOAT,v_avail_amt);
        lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0availcapital", lpPubMsg);

        //调用过程[事务_交易证券_主推接口_获取操作员可用交易组资金信息]
        //组织事务请求
        if(lpTSCall1Ans11)
        {
          lpTSCall1Ans11->FreeMsg();
          lpTSCall1Ans11=NULL;
        }
        lpTSCall1Req11=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.46", 0);
        lpTSCall1Req11->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req11->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req11->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req11->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req11->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req11->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req11->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req11->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req11->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req11->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req11->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req11->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req11->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        lpTSCall1Req11->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req11, &lpTSCall1Ans11, 5000);
        if(!lpTSCall1Ans11)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.46]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans11->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans11->GetInt64(LDBIZ_ROW_ID_INT64);
        v_begin_amt = lpTSCall1Ans11->GetDouble(LDBIZ_BEGIN_AMT_FLOAT);
        v_curr_amt = lpTSCall1Ans11->GetDouble(LDBIZ_CURR_AMT_FLOAT);
        v_frozen_amt = lpTSCall1Ans11->GetDouble(LDBIZ_FROZEN_AMT_FLOAT);
        v_unfroz_amt = lpTSCall1Ans11->GetDouble(LDBIZ_UNFROZ_AMT_FLOAT);
        v_comm_frozen_amt = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
        v_comm_unfroz_amt = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_UNFROZ_AMT_FLOAT);
        v_comm_capt_amt = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_CAPT_AMT_FLOAT);
        v_comm_releas_amt = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_RELEAS_AMT_FLOAT);
        v_trade_frozen_amt = lpTSCall1Ans11->GetDouble(LDBIZ_TRADE_FROZEN_AMT_FLOAT);
        v_trade_unfroz_amt = lpTSCall1Ans11->GetDouble(LDBIZ_TRADE_UNFROZ_AMT_FLOAT);
        v_trade_capt_amt = lpTSCall1Ans11->GetDouble(LDBIZ_TRADE_CAPT_AMT_FLOAT);
        v_trade_releas_amt = lpTSCall1Ans11->GetDouble(LDBIZ_TRADE_RELEAS_AMT_FLOAT);
        v_strike_capt_amt = lpTSCall1Ans11->GetDouble(LDBIZ_STRIKE_CAPT_AMT_FLOAT);
        v_strike_releas_amt = lpTSCall1Ans11->GetDouble(LDBIZ_STRIKE_RELEAS_AMT_FLOAT);
        v_update_times = lpTSCall1Ans11->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0oporallowexgrpcap][证券主推_增强交易_操作员可用交易组资金变化主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.710", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_BEGIN_AMT_FLOAT,v_begin_amt);
        lpPubMsg->SetDouble(LDBIZ_CURR_AMT_FLOAT,v_curr_amt);
        lpPubMsg->SetDouble(LDBIZ_FROZEN_AMT_FLOAT,v_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_UNFROZ_AMT_FLOAT,v_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_UNFROZ_AMT_FLOAT,v_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_CAPT_AMT_FLOAT,v_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_RELEAS_AMT_FLOAT,v_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_FROZEN_AMT_FLOAT,v_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_UNFROZ_AMT_FLOAT,v_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_CAPT_AMT_FLOAT,v_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_RELEAS_AMT_FLOAT,v_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_CAPT_AMT_FLOAT,v_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_RELEAS_AMT_FLOAT,v_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0oporallowexgrpcap", lpPubMsg);

    // end if;
    }


    // if @撤单状态# = 《撤单状态-成功》 then
    if (strcmp(v_wtdraw_status , "3")==0)
    {

        // if  @订单批号# > 0 then
        if ( v_order_batch_no > 0)
        {

            // set @成交序号# = 0;
            v_strike_id = 0;
            //调用过程[事务_交易证券_主推接口_获取汇总订单成交信息]
            //组织事务请求
            if(lpTSCall1Ans12)
            {
              lpTSCall1Ans12->FreeMsg();
              lpTSCall1Ans12=NULL;
            }
            lpTSCall1Req12=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.21", 0);
            lpTSCall1Req12->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req12->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req12->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req12->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req12->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req12->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req12->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req12->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req12->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req12->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpTSCall1Req12->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req12->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
            lpTSCall1Req12->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req12, &lpTSCall1Ans12, 5000);
            if(!lpTSCall1Ans12)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.21]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans12->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
            v_sum_order_row_id = lpTSCall1Ans12->GetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64);
            v_sum_order_opor_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT);
            v_sum_order_co_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_CO_NO_INT);
            v_sum_order_pd_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_PD_NO_INT);
            v_sum_order_exch_group_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT);
            v_sum_order_asset_acco_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT);
            v_sum_order_pass_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT);
            strcpy(v_sum_order_exch_crncy_type, lpTSCall1Ans12->GetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR));
            v_sum_order_stock_code_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT);
            v_sum_order_trade_code_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT);
            v_sum_order_target_code_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT);
            v_sum_order_external_no = lpTSCall1Ans12->GetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64);
            v_sum_order_date = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_DATE_INT);
            v_sum_order_batch_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT);
            v_sum_order_dir = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_DIR_INT);
            v_sum_order_price_type = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT);
            v_sum_order_price = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT);
            v_sum_order_qty = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT);
            strcpy(v_order_sum_status, lpTSCall1Ans12->GetString(LDBIZ_ORDER_SUM_STATUS_STR));
            v_sum_order_wtdraw_qty = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT);
            v_sum_order_waste_qty = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT);
            v_sum_order_strike_amt = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT);
            v_sum_order_strike_qty = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT);
            v_sum_order_strike_aver_price = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT);
            v_sum_order_net_price_flag = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT);
            v_sum_order_bond_accr_intrst = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT);
            v_sum_order_bond_rate_type = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT);
            v_sum_order_par_value = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT);
            v_sum_order_impawn_ratio = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT);
            strcpy(v_sum_order_oper_way, lpTSCall1Ans12->GetString(LDBIZ_SUM_ORDER_OPER_WAY_STR));
            v_sum_order_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT);
            v_sum_strike_row_id = lpTSCall1Ans12->GetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64);
            v_sum_strike_opor_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT);
            v_sum_strike_co_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT);
            v_sum_strike_pd_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT);
            v_sum_strike_exch_group_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT);
            v_sum_strike_asset_acco_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT);
            v_sum_strike_pass_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT);
            strcpy(v_sum_strike_out_acco, lpTSCall1Ans12->GetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR));
            v_sum_strike_stock_acco_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT);
            v_sum_strike_stock_code_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT);
            v_sum_strike_comm_id = lpTSCall1Ans12->GetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64);
            v_sum_strike_report_date = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT);
            strcpy(v_sum_strike_report_no, lpTSCall1Ans12->GetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR));
            v_sum_strike_order_date = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT);
            v_sum_strike_order_id = lpTSCall1Ans12->GetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64);
            v_sum_strike_order_dir = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT);
            v_sum_strike_order_price = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT);
            v_sum_strike_order_qty = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT);
            v_sum_strike_strike_qty = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT);
            v_sum_strike_strike_amt = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT);
            v_sum_strike_all_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT);
            v_sum_strike_stamp_tax = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT);
            v_sum_strike_trans_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT);
            v_sum_strike_brkage_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT);
            v_sum_strike_SEC_charges = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT);
            v_sum_strike_other_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT);
            v_sum_strike_trade_commis = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT);
            v_sum_strike_other_commis = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT);
            v_sum_trade_tax = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT);
            v_sum_trade_cost_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT);
            v_sum_trade_system_use_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT);
            v_sum_stock_settle_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT);
            v_sum_strike_net_price_flag = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT);
            v_sum_strike_bond_accr_intrst = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT);
            v_sum_strike_bond_rate_type = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT);
            strcpy(v_sum_strike_order_oper_way, lpTSCall1Ans12->GetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR));
            v_sum_strike_exter_comm_flag = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT);
            v_sum_strike_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT);
            v_sum_strike_order_batch_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT);
            v_sum_external_no = lpTSCall1Ans12->GetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64);


            // [主动推送][secu.ordertotal][证券主推_订单_订单汇总主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.21", 0);
            lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64,v_sum_order_row_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT,v_sum_order_opor_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_CO_NO_INT,v_sum_order_co_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PD_NO_INT,v_sum_order_pd_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT,v_sum_order_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT,v_sum_order_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT,v_sum_order_pass_no);
            lpPubMsg->SetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR,v_sum_order_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT,v_sum_order_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT,v_sum_order_trade_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT,v_sum_order_target_code_no);
            lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64,v_sum_order_external_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DATE_INT,v_sum_order_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT,v_sum_order_batch_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DIR_INT,v_sum_order_dir);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT,v_sum_order_price_type);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT,v_sum_order_price);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT,v_sum_order_qty);
            lpPubMsg->SetString(LDBIZ_ORDER_SUM_STATUS_STR,v_order_sum_status);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT,v_sum_order_wtdraw_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT,v_sum_order_waste_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT,v_sum_order_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT,v_sum_order_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT,v_sum_order_strike_aver_price);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT,v_sum_order_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT,v_sum_order_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT,v_sum_order_bond_rate_type);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT,v_sum_order_par_value);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT,v_sum_order_impawn_ratio);
            lpPubMsg->SetString(LDBIZ_SUM_ORDER_OPER_WAY_STR,v_sum_order_oper_way);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT,v_sum_order_update_times);
            glpPubSub_Interface->PubTopics("secu.ordertotal", lpPubMsg);

        // end if;
        }


        // if @指令序号# > 0 then
        if (v_comm_id > 0)
        {
            //调用过程[事务_交易证券_主推接口_获取指令混合信息]
            //组织事务请求
            if(lpTSCall1Ans13)
            {
              lpTSCall1Ans13->FreeMsg();
              lpTSCall1Ans13=NULL;
            }
            lpTSCall1Req13=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
            lpTSCall1Req13->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req13->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req13->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req13->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req13->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req13->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req13->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req13->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req13->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req13, &lpTSCall1Ans13, 5000);
            if(!lpTSCall1Ans13)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans13->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));
            v_init_date = lpTSCall1Ans13->GetInt32(LDBIZ_INIT_DATE_INT);
            v_co_no = lpTSCall1Ans13->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans13->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpTSCall1Ans13->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpTSCall1Ans13->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_pass_no = lpTSCall1Ans13->GetInt32(LDBIZ_PASS_NO_INT);
            strcpy(v_out_acco, lpTSCall1Ans13->GetString(LDBIZ_OUT_ACCO_STR));
            strcpy(v_exch_crncy_type, lpTSCall1Ans13->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
            v_stock_acco_no = lpTSCall1Ans13->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_stock_code_no = lpTSCall1Ans13->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            v_stock_type = lpTSCall1Ans13->GetInt32(LDBIZ_STOCK_TYPE_INT);
            v_comm_date = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_DATE_INT);
            v_comm_time = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_TIME_INT);
            v_comm_batch_no = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
            v_comm_opor = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_OPOR_INT);
            v_comm_executor = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
            v_comm_dir = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_DIR_INT);
            v_comm_limit_price = lpTSCall1Ans13->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
            v_limit_actual_price = lpTSCall1Ans13->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
            v_comm_qty = lpTSCall1Ans13->GetDouble(LDBIZ_COMM_QTY_FLOAT);
            v_comm_amt = lpTSCall1Ans13->GetDouble(LDBIZ_COMM_AMT_FLOAT);
            v_order_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
            v_comm_cancel_qty = lpTSCall1Ans13->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
            v_strike_amt = lpTSCall1Ans13->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
            v_strike_qty = lpTSCall1Ans13->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
            v_comm_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
            v_comm_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
            strcpy(v_strike_status, lpTSCall1Ans13->GetString(LDBIZ_STRIKE_STATUS_STR));
            strcpy(v_comm_status, lpTSCall1Ans13->GetString(LDBIZ_COMM_STATUS_STR));
            v_comm_begin_date = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
            v_comm_end_date = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_END_DATE_INT);
            v_comm_begin_time = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
            v_comm_end_time = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_END_TIME_INT);
            v_comm_comple_date = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
            v_comm_comple_time = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
            v_comm_appr_date = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
            v_comm_appr_time = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
            strcpy(v_comm_appr_status, lpTSCall1Ans13->GetString(LDBIZ_COMM_APPR_STATUS_STR));
            v_comm_appr_oper = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
            strcpy(v_comm_appr_remark, lpTSCall1Ans13->GetString(LDBIZ_COMM_APPR_REMARK_STR));
            v_basket_id = lpTSCall1Ans13->GetInt64(LDBIZ_BASKET_ID_INT64);
            v_net_price_flag = lpTSCall1Ans13->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
            v_bond_accr_intrst = lpTSCall1Ans13->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
            v_bond_rate_type = lpTSCall1Ans13->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
            strcpy(v_comm_oper_way, lpTSCall1Ans13->GetString(LDBIZ_COMM_OPER_WAY_STR));
            v_exter_comm_flag = lpTSCall1Ans13->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
            v_comm_comple_flag = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
            v_strategy_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
            v_strategy_order_qty = lpTSCall1Ans13->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
            strcpy(v_contra_no, lpTSCall1Ans13->GetString(LDBIZ_CONTRA_NO_STR));
            strcpy(v_comm_remark_info, lpTSCall1Ans13->GetString(LDBIZ_COMM_REMARK_INFO_STR));
            v_disp_opor = lpTSCall1Ans13->GetInt32(LDBIZ_DISP_OPOR_INT);
            v_disp_status = lpTSCall1Ans13->GetInt32(LDBIZ_DISP_STATUS_INT);
            v_read_flag = lpTSCall1Ans13->GetInt32(LDBIZ_READ_FLAG_INT);
            v_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_UPDATE_TIMES_INT);
            v_sum_comm_row_id = lpTSCall1Ans13->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
            v_sum_comm_co_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
            v_sum_comm_pd_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
            v_sum_comm_exch_group_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
            v_sum_comm_asset_acco_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
            v_sum_comm_pass_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
            strcpy(v_sum_comm_out_acco, lpTSCall1Ans13->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
            strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans13->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
            v_sum_comm_stock_code_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
            v_sum_comm_date = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
            v_sum_comm_time = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
            v_sum_comm_batch_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
            v_sum_comm_opor = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
            v_sum_comm_executor = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
            v_sum_comm_dir = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
            v_sum_comm_limit_price = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
            v_sum_comm_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
            v_sum_comm_amt = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
            v_sum_comm_order_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
            v_sum_comm_cancel_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
            v_sum_comm_await_cancel_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
            v_sum_comm_strike_amt = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
            v_sum_comm_strike_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
            strcpy(v_sum_comm_strike_status, lpTSCall1Ans13->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
            strcpy(v_comm_sum_status, lpTSCall1Ans13->GetString(LDBIZ_COMM_SUM_STATUS_STR));
            v_sum_comm_begin_date = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
            v_sum_comm_end_date = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
            v_sum_comm_begin_time = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
            v_sum_comm_end_time = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
            v_sum_comm_comple_date = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
            v_sum_comm_comple_time = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
            v_sum_comm_max_comm_comple_date = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
            v_sum_comm_max_comm_comple_time = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
            v_sum_comm_appr_date = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
            v_sum_comm_appr_time = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
            v_sum_comm_appr_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
            strcpy(v_comm_sum_approve_status, lpTSCall1Ans13->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
            v_sum_comm_basket_id = lpTSCall1Ans13->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
            v_sum_comm_net_price_flag = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
            v_sum_comm_bond_accr_intrst = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
            v_sum_comm_bond_rate_type = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
            strcpy(v_sum_comm_oper_way, lpTSCall1Ans13->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
            v_sum_comm_exter_comm_flag = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
            v_sum_buy_order_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
            v_sum_sell_order_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
            v_sum_buy_comm_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
            v_sum_sell_comm_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
            v_sum_buy_strike_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
            v_sum_sell_strike_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
            v_sum_buy_strike_amt = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
            v_sum_sell_strike_amt = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
            v_sum_buy_comm_amt = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
            v_sum_sell_comm_amt = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
            strcpy(v_sum_comm_remark_info, lpTSCall1Ans13->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
            v_sum_comm_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
            strcpy(v_acco_concat_info, lpTSCall1Ans13->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


            // [主动推送][secu.comm][证券主推_指令_指令主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
            lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
            lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
            lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
            lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
            lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
            lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
            lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
            lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
            lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
            lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
            lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
            lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
            lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
            lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
            lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
            lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
            lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
            lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
            lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


            // if @指令批号# > 0 then
            if (v_comm_batch_no > 0)
            {

                // set @指令备注信息#= @汇总指令备注信息#;
                strcpy(v_comm_remark_info,v_sum_comm_remark_info);

                // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
                lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
                lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
                lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
                lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
                lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
                glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

            // end if;
            }

        // end if;
        }


        // if (@订单操作方式# = 《订单操作方式-增强交易》 or @订单操作方式# = 《订单操作方式-增强交易平仓》) then
        if ((strcmp(v_order_oper_way , "14")==0 || strcmp(v_order_oper_way , "51")==0))
        {
            //增强交易主推
            //调用过程[事务_交易证券_主推接口_获取券源信息]
            //组织事务请求
            if(lpTSCall1Ans14)
            {
              lpTSCall1Ans14->FreeMsg();
              lpTSCall1Ans14=NULL;
            }
            lpTSCall1Req14=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.35", 0);
            lpTSCall1Req14->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req14->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req14->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req14->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req14->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req14->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req14->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req14->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req14->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
            lpTSCall1Req14->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpTSCall1Req14->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req14->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req14->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpTSCall1Req14->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
            glpTSSubcallSerives->SubCall(lpTSCall1Req14, &lpTSCall1Ans14, 5000);
            if(!lpTSCall1Ans14)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.35]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans14->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
            v_row_id = lpTSCall1Ans14->GetInt64(LDBIZ_ROW_ID_INT64);
            v_co_no = lpTSCall1Ans14->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans14->GetInt32(LDBIZ_PD_NO_INT);
            strcpy(v_stock_code, lpTSCall1Ans14->GetString(LDBIZ_STOCK_CODE_STR));
            v_exch_no = lpTSCall1Ans14->GetInt32(LDBIZ_EXCH_NO_INT);
            v_source_stock_qty = lpTSCall1Ans14->GetDouble(LDBIZ_SOURCE_STOCK_QTY_FLOAT);
            v_single_limit_qty = lpTSCall1Ans14->GetDouble(LDBIZ_SINGLE_LIMIT_QTY_FLOAT);
            v_assigned_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASSIGNED_QTY_FLOAT);
            v_trade_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT);
            v_trade_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT);
            v_strike_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT);
            v_strike_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT);
            v_over_night_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
            v_sum_realize_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
            v_total_open_posi_fee = lpTSCall1Ans14->GetDouble(LDBIZ_TOTAL_OPEN_POSI_FEE_FLOAT);
            v_total_close_posi_fee = lpTSCall1Ans14->GetDouble(LDBIZ_TOTAL_CLOSE_POSI_FEE_FLOAT);
            v_out_order_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_OUT_ORDER_RELEAS_QTY_FLOAT);
            v_out_order_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_OUT_ORDER_CAPT_QTY_FLOAT);
            v_out_strike_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_OUT_STRIKE_RELEAS_QTY_FLOAT);
            v_out_strike_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_OUT_STRIKE_CAPT_QTY_FLOAT);
            strcpy(v_remark_info, lpTSCall1Ans14->GetString(LDBIZ_REMARK_INFO_STR));
            v_buy_avail_qty = lpTSCall1Ans14->GetDouble(LDBIZ_BUY_AVAIL_QTY_FLOAT);
            v_sell_avail_qty = lpTSCall1Ans14->GetDouble(LDBIZ_SELL_AVAIL_QTY_FLOAT);
            v_posi_qty = lpTSCall1Ans14->GetDouble(LDBIZ_POSI_QTY_FLOAT);
            v_today_trade_fee = lpTSCall1Ans14->GetDouble(LDBIZ_TODAY_TRADE_FEE_FLOAT);
            v_today_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_TODAY_PANDL_FLOAT);
            v_diff_qty = lpTSCall1Ans14->GetDouble(LDBIZ_DIFF_QTY_FLOAT);
            v_over_night_trade_buy_qty = lpTSCall1Ans14->GetDouble(LDBIZ_OVER_NIGHT_TRADE_BUY_QTY_FLOAT);
            v_over_night_trade_sell_qty = lpTSCall1Ans14->GetDouble(LDBIZ_OVER_NIGHT_TRADE_SELL_QTY_FLOAT);
            v_over_night_strike_sell_qty = lpTSCall1Ans14->GetDouble(LDBIZ_OVER_NIGHT_STRIKE_SELL_QTY_FLOAT);
            v_over_night_sumtrd_sell_qty = lpTSCall1Ans14->GetDouble(LDBIZ_OVER_NIGHT_SUMTRD_SELL_QTY_FLOAT);
            v_over_night_sumstk_sell_qty = lpTSCall1Ans14->GetDouble(LDBIZ_OVER_NIGHT_SUMSTK_SELL_QTY_FLOAT);
            v_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.t0stocksource][证券主推_增强交易_券源变化主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.701", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetDouble(LDBIZ_SOURCE_STOCK_QTY_FLOAT,v_source_stock_qty);
            lpPubMsg->SetDouble(LDBIZ_SINGLE_LIMIT_QTY_FLOAT,v_single_limit_qty);
            lpPubMsg->SetDouble(LDBIZ_ASSIGNED_QTY_FLOAT,v_assigned_qty);
            lpPubMsg->SetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT,v_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT,v_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT,v_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT,v_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
            lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_TOTAL_OPEN_POSI_FEE_FLOAT,v_total_open_posi_fee);
            lpPubMsg->SetDouble(LDBIZ_TOTAL_CLOSE_POSI_FEE_FLOAT,v_total_close_posi_fee);
            lpPubMsg->SetDouble(LDBIZ_OUT_ORDER_RELEAS_QTY_FLOAT,v_out_order_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_OUT_ORDER_CAPT_QTY_FLOAT,v_out_order_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_OUT_STRIKE_RELEAS_QTY_FLOAT,v_out_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_OUT_STRIKE_CAPT_QTY_FLOAT,v_out_strike_capt_qty);
            lpPubMsg->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
            lpPubMsg->SetDouble(LDBIZ_BUY_AVAIL_QTY_FLOAT,v_buy_avail_qty);
            lpPubMsg->SetDouble(LDBIZ_SELL_AVAIL_QTY_FLOAT,v_sell_avail_qty);
            lpPubMsg->SetDouble(LDBIZ_POSI_QTY_FLOAT,v_posi_qty);
            lpPubMsg->SetDouble(LDBIZ_TODAY_TRADE_FEE_FLOAT,v_today_trade_fee);
            lpPubMsg->SetDouble(LDBIZ_TODAY_PANDL_FLOAT,v_today_pandl);
            lpPubMsg->SetDouble(LDBIZ_DIFF_QTY_FLOAT,v_diff_qty);
            lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_TRADE_BUY_QTY_FLOAT,v_over_night_trade_buy_qty);
            lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_TRADE_SELL_QTY_FLOAT,v_over_night_trade_sell_qty);
            lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_STRIKE_SELL_QTY_FLOAT,v_over_night_strike_sell_qty);
            lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_SUMTRD_SELL_QTY_FLOAT,v_over_night_sumtrd_sell_qty);
            lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_SUMSTK_SELL_QTY_FLOAT,v_over_night_sumstk_sell_qty);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.t0stocksource", lpPubMsg);

            //调用过程[事务_交易证券_主推接口_获取账户汇总信息查询]
            //组织事务请求
            if(lpTSCall1Ans15)
            {
              lpTSCall1Ans15->FreeMsg();
              lpTSCall1Ans15=NULL;
            }
            lpTSCall1Req15=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.37", 0);
            lpTSCall1Req15->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req15->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req15->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req15->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req15->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req15->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req15->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req15->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req15->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            glpTSSubcallSerives->SubCall(lpTSCall1Req15, &lpTSCall1Ans15, 5000);
            if(!lpTSCall1Ans15)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.37]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans15->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
            v_trade_amt = lpTSCall1Ans15->GetDouble(LDBIZ_TRADE_AMT_FLOAT);
            v_trade_qty = lpTSCall1Ans15->GetDouble(LDBIZ_TRADE_QTY_FLOAT);
            v_realize_pandl = lpTSCall1Ans15->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
            v_yield_rate = lpTSCall1Ans15->GetDouble(LDBIZ_YIELD_RATE_FLOAT);
            v_all_fee = lpTSCall1Ans15->GetDouble(LDBIZ_ALL_FEE_FLOAT);
            v_over_night_pandl = lpTSCall1Ans15->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
            v_sum_realize_pandl = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
            v_update_times = lpTSCall1Ans15->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.t0accosum][证券主推_增强交易_t0账户汇总主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.703", 0);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpPubMsg->SetDouble(LDBIZ_TRADE_AMT_FLOAT,v_trade_amt);
            lpPubMsg->SetDouble(LDBIZ_TRADE_QTY_FLOAT,v_trade_qty);
            lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_YIELD_RATE_FLOAT,v_yield_rate);
            lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
            lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.t0accosum", lpPubMsg);

            //调用过程[事务_交易证券_主推接口_获取t0操作员可用金额]
            //组织事务请求
            if(lpTSCall1Ans16)
            {
              lpTSCall1Ans16->FreeMsg();
              lpTSCall1Ans16=NULL;
            }
            lpTSCall1Req16=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.38", 0);
            lpTSCall1Req16->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req16->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req16->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req16->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req16->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req16->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req16->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req16->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req16->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req16->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
            glpTSSubcallSerives->SubCall(lpTSCall1Req16, &lpTSCall1Ans16, 5000);
            if(!lpTSCall1Ans16)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.38]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans16->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans16->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans16->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));
            v_avail_amt = lpTSCall1Ans16->GetDouble(LDBIZ_AVAIL_AMT_FLOAT);
            v_sum_realize_pandl = lpTSCall1Ans16->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
            v_update_times = lpTSCall1Ans16->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.t0availcapital][证券主推_增强交易_t0操作员可用金额主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.704", 0);
            lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpPubMsg->SetDouble(LDBIZ_AVAIL_AMT_FLOAT,v_avail_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.t0availcapital", lpPubMsg);

        // end if;
        }


        // if @组合持仓序号# > 0 then
        if (v_combo_posi_id > 0)
        {
            //调用过程[事务_交易证券_主推接口_获取组合持仓]
            //组织事务请求
            if(lpTSCall1Ans17)
            {
              lpTSCall1Ans17->FreeMsg();
              lpTSCall1Ans17=NULL;
            }
            lpTSCall1Req17=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.43", 0);
            lpTSCall1Req17->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req17->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req17->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req17->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req17->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req17->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req17->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req17->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req17->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpTSCall1Req17->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req17->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpTSCall1Req17->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpTSCall1Req17->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req17->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
            lpTSCall1Req17->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req17, &lpTSCall1Ans17, 5000);
            if(!lpTSCall1Ans17)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.43]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans17->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans17->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans17->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans17->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans17->GetString(LDBIZ_ERROR_INFO_STR));
            v_row_id = lpTSCall1Ans17->GetInt64(LDBIZ_ROW_ID_INT64);
            v_co_no = lpTSCall1Ans17->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans17->GetInt32(LDBIZ_PD_NO_INT);
            strcpy(v_stock_code, lpTSCall1Ans17->GetString(LDBIZ_STOCK_CODE_STR));
            v_exch_no = lpTSCall1Ans17->GetInt32(LDBIZ_EXCH_NO_INT);
            v_curr_qty = lpTSCall1Ans17->GetDouble(LDBIZ_CURR_QTY_FLOAT);
            v_posi_qty = lpTSCall1Ans17->GetDouble(LDBIZ_POSI_QTY_FLOAT);
            v_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_FROZEN_QTY_FLOAT);
            v_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_UNFROZ_QTY_FLOAT);
            v_pre_settle_qty = lpTSCall1Ans17->GetDouble(LDBIZ_PRE_SETTLE_QTY_FLOAT);
            v_trade_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_TRADE_FROZEN_QTY_FLOAT);
            v_trade_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_TRADE_UNFROZ_QTY_FLOAT);
            v_trade_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT);
            v_trade_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT);
            v_strike_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT);
            v_strike_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT);
            v_strike_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_STRIKE_FROZEN_QTY_FLOAT);
            v_strike_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_STRIKE_UNFROZ_QTY_FLOAT);
            v_realize_pandl = lpTSCall1Ans17->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
            v_cost_amt = lpTSCall1Ans17->GetDouble(LDBIZ_COST_AMT_FLOAT);
            v_intrst_cost_amt = lpTSCall1Ans17->GetDouble(LDBIZ_INTRST_COST_AMT_FLOAT);
            v_intrst_pandl = lpTSCall1Ans17->GetDouble(LDBIZ_INTRST_PANDL_FLOAT);
            v_update_times = lpTSCall1Ans17->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.comboposi][证券主推_组合_组合持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.905", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
            lpPubMsg->SetDouble(LDBIZ_POSI_QTY_FLOAT,v_posi_qty);
            lpPubMsg->SetDouble(LDBIZ_CURR_QTY_FLOAT,v_curr_qty);
            lpPubMsg->SetDouble(LDBIZ_FROZEN_QTY_FLOAT,v_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_UNFROZ_QTY_FLOAT,v_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_PRE_SETTLE_QTY_FLOAT,v_pre_settle_qty);
            lpPubMsg->SetDouble(LDBIZ_TRADE_FROZEN_QTY_FLOAT,v_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_TRADE_UNFROZ_QTY_FLOAT,v_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT,v_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT,v_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT,v_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT,v_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_FROZEN_QTY_FLOAT,v_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_UNFROZ_QTY_FLOAT,v_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_COST_AMT_FLOAT,v_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_INTRST_COST_AMT_FLOAT,v_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_INTRST_PANDL_FLOAT,v_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.comboposi", lpPubMsg);

            //调用过程[事务_交易证券_主推接口_获取组合收益]
            //组织事务请求
            if(lpTSCall1Ans18)
            {
              lpTSCall1Ans18->FreeMsg();
              lpTSCall1Ans18=NULL;
            }
            lpTSCall1Req18=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.44", 0);
            lpTSCall1Req18->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req18->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req18->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req18->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req18->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req18->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req18->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req18->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req18->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req18->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req18->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req18->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpTSCall1Req18->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            glpTSSubcallSerives->SubCall(lpTSCall1Req18, &lpTSCall1Ans18, 5000);
            if(!lpTSCall1Ans18)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.44]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans18->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans18->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans18->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans18->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans18->GetString(LDBIZ_ERROR_INFO_STR));
            v_row_id = lpTSCall1Ans18->GetInt64(LDBIZ_ROW_ID_INT64);
            v_open_posi_date = lpTSCall1Ans18->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
            v_combo_copies = lpTSCall1Ans18->GetDouble(LDBIZ_COMBO_COPIES_FLOAT);
            strcpy(v_combo_status, lpTSCall1Ans18->GetString(LDBIZ_COMBO_STATUS_STR));
            v_combo_cost = lpTSCall1Ans18->GetDouble(LDBIZ_COMBO_COST_FLOAT);
            v_combo_market_value = lpTSCall1Ans18->GetDouble(LDBIZ_COMBO_MARKET_VALUE_FLOAT);
            v_realize_pandl = lpTSCall1Ans18->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
            v_sum_realize_pandl = lpTSCall1Ans18->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
            v_update_times = lpTSCall1Ans18->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.comboincome][证券主推_组合_组合收益主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.906", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
            lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpPubMsg->SetDouble(LDBIZ_COMBO_COPIES_FLOAT,v_combo_copies);
            lpPubMsg->SetString(LDBIZ_COMBO_STATUS_STR,v_combo_status);
            lpPubMsg->SetDouble(LDBIZ_COMBO_COST_FLOAT,v_combo_cost);
            lpPubMsg->SetDouble(LDBIZ_COMBO_MARKET_VALUE_FLOAT,v_combo_market_value);
            lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.comboincome", lpPubMsg);

        // end if;
        }

        //质押提交和质押转回，要推交易代码和标准券代码

        // if @订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》 then
        if (v_order_dir == 21 || v_order_dir == 22)
        {
            //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
            //组织事务请求
            if(lpTSCall1Ans19)
            {
              lpTSCall1Ans19->FreeMsg();
              lpTSCall1Ans19=NULL;
            }
            lpTSCall1Req19=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
            lpTSCall1Req19->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req19->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req19->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req19->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req19->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req19->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req19->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req19->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req19->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req19->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req19->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpTSCall1Req19->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req19->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpTSCall1Req19->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
            lpTSCall1Req19->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpTSCall1Req19->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
            glpTSSubcallSerives->SubCall(lpTSCall1Req19, &lpTSCall1Ans19, 5000);
            if(!lpTSCall1Ans19)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans19->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans19->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans19->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans19->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans19->GetString(LDBIZ_ERROR_INFO_STR));
            v_exgp_cash_id = lpTSCall1Ans19->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
            v_exgp_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
            v_exgp_unfroz_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
            v_exgp_comm_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
            v_exgp_comm_unfroz_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
            v_exgp_comm_capt_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
            v_exgp_comm_releas_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
            v_exgp_trade_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
            v_exgp_trade_unfroz_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
            v_exgp_trade_capt_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
            v_exgp_trade_releas_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
            v_exgp_strike_capt_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
            v_exgp_strike_releas_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
            v_exgp_cash_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
            v_exgp_posi_id = lpTSCall1Ans19->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
            v_exgp_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
            v_exgp_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
            v_exgp_comm_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
            v_exgp_comm_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
            v_exgp_comm_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
            v_exgp_comm_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
            v_exgp_trade_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
            v_exgp_trade_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
            v_exgp_trade_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
            v_exgp_trade_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
            v_exgp_strike_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
            v_exgp_strike_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
            v_exgp_strike_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
            v_exgp_strike_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
            v_exgp_realize_pandl = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
            v_exgp_cost_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
            v_exgp_intrst_cost_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
            v_exgp_intrst_pandl = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
            v_exgp_posi_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
            v_asac_cash_id = lpTSCall1Ans19->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
            v_asac_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
            v_asac_unfroz_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
            v_asac_comm_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
            v_asac_comm_unfroz_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
            v_asac_comm_capt_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
            v_asac_comm_releas_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
            v_asac_trade_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
            v_asac_trade_unfroz_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
            v_asac_trade_capt_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
            v_asac_trade_releas_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
            v_asac_strike_capt_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
            v_asac_strike_releas_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
            v_asac_cash_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
            v_asac_posi_id = lpTSCall1Ans19->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
            v_asac_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
            v_asac_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
            v_asac_comm_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
            v_asac_comm_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
            v_asac_comm_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
            v_asac_comm_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
            v_asac_trade_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
            v_asac_trade_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
            v_asac_trade_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
            v_asac_trade_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
            v_asac_strike_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
            v_asac_strike_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
            v_asac_strike_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
            v_asac_strike_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
            v_asac_realize_pandl = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
            v_asac_cost_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
            v_asac_intrst_cost_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
            v_asac_intrst_pandl = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
            v_asac_posi_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
            v_exgp_target_posi_id = lpTSCall1Ans19->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
            v_exgp_target_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
            v_exgp_target_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
            v_exgp_target_comm_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
            v_exgp_target_comm_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
            v_exgp_target_comm_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
            v_exgp_target_comm_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
            v_exgp_target_trade_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
            v_exgp_target_trade_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
            v_exgp_target_trade_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
            v_exgp_target_trade_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
            v_exgp_target_strike_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
            v_exgp_target_strike_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
            v_exgp_target_strike_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
            v_exgp_target_strike_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
            v_exgp_target_realize_pandl = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
            v_exgp_target_cost_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
            v_exgp_target_intrst_cost_amt = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
            v_exgp_target_intrst_pandl = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
            v_exgp_target_posi_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
            v_asac_target_posi_id = lpTSCall1Ans19->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
            v_asac_target_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
            v_asac_target_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
            v_asac_target_comm_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
            v_asac_target_comm_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
            v_asac_target_comm_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
            v_asac_target_comm_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
            v_asac_target_trade_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
            v_asac_target_trade_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
            v_asac_target_trade_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
            v_asac_target_trade_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
            v_asac_target_strike_capt_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
            v_asac_target_strike_releas_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
            v_asac_target_strike_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
            v_asac_target_strike_unfroz_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
            v_asac_target_realize_pandl = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
            v_asac_target_cost_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
            v_asac_target_intrst_cost_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
            v_asac_target_intrst_pandl = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
            v_asac_target_posi_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
            v_exgp_put_impawn_qty = lpTSCall1Ans19->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
            v_asac_put_impawn_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


            // set @证券代码编号# = @交易代码编号#;
            v_stock_code_no = v_trade_code_no;

            // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
            lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
            lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
            glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


            // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
            lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
            lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
            glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


            // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
            lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
            lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
            glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


            // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
            lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
            lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
            glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


            // set @证券代码编号# = @标的代码编号#;
            v_stock_code_no = v_target_code_no;

            // set @交易组提交质押数量# = 0;
            v_exgp_put_impawn_qty = 0;

            // set @资产账户提交质押数量# = 0;
            v_asac_put_impawn_qty = 0;

            // set @交易组持仓序号# = @交易组标的持仓序号#;
            v_exgp_posi_id = v_exgp_target_posi_id;

            // set @交易组冻结数量# = @交易组标的冻结数量#;
            v_exgp_frozen_qty = v_exgp_target_frozen_qty;

            // set @交易组解冻数量# = @交易组标的解冻数量#;
            v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

            // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
            v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

            // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
            v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

            // set @交易组指令占用数量# = @交易组标的指令占用数量#;
            v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

            // set @交易组指令释放数量# = @交易组标的指令释放数量#;
            v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

            // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
            v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

            // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
            v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

            // set @交易组交易占用数量# = @交易组标的交易占用数量#;
            v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

            // set @交易组交易释放数量# = @交易组标的交易释放数量#;
            v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

            // set @交易组成交占用数量# = @交易组标的成交占用数量#;
            v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

            // set @交易组成交释放数量# = @交易组标的成交释放数量#;
            v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

            // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
            v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

            // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
            v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

            // set @交易组实现盈亏# = @交易组标的实现盈亏#;
            v_exgp_realize_pandl = v_exgp_target_realize_pandl;

            // set @交易组成本金额# = @交易组标的成本金额#;
            v_exgp_cost_amt = v_exgp_target_cost_amt;

            // set @交易组利息成本金额# = @交易组标的利息成本金额#;
            v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

            // set @交易组利息收益# = @交易组标的利息收益#;
            v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

            // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
            v_exgp_posi_update_times = v_exgp_target_posi_update_times;

            // set @资产账户持仓序号# = @资产账户标的持仓序号#;
            v_asac_posi_id = v_asac_target_posi_id;

            // set @资产账户冻结数量# = @资产账户标的冻结数量#;
            v_asac_frozen_qty = v_asac_target_frozen_qty;

            // set @资产账户解冻数量# = @资产账户标的解冻数量#;
            v_asac_unfroz_qty = v_asac_target_unfroz_qty;

            // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
            v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

            // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
            v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

            // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
            v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

            // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
            v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

            // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
            v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

            // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
            v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

            // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
            v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

            // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
            v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

            // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
            v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

            // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
            v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

            // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
            v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

            // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
            v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

            // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
            v_asac_realize_pandl = v_asac_target_realize_pandl;

            // set @资产账户成本金额# = @资产账户标的成本金额#;
            v_asac_cost_amt = v_asac_target_cost_amt;

            // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
            v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

            // set @资产账户利息收益# = @资产账户标的利息收益#;
            v_asac_intrst_pandl = v_asac_target_intrst_pandl;

            // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
            v_asac_posi_update_times = v_asac_target_posi_update_times;

            // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
            lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
            lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
            glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


            // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
            lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
            lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
            glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


        }
        // else if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
        else if (v_order_dir == 3 || v_order_dir == 4)
        {

            // set @证券代码编号# = @标的代码编号#;
            v_stock_code_no = v_target_code_no;
            //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
            //组织事务请求
            if(lpTSCall1Ans20)
            {
              lpTSCall1Ans20->FreeMsg();
              lpTSCall1Ans20=NULL;
            }
            lpTSCall1Req20=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
            lpTSCall1Req20->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req20->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req20->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req20->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req20->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req20->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req20->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req20->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req20->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req20->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req20->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpTSCall1Req20->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req20->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpTSCall1Req20->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req20->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req20, &lpTSCall1Ans20, 5000);
            if(!lpTSCall1Ans20)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans20->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans20->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans20->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans20->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans20->GetString(LDBIZ_ERROR_INFO_STR));
            v_exgp_cash_id = lpTSCall1Ans20->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
            v_exgp_frozen_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
            v_exgp_unfroz_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
            v_exgp_comm_frozen_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
            v_exgp_comm_unfroz_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
            v_exgp_comm_capt_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
            v_exgp_comm_releas_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
            v_exgp_trade_frozen_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
            v_exgp_trade_unfroz_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
            v_exgp_trade_capt_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
            v_exgp_trade_releas_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
            v_exgp_strike_capt_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
            v_exgp_strike_releas_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
            v_exgp_cash_update_times = lpTSCall1Ans20->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
            v_exgp_posi_id = lpTSCall1Ans20->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
            v_exgp_frozen_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
            v_exgp_unfroz_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
            v_exgp_comm_frozen_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
            v_exgp_comm_unfroz_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
            v_exgp_comm_capt_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
            v_exgp_comm_releas_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
            v_exgp_trade_frozen_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
            v_exgp_trade_unfroz_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
            v_exgp_trade_capt_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
            v_exgp_trade_releas_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
            v_exgp_strike_capt_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
            v_exgp_strike_releas_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
            v_exgp_strike_frozen_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
            v_exgp_strike_unfroz_qty = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
            v_exgp_realize_pandl = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
            v_exgp_cost_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
            v_exgp_intrst_cost_amt = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
            v_exgp_intrst_pandl = lpTSCall1Ans20->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
            v_exgp_posi_update_times = lpTSCall1Ans20->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
            v_asac_cash_id = lpTSCall1Ans20->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
            v_asac_frozen_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
            v_asac_unfroz_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
            v_asac_comm_frozen_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
            v_asac_comm_unfroz_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
            v_asac_comm_capt_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
            v_asac_comm_releas_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
            v_asac_trade_frozen_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
            v_asac_trade_unfroz_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
            v_asac_trade_capt_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
            v_asac_trade_releas_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
            v_asac_strike_capt_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
            v_asac_strike_releas_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
            v_asac_cash_update_times = lpTSCall1Ans20->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
            v_asac_posi_id = lpTSCall1Ans20->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
            v_asac_frozen_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
            v_asac_unfroz_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
            v_asac_comm_frozen_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
            v_asac_comm_unfroz_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
            v_asac_comm_capt_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
            v_asac_comm_releas_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
            v_asac_trade_frozen_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
            v_asac_trade_unfroz_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
            v_asac_trade_capt_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
            v_asac_trade_releas_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
            v_asac_strike_capt_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
            v_asac_strike_releas_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
            v_asac_strike_frozen_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
            v_asac_strike_unfroz_qty = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
            v_asac_realize_pandl = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
            v_asac_cost_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
            v_asac_intrst_cost_amt = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
            v_asac_intrst_pandl = lpTSCall1Ans20->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
            v_asac_posi_update_times = lpTSCall1Ans20->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


            // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
            lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
            lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
            glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


            // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
            lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
            lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
            glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


            // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
            lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
            lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
            glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


            // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
            lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
            lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
            glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


        }
        // else if @资产账户类型# = 《资产账户类型-融资融券》 and ((@订单方向# = 《订单方向-融资买入》 or @订单方向# = 《订单方向-融券卖出》 or @订单方向# = 《订单方向-卖券还款》 or @订单方向# = 《订单方向-买券还券》 or @订单方向# = 《订单方向-直接还款》 or @订单方向# = 《订单方向-直接还券》) or  (@资产账户类型# = 《资产账户类型-融资融券》 and @订单方向# = 《订单方向-卖出》 and  @存在负债标志# = 《存在负债标志-存在》 and @卖出自动还款# = 《卖出自动还款-是》)) then
        else if (v_asset_acco_type == 5 && ((v_order_dir == 5 || v_order_dir == 6 || v_order_dir == 7 || v_order_dir == 8 || v_order_dir == 14 || v_order_dir == 15) ||  (v_asset_acco_type == 5 && v_order_dir == 2 &&  v_exist_debt_flag == 2 && v_sell_auto_back_debt == 0)))
        {

            // set @交易组提交质押数量# = 0;
            v_exgp_put_impawn_qty = 0;

            // set @资产账户提交质押数量# = 0;
            v_asac_put_impawn_qty = 0;
            //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
            //组织事务请求
            if(lpTSCall1Ans21)
            {
              lpTSCall1Ans21->FreeMsg();
              lpTSCall1Ans21=NULL;
            }
            lpTSCall1Req21=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
            lpTSCall1Req21->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req21->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req21->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req21->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req21->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req21->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req21->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req21->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req21->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req21->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req21->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpTSCall1Req21->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req21->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpTSCall1Req21->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req21->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req21, &lpTSCall1Ans21, 5000);
            if(!lpTSCall1Ans21)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans21->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans21->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans21->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans21->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans21->GetString(LDBIZ_ERROR_INFO_STR));
            v_exgp_cash_id = lpTSCall1Ans21->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
            v_exgp_frozen_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
            v_exgp_unfroz_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
            v_exgp_comm_frozen_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
            v_exgp_comm_unfroz_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
            v_exgp_comm_capt_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
            v_exgp_comm_releas_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
            v_exgp_trade_frozen_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
            v_exgp_trade_unfroz_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
            v_exgp_trade_capt_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
            v_exgp_trade_releas_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
            v_exgp_strike_capt_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
            v_exgp_strike_releas_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
            v_exgp_cash_update_times = lpTSCall1Ans21->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
            v_exgp_posi_id = lpTSCall1Ans21->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
            v_exgp_frozen_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
            v_exgp_unfroz_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
            v_exgp_comm_frozen_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
            v_exgp_comm_unfroz_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
            v_exgp_comm_capt_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
            v_exgp_comm_releas_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
            v_exgp_trade_frozen_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
            v_exgp_trade_unfroz_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
            v_exgp_trade_capt_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
            v_exgp_trade_releas_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
            v_exgp_strike_capt_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
            v_exgp_strike_releas_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
            v_exgp_strike_frozen_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
            v_exgp_strike_unfroz_qty = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
            v_exgp_realize_pandl = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
            v_exgp_cost_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
            v_exgp_intrst_cost_amt = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
            v_exgp_intrst_pandl = lpTSCall1Ans21->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
            v_exgp_posi_update_times = lpTSCall1Ans21->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
            v_asac_cash_id = lpTSCall1Ans21->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
            v_asac_frozen_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
            v_asac_unfroz_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
            v_asac_comm_frozen_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
            v_asac_comm_unfroz_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
            v_asac_comm_capt_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
            v_asac_comm_releas_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
            v_asac_trade_frozen_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
            v_asac_trade_unfroz_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
            v_asac_trade_capt_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
            v_asac_trade_releas_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
            v_asac_strike_capt_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
            v_asac_strike_releas_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
            v_asac_cash_update_times = lpTSCall1Ans21->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
            v_asac_posi_id = lpTSCall1Ans21->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
            v_asac_frozen_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
            v_asac_unfroz_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
            v_asac_comm_frozen_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
            v_asac_comm_unfroz_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
            v_asac_comm_capt_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
            v_asac_comm_releas_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
            v_asac_trade_frozen_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
            v_asac_trade_unfroz_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
            v_asac_trade_capt_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
            v_asac_trade_releas_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
            v_asac_strike_capt_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
            v_asac_strike_releas_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
            v_asac_strike_frozen_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
            v_asac_strike_unfroz_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
            v_asac_realize_pandl = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
            v_asac_cost_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
            v_asac_intrst_cost_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
            v_asac_intrst_pandl = lpTSCall1Ans21->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
            v_asac_posi_update_times = lpTSCall1Ans21->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


            // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
            lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
            lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
            glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


            // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
            lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
            lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
            glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


            // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
            lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
            lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
            glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


            // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
            lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
            lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
            glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

            //主推：交易证券_账户_交易组业务资金负债表、交易证券_账户_资产账户业务资金负债表、交易证券_账户_交易组业务持仓负债表、交易证券_账户_资产账户业务持仓负债表、交易    证券_            账户_资产账户负债明细表、交易证券_账户_交易组负债明细表
            //调用过程[事务_交易证券_账户_查询交易组业务持仓负债]
            //组织事务请求
            if(lpTSCall1Ans22)
            {
              lpTSCall1Ans22->FreeMsg();
              lpTSCall1Ans22=NULL;
            }
            lpTSCall1Req22=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.76", 0);
            lpTSCall1Req22->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req22->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req22->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req22->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req22->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req22->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req22->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req22->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req22->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req22->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req22->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req22->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req22->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpTSCall1Req22->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpTSCall1Req22->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req22->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req22, &lpTSCall1Ans22, 5000);
            if(!lpTSCall1Ans22)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.76]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans22->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans22->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans22->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans22->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans22->GetString(LDBIZ_ERROR_INFO_STR));
            v_row_id = lpTSCall1Ans22->GetInt64(LDBIZ_ROW_ID_INT64);
            v_exch_no = lpTSCall1Ans22->GetInt32(LDBIZ_EXCH_NO_INT);
            v_stock_type = lpTSCall1Ans22->GetInt32(LDBIZ_STOCK_TYPE_INT);
            v_asset_type = lpTSCall1Ans22->GetInt32(LDBIZ_ASSET_TYPE_INT);
            v_invest_type = lpTSCall1Ans22->GetInt32(LDBIZ_INVEST_TYPE_INT);
            v_debt_fina_buy_strike_qty = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT);
            v_fina_return_strike_qty = lpTSCall1Ans22->GetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT);
            v_debt_loan_sell_strike_qty = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT);
            v_loan_return_strike_qty = lpTSCall1Ans22->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT);
            v_debt_fina_buy_order_qty = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT);
            v_fina_return_order_qty = lpTSCall1Ans22->GetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT);
            v_debt_loan_sell_order_qty = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT);
            v_loan_return_order_qty = lpTSCall1Ans22->GetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT);
            v_debt_fina_buy_comm_qty = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT);
            v_fina_return_comm_qty = lpTSCall1Ans22->GetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT);
            v_debt_loan_sell_comm_qty = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT);
            v_loan_return_comm_qty = lpTSCall1Ans22->GetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT);
            v_debt_fina_buy_strike_amt = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT);
            v_fina_return_strike_amt = lpTSCall1Ans22->GetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT);
            v_debt_loan_sell_strike_amt = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
            v_loan_return_strike_amt = lpTSCall1Ans22->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
            v_debt_fina_buy_order_amt = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT);
            v_fina_return_order_amt = lpTSCall1Ans22->GetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT);
            v_debt_loan_sell_order_amt = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT);
            v_loan_return_order_amt = lpTSCall1Ans22->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
            v_debt_fina_buy_comm_amt = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT);
            v_fina_return_comm_amt = lpTSCall1Ans22->GetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT);
            v_debt_loan_sell_comm_amt = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT);
            v_loan_return_comm_amt = lpTSCall1Ans22->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
            v_debt_strike_fee = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
            v_return_strike_fee = lpTSCall1Ans22->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
            v_debt_interest = lpTSCall1Ans22->GetDouble(LDBIZ_DEBT_INTEREST_FLOAT);
            v_return_interest_amt = lpTSCall1Ans22->GetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT);
            v_update_times = lpTSCall1Ans22->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.exgpposidebt][证券主推_持仓_交易组业务持仓负债主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.928", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
            lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
            lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
            lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.exgpposidebt", lpPubMsg);

            //调用过程[事务_交易证券_账户_查询资产账户业务持仓负债]
            //组织事务请求
            if(lpTSCall1Ans23)
            {
              lpTSCall1Ans23->FreeMsg();
              lpTSCall1Ans23=NULL;
            }
            lpTSCall1Req23=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.77", 0);
            lpTSCall1Req23->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req23->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req23->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req23->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req23->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req23->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req23->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req23->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req23->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req23->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req23->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req23->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req23->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpTSCall1Req23->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req23->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req23, &lpTSCall1Ans23, 5000);
            if(!lpTSCall1Ans23)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.77]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans23->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans23->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans23->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans23->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans23->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans23->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans23->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans23->GetString(LDBIZ_ERROR_INFO_STR));


            // [主动推送][secu.asacposidebt][证券主推_持仓_资产账户业务持仓负债主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.929", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
            lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
            lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
            lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.asacposidebt", lpPubMsg);

            //调用过程[事务_交易证券_账户_查询资产账户业务资金负债]
            //组织事务请求
            if(lpTSCall1Ans24)
            {
              lpTSCall1Ans24->FreeMsg();
              lpTSCall1Ans24=NULL;
            }
            lpTSCall1Req24=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.75", 0);
            lpTSCall1Req24->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req24->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req24->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req24->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req24->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req24->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req24->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req24->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req24->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req24->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req24->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req24->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            glpTSSubcallSerives->SubCall(lpTSCall1Req24, &lpTSCall1Ans24, 5000);
            if(!lpTSCall1Ans24)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.75]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans24->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans24->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans24->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans24->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans24->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans24->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans24->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans24->GetString(LDBIZ_ERROR_INFO_STR));
            v_row_id = lpTSCall1Ans24->GetInt64(LDBIZ_ROW_ID_INT64);
            v_debt_loan_sell_strike_amt = lpTSCall1Ans24->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
            v_debt_strike_fee = lpTSCall1Ans24->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
            v_loan_return_strike_amt = lpTSCall1Ans24->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
            v_loan_return_order_amt = lpTSCall1Ans24->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
            v_loan_return_comm_amt = lpTSCall1Ans24->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
            v_return_strike_fee = lpTSCall1Ans24->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
            v_update_times = lpTSCall1Ans24->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.asaccapitaldebt][证券主推_资金_资产账户业务资金负债主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.930", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.asaccapitaldebt", lpPubMsg);

            //调用过程[事务_交易证券_账户_查询交易组业务资金负债]
            //组织事务请求
            if(lpTSCall1Ans25)
            {
              lpTSCall1Ans25->FreeMsg();
              lpTSCall1Ans25=NULL;
            }
            lpTSCall1Req25=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.74", 0);
            lpTSCall1Req25->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req25->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req25->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req25->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req25->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req25->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req25->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req25->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req25->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req25->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req25->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req25->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req25->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            glpTSSubcallSerives->SubCall(lpTSCall1Req25, &lpTSCall1Ans25, 5000);
            if(!lpTSCall1Ans25)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.74]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans25->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans25->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans25->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans25->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans25->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans25->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans25->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans25->GetString(LDBIZ_ERROR_INFO_STR));
            v_row_id = lpTSCall1Ans25->GetInt64(LDBIZ_ROW_ID_INT64);
            v_debt_loan_sell_strike_amt = lpTSCall1Ans25->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
            v_debt_strike_fee = lpTSCall1Ans25->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
            v_loan_return_strike_amt = lpTSCall1Ans25->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
            v_loan_return_order_amt = lpTSCall1Ans25->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
            v_loan_return_comm_amt = lpTSCall1Ans25->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
            v_return_strike_fee = lpTSCall1Ans25->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
            v_update_times = lpTSCall1Ans25->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.exgpcapitaldebt][证券主推_资金_交易组业务资金负债主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.931", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.exgpcapitaldebt", lpPubMsg);

        }
        // else
        else
        {

            //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
            //组织事务请求
            if(lpTSCall1Ans26)
            {
              lpTSCall1Ans26->FreeMsg();
              lpTSCall1Ans26=NULL;
            }
            lpTSCall1Req26=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
            lpTSCall1Req26->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req26->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req26->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req26->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req26->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req26->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req26->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req26->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req26->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req26->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req26->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpTSCall1Req26->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req26->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpTSCall1Req26->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req26->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req26, &lpTSCall1Ans26, 5000);
            if(!lpTSCall1Ans26)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans26->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans26->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans26->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans26->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans26->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans26->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans26->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans26->GetString(LDBIZ_ERROR_INFO_STR));
            v_exgp_cash_id = lpTSCall1Ans26->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
            v_exgp_frozen_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
            v_exgp_unfroz_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
            v_exgp_comm_frozen_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
            v_exgp_comm_unfroz_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
            v_exgp_comm_capt_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
            v_exgp_comm_releas_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
            v_exgp_trade_frozen_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
            v_exgp_trade_unfroz_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
            v_exgp_trade_capt_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
            v_exgp_trade_releas_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
            v_exgp_strike_capt_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
            v_exgp_strike_releas_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
            v_exgp_cash_update_times = lpTSCall1Ans26->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
            v_exgp_posi_id = lpTSCall1Ans26->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
            v_exgp_frozen_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
            v_exgp_unfroz_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
            v_exgp_comm_frozen_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
            v_exgp_comm_unfroz_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
            v_exgp_comm_capt_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
            v_exgp_comm_releas_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
            v_exgp_trade_frozen_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
            v_exgp_trade_unfroz_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
            v_exgp_trade_capt_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
            v_exgp_trade_releas_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
            v_exgp_strike_capt_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
            v_exgp_strike_releas_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
            v_exgp_strike_frozen_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
            v_exgp_strike_unfroz_qty = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
            v_exgp_realize_pandl = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
            v_exgp_cost_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
            v_exgp_intrst_cost_amt = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
            v_exgp_intrst_pandl = lpTSCall1Ans26->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
            v_exgp_posi_update_times = lpTSCall1Ans26->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
            v_asac_cash_id = lpTSCall1Ans26->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
            v_asac_frozen_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
            v_asac_unfroz_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
            v_asac_comm_frozen_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
            v_asac_comm_unfroz_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
            v_asac_comm_capt_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
            v_asac_comm_releas_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
            v_asac_trade_frozen_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
            v_asac_trade_unfroz_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
            v_asac_trade_capt_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
            v_asac_trade_releas_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
            v_asac_strike_capt_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
            v_asac_strike_releas_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
            v_asac_cash_update_times = lpTSCall1Ans26->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
            v_asac_posi_id = lpTSCall1Ans26->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
            v_asac_frozen_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
            v_asac_unfroz_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
            v_asac_comm_frozen_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
            v_asac_comm_unfroz_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
            v_asac_comm_capt_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
            v_asac_comm_releas_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
            v_asac_trade_frozen_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
            v_asac_trade_unfroz_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
            v_asac_trade_capt_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
            v_asac_trade_releas_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
            v_asac_strike_capt_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
            v_asac_strike_releas_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
            v_asac_strike_frozen_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
            v_asac_strike_unfroz_qty = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
            v_asac_realize_pandl = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
            v_asac_cost_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
            v_asac_intrst_cost_amt = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
            v_asac_intrst_pandl = lpTSCall1Ans26->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
            v_asac_posi_update_times = lpTSCall1Ans26->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


            // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
            lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
            lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
            glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


            // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
            lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
            lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
            glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


            // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
            lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
            lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
            glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


            // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
            lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
            lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
            lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
            lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
            glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

        // end if;
        }

        //改单处理，考虑并发需要先直接更新改单记录，如果异常需要重新更新回去
        //调用过程[事务_交易证券_交易_更新获取改单信息]
        //组织事务请求
        if(lpTSCall1Ans27)
        {
          lpTSCall1Ans27->FreeMsg();
          lpTSCall1Ans27=NULL;
        }
        lpTSCall1Req27=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.62", 0);
        lpTSCall1Req27->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req27->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req27->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req27->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req27->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req27->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req27->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req27->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req27->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpTSCall1Req27->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        glpTSSubcallSerives->SubCall(lpTSCall1Req27, &lpTSCall1Ans27, 5000);
        if(!lpTSCall1Ans27)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.62]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans27->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans27->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans27->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans27->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans27->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans27->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans27->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans27->GetString(LDBIZ_ERROR_INFO_STR));
        v_modi_order_id = lpTSCall1Ans27->GetInt64(LDBIZ_MODI_ORDER_ID_INT64);
        v_modi_order_date = lpTSCall1Ans27->GetInt32(LDBIZ_MODI_ORDER_DATE_INT);
        v_modi_order_time = lpTSCall1Ans27->GetInt32(LDBIZ_MODI_ORDER_TIME_INT);
        v_modi_batch_no = lpTSCall1Ans27->GetInt32(LDBIZ_MODI_BATCH_NO_INT);
        v_modi_order_price = lpTSCall1Ans27->GetDouble(LDBIZ_MODI_ORDER_PRICE_FLOAT);
        v_modi_order_qty = lpTSCall1Ans27->GetDouble(LDBIZ_MODI_ORDER_QTY_FLOAT);
        v_modi_price_type = lpTSCall1Ans27->GetInt32(LDBIZ_MODI_PRICE_TYPE_INT);
        v_exch_no = lpTSCall1Ans27->GetInt32(LDBIZ_EXCH_NO_INT);
        v_stock_code_no = lpTSCall1Ans27->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        strcpy(v_stock_code, lpTSCall1Ans27->GetString(LDBIZ_STOCK_CODE_STR));
        strcpy(v_crncy_type, lpTSCall1Ans27->GetString(LDBIZ_CRNCY_TYPE_STR));
        strcpy(v_exch_crncy_type, lpTSCall1Ans27->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
        strcpy(v_order_oper_way, lpTSCall1Ans27->GetString(LDBIZ_ORDER_OPER_WAY_STR));
        v_busi_opor_no = lpTSCall1Ans27->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);


        // if @改单序号# <> 0 then
        if (v_modi_order_id != 0)
        {

            // set @订单数量# = @临时_订单数量#;
            v_order_qty = v_tmp_order_qty;

            // set @成交数量# = @订单数量# - @撤单数量#;
            v_strike_qty = v_order_qty - v_wtdraw_qty;

            // set @订单数量# = @改单数量# - @成交数量#;
            v_order_qty = v_modi_order_qty - v_strike_qty;

            // set @订单价格# = @改单价格#;
            v_order_price = v_modi_order_price;

            // set @操作员编号# = @业务操作员编号#;
            v_opor_no = v_busi_opor_no;

            // set @指令下达人# = @操作员编号#;
            v_comm_opor = v_opor_no;

            // set @备注信息# = "已报改单生成订单。";
            strcpy(v_remark_info,"已报改单生成订单。");

            // set @订单批号# = @改单批号#;
            v_order_batch_no = v_modi_batch_no;

            // set @价格类型# = @改单价格类型#;
            v_price_type = v_modi_price_type;
            //最小单位这个还没有输出，后续需要输出

            // set @订单数量# = floor(@订单数量#/@最小单位#) * @最小单位#;
            v_order_qty = floor(v_order_qty/v_min_unit) * v_min_unit;

            // if @订单数量# > 0 then
            if (v_order_qty > 0)
            {

                // set @操作员编号# = @业务操作员编号#;
                v_opor_no = v_busi_opor_no;

                // set @操作员机构编号# = @机构编号#;
                v_opor_co_no = v_co_no;
                //调用过程[事务_公共_交易接口_检查改单下单权限身份]
                //组织事务请求
                if(lpTSCall1Ans28)
                {
                  lpTSCall1Ans28->FreeMsg();
                  lpTSCall1Ans28=NULL;
                }
                lpTSCall1Req28=glpFastMsgFactory->CreateFastMessage("pubT.25.24", 0);
                lpTSCall1Req28->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req28->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req28->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req28->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req28->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req28->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req28->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req28->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req28->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                lpTSCall1Req28->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpTSCall1Req28->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                lpTSCall1Req28->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
                lpTSCall1Req28->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                lpTSCall1Req28->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                lpTSCall1Req28->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
                lpTSCall1Req28->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
                glpTSSubcallSerives->SubCall(lpTSCall1Req28, &lpTSCall1Ans28, 5000);
                if(!lpTSCall1Ans28)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.24]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans28->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans28->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans28->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans28->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans28->GetString(LDBIZ_ERROR_INFO_STR));
                v_init_date = lpTSCall1Ans28->GetInt32(LDBIZ_INIT_DATE_INT);
                v_pd_no = lpTSCall1Ans28->GetInt32(LDBIZ_PD_NO_INT);
                strcpy(v_co_busi_config_str, lpTSCall1Ans28->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
                strcpy(v_exgp_busi_config_str, lpTSCall1Ans28->GetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR));
                v_stock_code_no = lpTSCall1Ans28->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
                v_stock_type = lpTSCall1Ans28->GetInt32(LDBIZ_STOCK_TYPE_INT);
                v_asset_type = lpTSCall1Ans28->GetInt32(LDBIZ_ASSET_TYPE_INT);
                strcpy(v_crncy_type, lpTSCall1Ans28->GetString(LDBIZ_CRNCY_TYPE_STR));
                strcpy(v_exch_crncy_type, lpTSCall1Ans28->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
                v_buy_ref_rate = lpTSCall1Ans28->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
                v_sell_ref_rate = lpTSCall1Ans28->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
                v_par_value = lpTSCall1Ans28->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
                v_impawn_ratio = lpTSCall1Ans28->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
                v_net_price_flag = lpTSCall1Ans28->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
                v_intrst_days = lpTSCall1Ans28->GetInt32(LDBIZ_INTRST_DAYS_INT);
                v_bond_rate_type = lpTSCall1Ans28->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
                v_bond_accr_intrst = lpTSCall1Ans28->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
                v_target_code_no = lpTSCall1Ans28->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
                strcpy(v_target_code, lpTSCall1Ans28->GetString(LDBIZ_TARGET_CODE_STR));
                v_target_code_stock_type = lpTSCall1Ans28->GetInt32(LDBIZ_TARGET_CODE_STOCK_TYPE_INT);
                v_target_code_asset_type = lpTSCall1Ans28->GetInt32(LDBIZ_TARGET_CODE_ASSET_TYPE_INT);
                v_trade_code_no = lpTSCall1Ans28->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
                strcpy(v_trade_code, lpTSCall1Ans28->GetString(LDBIZ_TRADE_CODE_STR));
                v_trade_code_stock_type = lpTSCall1Ans28->GetInt32(LDBIZ_TRADE_CODE_STOCK_TYPE_INT);
                v_trade_code_asset_type = lpTSCall1Ans28->GetInt32(LDBIZ_TRADE_CODE_ASSET_TYPE_INT);
                v_min_unit = lpTSCall1Ans28->GetInt32(LDBIZ_MIN_UNIT_INT);
                v_up_limit_price = lpTSCall1Ans28->GetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT);
                v_down_limit_price = lpTSCall1Ans28->GetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT);
                v_last_price = lpTSCall1Ans28->GetDouble(LDBIZ_LAST_PRICE_FLOAT);
                v_capit_reback_days = lpTSCall1Ans28->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
                v_posi_reback_days = lpTSCall1Ans28->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);


                // set @业务控制配置串# = @交易组业务控制配置串#;
                strcpy(v_busi_config_str,v_exgp_busi_config_str);

                // if @错误编码# = "0" then
                if (strcmp(v_error_code , "0")==0)
                {

                    // set @业务控制串# = "11111";
                    strcpy(v_busi_ctrl_str,"11111");
                    //调用过程[事务_产品_交易接口_检查交易产品账户信息]
                    //组织事务请求
                    if(lpTSCall1Ans29)
                    {
                      lpTSCall1Ans29->FreeMsg();
                      lpTSCall1Ans29=NULL;
                    }
                    lpTSCall1Req29=glpFastMsgFactory->CreateFastMessage("prodT.8.21", 0);
                    lpTSCall1Req29->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req29->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req29->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req29->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req29->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req29->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req29->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req29->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req29->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpTSCall1Req29->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpTSCall1Req29->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpTSCall1Req29->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpTSCall1Req29->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
                    lpTSCall1Req29->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpTSCall1Req29->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                    lpTSCall1Req29->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                    lpTSCall1Req29->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
                    lpTSCall1Req29->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
                    lpTSCall1Req29->SetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT,v_up_limit_price);
                    lpTSCall1Req29->SetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT,v_down_limit_price);
                    lpTSCall1Req29->SetDouble(LDBIZ_LAST_PRICE_FLOAT,v_last_price);
                    lpTSCall1Req29->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
                    lpTSCall1Req29->SetString(LDBIZ_BUSI_CONFIG_STR_STR,v_busi_config_str);
                    lpTSCall1Req29->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req29, &lpTSCall1Ans29, 5000);
                    if(!lpTSCall1Ans29)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.8.21]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans29->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans29->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans29->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans29->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans29->GetString(LDBIZ_ERROR_INFO_STR));
                    strcpy(v_exgp_busi_config_str, lpTSCall1Ans29->GetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR));
                    strcpy(v_asac_busi_config_str, lpTSCall1Ans29->GetString(LDBIZ_ASAC_BUSI_CONFIG_STR_STR));
                    strcpy(v_split_fee_typr_str, lpTSCall1Ans29->GetString(LDBIZ_SPLIT_FEE_TYPR_STR_STR));
                    strcpy(v_busi_limit_str, lpTSCall1Ans29->GetString(LDBIZ_BUSI_LIMIT_STR_STR));
                    v_pass_no = lpTSCall1Ans29->GetInt32(LDBIZ_PASS_NO_INT);
                    strcpy(v_out_acco, lpTSCall1Ans29->GetString(LDBIZ_OUT_ACCO_STR));
                    v_nav_asset = lpTSCall1Ans29->GetDouble(LDBIZ_NAV_ASSET_FLOAT);
                    v_exter_comm_flag = lpTSCall1Ans29->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
                    v_market_price_ratio = lpTSCall1Ans29->GetDouble(LDBIZ_MARKET_PRICE_RATIO_FLOAT);
                    v_market_price_type = lpTSCall1Ans29->GetInt32(LDBIZ_MARKET_PRICE_TYPE_INT);
                    v_cost_calc_type = lpTSCall1Ans29->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
                    v_order_market_price = lpTSCall1Ans29->GetDouble(LDBIZ_ORDER_MARKET_PRICE_FLOAT);
                    v_sys_type = lpTSCall1Ans29->GetInt32(LDBIZ_SYS_TYPE_INT);
                    strcpy(v_opor_no_str1, lpTSCall1Ans29->GetString(LDBIZ_OPOR_NO_STR1_STR));
                    strcpy(v_opor_no_str2, lpTSCall1Ans29->GetString(LDBIZ_OPOR_NO_STR2_STR));
                    strcpy(v_opor_no_str3, lpTSCall1Ans29->GetString(LDBIZ_OPOR_NO_STR3_STR));
                    v_fina_limit_max = lpTSCall1Ans29->GetDouble(LDBIZ_FINA_LIMIT_MAX_FLOAT);
                    v_loan_limit_max = lpTSCall1Ans29->GetDouble(LDBIZ_LOAN_LIMIT_MAX_FLOAT);
                    v_asset_acco_type = lpTSCall1Ans29->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
                    v_sell_auto_back_debt = lpTSCall1Ans29->GetInt32(LDBIZ_SELL_AUTO_BACK_DEBT_INT);

                // end if;
                }


                // if @错误编码# = "0" then
                if (strcmp(v_error_code , "0")==0)
                {
                    //如果是买入，需计算费用，卖出需要获取可用数量
                    //调用过程[事务_产品证券_交易接口_检查账户状态获取可用]
                    //组织事务请求
                    if(lpTSCall1Ans30)
                    {
                      lpTSCall1Ans30->FreeMsg();
                      lpTSCall1Ans30=NULL;
                    }
                    lpTSCall1Req30=glpFastMsgFactory->CreateFastMessage("pdsecuT.6.1", 0);
                    lpTSCall1Req30->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req30->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req30->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req30->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req30->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req30->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req30->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req30->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req30->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                    lpTSCall1Req30->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpTSCall1Req30->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpTSCall1Req30->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpTSCall1Req30->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpTSCall1Req30->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
                    lpTSCall1Req30->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
                    lpTSCall1Req30->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                    lpTSCall1Req30->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                    lpTSCall1Req30->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                    lpTSCall1Req30->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req30, &lpTSCall1Ans30, 5000);
                    if(!lpTSCall1Ans30)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pdsecuT.6.1]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans30->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans30->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans30->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans30->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans30->GetString(LDBIZ_ERROR_INFO_STR));
                    v_stock_acco_no = lpTSCall1Ans30->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
                    strcpy(v_stock_acco, lpTSCall1Ans30->GetString(LDBIZ_STOCK_ACCO_STR));
                    v_exgp_avail_amt = lpTSCall1Ans30->GetDouble(LDBIZ_EXGP_AVAIL_AMT_FLOAT);
                    v_asac_avail_amt = lpTSCall1Ans30->GetDouble(LDBIZ_ASAC_AVAIL_AMT_FLOAT);
                    v_asac_T_hk_buy_total_amt = lpTSCall1Ans30->GetDouble(LDBIZ_ASAC_T_HK_BUY_TOTAL_AMT_FLOAT);
                    v_asac_T_hk_sell_total_amt = lpTSCall1Ans30->GetDouble(LDBIZ_ASAC_T_HK_SELL_TOTAL_AMT_FLOAT);
                    v_asac_T1_hk_buy_total_amt = lpTSCall1Ans30->GetDouble(LDBIZ_ASAC_T1_HK_BUY_TOTAL_AMT_FLOAT);
                    v_asac_T1_hk_sell_total_amt = lpTSCall1Ans30->GetDouble(LDBIZ_ASAC_T1_HK_SELL_TOTAL_AMT_FLOAT);
                    v_exgp_T_hk_buy_total_amt = lpTSCall1Ans30->GetDouble(LDBIZ_EXGP_T_HK_BUY_TOTAL_AMT_FLOAT);
                    v_exgp_T_hk_sell_total_amt = lpTSCall1Ans30->GetDouble(LDBIZ_EXGP_T_HK_SELL_TOTAL_AMT_FLOAT);
                    v_exgp_T1_hk_buy_total_amt = lpTSCall1Ans30->GetDouble(LDBIZ_EXGP_T1_HK_BUY_TOTAL_AMT_FLOAT);
                    v_exgp_T1_hk_sell_total_amt = lpTSCall1Ans30->GetDouble(LDBIZ_EXGP_T1_HK_SELL_TOTAL_AMT_FLOAT);
                    v_exgp_avail_qty = lpTSCall1Ans30->GetDouble(LDBIZ_EXGP_AVAIL_QTY_FLOAT);
                    v_exgp_target_code_avail_qty = lpTSCall1Ans30->GetDouble(LDBIZ_EXGP_TARGET_CODE_AVAIL_QTY_FLOAT);
                    v_exgp_trade_code_avail_qty = lpTSCall1Ans30->GetDouble(LDBIZ_EXGP_TRADE_CODE_AVAIL_QTY_FLOAT);
                    v_asac_avail_qty = lpTSCall1Ans30->GetDouble(LDBIZ_ASAC_AVAIL_QTY_FLOAT);
                    v_asac_target_code_avail_qty = lpTSCall1Ans30->GetDouble(LDBIZ_ASAC_TARGET_CODE_AVAIL_QTY_FLOAT);
                    v_asac_trade_code_avail_qty = lpTSCall1Ans30->GetDouble(LDBIZ_ASAC_TRADE_CODE_AVAIL_QTY_FLOAT);
                    v_exgp_loan_sell_amt = lpTSCall1Ans30->GetDouble(LDBIZ_EXGP_LOAN_SELL_AMT_FLOAT);
                    v_asac_loan_sell_amt = lpTSCall1Ans30->GetDouble(LDBIZ_ASAC_LOAN_SELL_AMT_FLOAT);
                    v_exgp_debt_loan_sell_strike_qty = lpTSCall1Ans30->GetDouble(LDBIZ_EXGP_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT);
                    v_exgp_debt_fina_buy_strike_amt = lpTSCall1Ans30->GetDouble(LDBIZ_EXGP_DEBT_FINA_BUY_STRIKE_AMT_FLOAT);
                    v_record_count = lpTSCall1Ans30->GetInt32(LDBIZ_RECORD_COUNT_INT);

                // end if;
                }


               // set @业务操作员编号# = @操作员编号#;
               v_busi_opor_no = v_opor_no;

               // if @订单操作方式# = 《订单操作方式-增强交易》 then
               if (strcmp(v_order_oper_way , "14")==0)
               {
                   //调用过程[事务_交易证券_T0_获取机构级操作员费用设置标志]
                   //组织事务请求
                   if(lpTSCall1Ans31)
                   {
                     lpTSCall1Ans31->FreeMsg();
                     lpTSCall1Ans31=NULL;
                   }
                   lpTSCall1Req31=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.103", 0);
                   lpTSCall1Req31->SetInt32(LDTAG_PRIORITY, iPriority);
                   lpTSCall1Req31->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                   lpTSCall1Req31->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                   lpTSCall1Req31->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                   lpTSCall1Req31->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                   lpTSCall1Req31->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                   lpTSCall1Req31->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                   lpTSCall1Req31->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                   lpTSCall1Req31->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
                   glpTSSubcallSerives->SubCall(lpTSCall1Req31, &lpTSCall1Ans31, 5000);
                   if(!lpTSCall1Ans31)  //  超时错误
                   {
                       lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                       lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.103]subcall timed out!");
                       iRet=-2;
                       goto ENDSYS;
                   }
                   else if(lpTSCall1Ans31->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                   {
                       lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans31->GetInt32(LDTAG_ERRORNO));
                       lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans31->GetString(LDTAG_ERRORINFO));
                       iRet=-2;
                       goto ENDSYS;
                   }
                   else if(strcmp(lpTSCall1Ans31->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                   {
                       strcpy(v_error_code, lpTSCall1Ans31->GetString(LDBIZ_ERROR_CODE_STR));
                       strcpy(v_error_info, lpTSCall1Ans31->GetString(LDBIZ_ERROR_INFO_STR));
                       iRet=-1;
                       goto END;
                   }
                   //获取输出参数值
                   strcpy(v_error_code, lpTSCall1Ans31->GetString(LDBIZ_ERROR_CODE_STR));
                   strcpy(v_error_info, lpTSCall1Ans31->GetString(LDBIZ_ERROR_INFO_STR));
                   v_T0_opor_fee_set_flag = lpTSCall1Ans31->GetInt32(LDBIZ_T0_OPOR_FEE_SET_FLAG_INT);

                   //调用过程[事务_交易证券_T0_获取操作员阈值信息]
                   //组织事务请求
                   if(lpTSCall1Ans32)
                   {
                     lpTSCall1Ans32->FreeMsg();
                     lpTSCall1Ans32=NULL;
                   }
                   lpTSCall1Req32=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.98", 0);
                   lpTSCall1Req32->SetInt32(LDTAG_PRIORITY, iPriority);
                   lpTSCall1Req32->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                   lpTSCall1Req32->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                   lpTSCall1Req32->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                   lpTSCall1Req32->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                   lpTSCall1Req32->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                   lpTSCall1Req32->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                   lpTSCall1Req32->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                   lpTSCall1Req32->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
                   glpTSSubcallSerives->SubCall(lpTSCall1Req32, &lpTSCall1Ans32, 5000);
                   if(!lpTSCall1Ans32)  //  超时错误
                   {
                       lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                       lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.98]subcall timed out!");
                       iRet=-2;
                       goto ENDSYS;
                   }
                   else if(lpTSCall1Ans32->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                   {
                       lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans32->GetInt32(LDTAG_ERRORNO));
                       lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans32->GetString(LDTAG_ERRORINFO));
                       iRet=-2;
                       goto ENDSYS;
                   }
                   //获取输出参数值
                   strcpy(v_error_code, lpTSCall1Ans32->GetString(LDBIZ_ERROR_CODE_STR));
                   strcpy(v_error_info, lpTSCall1Ans32->GetString(LDBIZ_ERROR_INFO_STR));
                   v_row_id = lpTSCall1Ans32->GetInt64(LDBIZ_ROW_ID_INT64);
                   v_curr_amt = lpTSCall1Ans32->GetDouble(LDBIZ_CURR_AMT_FLOAT);
                   v_frozen_amt = lpTSCall1Ans32->GetDouble(LDBIZ_FROZEN_AMT_FLOAT);
                   v_opor_warn_tshold = lpTSCall1Ans32->GetDouble(LDBIZ_OPOR_WARN_TSHOLD_FLOAT);
                   v_opor_stop_tshold = lpTSCall1Ans32->GetDouble(LDBIZ_OPOR_STOP_TSHOLD_FLOAT);
                   v_order_limit_time = lpTSCall1Ans32->GetInt32(LDBIZ_ORDER_LIMIT_TIME_INT);
                   v_per_secu_posi_ratio = lpTSCall1Ans32->GetDouble(LDBIZ_PER_SECU_POSI_RATIO_FLOAT);
                   v_posi_limit_time = lpTSCall1Ans32->GetInt32(LDBIZ_POSI_LIMIT_TIME_INT);
                   v_order_ctrl_qty = lpTSCall1Ans32->GetDouble(LDBIZ_ORDER_CTRL_QTY_FLOAT);
                   v_order_ctrl_amt = lpTSCall1Ans32->GetDouble(LDBIZ_ORDER_CTRL_AMT_FLOAT);
                   v_stock_warn_ratio = lpTSCall1Ans32->GetDouble(LDBIZ_STOCK_WARN_RATIO_FLOAT);
                   v_stock_stop_ratio = lpTSCall1Ans32->GetDouble(LDBIZ_STOCK_STOP_RATIO_FLOAT);
                   v_stock_warn_amt = lpTSCall1Ans32->GetDouble(LDBIZ_STOCK_WARN_AMT_FLOAT);
                   v_stock_stop_amt = lpTSCall1Ans32->GetDouble(LDBIZ_STOCK_STOP_AMT_FLOAT);
                   v_trig_oper_type = lpTSCall1Ans32->GetInt32(LDBIZ_TRIG_OPER_TYPE_INT);
                   v_open_close_permission = lpTSCall1Ans32->GetInt32(LDBIZ_OPEN_CLOSE_PERMISSION_INT);
                   v_risk_oper = lpTSCall1Ans32->GetInt32(LDBIZ_RISK_OPER_INT);
                   v_fee_calc_type = lpTSCall1Ans32->GetInt32(LDBIZ_FEE_CALC_TYPE_INT);
                   v_permit_margin_trade = lpTSCall1Ans32->GetInt32(LDBIZ_PERMIT_MARGIN_TRADE_INT);
                   v_buy_fee_ratio = lpTSCall1Ans32->GetDouble(LDBIZ_BUY_FEE_RATIO_FLOAT);
                   v_sell_fee_ratio = lpTSCall1Ans32->GetDouble(LDBIZ_SELL_FEE_RATIO_FLOAT);
                   v_buy_min_fee = lpTSCall1Ans32->GetDouble(LDBIZ_BUY_MIN_FEE_FLOAT);
                   v_sell_min_fee = lpTSCall1Ans32->GetDouble(LDBIZ_SELL_MIN_FEE_FLOAT);
                   strcpy(v_remark_info, lpTSCall1Ans32->GetString(LDBIZ_REMARK_INFO_STR));
                   v_update_times = lpTSCall1Ans32->GetInt32(LDBIZ_UPDATE_TIMES_INT);

               // end if;
               }


              // if @订单方向# = 《订单方向-买入》 or @订单方向# = 《订单方向-融券回购》 or  @订单方向# = 《订单方向-融资买入》 or  @订单方向# = 《订单方向-买券还券》  and @错误编码# = "0" then
              if (v_order_dir == 1 || v_order_dir == 4 ||  v_order_dir == 5 ||  v_order_dir == 8  && strcmp(v_error_code , "0")==0)
              {

                    // if @订单操作方式# = 《订单操作方式-增强交易》 and @T0操作员费用设置标志#=《T0操作员费用设置标志-设置》 then
                    if (strcmp(v_order_oper_way , "14")==0 && v_T0_opor_fee_set_flag==1)
                    {

                        // if @费用计算方式#  = 《费用计算方式-操作员》 then
                        if (v_fee_calc_type  == 2)
                        {

                            // set @全部费用临时值#=0;
                            v_all_fee_for_tmp=0;
                            //调用过程[事务_交易证券_T0_操作员交易费用计算]
                            //组织事务请求
                            if(lpTSCall1Ans33)
                            {
                              lpTSCall1Ans33->FreeMsg();
                              lpTSCall1Ans33=NULL;
                            }
                            lpTSCall1Req33=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.99", 0);
                            lpTSCall1Req33->SetInt32(LDTAG_PRIORITY, iPriority);
                            lpTSCall1Req33->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                            lpTSCall1Req33->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                            lpTSCall1Req33->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                            lpTSCall1Req33->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                            lpTSCall1Req33->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                            lpTSCall1Req33->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                            lpTSCall1Req33->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                            lpTSCall1Req33->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                            lpTSCall1Req33->SetDouble(LDBIZ_BUY_MIN_FEE_FLOAT,v_buy_min_fee);
                            lpTSCall1Req33->SetDouble(LDBIZ_SELL_MIN_FEE_FLOAT,v_sell_min_fee);
                            lpTSCall1Req33->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                            lpTSCall1Req33->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
                            lpTSCall1Req33->SetDouble(LDBIZ_BUY_FEE_RATIO_FLOAT,v_buy_fee_ratio);
                            lpTSCall1Req33->SetDouble(LDBIZ_SELL_FEE_RATIO_FLOAT,v_sell_fee_ratio);
                            glpTSSubcallSerives->SubCall(lpTSCall1Req33, &lpTSCall1Ans33, 5000);
                            if(!lpTSCall1Ans33)  //  超时错误
                            {
                                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.99]subcall timed out!");
                                iRet=-2;
                                goto ENDSYS;
                            }
                            else if(lpTSCall1Ans33->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                            {
                                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans33->GetInt32(LDTAG_ERRORNO));
                                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans33->GetString(LDTAG_ERRORINFO));
                                iRet=-2;
                                goto ENDSYS;
                            }
                            else if(strcmp(lpTSCall1Ans33->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                            {
                                strcpy(v_error_code, lpTSCall1Ans33->GetString(LDBIZ_ERROR_CODE_STR));
                                strcpy(v_error_info, lpTSCall1Ans33->GetString(LDBIZ_ERROR_INFO_STR));
                                iRet=-1;
                                goto END;
                            }
                            //获取输出参数值
                            strcpy(v_error_code, lpTSCall1Ans33->GetString(LDBIZ_ERROR_CODE_STR));
                            strcpy(v_error_info, lpTSCall1Ans33->GetString(LDBIZ_ERROR_INFO_STR));
                            v_all_fee = lpTSCall1Ans33->GetDouble(LDBIZ_ALL_FEE_FLOAT);


                            // set @订单冻结金额# =  @订单价格# * @订单数量# + @全部费用#;
                            v_order_frozen_amt =  v_order_price * v_order_qty + v_all_fee;
                       //T0 费用增加。Modify by wjp20181017

                            // set @全部费用临时值#=@全部费用#;
                            v_all_fee_for_tmp=v_all_fee;
                             //调用过程[事务_公共_公共接口_计算证券订单费用]
                             //组织事务请求
                             if(lpTSCall1Ans34)
                             {
                               lpTSCall1Ans34->FreeMsg();
                               lpTSCall1Ans34=NULL;
                             }
                             lpTSCall1Req34=glpFastMsgFactory->CreateFastMessage("pubT.24.203", 0);
                             lpTSCall1Req34->SetInt32(LDTAG_PRIORITY, iPriority);
                             lpTSCall1Req34->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                             lpTSCall1Req34->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                             lpTSCall1Req34->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                             lpTSCall1Req34->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                             lpTSCall1Req34->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                             lpTSCall1Req34->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                             lpTSCall1Req34->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                             lpTSCall1Req34->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                             lpTSCall1Req34->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                             lpTSCall1Req34->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                             lpTSCall1Req34->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                             lpTSCall1Req34->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                             lpTSCall1Req34->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                             lpTSCall1Req34->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                             lpTSCall1Req34->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
                             lpTSCall1Req34->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                             lpTSCall1Req34->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                             lpTSCall1Req34->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                             lpTSCall1Req34->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                             glpTSSubcallSerives->SubCall(lpTSCall1Req34, &lpTSCall1Ans34, 5000);
                             if(!lpTSCall1Ans34)  //  超时错误
                             {
                                 lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                                 lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.203]subcall timed out!");
                                 iRet=-2;
                                 goto ENDSYS;
                             }
                             else if(lpTSCall1Ans34->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                             {
                                 lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans34->GetInt32(LDTAG_ERRORNO));
                                 lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans34->GetString(LDTAG_ERRORINFO));
                                 iRet=-2;
                                 goto ENDSYS;
                             }
                             //获取输出参数值
                             strcpy(v_error_code, lpTSCall1Ans34->GetString(LDBIZ_ERROR_CODE_STR));
                             strcpy(v_error_info, lpTSCall1Ans34->GetString(LDBIZ_ERROR_INFO_STR));
                             v_trade_commis = lpTSCall1Ans34->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
                             v_all_fee = lpTSCall1Ans34->GetDouble(LDBIZ_ALL_FEE_FLOAT);
                             v_stamp_tax = lpTSCall1Ans34->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
                             v_trans_fee = lpTSCall1Ans34->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
                             v_brkage_fee = lpTSCall1Ans34->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
                             v_SEC_charges = lpTSCall1Ans34->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
                             v_other_fee = lpTSCall1Ans34->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
                             v_other_commis = lpTSCall1Ans34->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
                             v_trade_tax = lpTSCall1Ans34->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
                             v_trade_cost_fee = lpTSCall1Ans34->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
                             v_trade_system_use_fee = lpTSCall1Ans34->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
                             v_stock_settle_fee = lpTSCall1Ans34->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);
                             v_order_frozen_amt = lpTSCall1Ans34->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);


                            // set @全部费用#=@全部费用#+@全部费用临时值#-@交易佣金#;
                            v_all_fee=v_all_fee+v_all_fee_for_tmp-v_trade_commis;

                            // set @交易佣金#=@全部费用临时值#;
                            v_trade_commis=v_all_fee_for_tmp;
                        }
                        // else
                        else
                        {

                             //调用过程[事务_公共_公共接口_计算证券订单费用]
                             //组织事务请求
                             if(lpTSCall1Ans35)
                             {
                               lpTSCall1Ans35->FreeMsg();
                               lpTSCall1Ans35=NULL;
                             }
                             lpTSCall1Req35=glpFastMsgFactory->CreateFastMessage("pubT.24.203", 0);
                             lpTSCall1Req35->SetInt32(LDTAG_PRIORITY, iPriority);
                             lpTSCall1Req35->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                             lpTSCall1Req35->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                             lpTSCall1Req35->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                             lpTSCall1Req35->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                             lpTSCall1Req35->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                             lpTSCall1Req35->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                             lpTSCall1Req35->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                             lpTSCall1Req35->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                             lpTSCall1Req35->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                             lpTSCall1Req35->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                             lpTSCall1Req35->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                             lpTSCall1Req35->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                             lpTSCall1Req35->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                             lpTSCall1Req35->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                             lpTSCall1Req35->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
                             lpTSCall1Req35->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                             lpTSCall1Req35->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                             lpTSCall1Req35->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                             lpTSCall1Req35->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                             glpTSSubcallSerives->SubCall(lpTSCall1Req35, &lpTSCall1Ans35, 5000);
                             if(!lpTSCall1Ans35)  //  超时错误
                             {
                                 lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                                 lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.203]subcall timed out!");
                                 iRet=-2;
                                 goto ENDSYS;
                             }
                             else if(lpTSCall1Ans35->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                             {
                                 lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans35->GetInt32(LDTAG_ERRORNO));
                                 lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans35->GetString(LDTAG_ERRORINFO));
                                 iRet=-2;
                                 goto ENDSYS;
                             }
                             //获取输出参数值
                             strcpy(v_error_code, lpTSCall1Ans35->GetString(LDBIZ_ERROR_CODE_STR));
                             strcpy(v_error_info, lpTSCall1Ans35->GetString(LDBIZ_ERROR_INFO_STR));
                             v_trade_commis = lpTSCall1Ans35->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
                             v_all_fee = lpTSCall1Ans35->GetDouble(LDBIZ_ALL_FEE_FLOAT);
                             v_stamp_tax = lpTSCall1Ans35->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
                             v_trans_fee = lpTSCall1Ans35->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
                             v_brkage_fee = lpTSCall1Ans35->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
                             v_SEC_charges = lpTSCall1Ans35->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
                             v_other_fee = lpTSCall1Ans35->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
                             v_other_commis = lpTSCall1Ans35->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
                             v_trade_tax = lpTSCall1Ans35->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
                             v_trade_cost_fee = lpTSCall1Ans35->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
                             v_trade_system_use_fee = lpTSCall1Ans35->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
                             v_stock_settle_fee = lpTSCall1Ans35->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);
                             v_order_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);

                        // end if;
                        }

                    }
                    // else
                    else
                    {

                        //调用过程[事务_公共_公共接口_计算证券订单费用]
                        //组织事务请求
                        if(lpTSCall1Ans36)
                        {
                          lpTSCall1Ans36->FreeMsg();
                          lpTSCall1Ans36=NULL;
                        }
                        lpTSCall1Req36=glpFastMsgFactory->CreateFastMessage("pubT.24.203", 0);
                        lpTSCall1Req36->SetInt32(LDTAG_PRIORITY, iPriority);
                        lpTSCall1Req36->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                        lpTSCall1Req36->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                        lpTSCall1Req36->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                        lpTSCall1Req36->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                        lpTSCall1Req36->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                        lpTSCall1Req36->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                        lpTSCall1Req36->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                        lpTSCall1Req36->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                        lpTSCall1Req36->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                        lpTSCall1Req36->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                        lpTSCall1Req36->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                        lpTSCall1Req36->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                        lpTSCall1Req36->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                        lpTSCall1Req36->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                        lpTSCall1Req36->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
                        lpTSCall1Req36->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                        lpTSCall1Req36->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                        lpTSCall1Req36->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                        lpTSCall1Req36->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                        glpTSSubcallSerives->SubCall(lpTSCall1Req36, &lpTSCall1Ans36, 5000);
                        if(!lpTSCall1Ans36)  //  超时错误
                        {
                            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.203]subcall timed out!");
                            iRet=-2;
                            goto ENDSYS;
                        }
                        else if(lpTSCall1Ans36->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                        {
                            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans36->GetInt32(LDTAG_ERRORNO));
                            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans36->GetString(LDTAG_ERRORINFO));
                            iRet=-2;
                            goto ENDSYS;
                        }
                        //获取输出参数值
                        strcpy(v_error_code, lpTSCall1Ans36->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans36->GetString(LDBIZ_ERROR_INFO_STR));
                        v_trade_commis = lpTSCall1Ans36->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
                        v_all_fee = lpTSCall1Ans36->GetDouble(LDBIZ_ALL_FEE_FLOAT);
                        v_stamp_tax = lpTSCall1Ans36->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
                        v_trans_fee = lpTSCall1Ans36->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
                        v_brkage_fee = lpTSCall1Ans36->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
                        v_SEC_charges = lpTSCall1Ans36->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
                        v_other_fee = lpTSCall1Ans36->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
                        v_other_commis = lpTSCall1Ans36->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
                        v_trade_tax = lpTSCall1Ans36->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
                        v_trade_cost_fee = lpTSCall1Ans36->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
                        v_trade_system_use_fee = lpTSCall1Ans36->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
                        v_stock_settle_fee = lpTSCall1Ans36->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);
                        v_order_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);

                    // end if;
                    }

                // end if;
                }


                // if @错误编码# = "0" then
                if (strcmp(v_error_code , "0")==0)
                {

                    // set @触发阶段类型# = 《触发阶段类型-交易端》;
                    v_trig_stage_type = 2;
                    //调用过程[事务_风控证券_接口_检查客户风险]
                    //组织事务请求
                    if(lpTSCall1Ans37)
                    {
                      lpTSCall1Ans37->FreeMsg();
                      lpTSCall1Ans37=NULL;
                    }
                    lpTSCall1Req37=glpFastMsgFactory->CreateFastMessage("rksecuT.5.9", 0);
                    lpTSCall1Req37->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req37->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req37->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req37->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req37->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req37->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req37->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req37->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req37->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpTSCall1Req37->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpTSCall1Req37->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpTSCall1Req37->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpTSCall1Req37->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpTSCall1Req37->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    lpTSCall1Req37->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpTSCall1Req37->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
                    lpTSCall1Req37->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                    lpTSCall1Req37->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
                    lpTSCall1Req37->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                    lpTSCall1Req37->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
                    lpTSCall1Req37->SetInt32(LDBIZ_TRIG_STAGE_TYPE_INT,v_trig_stage_type);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req37, &lpTSCall1Ans37, 5000);
                    if(!lpTSCall1Ans37)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[rksecuT.5.9]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans37->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans37->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans37->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans37->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans37->GetString(LDBIZ_ERROR_INFO_STR));
                    v_compli_trig_id = lpTSCall1Ans37->GetInt64(LDBIZ_COMPLI_TRIG_ID_INT64);

                // end if;
                }


                // set @认购交易标志#=《认购交易标志-是》;
                v_subscription_trade_mark=1;

                // set @申购交易标志# = 《申购交易标志-是》;
                v_purchase_trade_mark = 1;

                // set @赎回交易标志# = 《赎回交易标志-是》;
                v_rede_trade_mark = 1;

                // set @首次最低金额# = 0;
                v_first_minimum_amt = 0;

                // set @最低申购金额# =0;
                v_minimum_purchase_amt =0;

                // set @最低认购金额# =0;
                v_minimum_subscription_amt =0;

                // set @最低赎回份额# =0;
                v_minimum_rede_share =0;

                // set @最低持有份额# =0;
                v_minimum_holding_share =0;

                // set @记录个数# = 0;
                v_record_count = 0;

                // if @错误编码# = "0" then
                if (strcmp(v_error_code , "0")==0)
                {
                    //调用过程[事务_交易证券_交易_检查是否存在融资负债]
                    //组织事务请求
                    if(lpTSCall1Ans38)
                    {
                      lpTSCall1Ans38->FreeMsg();
                      lpTSCall1Ans38=NULL;
                    }
                    lpTSCall1Req38=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.135", 0);
                    lpTSCall1Req38->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req38->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req38->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req38->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req38->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req38->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req38->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req38->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req38->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpTSCall1Req38->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpTSCall1Req38->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpTSCall1Req38->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpTSCall1Req38->SetDouble(LDBIZ_EXGP_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_exgp_debt_fina_buy_strike_amt);
                    lpTSCall1Req38->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req38, &lpTSCall1Ans38, 5000);
                    if(!lpTSCall1Ans38)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.135]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans38->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans38->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans38->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(strcmp(lpTSCall1Ans38->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                    {
                        strcpy(v_error_code, lpTSCall1Ans38->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans38->GetString(LDBIZ_ERROR_INFO_STR));
                        iRet=-1;
                        goto END;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans38->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans38->GetString(LDBIZ_ERROR_INFO_STR));
                    v_exist_debt_flag = lpTSCall1Ans38->GetInt32(LDBIZ_EXIST_DEBT_FLAG_INT);


                    // if @资产账户类型# = 《资产账户类型-融资融券》 and ((@订单方向# = 《订单方向-融资买入》 or @订单方向# = 《订单方向-融券卖出》 or @订单方向# = 《订单方向-卖券还款》 or @订单方向# = 《订单方向-买券还券》 or @订单方向# = 《订单方向-直接还款》 or @订单方向# = 《订单方向-直接还券》) or  (@资产账户类型# = 《资产账户类型-融资融券》 and @订单方向# = 《订单方向-卖出》 and  @存在负债标志# = 《存在负债标志-存在》)) then
                    if (v_asset_acco_type == 5 && ((v_order_dir == 5 || v_order_dir == 6 || v_order_dir == 7 || v_order_dir == 8 || v_order_dir == 14 || v_order_dir == 15) ||  (v_asset_acco_type == 5 && v_order_dir == 2 &&  v_exist_debt_flag == 2)))
                    {
                        //调用过程[事务_公共_交易接口_融资融券获取券商保证金比例]
                        //组织事务请求
                        if(lpTSCall1Ans39)
                        {
                          lpTSCall1Ans39->FreeMsg();
                          lpTSCall1Ans39=NULL;
                        }
                        lpTSCall1Req39=glpFastMsgFactory->CreateFastMessage("pubT.25.234", 0);
                        lpTSCall1Req39->SetInt32(LDTAG_PRIORITY, iPriority);
                        lpTSCall1Req39->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                        lpTSCall1Req39->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                        lpTSCall1Req39->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                        lpTSCall1Req39->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                        lpTSCall1Req39->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                        lpTSCall1Req39->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                        lpTSCall1Req39->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                        lpTSCall1Req39->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                        lpTSCall1Req39->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                        lpTSCall1Req39->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                        lpTSCall1Req39->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
                        lpTSCall1Req39->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                        glpTSSubcallSerives->SubCall(lpTSCall1Req39, &lpTSCall1Ans39, 5000);
                        if(!lpTSCall1Ans39)  //  超时错误
                        {
                            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.234]subcall timed out!");
                            iRet=-2;
                            goto ENDSYS;
                        }
                        else if(lpTSCall1Ans39->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                        {
                            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans39->GetInt32(LDTAG_ERRORNO));
                            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans39->GetString(LDTAG_ERRORINFO));
                            iRet=-2;
                            goto ENDSYS;
                        }
                        else if(strcmp(lpTSCall1Ans39->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                        {
                            strcpy(v_error_code, lpTSCall1Ans39->GetString(LDBIZ_ERROR_CODE_STR));
                            strcpy(v_error_info, lpTSCall1Ans39->GetString(LDBIZ_ERROR_INFO_STR));
                            iRet=-1;
                            goto END;
                        }
                        //获取输出参数值
                        strcpy(v_error_code, lpTSCall1Ans39->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans39->GetString(LDBIZ_ERROR_INFO_STR));
                        v_fina_marg_ratio = lpTSCall1Ans39->GetDouble(LDBIZ_FINA_MARG_RATIO_FLOAT);
                        v_secu_loan_marg_ratio = lpTSCall1Ans39->GetDouble(LDBIZ_SECU_LOAN_MARG_RATIO_FLOAT);
                        v_secu_loan_price_limit = lpTSCall1Ans39->GetDouble(LDBIZ_SECU_LOAN_PRICE_LIMIT_FLOAT);

                        //调用过程[事务_风控证券_风控_查询融资融券保证金计算]
                        //组织事务请求
                        if(lpTSCall1Ans40)
                        {
                          lpTSCall1Ans40->FreeMsg();
                          lpTSCall1Ans40=NULL;
                        }
                        lpTSCall1Req40=glpFastMsgFactory->CreateFastMessage("rksecuT.4.55", 0);
                        lpTSCall1Req40->SetInt32(LDTAG_PRIORITY, iPriority);
                        lpTSCall1Req40->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                        lpTSCall1Req40->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                        lpTSCall1Req40->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                        lpTSCall1Req40->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                        lpTSCall1Req40->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                        lpTSCall1Req40->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                        lpTSCall1Req40->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                        lpTSCall1Req40->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                        lpTSCall1Req40->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                        lpTSCall1Req40->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                        lpTSCall1Req40->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                        glpTSSubcallSerives->SubCall(lpTSCall1Req40, &lpTSCall1Ans40, 5000);
                        if(!lpTSCall1Ans40)  //  超时错误
                        {
                            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[rksecuT.4.55]subcall timed out!");
                            iRet=-2;
                            goto ENDSYS;
                        }
                        else if(lpTSCall1Ans40->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                        {
                            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans40->GetInt32(LDTAG_ERRORNO));
                            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans40->GetString(LDTAG_ERRORINFO));
                            iRet=-2;
                            goto ENDSYS;
                        }
                        else if(strcmp(lpTSCall1Ans40->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                        {
                            strcpy(v_error_code, lpTSCall1Ans40->GetString(LDBIZ_ERROR_CODE_STR));
                            strcpy(v_error_info, lpTSCall1Ans40->GetString(LDBIZ_ERROR_INFO_STR));
                            iRet=-1;
                            goto END;
                        }
                        //获取输出参数值
                        strcpy(v_error_code, lpTSCall1Ans40->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans40->GetString(LDBIZ_ERROR_INFO_STR));
                        v_asac_converted_margin = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_CONVERTED_MARGIN_FLOAT);
                        v_asac_fina_converted_pandl = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_FINA_CONVERTED_PANDL_FLOAT);
                        v_asac_loan_converted_pandl = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_LOAN_CONVERTED_PANDL_FLOAT);
                        v_asac_fina_comm_capt_margin = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_FINA_COMM_CAPT_MARGIN_FLOAT);
                        v_asac_loan_comm_capt_margin = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_LOAN_COMM_CAPT_MARGIN_FLOAT);
                        v_asac_fina_order_capt_margin = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_FINA_ORDER_CAPT_MARGIN_FLOAT);
                        v_asac_loan_order_capt_margin = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_LOAN_ORDER_CAPT_MARGIN_FLOAT);
                        v_asac_fina_capt_margin = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_FINA_CAPT_MARGIN_FLOAT);
                        v_asac_loan_capt_margin = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_LOAN_CAPT_MARGIN_FLOAT);
                        v_asac_keep_guarantee_ratio = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_KEEP_GUARANTEE_RATIO_FLOAT);
                        v_asac_cmmd_converted_margin = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_CMMD_CONVERTED_MARGIN_FLOAT);
                        v_asac_order_converted_margin = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_ORDER_CONVERTED_MARGIN_FLOAT);
                        v_asac_curr_converted_margin = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_CURR_CONVERTED_MARGIN_FLOAT);
                        v_asac_fina_interest = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_FINA_INTEREST_FLOAT);
                        v_asac_loan_interest = lpTSCall1Ans40->GetDouble(LDBIZ_ASAC_LOAN_INTEREST_FLOAT);
                        v_exgp_converted_margin = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_CONVERTED_MARGIN_FLOAT);
                        v_exgp_fina_converted_pandl = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_FINA_CONVERTED_PANDL_FLOAT);
                        v_exgp_loan_converted_pandl = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_LOAN_CONVERTED_PANDL_FLOAT);
                        v_exgp_fina_comm_capt_margin = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_FINA_COMM_CAPT_MARGIN_FLOAT);
                        v_exgp_loan_comm_capt_margin = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_LOAN_COMM_CAPT_MARGIN_FLOAT);
                        v_exgp_fina_order_capt_margin = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_FINA_ORDER_CAPT_MARGIN_FLOAT);
                        v_exgp_loan_order_capt_margin = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_LOAN_ORDER_CAPT_MARGIN_FLOAT);
                        v_exgp_fina_capt_margin = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_FINA_CAPT_MARGIN_FLOAT);
                        v_exgp_loan_capt_margin = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_LOAN_CAPT_MARGIN_FLOAT);
                        v_exgp_keep_guarantee_ratio = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_KEEP_GUARANTEE_RATIO_FLOAT);
                        v_exgp_cmmd_converted_margin = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_CMMD_CONVERTED_MARGIN_FLOAT);
                        v_exgp_order_converted_margin = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_ORDER_CONVERTED_MARGIN_FLOAT);
                        v_exgp_curr_converted_margin = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_CURR_CONVERTED_MARGIN_FLOAT);
                        v_exgp_fina_interest = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_FINA_INTEREST_FLOAT);
                        v_exgp_loan_interest = lpTSCall1Ans40->GetDouble(LDBIZ_EXGP_LOAN_INTEREST_FLOAT);


                        // set @订单金额# = @订单冻结金额#;
                        v_order_amt = v_order_frozen_amt;
                        //调用过程[事务_交易证券_交易_融资融券新增订单]
                        //组织事务请求
                        if(lpTSCall1Ans41)
                        {
                          lpTSCall1Ans41->FreeMsg();
                          lpTSCall1Ans41=NULL;
                        }
                        lpTSCall1Req41=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.132", 0);
                        lpTSCall1Req41->SetInt32(LDTAG_PRIORITY, iPriority);
                        lpTSCall1Req41->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                        lpTSCall1Req41->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                        lpTSCall1Req41->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                        lpTSCall1Req41->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                        lpTSCall1Req41->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                        lpTSCall1Req41->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                        lpTSCall1Req41->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                        lpTSCall1Req41->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
                        lpTSCall1Req41->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                        lpTSCall1Req41->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                        lpTSCall1Req41->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                        lpTSCall1Req41->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                        lpTSCall1Req41->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                        lpTSCall1Req41->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                        lpTSCall1Req41->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
                        lpTSCall1Req41->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
                        lpTSCall1Req41->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                        lpTSCall1Req41->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
                        lpTSCall1Req41->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
                        lpTSCall1Req41->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                        lpTSCall1Req41->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                        lpTSCall1Req41->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
                        lpTSCall1Req41->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                        lpTSCall1Req41->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
                        lpTSCall1Req41->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
                        lpTSCall1Req41->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
                        lpTSCall1Req41->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
                        lpTSCall1Req41->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                        lpTSCall1Req41->SetString(LDBIZ_BUSI_LIMIT_STR_STR,v_busi_limit_str);
                        lpTSCall1Req41->SetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR,v_exgp_busi_config_str);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_AVAIL_AMT_FLOAT,v_exgp_avail_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_T_HK_BUY_TOTAL_AMT_FLOAT,v_exgp_T_hk_buy_total_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_T_HK_SELL_TOTAL_AMT_FLOAT,v_exgp_T_hk_sell_total_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_T1_HK_BUY_TOTAL_AMT_FLOAT,v_exgp_T1_hk_buy_total_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_T1_HK_SELL_TOTAL_AMT_FLOAT,v_exgp_T1_hk_sell_total_amt);
                        lpTSCall1Req41->SetString(LDBIZ_ASAC_BUSI_CONFIG_STR_STR,v_asac_busi_config_str);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_AVAIL_AMT_FLOAT,v_asac_avail_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_T_HK_BUY_TOTAL_AMT_FLOAT,v_asac_T_hk_buy_total_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_T_HK_SELL_TOTAL_AMT_FLOAT,v_asac_T_hk_sell_total_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_T1_HK_BUY_TOTAL_AMT_FLOAT,v_asac_T1_hk_buy_total_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_T1_HK_SELL_TOTAL_AMT_FLOAT,v_asac_T1_hk_sell_total_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_AVAIL_QTY_FLOAT,v_exgp_avail_qty);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_TARGET_CODE_AVAIL_QTY_FLOAT,v_exgp_target_code_avail_qty);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_TRADE_CODE_AVAIL_QTY_FLOAT,v_exgp_trade_code_avail_qty);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_AVAIL_QTY_FLOAT,v_asac_avail_qty);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_TARGET_CODE_AVAIL_QTY_FLOAT,v_asac_target_code_avail_qty);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_TRADE_CODE_AVAIL_QTY_FLOAT,v_asac_trade_code_avail_qty);
                        lpTSCall1Req41->SetDouble(LDBIZ_MARKET_PRICE_RATIO_FLOAT,v_market_price_ratio);
                        lpTSCall1Req41->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
                        lpTSCall1Req41->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
                        lpTSCall1Req41->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
                        lpTSCall1Req41->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                        lpTSCall1Req41->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
                        lpTSCall1Req41->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                        lpTSCall1Req41->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
                        lpTSCall1Req41->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
                        lpTSCall1Req41->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                        lpTSCall1Req41->SetInt32(LDBIZ_INTRST_DAYS_INT,v_intrst_days);
                        lpTSCall1Req41->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
                        lpTSCall1Req41->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                        lpTSCall1Req41->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                        lpTSCall1Req41->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                        lpTSCall1Req41->SetInt32(LDBIZ_MIN_UNIT_INT,v_min_unit);
                        lpTSCall1Req41->SetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT,v_up_limit_price);
                        lpTSCall1Req41->SetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT,v_down_limit_price);
                        lpTSCall1Req41->SetDouble(LDBIZ_LAST_PRICE_FLOAT,v_last_price);
                        lpTSCall1Req41->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
                        lpTSCall1Req41->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
                        lpTSCall1Req41->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
                        lpTSCall1Req41->SetInt32(LDBIZ_COST_CALC_TYPE_INT,v_cost_calc_type);
                        lpTSCall1Req41->SetInt64(LDBIZ_COMPLI_TRIG_ID_INT64,v_compli_trig_id);
                        lpTSCall1Req41->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
                        lpTSCall1Req41->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
                        lpTSCall1Req41->SetInt32(LDBIZ_RECORD_COUNT_INT,v_record_count);
                        lpTSCall1Req41->SetString(LDBIZ_TARGET_STOCK_CODE_STR,v_target_stock_code);
                        lpTSCall1Req41->SetInt32(LDBIZ_TARGET_STOCK_CODE_NO_INT,v_target_stock_code_no);
                        lpTSCall1Req41->SetDouble(LDBIZ_FINA_MARG_RATIO_FLOAT,v_fina_marg_ratio);
                        lpTSCall1Req41->SetDouble(LDBIZ_SECU_LOAN_MARG_RATIO_FLOAT,v_secu_loan_marg_ratio);
                        lpTSCall1Req41->SetDouble(LDBIZ_FINA_LIMIT_MAX_FLOAT,v_fina_limit_max);
                        lpTSCall1Req41->SetDouble(LDBIZ_LOAN_LIMIT_MAX_FLOAT,v_loan_limit_max);
                        lpTSCall1Req41->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
                        lpTSCall1Req41->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_LOAN_SELL_AMT_FLOAT,v_exgp_loan_sell_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_LOAN_SELL_AMT_FLOAT,v_asac_loan_sell_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_CONVERTED_MARGIN_FLOAT,v_asac_converted_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_FINA_CONVERTED_PANDL_FLOAT,v_asac_fina_converted_pandl);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_LOAN_CONVERTED_PANDL_FLOAT,v_asac_loan_converted_pandl);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_FINA_CAPT_MARGIN_FLOAT,v_asac_fina_capt_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_LOAN_CAPT_MARGIN_FLOAT,v_asac_loan_capt_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_KEEP_GUARANTEE_RATIO_FLOAT,v_asac_keep_guarantee_ratio);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_CONVERTED_MARGIN_FLOAT,v_exgp_converted_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_FINA_CONVERTED_PANDL_FLOAT,v_exgp_fina_converted_pandl);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_LOAN_CONVERTED_PANDL_FLOAT,v_exgp_loan_converted_pandl);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_FINA_CAPT_MARGIN_FLOAT,v_exgp_fina_capt_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_LOAN_CAPT_MARGIN_FLOAT,v_exgp_loan_capt_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_KEEP_GUARANTEE_RATIO_FLOAT,v_exgp_keep_guarantee_ratio);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_exgp_debt_loan_sell_strike_qty);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_exgp_debt_fina_buy_strike_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_ORDER_AMT_FLOAT,v_order_amt);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_CMMD_CONVERTED_MARGIN_FLOAT,v_asac_cmmd_converted_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_ORDER_CONVERTED_MARGIN_FLOAT,v_asac_order_converted_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_CURR_CONVERTED_MARGIN_FLOAT,v_asac_curr_converted_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_CMMD_CONVERTED_MARGIN_FLOAT,v_exgp_cmmd_converted_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_ORDER_CONVERTED_MARGIN_FLOAT,v_exgp_order_converted_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_CURR_CONVERTED_MARGIN_FLOAT,v_exgp_curr_converted_margin);
                        lpTSCall1Req41->SetInt32(LDBIZ_EXIST_DEBT_FLAG_INT,v_exist_debt_flag);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_FINA_COMM_CAPT_MARGIN_FLOAT,v_exgp_fina_comm_capt_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_LOAN_COMM_CAPT_MARGIN_FLOAT,v_exgp_loan_comm_capt_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_FINA_ORDER_CAPT_MARGIN_FLOAT,v_exgp_fina_order_capt_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_LOAN_ORDER_CAPT_MARGIN_FLOAT,v_exgp_loan_order_capt_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_FINA_COMM_CAPT_MARGIN_FLOAT,v_asac_fina_comm_capt_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_LOAN_COMM_CAPT_MARGIN_FLOAT,v_asac_loan_comm_capt_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_FINA_ORDER_CAPT_MARGIN_FLOAT,v_asac_fina_order_capt_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_LOAN_ORDER_CAPT_MARGIN_FLOAT,v_asac_loan_order_capt_margin);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_FINA_INTEREST_FLOAT,v_asac_fina_interest);
                        lpTSCall1Req41->SetDouble(LDBIZ_ASAC_LOAN_INTEREST_FLOAT,v_asac_loan_interest);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_FINA_INTEREST_FLOAT,v_exgp_fina_interest);
                        lpTSCall1Req41->SetDouble(LDBIZ_EXGP_LOAN_INTEREST_FLOAT,v_exgp_loan_interest);
                        lpTSCall1Req41->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
                        glpTSSubcallSerives->SubCall(lpTSCall1Req41, &lpTSCall1Ans41, 5000);
                        if(!lpTSCall1Ans41)  //  超时错误
                        {
                            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.132]subcall timed out!");
                            iRet=-2;
                            goto ENDSYS;
                        }
                        else if(lpTSCall1Ans41->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                        {
                            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans41->GetInt32(LDTAG_ERRORNO));
                            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans41->GetString(LDTAG_ERRORINFO));
                            iRet=-2;
                            goto ENDSYS;
                        }
                        //获取输出参数值
                        strcpy(v_error_code, lpTSCall1Ans41->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans41->GetString(LDBIZ_ERROR_INFO_STR));
                        v_order_id = lpTSCall1Ans41->GetInt64(LDBIZ_ORDER_ID_INT64);
                        strcpy(v_order_status, lpTSCall1Ans41->GetString(LDBIZ_ORDER_STATUS_STR));
                        v_order_date = lpTSCall1Ans41->GetInt32(LDBIZ_ORDER_DATE_INT);
                        v_order_frozen_amt = lpTSCall1Ans41->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
                        v_order_frozen_qty = lpTSCall1Ans41->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
                        v_comm_batch_no = lpTSCall1Ans41->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
                        v_order_time = lpTSCall1Ans41->GetInt32(LDBIZ_ORDER_TIME_INT);
                        v_comm_date = lpTSCall1Ans41->GetInt32(LDBIZ_COMM_DATE_INT);
                        v_comm_executor = lpTSCall1Ans41->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
                        v_report_date = lpTSCall1Ans41->GetInt32(LDBIZ_REPORT_DATE_INT);
                        v_report_time = lpTSCall1Ans41->GetInt32(LDBIZ_REPORT_TIME_INT);
                        strcpy(v_report_no, lpTSCall1Ans41->GetString(LDBIZ_REPORT_NO_STR));
                        v_debt_type = lpTSCall1Ans41->GetInt32(LDBIZ_DEBT_TYPE_INT);
                        v_deal_flag = lpTSCall1Ans41->GetInt32(LDBIZ_DEAL_FLAG_INT);
                        v_update_times = lpTSCall1Ans41->GetInt32(LDBIZ_UPDATE_TIMES_INT);

                    }
                    // else
                    else
                    {

                        //调用过程[事务_交易证券_交易_新增订单]
                        //组织事务请求
                        if(lpTSCall1Ans42)
                        {
                          lpTSCall1Ans42->FreeMsg();
                          lpTSCall1Ans42=NULL;
                        }
                        lpTSCall1Req42=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.11", 0);
                        lpTSCall1Req42->SetInt32(LDTAG_PRIORITY, iPriority);
                        lpTSCall1Req42->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                        lpTSCall1Req42->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                        lpTSCall1Req42->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                        lpTSCall1Req42->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                        lpTSCall1Req42->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                        lpTSCall1Req42->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                        lpTSCall1Req42->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                        lpTSCall1Req42->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
                        lpTSCall1Req42->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                        lpTSCall1Req42->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                        lpTSCall1Req42->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                        lpTSCall1Req42->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                        lpTSCall1Req42->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                        lpTSCall1Req42->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                        lpTSCall1Req42->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
                        lpTSCall1Req42->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
                        lpTSCall1Req42->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                        lpTSCall1Req42->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
                        lpTSCall1Req42->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
                        lpTSCall1Req42->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                        lpTSCall1Req42->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                        lpTSCall1Req42->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
                        lpTSCall1Req42->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                        lpTSCall1Req42->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
                        lpTSCall1Req42->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
                        lpTSCall1Req42->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
                        lpTSCall1Req42->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
                        lpTSCall1Req42->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                        lpTSCall1Req42->SetString(LDBIZ_BUSI_LIMIT_STR_STR,v_busi_limit_str);
                        lpTSCall1Req42->SetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR,v_exgp_busi_config_str);
                        lpTSCall1Req42->SetDouble(LDBIZ_EXGP_AVAIL_AMT_FLOAT,v_exgp_avail_amt);
                        lpTSCall1Req42->SetDouble(LDBIZ_EXGP_T_HK_BUY_TOTAL_AMT_FLOAT,v_exgp_T_hk_buy_total_amt);
                        lpTSCall1Req42->SetDouble(LDBIZ_EXGP_T_HK_SELL_TOTAL_AMT_FLOAT,v_exgp_T_hk_sell_total_amt);
                        lpTSCall1Req42->SetDouble(LDBIZ_EXGP_T1_HK_BUY_TOTAL_AMT_FLOAT,v_exgp_T1_hk_buy_total_amt);
                        lpTSCall1Req42->SetDouble(LDBIZ_EXGP_T1_HK_SELL_TOTAL_AMT_FLOAT,v_exgp_T1_hk_sell_total_amt);
                        lpTSCall1Req42->SetString(LDBIZ_ASAC_BUSI_CONFIG_STR_STR,v_asac_busi_config_str);
                        lpTSCall1Req42->SetDouble(LDBIZ_ASAC_AVAIL_AMT_FLOAT,v_asac_avail_amt);
                        lpTSCall1Req42->SetDouble(LDBIZ_ASAC_T_HK_BUY_TOTAL_AMT_FLOAT,v_asac_T_hk_buy_total_amt);
                        lpTSCall1Req42->SetDouble(LDBIZ_ASAC_T_HK_SELL_TOTAL_AMT_FLOAT,v_asac_T_hk_sell_total_amt);
                        lpTSCall1Req42->SetDouble(LDBIZ_ASAC_T1_HK_BUY_TOTAL_AMT_FLOAT,v_asac_T1_hk_buy_total_amt);
                        lpTSCall1Req42->SetDouble(LDBIZ_ASAC_T1_HK_SELL_TOTAL_AMT_FLOAT,v_asac_T1_hk_sell_total_amt);
                        lpTSCall1Req42->SetDouble(LDBIZ_EXGP_AVAIL_QTY_FLOAT,v_exgp_avail_qty);
                        lpTSCall1Req42->SetDouble(LDBIZ_EXGP_TARGET_CODE_AVAIL_QTY_FLOAT,v_exgp_target_code_avail_qty);
                        lpTSCall1Req42->SetDouble(LDBIZ_EXGP_TRADE_CODE_AVAIL_QTY_FLOAT,v_exgp_trade_code_avail_qty);
                        lpTSCall1Req42->SetDouble(LDBIZ_ASAC_AVAIL_QTY_FLOAT,v_asac_avail_qty);
                        lpTSCall1Req42->SetDouble(LDBIZ_ASAC_TARGET_CODE_AVAIL_QTY_FLOAT,v_asac_target_code_avail_qty);
                        lpTSCall1Req42->SetDouble(LDBIZ_ASAC_TRADE_CODE_AVAIL_QTY_FLOAT,v_asac_trade_code_avail_qty);
                        lpTSCall1Req42->SetDouble(LDBIZ_MARKET_PRICE_RATIO_FLOAT,v_market_price_ratio);
                        lpTSCall1Req42->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
                        lpTSCall1Req42->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
                        lpTSCall1Req42->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
                        lpTSCall1Req42->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                        lpTSCall1Req42->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
                        lpTSCall1Req42->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                        lpTSCall1Req42->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
                        lpTSCall1Req42->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
                        lpTSCall1Req42->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                        lpTSCall1Req42->SetInt32(LDBIZ_INTRST_DAYS_INT,v_intrst_days);
                        lpTSCall1Req42->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
                        lpTSCall1Req42->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                        lpTSCall1Req42->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                        lpTSCall1Req42->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                        lpTSCall1Req42->SetInt32(LDBIZ_MIN_UNIT_INT,v_min_unit);
                        lpTSCall1Req42->SetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT,v_up_limit_price);
                        lpTSCall1Req42->SetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT,v_down_limit_price);
                        lpTSCall1Req42->SetDouble(LDBIZ_LAST_PRICE_FLOAT,v_last_price);
                        lpTSCall1Req42->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
                        lpTSCall1Req42->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
                        lpTSCall1Req42->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
                        lpTSCall1Req42->SetInt32(LDBIZ_COST_CALC_TYPE_INT,v_cost_calc_type);
                        lpTSCall1Req42->SetInt64(LDBIZ_COMPLI_TRIG_ID_INT64,v_compli_trig_id);
                        lpTSCall1Req42->SetInt32(LDBIZ_ORDER_LIMIT_TIME_INT,v_order_limit_time);
                        lpTSCall1Req42->SetDouble(LDBIZ_ORDER_CTRL_QTY_FLOAT,v_order_ctrl_qty);
                        lpTSCall1Req42->SetDouble(LDBIZ_ORDER_CTRL_AMT_FLOAT,v_order_ctrl_amt);
                        lpTSCall1Req42->SetInt32(LDBIZ_OPEN_CLOSE_PERMISSION_INT,v_open_close_permission);
                        lpTSCall1Req42->SetDouble(LDBIZ_PER_SECU_POSI_RATIO_FLOAT,v_per_secu_posi_ratio);
                        lpTSCall1Req42->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
                        lpTSCall1Req42->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
                        lpTSCall1Req42->SetInt32(LDBIZ_SUBSCRIPTION_TRADE_MARK_INT,v_subscription_trade_mark);
                        lpTSCall1Req42->SetInt32(LDBIZ_PURCHASE_TRADE_MARK_INT,v_purchase_trade_mark);
                        lpTSCall1Req42->SetInt32(LDBIZ_REDE_TRADE_MARK_INT,v_rede_trade_mark);
                        lpTSCall1Req42->SetDouble(LDBIZ_FIRST_MINIMUM_AMT_FLOAT,v_first_minimum_amt);
                        lpTSCall1Req42->SetDouble(LDBIZ_MINIMUM_PURCHASE_AMT_FLOAT,v_minimum_purchase_amt);
                        lpTSCall1Req42->SetDouble(LDBIZ_MINIMUM_SUBSCRIPTION_AMT_FLOAT,v_minimum_subscription_amt);
                        lpTSCall1Req42->SetDouble(LDBIZ_MINIMUM_REDE_SHARE_FLOAT,v_minimum_rede_share);
                        lpTSCall1Req42->SetDouble(LDBIZ_MINIMUM_HOLDING_SHARE_FLOAT,v_minimum_holding_share);
                        lpTSCall1Req42->SetInt32(LDBIZ_RECORD_COUNT_INT,v_record_count);
                        lpTSCall1Req42->SetString(LDBIZ_TARGET_STOCK_CODE_STR,v_target_stock_code);
                        lpTSCall1Req42->SetInt32(LDBIZ_TARGET_STOCK_CODE_NO_INT,v_target_stock_code_no);
                        lpTSCall1Req42->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
                        lpTSCall1Req42->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
                        glpTSSubcallSerives->SubCall(lpTSCall1Req42, &lpTSCall1Ans42, 5000);
                        if(!lpTSCall1Ans42)  //  超时错误
                        {
                            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.11]subcall timed out!");
                            iRet=-2;
                            goto ENDSYS;
                        }
                        else if(lpTSCall1Ans42->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                        {
                            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans42->GetInt32(LDTAG_ERRORNO));
                            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans42->GetString(LDTAG_ERRORINFO));
                            iRet=-2;
                            goto ENDSYS;
                        }
                        //获取输出参数值
                        strcpy(v_error_code, lpTSCall1Ans42->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans42->GetString(LDBIZ_ERROR_INFO_STR));
                        v_order_id = lpTSCall1Ans42->GetInt64(LDBIZ_ORDER_ID_INT64);
                        strcpy(v_order_status, lpTSCall1Ans42->GetString(LDBIZ_ORDER_STATUS_STR));
                        v_order_date = lpTSCall1Ans42->GetInt32(LDBIZ_ORDER_DATE_INT);
                        v_order_frozen_amt = lpTSCall1Ans42->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
                        v_order_frozen_qty = lpTSCall1Ans42->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
                        v_comm_batch_no = lpTSCall1Ans42->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
                        v_order_time = lpTSCall1Ans42->GetInt32(LDBIZ_ORDER_TIME_INT);
                        v_comm_date = lpTSCall1Ans42->GetInt32(LDBIZ_COMM_DATE_INT);
                        v_comm_executor = lpTSCall1Ans42->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
                        v_report_date = lpTSCall1Ans42->GetInt32(LDBIZ_REPORT_DATE_INT);
                        v_report_time = lpTSCall1Ans42->GetInt32(LDBIZ_REPORT_TIME_INT);
                        strcpy(v_report_no, lpTSCall1Ans42->GetString(LDBIZ_REPORT_NO_STR));
                        v_update_times = lpTSCall1Ans42->GetInt32(LDBIZ_UPDATE_TIMES_INT);

                    // end if;
                    }

                // end if;
                }


                // if @错误编码# <> "0" then
                if (strcmp(v_error_code , "0")!=0)
                {

                  // set @改单状态# = 《改单状态-失败》;
                  strcpy(v_modi_order_status,"4");

                  // set @新订单序号# = 0;
                  v_new_order_id = 0;

                  // set @备注信息# = concat(@错误编码#,"|",@错误信息#);
                  snprintf(v_remark_info,sizeof(v_remark_info),"%s%s%s",v_error_code,"|",v_error_info);
                }
                // else
                else
                {


                  // set @改单状态# = 《改单状态-成功》;
                  strcpy(v_modi_order_status,"3");

                  // set @新订单序号# = @订单序号#;
                  v_new_order_id = v_order_id;

                  // set @备注信息# = "未报改单生成订单成功。";
                  strcpy(v_remark_info,"未报改单生成订单成功。");

                  // set @撤单数量# = 0;
                  v_wtdraw_qty = 0;

                  // set @成交数量# = 0;
                  v_strike_qty = 0;

                  // set @成交金额# = 0;
                  v_strike_amt = 0;

                  // set @成交均价# = 0;
                  v_strike_aver_price = 0;

                  // set @当笔成交价格# = 0;
                  v_curr_strike_price = 0;

                  // set @当笔成交金额# = 0;
                  v_curr_strike_amt = 0;

                  // set @当笔成交数量# = 0;
                  v_curr_strike_qty = 0;

                  // set @成交序号# = 0;
                  v_strike_id = 0;

                  // set @全部费用# = 0;
                  v_all_fee = 0;

                  // set @交易账户# = "";
                  strcpy(v_trade_acco,"");

                  // set @登记机构# = "";
                  strcpy(v_registration_agency,"");

                  // set @撤单状态# = "0";
                  strcpy(v_wtdraw_status,"0");
                  //主动推送

                  // [主动推送][secu.modifyorder][证券主推_订单_改单主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.908", 0);
                  lpPubMsg->SetInt64(LDBIZ_ORI_ORDER_ID_INT64,v_ori_order_id);
                  lpPubMsg->SetInt64(LDBIZ_NEW_ORDER_ID_INT64,v_new_order_id);
                  glpPubSub_Interface->PubTopics("secu.modifyorder", lpPubMsg);

                  //调用过程[事务_交易证券_交易_根据交易时间控制报盘主推]
                  //组织事务请求
                  if(lpTSCall1Ans43)
                  {
                    lpTSCall1Ans43->FreeMsg();
                    lpTSCall1Ans43=NULL;
                  }
                  lpTSCall1Req43=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.124", 0);
                  lpTSCall1Req43->SetInt32(LDTAG_PRIORITY, iPriority);
                  lpTSCall1Req43->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                  lpTSCall1Req43->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                  lpTSCall1Req43->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                  lpTSCall1Req43->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                  lpTSCall1Req43->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                  lpTSCall1Req43->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                  lpTSCall1Req43->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                  lpTSCall1Req43->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpTSCall1Req43->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                  glpTSSubcallSerives->SubCall(lpTSCall1Req43, &lpTSCall1Ans43, 5000);
                  if(!lpTSCall1Ans43)  //  超时错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.124]subcall timed out!");
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(lpTSCall1Ans43->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans43->GetInt32(LDTAG_ERRORNO));
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans43->GetString(LDTAG_ERRORINFO));
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(strcmp(lpTSCall1Ans43->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                  {
                      strcpy(v_error_code, lpTSCall1Ans43->GetString(LDBIZ_ERROR_CODE_STR));
                      strcpy(v_error_info, lpTSCall1Ans43->GetString(LDBIZ_ERROR_INFO_STR));
                      iRet=-1;
                      goto END;
                  }
                  //获取输出参数值
                  strcpy(v_error_code, lpTSCall1Ans43->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans43->GetString(LDBIZ_ERROR_INFO_STR));
                  v_trade_time_flag = lpTSCall1Ans43->GetInt32(LDBIZ_TRADE_TIME_FLAG_INT);


                  // if @交易时间标志# =1 then
                  if (v_trade_time_flag ==1)
                  {

                       // [主动推送][secu.rptorder][证券主推_报盘_订单主推报盘消息]
                       lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.30", 0);
                       lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
                       lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                       lpPubMsg->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                       lpPubMsg->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                       lpPubMsg->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                       lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                       lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                       lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                       lpPubMsg->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
                       lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
                       lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                       lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
                       lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                       lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
                       lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
                       lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                       lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                       lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
                       lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                       lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
                       lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
                       lpPubMsg->SetString(LDBIZ_TRADE_ACCO_STR,v_trade_acco);
                       lpPubMsg->SetString(LDBIZ_REGISTRATION_AGENCY_STR,v_registration_agency);
                       lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                       glpPubSub_Interface->PubTopics("secu.rptorder", lpPubMsg);

                  // end if;
                  }


                  // [主动推送][secu.order][证券主推_订单_订单主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
                  lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
                  lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                  lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                  lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
                  lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
                  lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                  lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
                  lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
                  lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
                  lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
                  lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
                  lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                  lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                  lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
                  lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
                  lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
                  lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
                  lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
                  lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
                  lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
                  lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                  lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                  lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                  lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                  lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
                  lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
                  lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
                  lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                  lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
                  lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
                  lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
                  lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
                  lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
                  lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
                  lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
                  lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
                  lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
                  lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
                  lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
                  lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                  glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


                  // if  @订单批号# > 0 then
                  if ( v_order_batch_no > 0)
                  {

                      // set @成交序号# = 0;
                      v_strike_id = 0;
                      //调用过程[事务_交易证券_主推接口_获取汇总订单成交信息]
                      //组织事务请求
                      if(lpTSCall1Ans44)
                      {
                        lpTSCall1Ans44->FreeMsg();
                        lpTSCall1Ans44=NULL;
                      }
                      lpTSCall1Req44=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.21", 0);
                      lpTSCall1Req44->SetInt32(LDTAG_PRIORITY, iPriority);
                      lpTSCall1Req44->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                      lpTSCall1Req44->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                      lpTSCall1Req44->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                      lpTSCall1Req44->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                      lpTSCall1Req44->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                      lpTSCall1Req44->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                      lpTSCall1Req44->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                      lpTSCall1Req44->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                      lpTSCall1Req44->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
                      lpTSCall1Req44->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
                      lpTSCall1Req44->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
                      lpTSCall1Req44->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
                      glpTSSubcallSerives->SubCall(lpTSCall1Req44, &lpTSCall1Ans44, 5000);
                      if(!lpTSCall1Ans44)  //  超时错误
                      {
                          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.21]subcall timed out!");
                          iRet=-2;
                          goto ENDSYS;
                      }
                      else if(lpTSCall1Ans44->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                      {
                          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans44->GetInt32(LDTAG_ERRORNO));
                          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans44->GetString(LDTAG_ERRORINFO));
                          iRet=-2;
                          goto ENDSYS;
                      }
                      else if(strcmp(lpTSCall1Ans44->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                      {
                          strcpy(v_error_code, lpTSCall1Ans44->GetString(LDBIZ_ERROR_CODE_STR));
                          strcpy(v_error_info, lpTSCall1Ans44->GetString(LDBIZ_ERROR_INFO_STR));
                          iRet=-1;
                          goto END;
                      }
                      //获取输出参数值
                      strcpy(v_error_code, lpTSCall1Ans44->GetString(LDBIZ_ERROR_CODE_STR));
                      strcpy(v_error_info, lpTSCall1Ans44->GetString(LDBIZ_ERROR_INFO_STR));
                      v_sum_order_row_id = lpTSCall1Ans44->GetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64);
                      v_sum_order_opor_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT);
                      v_sum_order_co_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_CO_NO_INT);
                      v_sum_order_pd_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_PD_NO_INT);
                      v_sum_order_exch_group_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT);
                      v_sum_order_asset_acco_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT);
                      v_sum_order_pass_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT);
                      strcpy(v_sum_order_exch_crncy_type, lpTSCall1Ans44->GetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR));
                      v_sum_order_stock_code_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT);
                      v_sum_order_trade_code_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT);
                      v_sum_order_target_code_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT);
                      v_sum_order_external_no = lpTSCall1Ans44->GetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64);
                      v_sum_order_date = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_DATE_INT);
                      v_sum_order_batch_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT);
                      v_sum_order_dir = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_DIR_INT);
                      v_sum_order_price_type = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT);
                      v_sum_order_price = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT);
                      v_sum_order_qty = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT);
                      strcpy(v_order_sum_status, lpTSCall1Ans44->GetString(LDBIZ_ORDER_SUM_STATUS_STR));
                      v_sum_order_wtdraw_qty = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT);
                      v_sum_order_waste_qty = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT);
                      v_sum_order_strike_amt = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT);
                      v_sum_order_strike_qty = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT);
                      v_sum_order_strike_aver_price = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT);
                      v_sum_order_net_price_flag = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT);
                      v_sum_order_bond_accr_intrst = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT);
                      v_sum_order_bond_rate_type = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT);
                      v_sum_order_par_value = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT);
                      v_sum_order_impawn_ratio = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT);
                      strcpy(v_sum_order_oper_way, lpTSCall1Ans44->GetString(LDBIZ_SUM_ORDER_OPER_WAY_STR));
                      v_sum_order_update_times = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT);
                      v_sum_strike_row_id = lpTSCall1Ans44->GetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64);
                      v_sum_strike_opor_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT);
                      v_sum_strike_co_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT);
                      v_sum_strike_pd_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT);
                      v_sum_strike_exch_group_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT);
                      v_sum_strike_asset_acco_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT);
                      v_sum_strike_pass_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT);
                      strcpy(v_sum_strike_out_acco, lpTSCall1Ans44->GetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR));
                      v_sum_strike_stock_acco_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT);
                      v_sum_strike_stock_code_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT);
                      v_sum_strike_comm_id = lpTSCall1Ans44->GetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64);
                      v_sum_strike_report_date = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT);
                      strcpy(v_sum_strike_report_no, lpTSCall1Ans44->GetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR));
                      v_sum_strike_order_date = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT);
                      v_sum_strike_order_id = lpTSCall1Ans44->GetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64);
                      v_sum_strike_order_dir = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT);
                      v_sum_strike_order_price = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT);
                      v_sum_strike_order_qty = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT);
                      v_sum_strike_strike_qty = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT);
                      v_sum_strike_strike_amt = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT);
                      v_sum_strike_all_fee = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT);
                      v_sum_strike_stamp_tax = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT);
                      v_sum_strike_trans_fee = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT);
                      v_sum_strike_brkage_fee = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT);
                      v_sum_strike_SEC_charges = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT);
                      v_sum_strike_other_fee = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT);
                      v_sum_strike_trade_commis = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT);
                      v_sum_strike_other_commis = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT);
                      v_sum_trade_tax = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT);
                      v_sum_trade_cost_fee = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT);
                      v_sum_trade_system_use_fee = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT);
                      v_sum_stock_settle_fee = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT);
                      v_sum_strike_net_price_flag = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT);
                      v_sum_strike_bond_accr_intrst = lpTSCall1Ans44->GetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT);
                      v_sum_strike_bond_rate_type = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT);
                      strcpy(v_sum_strike_order_oper_way, lpTSCall1Ans44->GetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR));
                      v_sum_strike_exter_comm_flag = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT);
                      v_sum_strike_update_times = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT);
                      v_sum_strike_order_batch_no = lpTSCall1Ans44->GetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT);
                      v_sum_external_no = lpTSCall1Ans44->GetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64);


                      // [主动推送][secu.ordertotal][证券主推_订单_订单汇总主推消息]
                      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.21", 0);
                      lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64,v_sum_order_row_id);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT,v_sum_order_opor_no);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_CO_NO_INT,v_sum_order_co_no);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PD_NO_INT,v_sum_order_pd_no);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT,v_sum_order_exch_group_no);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT,v_sum_order_asset_acco_no);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT,v_sum_order_pass_no);
                      lpPubMsg->SetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR,v_sum_order_exch_crncy_type);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT,v_sum_order_stock_code_no);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT,v_sum_order_trade_code_no);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT,v_sum_order_target_code_no);
                      lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64,v_sum_order_external_no);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DATE_INT,v_sum_order_date);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT,v_sum_order_batch_no);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DIR_INT,v_sum_order_dir);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT,v_sum_order_price_type);
                      lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT,v_sum_order_price);
                      lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT,v_sum_order_qty);
                      lpPubMsg->SetString(LDBIZ_ORDER_SUM_STATUS_STR,v_order_sum_status);
                      lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT,v_sum_order_wtdraw_qty);
                      lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT,v_sum_order_waste_qty);
                      lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT,v_sum_order_strike_amt);
                      lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT,v_sum_order_strike_qty);
                      lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT,v_sum_order_strike_aver_price);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT,v_sum_order_net_price_flag);
                      lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT,v_sum_order_bond_accr_intrst);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT,v_sum_order_bond_rate_type);
                      lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT,v_sum_order_par_value);
                      lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT,v_sum_order_impawn_ratio);
                      lpPubMsg->SetString(LDBIZ_SUM_ORDER_OPER_WAY_STR,v_sum_order_oper_way);
                      lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT,v_sum_order_update_times);
                      glpPubSub_Interface->PubTopics("secu.ordertotal", lpPubMsg);

                  // end if;
                  }


                  // if @指令序号# > 0 then
                  if (v_comm_id > 0)
                  {
                      //调用过程[事务_交易证券_主推接口_获取指令混合信息]
                      //组织事务请求
                      if(lpTSCall1Ans45)
                      {
                        lpTSCall1Ans45->FreeMsg();
                        lpTSCall1Ans45=NULL;
                      }
                      lpTSCall1Req45=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
                      lpTSCall1Req45->SetInt32(LDTAG_PRIORITY, iPriority);
                      lpTSCall1Req45->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                      lpTSCall1Req45->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                      lpTSCall1Req45->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                      lpTSCall1Req45->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                      lpTSCall1Req45->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                      lpTSCall1Req45->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                      lpTSCall1Req45->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                      lpTSCall1Req45->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
                      glpTSSubcallSerives->SubCall(lpTSCall1Req45, &lpTSCall1Ans45, 5000);
                      if(!lpTSCall1Ans45)  //  超时错误
                      {
                          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
                          iRet=-2;
                          goto ENDSYS;
                      }
                      else if(lpTSCall1Ans45->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                      {
                          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans45->GetInt32(LDTAG_ERRORNO));
                          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans45->GetString(LDTAG_ERRORINFO));
                          iRet=-2;
                          goto ENDSYS;
                      }
                      else if(strcmp(lpTSCall1Ans45->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                      {
                          strcpy(v_error_code, lpTSCall1Ans45->GetString(LDBIZ_ERROR_CODE_STR));
                          strcpy(v_error_info, lpTSCall1Ans45->GetString(LDBIZ_ERROR_INFO_STR));
                          iRet=-1;
                          goto END;
                      }
                      //获取输出参数值
                      strcpy(v_error_code, lpTSCall1Ans45->GetString(LDBIZ_ERROR_CODE_STR));
                      strcpy(v_error_info, lpTSCall1Ans45->GetString(LDBIZ_ERROR_INFO_STR));
                      v_init_date = lpTSCall1Ans45->GetInt32(LDBIZ_INIT_DATE_INT);
                      v_co_no = lpTSCall1Ans45->GetInt32(LDBIZ_CO_NO_INT);
                      v_pd_no = lpTSCall1Ans45->GetInt32(LDBIZ_PD_NO_INT);
                      v_exch_group_no = lpTSCall1Ans45->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
                      v_asset_acco_no = lpTSCall1Ans45->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
                      v_pass_no = lpTSCall1Ans45->GetInt32(LDBIZ_PASS_NO_INT);
                      strcpy(v_out_acco, lpTSCall1Ans45->GetString(LDBIZ_OUT_ACCO_STR));
                      strcpy(v_exch_crncy_type, lpTSCall1Ans45->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
                      v_stock_acco_no = lpTSCall1Ans45->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
                      v_stock_code_no = lpTSCall1Ans45->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
                      v_stock_type = lpTSCall1Ans45->GetInt32(LDBIZ_STOCK_TYPE_INT);
                      v_comm_date = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_DATE_INT);
                      v_comm_time = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_TIME_INT);
                      v_comm_batch_no = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
                      v_comm_opor = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_OPOR_INT);
                      v_comm_executor = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
                      v_comm_dir = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_DIR_INT);
                      v_comm_limit_price = lpTSCall1Ans45->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
                      v_limit_actual_price = lpTSCall1Ans45->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
                      v_comm_qty = lpTSCall1Ans45->GetDouble(LDBIZ_COMM_QTY_FLOAT);
                      v_comm_amt = lpTSCall1Ans45->GetDouble(LDBIZ_COMM_AMT_FLOAT);
                      v_order_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
                      v_comm_cancel_qty = lpTSCall1Ans45->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
                      v_strike_amt = lpTSCall1Ans45->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
                      v_strike_qty = lpTSCall1Ans45->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
                      v_comm_frozen_amt = lpTSCall1Ans45->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
                      v_comm_frozen_qty = lpTSCall1Ans45->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
                      strcpy(v_strike_status, lpTSCall1Ans45->GetString(LDBIZ_STRIKE_STATUS_STR));
                      strcpy(v_comm_status, lpTSCall1Ans45->GetString(LDBIZ_COMM_STATUS_STR));
                      v_comm_begin_date = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
                      v_comm_end_date = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_END_DATE_INT);
                      v_comm_begin_time = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
                      v_comm_end_time = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_END_TIME_INT);
                      v_comm_comple_date = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
                      v_comm_comple_time = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
                      v_comm_appr_date = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
                      v_comm_appr_time = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
                      strcpy(v_comm_appr_status, lpTSCall1Ans45->GetString(LDBIZ_COMM_APPR_STATUS_STR));
                      v_comm_appr_oper = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
                      strcpy(v_comm_appr_remark, lpTSCall1Ans45->GetString(LDBIZ_COMM_APPR_REMARK_STR));
                      v_basket_id = lpTSCall1Ans45->GetInt64(LDBIZ_BASKET_ID_INT64);
                      v_net_price_flag = lpTSCall1Ans45->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
                      v_bond_accr_intrst = lpTSCall1Ans45->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
                      v_bond_rate_type = lpTSCall1Ans45->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
                      strcpy(v_comm_oper_way, lpTSCall1Ans45->GetString(LDBIZ_COMM_OPER_WAY_STR));
                      v_exter_comm_flag = lpTSCall1Ans45->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
                      v_comm_comple_flag = lpTSCall1Ans45->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
                      v_strategy_capt_qty = lpTSCall1Ans45->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
                      v_strategy_order_qty = lpTSCall1Ans45->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
                      strcpy(v_contra_no, lpTSCall1Ans45->GetString(LDBIZ_CONTRA_NO_STR));
                      strcpy(v_comm_remark_info, lpTSCall1Ans45->GetString(LDBIZ_COMM_REMARK_INFO_STR));
                      v_disp_opor = lpTSCall1Ans45->GetInt32(LDBIZ_DISP_OPOR_INT);
                      v_disp_status = lpTSCall1Ans45->GetInt32(LDBIZ_DISP_STATUS_INT);
                      v_read_flag = lpTSCall1Ans45->GetInt32(LDBIZ_READ_FLAG_INT);
                      v_update_times = lpTSCall1Ans45->GetInt32(LDBIZ_UPDATE_TIMES_INT);
                      v_sum_comm_row_id = lpTSCall1Ans45->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
                      v_sum_comm_co_no = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
                      v_sum_comm_pd_no = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
                      v_sum_comm_exch_group_no = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
                      v_sum_comm_asset_acco_no = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
                      v_sum_comm_pass_no = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
                      strcpy(v_sum_comm_out_acco, lpTSCall1Ans45->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
                      strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans45->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
                      v_sum_comm_stock_code_no = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
                      v_sum_comm_date = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
                      v_sum_comm_time = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
                      v_sum_comm_batch_no = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
                      v_sum_comm_opor = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
                      v_sum_comm_executor = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
                      v_sum_comm_dir = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
                      v_sum_comm_limit_price = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
                      v_sum_comm_qty = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
                      v_sum_comm_amt = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
                      v_sum_comm_order_qty = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
                      v_sum_comm_cancel_qty = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
                      v_sum_comm_await_cancel_qty = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
                      v_sum_comm_strike_amt = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
                      v_sum_comm_strike_qty = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
                      strcpy(v_sum_comm_strike_status, lpTSCall1Ans45->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
                      strcpy(v_comm_sum_status, lpTSCall1Ans45->GetString(LDBIZ_COMM_SUM_STATUS_STR));
                      v_sum_comm_begin_date = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
                      v_sum_comm_end_date = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
                      v_sum_comm_begin_time = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
                      v_sum_comm_end_time = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
                      v_sum_comm_comple_date = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
                      v_sum_comm_comple_time = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
                      v_sum_comm_max_comm_comple_date = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
                      v_sum_comm_max_comm_comple_time = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
                      v_sum_comm_appr_date = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
                      v_sum_comm_appr_time = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
                      v_sum_comm_appr_qty = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
                      strcpy(v_comm_sum_approve_status, lpTSCall1Ans45->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
                      v_sum_comm_basket_id = lpTSCall1Ans45->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
                      v_sum_comm_net_price_flag = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
                      v_sum_comm_bond_accr_intrst = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
                      v_sum_comm_bond_rate_type = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
                      strcpy(v_sum_comm_oper_way, lpTSCall1Ans45->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
                      v_sum_comm_exter_comm_flag = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
                      v_sum_buy_order_qty = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
                      v_sum_sell_order_qty = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
                      v_sum_buy_comm_qty = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
                      v_sum_sell_comm_qty = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
                      v_sum_buy_strike_qty = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
                      v_sum_sell_strike_qty = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
                      v_sum_buy_strike_amt = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
                      v_sum_sell_strike_amt = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
                      v_sum_buy_comm_amt = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
                      v_sum_sell_comm_amt = lpTSCall1Ans45->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
                      strcpy(v_sum_comm_remark_info, lpTSCall1Ans45->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
                      v_sum_comm_update_times = lpTSCall1Ans45->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
                      strcpy(v_acco_concat_info, lpTSCall1Ans45->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


                      // [主动推送][secu.comm][证券主推_指令_指令主推消息]
                      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
                      lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                      lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                      lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
                      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                      lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                      lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
                      lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
                      lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
                      lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
                      lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
                      lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
                      lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
                      lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
                      lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
                      lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
                      lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
                      lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                      lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
                      lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
                      lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                      lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
                      lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
                      lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
                      lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
                      lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
                      lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
                      lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
                      lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
                      lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
                      lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
                      lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
                      lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
                      lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
                      lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
                      lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
                      lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
                      lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                      lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                      lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                      lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
                      lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
                      lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
                      lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
                      lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
                      lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
                      lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                      lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
                      lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
                      lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                      lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                      glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


                      // if @指令批号# > 0 then
                      if (v_comm_batch_no > 0)
                      {

                          // set @指令备注信息#= @汇总指令备注信息#;
                          strcpy(v_comm_remark_info,v_sum_comm_remark_info);

                          // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
                          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
                          lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
                          lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
                          lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
                          lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
                          lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
                          lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
                          lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
                          lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
                          lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
                          lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
                          lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
                          lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
                          lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
                          lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
                          lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
                          lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
                          lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
                          lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
                          lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
                          lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
                          lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
                          lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
                          lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
                          lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
                          lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
                          lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
                          lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
                          lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
                          lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                          lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                          lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
                          lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
                          glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

                      // end if;
                      }

                  // end if;
                  }

                  //质押提交和质押转回，要推交易代码和标准券代码

                  // if @订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》 then
                  if (v_order_dir == 21 || v_order_dir == 22)
                  {
                    //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
                    //组织事务请求
                    if(lpTSCall1Ans46)
                    {
                      lpTSCall1Ans46->FreeMsg();
                      lpTSCall1Ans46=NULL;
                    }
                    lpTSCall1Req46=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
                    lpTSCall1Req46->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req46->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req46->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req46->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req46->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req46->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req46->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req46->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req46->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpTSCall1Req46->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpTSCall1Req46->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpTSCall1Req46->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpTSCall1Req46->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpTSCall1Req46->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
                    lpTSCall1Req46->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    lpTSCall1Req46->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req46, &lpTSCall1Ans46, 5000);
                    if(!lpTSCall1Ans46)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans46->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans46->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans46->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(strcmp(lpTSCall1Ans46->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                    {
                        strcpy(v_error_code, lpTSCall1Ans46->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans46->GetString(LDBIZ_ERROR_INFO_STR));
                        iRet=-1;
                        goto END;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans46->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans46->GetString(LDBIZ_ERROR_INFO_STR));
                    v_exgp_cash_id = lpTSCall1Ans46->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
                    v_exgp_frozen_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
                    v_exgp_unfroz_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
                    v_exgp_comm_frozen_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
                    v_exgp_comm_unfroz_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
                    v_exgp_comm_capt_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
                    v_exgp_comm_releas_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
                    v_exgp_trade_frozen_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
                    v_exgp_trade_unfroz_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
                    v_exgp_trade_capt_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
                    v_exgp_trade_releas_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
                    v_exgp_strike_capt_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
                    v_exgp_strike_releas_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
                    v_exgp_cash_update_times = lpTSCall1Ans46->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
                    v_exgp_posi_id = lpTSCall1Ans46->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
                    v_exgp_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
                    v_exgp_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
                    v_exgp_comm_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
                    v_exgp_comm_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
                    v_exgp_comm_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
                    v_exgp_comm_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
                    v_exgp_trade_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
                    v_exgp_trade_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
                    v_exgp_trade_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
                    v_exgp_trade_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
                    v_exgp_strike_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
                    v_exgp_strike_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
                    v_exgp_strike_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
                    v_exgp_strike_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
                    v_exgp_realize_pandl = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
                    v_exgp_cost_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
                    v_exgp_intrst_cost_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
                    v_exgp_intrst_pandl = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
                    v_exgp_posi_update_times = lpTSCall1Ans46->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
                    v_asac_cash_id = lpTSCall1Ans46->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
                    v_asac_frozen_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
                    v_asac_unfroz_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
                    v_asac_comm_frozen_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
                    v_asac_comm_unfroz_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
                    v_asac_comm_capt_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
                    v_asac_comm_releas_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
                    v_asac_trade_frozen_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
                    v_asac_trade_unfroz_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
                    v_asac_trade_capt_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
                    v_asac_trade_releas_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
                    v_asac_strike_capt_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
                    v_asac_strike_releas_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
                    v_asac_cash_update_times = lpTSCall1Ans46->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
                    v_asac_posi_id = lpTSCall1Ans46->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
                    v_asac_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
                    v_asac_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
                    v_asac_comm_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
                    v_asac_comm_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
                    v_asac_comm_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
                    v_asac_comm_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
                    v_asac_trade_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
                    v_asac_trade_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
                    v_asac_trade_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
                    v_asac_trade_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
                    v_asac_strike_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
                    v_asac_strike_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
                    v_asac_strike_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
                    v_asac_strike_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
                    v_asac_realize_pandl = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
                    v_asac_cost_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
                    v_asac_intrst_cost_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
                    v_asac_intrst_pandl = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
                    v_asac_posi_update_times = lpTSCall1Ans46->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
                    v_exgp_target_posi_id = lpTSCall1Ans46->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
                    v_exgp_target_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
                    v_exgp_target_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
                    v_exgp_target_comm_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
                    v_exgp_target_comm_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
                    v_exgp_target_comm_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
                    v_exgp_target_comm_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
                    v_exgp_target_trade_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
                    v_exgp_target_trade_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
                    v_exgp_target_trade_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
                    v_exgp_target_trade_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
                    v_exgp_target_strike_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
                    v_exgp_target_strike_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
                    v_exgp_target_strike_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
                    v_exgp_target_strike_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
                    v_exgp_target_realize_pandl = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
                    v_exgp_target_cost_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
                    v_exgp_target_intrst_cost_amt = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
                    v_exgp_target_intrst_pandl = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
                    v_exgp_target_posi_update_times = lpTSCall1Ans46->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
                    v_asac_target_posi_id = lpTSCall1Ans46->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
                    v_asac_target_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
                    v_asac_target_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
                    v_asac_target_comm_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
                    v_asac_target_comm_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
                    v_asac_target_comm_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
                    v_asac_target_comm_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
                    v_asac_target_trade_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
                    v_asac_target_trade_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
                    v_asac_target_trade_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
                    v_asac_target_trade_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
                    v_asac_target_strike_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
                    v_asac_target_strike_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
                    v_asac_target_strike_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
                    v_asac_target_strike_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
                    v_asac_target_realize_pandl = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
                    v_asac_target_cost_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
                    v_asac_target_intrst_cost_amt = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
                    v_asac_target_intrst_pandl = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
                    v_asac_target_posi_update_times = lpTSCall1Ans46->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
                    v_exgp_put_impawn_qty = lpTSCall1Ans46->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
                    v_asac_put_impawn_qty = lpTSCall1Ans46->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


                    // set @证券代码编号# = @交易代码编号#;
                    v_stock_code_no = v_trade_code_no;

                    // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
                    lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
                    lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
                    glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


                    // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
                    lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
                    lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
                    glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


                    // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
                    lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
                    lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
                    glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


                    // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
                    lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
                    lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
                    glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


                    // set @证券代码编号# = @标的代码编号#;
                    v_stock_code_no = v_target_code_no;

                    // set @交易组提交质押数量# = 0;
                    v_exgp_put_impawn_qty = 0;

                    // set @资产账户提交质押数量# = 0;
                    v_asac_put_impawn_qty = 0;

                    // set @交易组持仓序号# = @交易组标的持仓序号#;
                    v_exgp_posi_id = v_exgp_target_posi_id;

                    // set @交易组冻结数量# = @交易组标的冻结数量#;
                    v_exgp_frozen_qty = v_exgp_target_frozen_qty;

                    // set @交易组解冻数量# = @交易组标的解冻数量#;
                    v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

                    // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
                    v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

                    // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
                    v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

                    // set @交易组指令占用数量# = @交易组标的指令占用数量#;
                    v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

                    // set @交易组指令释放数量# = @交易组标的指令释放数量#;
                    v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

                    // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
                    v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

                    // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
                    v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

                    // set @交易组交易占用数量# = @交易组标的交易占用数量#;
                    v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

                    // set @交易组交易释放数量# = @交易组标的交易释放数量#;
                    v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

                    // set @交易组成交占用数量# = @交易组标的成交占用数量#;
                    v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

                    // set @交易组成交释放数量# = @交易组标的成交释放数量#;
                    v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

                    // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
                    v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

                    // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
                    v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

                    // set @交易组实现盈亏# = @交易组标的实现盈亏#;
                    v_exgp_realize_pandl = v_exgp_target_realize_pandl;

                    // set @交易组成本金额# = @交易组标的成本金额#;
                    v_exgp_cost_amt = v_exgp_target_cost_amt;

                    // set @交易组利息成本金额# = @交易组标的利息成本金额#;
                    v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

                    // set @交易组利息收益# = @交易组标的利息收益#;
                    v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

                    // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
                    v_exgp_posi_update_times = v_exgp_target_posi_update_times;

                    // set @资产账户持仓序号# = @资产账户标的持仓序号#;
                    v_asac_posi_id = v_asac_target_posi_id;

                    // set @资产账户冻结数量# = @资产账户标的冻结数量#;
                    v_asac_frozen_qty = v_asac_target_frozen_qty;

                    // set @资产账户解冻数量# = @资产账户标的解冻数量#;
                    v_asac_unfroz_qty = v_asac_target_unfroz_qty;

                    // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
                    v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

                    // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
                    v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

                    // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
                    v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

                    // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
                    v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

                    // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
                    v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

                    // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
                    v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

                    // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
                    v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

                    // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
                    v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

                    // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
                    v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

                    // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
                    v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

                    // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
                    v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

                    // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
                    v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

                    // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
                    v_asac_realize_pandl = v_asac_target_realize_pandl;

                    // set @资产账户成本金额# = @资产账户标的成本金额#;
                    v_asac_cost_amt = v_asac_target_cost_amt;

                    // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
                    v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

                    // set @资产账户利息收益# = @资产账户标的利息收益#;
                    v_asac_intrst_pandl = v_asac_target_intrst_pandl;

                    // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
                    v_asac_posi_update_times = v_asac_target_posi_update_times;

                    // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
                    lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
                    lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
                    glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


                    // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
                    lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
                    lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
                    glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


                  }
                  // else if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
                  else if (v_order_dir == 3 || v_order_dir == 4)
                  {

                    // set @证券代码编号# = @标的代码编号#;
                    v_stock_code_no = v_target_code_no;
                    //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
                    //组织事务请求
                    if(lpTSCall1Ans47)
                    {
                      lpTSCall1Ans47->FreeMsg();
                      lpTSCall1Ans47=NULL;
                    }
                    lpTSCall1Req47=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
                    lpTSCall1Req47->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req47->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req47->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req47->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req47->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req47->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req47->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req47->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req47->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpTSCall1Req47->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpTSCall1Req47->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpTSCall1Req47->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpTSCall1Req47->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpTSCall1Req47->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpTSCall1Req47->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req47, &lpTSCall1Ans47, 5000);
                    if(!lpTSCall1Ans47)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans47->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans47->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans47->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(strcmp(lpTSCall1Ans47->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                    {
                        strcpy(v_error_code, lpTSCall1Ans47->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans47->GetString(LDBIZ_ERROR_INFO_STR));
                        iRet=-1;
                        goto END;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans47->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans47->GetString(LDBIZ_ERROR_INFO_STR));
                    v_exgp_cash_id = lpTSCall1Ans47->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
                    v_exgp_frozen_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
                    v_exgp_unfroz_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
                    v_exgp_comm_frozen_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
                    v_exgp_comm_unfroz_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
                    v_exgp_comm_capt_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
                    v_exgp_comm_releas_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
                    v_exgp_trade_frozen_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
                    v_exgp_trade_unfroz_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
                    v_exgp_trade_capt_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
                    v_exgp_trade_releas_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
                    v_exgp_strike_capt_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
                    v_exgp_strike_releas_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
                    v_exgp_cash_update_times = lpTSCall1Ans47->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
                    v_exgp_posi_id = lpTSCall1Ans47->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
                    v_exgp_frozen_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
                    v_exgp_unfroz_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
                    v_exgp_comm_frozen_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
                    v_exgp_comm_unfroz_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
                    v_exgp_comm_capt_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
                    v_exgp_comm_releas_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
                    v_exgp_trade_frozen_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
                    v_exgp_trade_unfroz_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
                    v_exgp_trade_capt_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
                    v_exgp_trade_releas_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
                    v_exgp_strike_capt_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
                    v_exgp_strike_releas_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
                    v_exgp_strike_frozen_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
                    v_exgp_strike_unfroz_qty = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
                    v_exgp_realize_pandl = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
                    v_exgp_cost_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
                    v_exgp_intrst_cost_amt = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
                    v_exgp_intrst_pandl = lpTSCall1Ans47->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
                    v_exgp_posi_update_times = lpTSCall1Ans47->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
                    v_asac_cash_id = lpTSCall1Ans47->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
                    v_asac_frozen_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
                    v_asac_unfroz_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
                    v_asac_comm_frozen_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
                    v_asac_comm_unfroz_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
                    v_asac_comm_capt_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
                    v_asac_comm_releas_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
                    v_asac_trade_frozen_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
                    v_asac_trade_unfroz_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
                    v_asac_trade_capt_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
                    v_asac_trade_releas_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
                    v_asac_strike_capt_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
                    v_asac_strike_releas_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
                    v_asac_cash_update_times = lpTSCall1Ans47->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
                    v_asac_posi_id = lpTSCall1Ans47->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
                    v_asac_frozen_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
                    v_asac_unfroz_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
                    v_asac_comm_frozen_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
                    v_asac_comm_unfroz_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
                    v_asac_comm_capt_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
                    v_asac_comm_releas_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
                    v_asac_trade_frozen_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
                    v_asac_trade_unfroz_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
                    v_asac_trade_capt_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
                    v_asac_trade_releas_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
                    v_asac_strike_capt_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
                    v_asac_strike_releas_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
                    v_asac_strike_frozen_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
                    v_asac_strike_unfroz_qty = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
                    v_asac_realize_pandl = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
                    v_asac_cost_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
                    v_asac_intrst_cost_amt = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
                    v_asac_intrst_pandl = lpTSCall1Ans47->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
                    v_asac_posi_update_times = lpTSCall1Ans47->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


                    // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
                    lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
                    lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
                    glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


                    // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
                    lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
                    lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
                    glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


                    // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
                    lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
                    lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
                    glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


                    // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
                    lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
                    lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
                    glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


                  }
                  // else if @资产账户类型# = 《资产账户类型-融资融券》 then
                  else if (v_asset_acco_type == 5)
                  {
                    //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
                    //组织事务请求
                    if(lpTSCall1Ans48)
                    {
                      lpTSCall1Ans48->FreeMsg();
                      lpTSCall1Ans48=NULL;
                    }
                    lpTSCall1Req48=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
                    lpTSCall1Req48->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req48->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req48->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req48->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req48->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req48->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req48->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req48->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req48->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpTSCall1Req48->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpTSCall1Req48->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpTSCall1Req48->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpTSCall1Req48->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpTSCall1Req48->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpTSCall1Req48->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req48, &lpTSCall1Ans48, 5000);
                    if(!lpTSCall1Ans48)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans48->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans48->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans48->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(strcmp(lpTSCall1Ans48->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                    {
                        strcpy(v_error_code, lpTSCall1Ans48->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans48->GetString(LDBIZ_ERROR_INFO_STR));
                        iRet=-1;
                        goto END;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans48->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans48->GetString(LDBIZ_ERROR_INFO_STR));
                    v_exgp_cash_id = lpTSCall1Ans48->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
                    v_exgp_frozen_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
                    v_exgp_unfroz_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
                    v_exgp_comm_frozen_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
                    v_exgp_comm_unfroz_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
                    v_exgp_comm_capt_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
                    v_exgp_comm_releas_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
                    v_exgp_trade_frozen_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
                    v_exgp_trade_unfroz_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
                    v_exgp_trade_capt_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
                    v_exgp_trade_releas_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
                    v_exgp_strike_capt_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
                    v_exgp_strike_releas_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
                    v_exgp_cash_update_times = lpTSCall1Ans48->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
                    v_exgp_posi_id = lpTSCall1Ans48->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
                    v_exgp_frozen_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
                    v_exgp_unfroz_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
                    v_exgp_comm_frozen_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
                    v_exgp_comm_unfroz_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
                    v_exgp_comm_capt_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
                    v_exgp_comm_releas_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
                    v_exgp_trade_frozen_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
                    v_exgp_trade_unfroz_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
                    v_exgp_trade_capt_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
                    v_exgp_trade_releas_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
                    v_exgp_strike_capt_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
                    v_exgp_strike_releas_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
                    v_exgp_strike_frozen_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
                    v_exgp_strike_unfroz_qty = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
                    v_exgp_realize_pandl = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
                    v_exgp_cost_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
                    v_exgp_intrst_cost_amt = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
                    v_exgp_intrst_pandl = lpTSCall1Ans48->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
                    v_exgp_posi_update_times = lpTSCall1Ans48->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
                    v_asac_cash_id = lpTSCall1Ans48->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
                    v_asac_frozen_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
                    v_asac_unfroz_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
                    v_asac_comm_frozen_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
                    v_asac_comm_unfroz_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
                    v_asac_comm_capt_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
                    v_asac_comm_releas_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
                    v_asac_trade_frozen_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
                    v_asac_trade_unfroz_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
                    v_asac_trade_capt_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
                    v_asac_trade_releas_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
                    v_asac_strike_capt_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
                    v_asac_strike_releas_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
                    v_asac_cash_update_times = lpTSCall1Ans48->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
                    v_asac_posi_id = lpTSCall1Ans48->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
                    v_asac_frozen_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
                    v_asac_unfroz_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
                    v_asac_comm_frozen_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
                    v_asac_comm_unfroz_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
                    v_asac_comm_capt_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
                    v_asac_comm_releas_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
                    v_asac_trade_frozen_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
                    v_asac_trade_unfroz_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
                    v_asac_trade_capt_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
                    v_asac_trade_releas_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
                    v_asac_strike_capt_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
                    v_asac_strike_releas_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
                    v_asac_strike_frozen_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
                    v_asac_strike_unfroz_qty = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
                    v_asac_realize_pandl = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
                    v_asac_cost_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
                    v_asac_intrst_cost_amt = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
                    v_asac_intrst_pandl = lpTSCall1Ans48->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
                    v_asac_posi_update_times = lpTSCall1Ans48->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


                    // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
                    lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
                    lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
                    glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


                    // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
                    lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
                    lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
                    glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


                    // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
                    lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
                    lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
                    glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


                    // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
                    lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
                    lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
                    glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

                    //主推：交易证券_账户_交易组业务资金负债表、交易证券_账户_资产账户业务资金负债表、交易证券_账户_交易组业务持仓负债表、交易证券_账户_资产账户业务持仓负    债表、    交易    证券_    账户_资产账户负债明细表、交易证券_账户_交易组负债明细表
                    //调用过程[事务_交易证券_账户_查询交易组业务持仓负债]
                    //组织事务请求
                    if(lpTSCall1Ans49)
                    {
                      lpTSCall1Ans49->FreeMsg();
                      lpTSCall1Ans49=NULL;
                    }
                    lpTSCall1Req49=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.76", 0);
                    lpTSCall1Req49->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req49->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req49->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req49->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req49->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req49->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req49->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req49->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req49->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                    lpTSCall1Req49->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpTSCall1Req49->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpTSCall1Req49->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpTSCall1Req49->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpTSCall1Req49->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpTSCall1Req49->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpTSCall1Req49->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req49, &lpTSCall1Ans49, 5000);
                    if(!lpTSCall1Ans49)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.76]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans49->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans49->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans49->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(strcmp(lpTSCall1Ans49->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                    {
                        strcpy(v_error_code, lpTSCall1Ans49->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans49->GetString(LDBIZ_ERROR_INFO_STR));
                        iRet=-1;
                        goto END;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans49->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans49->GetString(LDBIZ_ERROR_INFO_STR));
                    v_row_id = lpTSCall1Ans49->GetInt64(LDBIZ_ROW_ID_INT64);
                    v_exch_no = lpTSCall1Ans49->GetInt32(LDBIZ_EXCH_NO_INT);
                    v_stock_type = lpTSCall1Ans49->GetInt32(LDBIZ_STOCK_TYPE_INT);
                    v_asset_type = lpTSCall1Ans49->GetInt32(LDBIZ_ASSET_TYPE_INT);
                    v_invest_type = lpTSCall1Ans49->GetInt32(LDBIZ_INVEST_TYPE_INT);
                    v_debt_fina_buy_strike_qty = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT);
                    v_fina_return_strike_qty = lpTSCall1Ans49->GetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT);
                    v_debt_loan_sell_strike_qty = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT);
                    v_loan_return_strike_qty = lpTSCall1Ans49->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT);
                    v_debt_fina_buy_order_qty = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT);
                    v_fina_return_order_qty = lpTSCall1Ans49->GetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT);
                    v_debt_loan_sell_order_qty = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT);
                    v_loan_return_order_qty = lpTSCall1Ans49->GetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT);
                    v_debt_fina_buy_comm_qty = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT);
                    v_fina_return_comm_qty = lpTSCall1Ans49->GetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT);
                    v_debt_loan_sell_comm_qty = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT);
                    v_loan_return_comm_qty = lpTSCall1Ans49->GetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT);
                    v_debt_fina_buy_strike_amt = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT);
                    v_fina_return_strike_amt = lpTSCall1Ans49->GetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT);
                    v_debt_loan_sell_strike_amt = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
                    v_loan_return_strike_amt = lpTSCall1Ans49->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
                    v_debt_fina_buy_order_amt = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT);
                    v_fina_return_order_amt = lpTSCall1Ans49->GetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT);
                    v_debt_loan_sell_order_amt = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT);
                    v_loan_return_order_amt = lpTSCall1Ans49->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
                    v_debt_fina_buy_comm_amt = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT);
                    v_fina_return_comm_amt = lpTSCall1Ans49->GetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT);
                    v_debt_loan_sell_comm_amt = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT);
                    v_loan_return_comm_amt = lpTSCall1Ans49->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
                    v_debt_strike_fee = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
                    v_return_strike_fee = lpTSCall1Ans49->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
                    v_debt_interest = lpTSCall1Ans49->GetDouble(LDBIZ_DEBT_INTEREST_FLOAT);
                    v_return_interest_amt = lpTSCall1Ans49->GetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT);
                    v_update_times = lpTSCall1Ans49->GetInt32(LDBIZ_UPDATE_TIMES_INT);


                    // [主动推送][secu.exgpposidebt][证券主推_持仓_交易组业务持仓负债主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.928", 0);
                    lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
                    lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
                    lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
                    lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
                    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
                    lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
                    lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
                    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                    glpPubSub_Interface->PubTopics("secu.exgpposidebt", lpPubMsg);

                    //调用过程[事务_交易证券_账户_查询资产账户业务持仓负债]
                    //组织事务请求
                    if(lpTSCall1Ans50)
                    {
                      lpTSCall1Ans50->FreeMsg();
                      lpTSCall1Ans50=NULL;
                    }
                    lpTSCall1Req50=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.77", 0);
                    lpTSCall1Req50->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req50->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req50->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req50->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req50->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req50->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req50->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req50->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req50->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                    lpTSCall1Req50->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpTSCall1Req50->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpTSCall1Req50->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpTSCall1Req50->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpTSCall1Req50->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpTSCall1Req50->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req50, &lpTSCall1Ans50, 5000);
                    if(!lpTSCall1Ans50)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.77]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans50->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans50->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans50->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(strcmp(lpTSCall1Ans50->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                    {
                        strcpy(v_error_code, lpTSCall1Ans50->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans50->GetString(LDBIZ_ERROR_INFO_STR));
                        iRet=-1;
                        goto END;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans50->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans50->GetString(LDBIZ_ERROR_INFO_STR));


                    // [主动推送][secu.asacposidebt][证券主推_持仓_资产账户业务持仓负债主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.929", 0);
                    lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
                    lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
                    lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
                    lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
                    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
                    lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
                    lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
                    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                    glpPubSub_Interface->PubTopics("secu.asacposidebt", lpPubMsg);

                    //调用过程[事务_交易证券_账户_查询资产账户业务资金负债]
                    //组织事务请求
                    if(lpTSCall1Ans51)
                    {
                      lpTSCall1Ans51->FreeMsg();
                      lpTSCall1Ans51=NULL;
                    }
                    lpTSCall1Req51=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.75", 0);
                    lpTSCall1Req51->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req51->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req51->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req51->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req51->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req51->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req51->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req51->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req51->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                    lpTSCall1Req51->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpTSCall1Req51->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpTSCall1Req51->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req51, &lpTSCall1Ans51, 5000);
                    if(!lpTSCall1Ans51)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.75]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans51->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans51->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans51->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(strcmp(lpTSCall1Ans51->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                    {
                        strcpy(v_error_code, lpTSCall1Ans51->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans51->GetString(LDBIZ_ERROR_INFO_STR));
                        iRet=-1;
                        goto END;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans51->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans51->GetString(LDBIZ_ERROR_INFO_STR));
                    v_row_id = lpTSCall1Ans51->GetInt64(LDBIZ_ROW_ID_INT64);
                    v_debt_loan_sell_strike_amt = lpTSCall1Ans51->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
                    v_debt_strike_fee = lpTSCall1Ans51->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
                    v_loan_return_strike_amt = lpTSCall1Ans51->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
                    v_loan_return_order_amt = lpTSCall1Ans51->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
                    v_loan_return_comm_amt = lpTSCall1Ans51->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
                    v_return_strike_fee = lpTSCall1Ans51->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
                    v_update_times = lpTSCall1Ans51->GetInt32(LDBIZ_UPDATE_TIMES_INT);


                    // [主动推送][secu.asaccapitaldebt][证券主推_资金_资产账户业务资金负债主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.930", 0);
                    lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
                    lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
                    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                    glpPubSub_Interface->PubTopics("secu.asaccapitaldebt", lpPubMsg);

                    //调用过程[事务_交易证券_账户_查询交易组业务资金负债]
                    //组织事务请求
                    if(lpTSCall1Ans52)
                    {
                      lpTSCall1Ans52->FreeMsg();
                      lpTSCall1Ans52=NULL;
                    }
                    lpTSCall1Req52=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.74", 0);
                    lpTSCall1Req52->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req52->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req52->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req52->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req52->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req52->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req52->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req52->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req52->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                    lpTSCall1Req52->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpTSCall1Req52->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpTSCall1Req52->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpTSCall1Req52->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req52, &lpTSCall1Ans52, 5000);
                    if(!lpTSCall1Ans52)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.74]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans52->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans52->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans52->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(strcmp(lpTSCall1Ans52->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                    {
                        strcpy(v_error_code, lpTSCall1Ans52->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans52->GetString(LDBIZ_ERROR_INFO_STR));
                        iRet=-1;
                        goto END;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans52->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans52->GetString(LDBIZ_ERROR_INFO_STR));
                    v_row_id = lpTSCall1Ans52->GetInt64(LDBIZ_ROW_ID_INT64);
                    v_debt_loan_sell_strike_amt = lpTSCall1Ans52->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
                    v_debt_strike_fee = lpTSCall1Ans52->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
                    v_loan_return_strike_amt = lpTSCall1Ans52->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
                    v_loan_return_order_amt = lpTSCall1Ans52->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
                    v_loan_return_comm_amt = lpTSCall1Ans52->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
                    v_return_strike_fee = lpTSCall1Ans52->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
                    v_update_times = lpTSCall1Ans52->GetInt32(LDBIZ_UPDATE_TIMES_INT);


                    // [主动推送][secu.exgpcapitaldebt][证券主推_资金_交易组业务资金负债主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.931", 0);
                    lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
                    lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
                    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
                    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                    glpPubSub_Interface->PubTopics("secu.exgpcapitaldebt", lpPubMsg);

                  }
                  // else
                  else
                  {

                    //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
                    //组织事务请求
                    if(lpTSCall1Ans53)
                    {
                      lpTSCall1Ans53->FreeMsg();
                      lpTSCall1Ans53=NULL;
                    }
                    lpTSCall1Req53=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
                    lpTSCall1Req53->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req53->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req53->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req53->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req53->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req53->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req53->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req53->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req53->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpTSCall1Req53->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpTSCall1Req53->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpTSCall1Req53->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpTSCall1Req53->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpTSCall1Req53->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpTSCall1Req53->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req53, &lpTSCall1Ans53, 5000);
                    if(!lpTSCall1Ans53)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans53->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans53->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans53->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(strcmp(lpTSCall1Ans53->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                    {
                        strcpy(v_error_code, lpTSCall1Ans53->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans53->GetString(LDBIZ_ERROR_INFO_STR));
                        iRet=-1;
                        goto END;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans53->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans53->GetString(LDBIZ_ERROR_INFO_STR));
                    v_exgp_cash_id = lpTSCall1Ans53->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
                    v_exgp_frozen_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
                    v_exgp_unfroz_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
                    v_exgp_comm_frozen_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
                    v_exgp_comm_unfroz_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
                    v_exgp_comm_capt_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
                    v_exgp_comm_releas_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
                    v_exgp_trade_frozen_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
                    v_exgp_trade_unfroz_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
                    v_exgp_trade_capt_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
                    v_exgp_trade_releas_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
                    v_exgp_strike_capt_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
                    v_exgp_strike_releas_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
                    v_exgp_cash_update_times = lpTSCall1Ans53->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
                    v_exgp_posi_id = lpTSCall1Ans53->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
                    v_exgp_frozen_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
                    v_exgp_unfroz_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
                    v_exgp_comm_frozen_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
                    v_exgp_comm_unfroz_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
                    v_exgp_comm_capt_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
                    v_exgp_comm_releas_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
                    v_exgp_trade_frozen_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
                    v_exgp_trade_unfroz_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
                    v_exgp_trade_capt_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
                    v_exgp_trade_releas_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
                    v_exgp_strike_capt_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
                    v_exgp_strike_releas_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
                    v_exgp_strike_frozen_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
                    v_exgp_strike_unfroz_qty = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
                    v_exgp_realize_pandl = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
                    v_exgp_cost_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
                    v_exgp_intrst_cost_amt = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
                    v_exgp_intrst_pandl = lpTSCall1Ans53->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
                    v_exgp_posi_update_times = lpTSCall1Ans53->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
                    v_asac_cash_id = lpTSCall1Ans53->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
                    v_asac_frozen_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
                    v_asac_unfroz_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
                    v_asac_comm_frozen_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
                    v_asac_comm_unfroz_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
                    v_asac_comm_capt_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
                    v_asac_comm_releas_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
                    v_asac_trade_frozen_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
                    v_asac_trade_unfroz_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
                    v_asac_trade_capt_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
                    v_asac_trade_releas_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
                    v_asac_strike_capt_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
                    v_asac_strike_releas_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
                    v_asac_cash_update_times = lpTSCall1Ans53->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
                    v_asac_posi_id = lpTSCall1Ans53->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
                    v_asac_frozen_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
                    v_asac_unfroz_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
                    v_asac_comm_frozen_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
                    v_asac_comm_unfroz_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
                    v_asac_comm_capt_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
                    v_asac_comm_releas_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
                    v_asac_trade_frozen_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
                    v_asac_trade_unfroz_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
                    v_asac_trade_capt_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
                    v_asac_trade_releas_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
                    v_asac_strike_capt_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
                    v_asac_strike_releas_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
                    v_asac_strike_frozen_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
                    v_asac_strike_unfroz_qty = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
                    v_asac_realize_pandl = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
                    v_asac_cost_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
                    v_asac_intrst_cost_amt = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
                    v_asac_intrst_pandl = lpTSCall1Ans53->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
                    v_asac_posi_update_times = lpTSCall1Ans53->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


                    // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
                    lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
                    lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
                    glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


                    // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
                    lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
                    lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
                    lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
                    glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


                    // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
                    lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
                    lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
                    glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


                    // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
                    lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
                    lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
                    lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
                    glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

                  // end if;
                  }

                // end if;
                }

                //调用过程[事务_交易证券_交易_更新改单状态]
                //组织事务请求
                if(lpTSCall1Ans54)
                {
                  lpTSCall1Ans54->FreeMsg();
                  lpTSCall1Ans54=NULL;
                }
                lpTSCall1Req54=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.61", 0);
                lpTSCall1Req54->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req54->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req54->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req54->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req54->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req54->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req54->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req54->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req54->SetInt32(LDBIZ_MODI_ORDER_DATE_INT,v_modi_order_date);
                lpTSCall1Req54->SetInt64(LDBIZ_MODI_ORDER_ID_INT64,v_modi_order_id);
                lpTSCall1Req54->SetString(LDBIZ_MODI_ORDER_STATUS_STR,v_modi_order_status);
                lpTSCall1Req54->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
                lpTSCall1Req54->SetInt64(LDBIZ_NEW_ORDER_ID_INT64,v_new_order_id);
                glpTSSubcallSerives->SubCall(lpTSCall1Req54, &lpTSCall1Ans54, 5000);
                if(!lpTSCall1Ans54)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.61]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans54->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans54->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans54->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans54->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans54->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans54->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans54->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans54->GetString(LDBIZ_ERROR_INFO_STR));

            }
            // else
            else
            {


                // set @改单状态# = 《改单状态-失败》;
                strcpy(v_modi_order_status,"4");

                // set @新订单序号# = 0;
                v_new_order_id = 0;

                // set @备注信息# = "重算后的订单数量非法";
                strcpy(v_remark_info,"重算后的订单数量非法");
                //调用过程[事务_交易证券_交易_更新改单状态]
                //组织事务请求
                if(lpTSCall1Ans55)
                {
                  lpTSCall1Ans55->FreeMsg();
                  lpTSCall1Ans55=NULL;
                }
                lpTSCall1Req55=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.61", 0);
                lpTSCall1Req55->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req55->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req55->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req55->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req55->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req55->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req55->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req55->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req55->SetInt32(LDBIZ_MODI_ORDER_DATE_INT,v_modi_order_date);
                lpTSCall1Req55->SetInt64(LDBIZ_MODI_ORDER_ID_INT64,v_modi_order_id);
                lpTSCall1Req55->SetString(LDBIZ_MODI_ORDER_STATUS_STR,v_modi_order_status);
                lpTSCall1Req55->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
                lpTSCall1Req55->SetInt64(LDBIZ_NEW_ORDER_ID_INT64,v_new_order_id);
                glpTSSubcallSerives->SubCall(lpTSCall1Req55, &lpTSCall1Ans55, 5000);
                if(!lpTSCall1Ans55)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.61]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans55->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans55->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans55->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans55->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans55->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans55->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans55->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans55->GetString(LDBIZ_ERROR_INFO_STR));

                //[报错返回][715][@订单数量//]
            // end if;
            }

        // end if;
        }

    }
    // else
    else
    {

        //调用过程[事务_交易证券_交易_更新获取改单信息]
        //组织事务请求
        if(lpTSCall1Ans56)
        {
          lpTSCall1Ans56->FreeMsg();
          lpTSCall1Ans56=NULL;
        }
        lpTSCall1Req56=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.62", 0);
        lpTSCall1Req56->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req56->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req56->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req56->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req56->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req56->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req56->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req56->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req56->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpTSCall1Req56->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        glpTSSubcallSerives->SubCall(lpTSCall1Req56, &lpTSCall1Ans56, 5000);
        if(!lpTSCall1Ans56)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.62]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans56->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans56->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans56->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans56->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans56->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans56->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans56->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans56->GetString(LDBIZ_ERROR_INFO_STR));
        v_modi_order_id = lpTSCall1Ans56->GetInt64(LDBIZ_MODI_ORDER_ID_INT64);
        v_modi_order_date = lpTSCall1Ans56->GetInt32(LDBIZ_MODI_ORDER_DATE_INT);
        v_modi_order_time = lpTSCall1Ans56->GetInt32(LDBIZ_MODI_ORDER_TIME_INT);
        v_modi_batch_no = lpTSCall1Ans56->GetInt32(LDBIZ_MODI_BATCH_NO_INT);
        v_modi_order_price = lpTSCall1Ans56->GetDouble(LDBIZ_MODI_ORDER_PRICE_FLOAT);
        v_modi_order_qty = lpTSCall1Ans56->GetDouble(LDBIZ_MODI_ORDER_QTY_FLOAT);
        v_modi_price_type = lpTSCall1Ans56->GetInt32(LDBIZ_MODI_PRICE_TYPE_INT);
        v_exch_no = lpTSCall1Ans56->GetInt32(LDBIZ_EXCH_NO_INT);
        v_stock_code_no = lpTSCall1Ans56->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        strcpy(v_stock_code, lpTSCall1Ans56->GetString(LDBIZ_STOCK_CODE_STR));
        strcpy(v_crncy_type, lpTSCall1Ans56->GetString(LDBIZ_CRNCY_TYPE_STR));
        strcpy(v_exch_crncy_type, lpTSCall1Ans56->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
        strcpy(v_order_oper_way, lpTSCall1Ans56->GetString(LDBIZ_ORDER_OPER_WAY_STR));
        v_busi_opor_no = lpTSCall1Ans56->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);


        // if @改单序号# <> 0 then
        if (v_modi_order_id != 0)
        {

            // set @改单状态# = 《改单状态-失败》;
            strcpy(v_modi_order_status,"4");

            // set @新订单序号# = 0;
            v_new_order_id = 0;

            // set @备注信息# = "撤单失败";
            strcpy(v_remark_info,"撤单失败");
            //调用过程[事务_交易证券_交易_更新改单状态]
            //组织事务请求
            if(lpTSCall1Ans57)
            {
              lpTSCall1Ans57->FreeMsg();
              lpTSCall1Ans57=NULL;
            }
            lpTSCall1Req57=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.61", 0);
            lpTSCall1Req57->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req57->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req57->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req57->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req57->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req57->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req57->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req57->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req57->SetInt32(LDBIZ_MODI_ORDER_DATE_INT,v_modi_order_date);
            lpTSCall1Req57->SetInt64(LDBIZ_MODI_ORDER_ID_INT64,v_modi_order_id);
            lpTSCall1Req57->SetString(LDBIZ_MODI_ORDER_STATUS_STR,v_modi_order_status);
            lpTSCall1Req57->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
            lpTSCall1Req57->SetInt64(LDBIZ_NEW_ORDER_ID_INT64,v_new_order_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req57, &lpTSCall1Ans57, 5000);
            if(!lpTSCall1Ans57)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.61]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans57->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans57->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans57->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans57->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans57->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans57->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans57->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans57->GetString(LDBIZ_ERROR_INFO_STR));

        // end if;
        }

    // end if;
    }


END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans58)
        {
          lpTSCall1Ans58->FreeMsg();
          lpTSCall1Ans58=NULL;
        }
        lpTSCall1Req58=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req58->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req58->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req58->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req58->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req58->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req58->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req58->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req58->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req58->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req58->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req58, &lpTSCall1Ans58, 5000);
        if (lpTSCall1Ans58)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans58->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans58->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans58->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans58->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans58->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
    lpOutBizMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpOutBizMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpOutBizMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpOutBizMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpOutBizMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpOutBizMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpOutBizMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpOutBizMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpOutBizMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpOutBizMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpOutBizMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpOutBizMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpOutBizMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpOutBizMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpOutBizMsg->SetString(LDBIZ_WTDRAW_STATUS_STR,v_wtdraw_status);
    lpOutBizMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpOutBizMsg->SetString(LDBIZ_RSP_STATUS_STR,v_rsp_status);
    lpOutBizMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    if(lpTSCall1Ans3)
        lpTSCall1Ans3->FreeMsg();
    if(lpTSCall1Ans4)
        lpTSCall1Ans4->FreeMsg();
    if(lpTSCall1Ans5)
        lpTSCall1Ans5->FreeMsg();
    if(lpTSCall1Ans6)
        lpTSCall1Ans6->FreeMsg();
    if(lpTSCall1Ans7)
        lpTSCall1Ans7->FreeMsg();
    if(lpTSCall1Ans8)
        lpTSCall1Ans8->FreeMsg();
    if(lpTSCall1Ans9)
        lpTSCall1Ans9->FreeMsg();
    if(lpTSCall1Ans10)
        lpTSCall1Ans10->FreeMsg();
    if(lpTSCall1Ans11)
        lpTSCall1Ans11->FreeMsg();
    if(lpTSCall1Ans12)
        lpTSCall1Ans12->FreeMsg();
    if(lpTSCall1Ans13)
        lpTSCall1Ans13->FreeMsg();
    if(lpTSCall1Ans14)
        lpTSCall1Ans14->FreeMsg();
    if(lpTSCall1Ans15)
        lpTSCall1Ans15->FreeMsg();
    if(lpTSCall1Ans16)
        lpTSCall1Ans16->FreeMsg();
    if(lpTSCall1Ans17)
        lpTSCall1Ans17->FreeMsg();
    if(lpTSCall1Ans18)
        lpTSCall1Ans18->FreeMsg();
    if(lpTSCall1Ans19)
        lpTSCall1Ans19->FreeMsg();
    if(lpTSCall1Ans20)
        lpTSCall1Ans20->FreeMsg();
    if(lpTSCall1Ans21)
        lpTSCall1Ans21->FreeMsg();
    if(lpTSCall1Ans22)
        lpTSCall1Ans22->FreeMsg();
    if(lpTSCall1Ans23)
        lpTSCall1Ans23->FreeMsg();
    if(lpTSCall1Ans24)
        lpTSCall1Ans24->FreeMsg();
    if(lpTSCall1Ans25)
        lpTSCall1Ans25->FreeMsg();
    if(lpTSCall1Ans26)
        lpTSCall1Ans26->FreeMsg();
    if(lpTSCall1Ans27)
        lpTSCall1Ans27->FreeMsg();
    if(lpTSCall1Ans28)
        lpTSCall1Ans28->FreeMsg();
    if(lpTSCall1Ans29)
        lpTSCall1Ans29->FreeMsg();
    if(lpTSCall1Ans30)
        lpTSCall1Ans30->FreeMsg();
    if(lpTSCall1Ans31)
        lpTSCall1Ans31->FreeMsg();
    if(lpTSCall1Ans32)
        lpTSCall1Ans32->FreeMsg();
    if(lpTSCall1Ans33)
        lpTSCall1Ans33->FreeMsg();
    if(lpTSCall1Ans34)
        lpTSCall1Ans34->FreeMsg();
    if(lpTSCall1Ans35)
        lpTSCall1Ans35->FreeMsg();
    if(lpTSCall1Ans36)
        lpTSCall1Ans36->FreeMsg();
    if(lpTSCall1Ans37)
        lpTSCall1Ans37->FreeMsg();
    if(lpTSCall1Ans38)
        lpTSCall1Ans38->FreeMsg();
    if(lpTSCall1Ans39)
        lpTSCall1Ans39->FreeMsg();
    if(lpTSCall1Ans40)
        lpTSCall1Ans40->FreeMsg();
    if(lpTSCall1Ans41)
        lpTSCall1Ans41->FreeMsg();
    if(lpTSCall1Ans42)
        lpTSCall1Ans42->FreeMsg();
    if(lpTSCall1Ans43)
        lpTSCall1Ans43->FreeMsg();
    if(lpTSCall1Ans44)
        lpTSCall1Ans44->FreeMsg();
    if(lpTSCall1Ans45)
        lpTSCall1Ans45->FreeMsg();
    if(lpTSCall1Ans46)
        lpTSCall1Ans46->FreeMsg();
    if(lpTSCall1Ans47)
        lpTSCall1Ans47->FreeMsg();
    if(lpTSCall1Ans48)
        lpTSCall1Ans48->FreeMsg();
    if(lpTSCall1Ans49)
        lpTSCall1Ans49->FreeMsg();
    if(lpTSCall1Ans50)
        lpTSCall1Ans50->FreeMsg();
    if(lpTSCall1Ans51)
        lpTSCall1Ans51->FreeMsg();
    if(lpTSCall1Ans52)
        lpTSCall1Ans52->FreeMsg();
    if(lpTSCall1Ans53)
        lpTSCall1Ans53->FreeMsg();
    if(lpTSCall1Ans54)
        lpTSCall1Ans54->FreeMsg();
    if(lpTSCall1Ans55)
        lpTSCall1Ans55->FreeMsg();
    if(lpTSCall1Ans56)
        lpTSCall1Ans56->FreeMsg();
    if(lpTSCall1Ans57)
        lpTSCall1Ans57->FreeMsg();
    if(lpTSCall1Ans58)
        lpTSCall1Ans58->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_处理成交回报
int LD_CALL_MODE fnFunc2(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    char v_stock_acco[17];
    char v_stock_code[7];
    int v_report_date;
    char v_report_no[33];
    int v_strike_date;
    int v_strike_time;
    char v_strike_no[65];
    int v_order_dir;
    double v_strike_price;
    double v_strike_qty;
    double v_strike_amt;
    char v_rsp_info[256];
    int v_strike_deal_type;
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int64 v_order_id;
    int v_init_date;
    char v_co_busi_config_str[65];
    double v_tmp_strike_amt;
    double v_tmp_strike_qty;
    double v_tmp_strike_price;
    int v_mach_time;
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    int v_asset_acco_no;
    char v_original_stock_acco[17];
    int v_stock_acco_no;
    char v_original_stock_code[7];
    int v_stock_code_no;
    int v_stock_type;
    int v_asset_type;
    int64 v_comm_id;
    int v_order_date;
    int v_order_time;
    int v_order_batch_no;
    double v_order_price;
    double v_order_qty;
    int v_original_order_dir;
    double v_order_frozen_amt;
    char v_order_status[3];
    int v_price_type;
    int v_busi_opor_no;
    char v_order_oper_way[3];
    int64 v_rsp_id;
    int v_exter_comm_flag;
    int64 v_external_no;
    char v_combo_code[33];
    int64 v_combo_posi_id;
    int64 v_strategy_id;
    char v_contra_no[33];
    int v_asset_acco_type;
    int v_exist_debt_flag;
    char v_sys_config_str[65];
    char v_crncy_type[4];
    char v_exch_crncy_type[4];
    double v_buy_ref_rate;
    double v_sell_ref_rate;
    int v_capit_reback_days;
    int v_posi_reback_days;
    int v_trade_code_no;
    int v_target_code_no;
    int v_intrst_days;
    int v_net_price_flag;
    double v_bond_accr_intrst;
    int v_bond_rate_type;
    double v_par_value;
    double v_impawn_ratio;
    int v_repo_days;
    int v_repo_cale_days;
    int v_repo_back_date;
    int v_bond_qty_unit_set;
    int v_apply_date;
    double v_exgp_cost_amt;
    double v_exgp_intrst_cost_amt;
    double v_exgp_curr_qty;
    double v_asac_cost_amt;
    double v_asac_intrst_cost_amt;
    double v_asac_curr_qty;
    double v_exgp_avail_amt;
    double v_asac_avail_amt;
    double v_asac_T_hk_buy_total_amt;
    double v_asac_T_hk_sell_total_amt;
    double v_asac_T1_hk_buy_total_amt;
    double v_asac_T1_hk_sell_total_amt;
    double v_exgp_T_hk_buy_total_amt;
    double v_exgp_T_hk_sell_total_amt;
    double v_exgp_T1_hk_buy_total_amt;
    double v_exgp_T1_hk_sell_total_amt;
    double v_exgp_avail_qty;
    double v_exgp_target_code_avail_qty;
    double v_exgp_trade_code_avail_qty;
    double v_asac_avail_qty;
    double v_asac_target_code_avail_qty;
    double v_asac_trade_code_avail_qty;
    double v_exgp_loan_sell_amt;
    double v_asac_loan_sell_amt;
    double v_exgp_debt_loan_sell_strike_qty;
    double v_exgp_debt_fina_buy_strike_amt;
    int v_record_count;
    int v_fina_return_type;
    int v_sell_auto_back_debt;
    double v_total_strike_amt;
    double v_total_strike_qty;
    int64 v_strike_id;
    int v_report_time;
    int v_comm_date;
    int v_comm_batch_no;
    int v_comm_executor;
    char v_target_code[7];
    double v_order_frozen_qty;
    double v_strike_bond_accr_intrst;
    double v_wtdraw_qty;
    int v_cost_calc_type;
    int v_update_times;
    double v_strike_occur_amt;
    double v_strike_occur_qty;
    double v_trade_occur_amt;
    double v_trade_occur_qty;
    int v_open_posi_date;
    char v_detail_posi_id_str[1025];
    char v_stock_code_no_str[4097];
    double v_curr_strike_amt;
    double v_curr_strike_qty;
    int v_tmp_update_times;
    double v_tmp_all_fee;
    double v_tmp_trade_commis;
    double v_tmp_stamp_tax;
    double v_tmp_trans_fee;
    double v_tmp_brkage_fee;
    double v_tmp_SEC_charges;
    double v_tmp_other_fee;
    double v_tmp_other_commis;
    double v_tmp_trade_cost_fee;
    double v_tmp_trade_system_use_fee;
    double v_tmp_trade_tax;
    double v_tmp_stock_settle_fee;
    int v_T0_opor_fee_set_flag;
    int64 v_row_id;
    double v_curr_amt;
    double v_frozen_amt;
    double v_opor_warn_tshold;
    double v_opor_stop_tshold;
    int v_order_limit_time;
    double v_per_secu_posi_ratio;
    int v_posi_limit_time;
    double v_order_ctrl_qty;
    double v_order_ctrl_amt;
    double v_stock_warn_ratio;
    double v_stock_stop_ratio;
    double v_stock_warn_amt;
    double v_stock_stop_amt;
    int v_trig_oper_type;
    int v_open_close_permission;
    int v_risk_oper;
    int v_fee_calc_type;
    int v_permit_margin_trade;
    double v_buy_fee_ratio;
    double v_sell_fee_ratio;
    double v_buy_min_fee;
    double v_sell_min_fee;
    char v_remark_info[256];
    double v_all_fee_for_tmp;
    double v_all_fee;
    double v_trade_commis;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    int v_debt_type;
    char v_exgp_detail_posi_id_str[1025];
    char v_asac_detail_posi_id_str[1025];
    char v_asac_stock_code_no_str[4097];
    double v_curr_strike_price;
    int v_record_valid_flag;
    char v_wtdraw_status[3];
    int64 v_sum_order_row_id;
    int v_sum_order_opor_no;
    int v_sum_order_co_no;
    int v_sum_order_pd_no;
    int v_sum_order_exch_group_no;
    int v_sum_order_asset_acco_no;
    int v_sum_order_pass_no;
    char v_sum_order_exch_crncy_type[4];
    int v_sum_order_stock_code_no;
    int v_sum_order_trade_code_no;
    int v_sum_order_target_code_no;
    int64 v_sum_order_external_no;
    int v_sum_order_date;
    int v_sum_order_batch_no;
    int v_sum_order_dir;
    int v_sum_order_price_type;
    double v_sum_order_price;
    double v_sum_order_qty;
    char v_order_sum_status[3];
    double v_sum_order_wtdraw_qty;
    double v_sum_order_waste_qty;
    double v_sum_order_strike_amt;
    double v_sum_order_strike_qty;
    double v_sum_order_strike_aver_price;
    int v_sum_order_net_price_flag;
    double v_sum_order_bond_accr_intrst;
    int v_sum_order_bond_rate_type;
    double v_sum_order_par_value;
    double v_sum_order_impawn_ratio;
    char v_sum_order_oper_way[3];
    int v_sum_order_update_times;
    int64 v_sum_strike_row_id;
    int v_sum_strike_opor_no;
    int v_sum_strike_co_no;
    int v_sum_strike_pd_no;
    int v_sum_strike_exch_group_no;
    int v_sum_strike_asset_acco_no;
    int v_sum_strike_pass_no;
    char v_sum_strike_out_acco[33];
    int v_sum_strike_stock_acco_no;
    int v_sum_strike_stock_code_no;
    int64 v_sum_strike_comm_id;
    int v_sum_strike_report_date;
    char v_sum_strike_report_no[33];
    int v_sum_strike_order_date;
    int64 v_sum_strike_order_id;
    int v_sum_strike_order_dir;
    double v_sum_strike_order_price;
    double v_sum_strike_order_qty;
    double v_sum_strike_strike_qty;
    double v_sum_strike_strike_amt;
    double v_sum_strike_all_fee;
    double v_sum_strike_stamp_tax;
    double v_sum_strike_trans_fee;
    double v_sum_strike_brkage_fee;
    double v_sum_strike_SEC_charges;
    double v_sum_strike_other_fee;
    double v_sum_strike_trade_commis;
    double v_sum_strike_other_commis;
    double v_sum_trade_tax;
    double v_sum_trade_cost_fee;
    double v_sum_trade_system_use_fee;
    double v_sum_stock_settle_fee;
    int v_sum_strike_net_price_flag;
    double v_sum_strike_bond_accr_intrst;
    int v_sum_strike_bond_rate_type;
    char v_sum_strike_order_oper_way[3];
    int v_sum_strike_exter_comm_flag;
    int v_sum_strike_update_times;
    int v_sum_strike_order_batch_no;
    int64 v_sum_external_no;
    int v_comm_time;
    int v_comm_opor;
    int v_comm_dir;
    double v_comm_limit_price;
    double v_limit_actual_price;
    double v_comm_qty;
    double v_comm_amt;
    double v_comm_cancel_qty;
    double v_comm_frozen_amt;
    double v_comm_frozen_qty;
    char v_strike_status[3];
    char v_comm_status[3];
    int v_comm_begin_date;
    int v_comm_end_date;
    int v_comm_begin_time;
    int v_comm_end_time;
    int v_comm_comple_date;
    int v_comm_comple_time;
    int v_comm_appr_date;
    int v_comm_appr_time;
    char v_comm_appr_status[3];
    int v_comm_appr_oper;
    char v_comm_appr_remark[256];
    int64 v_basket_id;
    char v_comm_oper_way[3];
    int v_comm_comple_flag;
    double v_strategy_capt_qty;
    double v_strategy_order_qty;
    char v_comm_remark_info[1025];
    int v_disp_opor;
    int v_disp_status;
    int v_read_flag;
    int64 v_sum_comm_row_id;
    int v_sum_comm_co_no;
    int v_sum_comm_pd_no;
    int v_sum_comm_exch_group_no;
    int v_sum_comm_asset_acco_no;
    int v_sum_comm_pass_no;
    char v_sum_comm_out_acco[33];
    char v_sum_comm_exch_crncy_type[4];
    int v_sum_comm_stock_code_no;
    int v_sum_comm_date;
    int v_sum_comm_time;
    int v_sum_comm_batch_no;
    int v_sum_comm_opor;
    int v_sum_comm_executor;
    int v_sum_comm_dir;
    double v_sum_comm_limit_price;
    double v_sum_comm_qty;
    double v_sum_comm_amt;
    double v_sum_comm_order_qty;
    double v_sum_comm_cancel_qty;
    double v_sum_comm_await_cancel_qty;
    double v_sum_comm_strike_amt;
    double v_sum_comm_strike_qty;
    char v_sum_comm_strike_status[3];
    char v_comm_sum_status[3];
    int v_sum_comm_begin_date;
    int v_sum_comm_end_date;
    int v_sum_comm_begin_time;
    int v_sum_comm_end_time;
    int v_sum_comm_comple_date;
    int v_sum_comm_comple_time;
    int v_sum_comm_max_comm_comple_date;
    int v_sum_comm_max_comm_comple_time;
    int v_sum_comm_appr_date;
    int v_sum_comm_appr_time;
    double v_sum_comm_appr_qty;
    char v_comm_sum_approve_status[3];
    int64 v_sum_comm_basket_id;
    int v_sum_comm_net_price_flag;
    double v_sum_comm_bond_accr_intrst;
    int v_sum_comm_bond_rate_type;
    char v_sum_comm_oper_way[3];
    int v_sum_comm_exter_comm_flag;
    double v_sum_buy_order_qty;
    double v_sum_sell_order_qty;
    double v_sum_buy_comm_qty;
    double v_sum_sell_comm_qty;
    double v_sum_buy_strike_qty;
    double v_sum_sell_strike_qty;
    double v_sum_buy_strike_amt;
    double v_sum_sell_strike_amt;
    double v_sum_buy_comm_amt;
    double v_sum_sell_comm_amt;
    char v_sum_comm_remark_info[256];
    int v_sum_comm_update_times;
    char v_acco_concat_info[4097];
    double v_source_stock_qty;
    double v_single_limit_qty;
    double v_assigned_qty;
    double v_trade_releas_qty;
    double v_trade_capt_qty;
    double v_strike_releas_qty;
    double v_strike_capt_qty;
    double v_over_night_pandl;
    double v_sum_realize_pandl;
    double v_total_open_posi_fee;
    double v_total_close_posi_fee;
    double v_out_order_releas_qty;
    double v_out_order_capt_qty;
    double v_out_strike_releas_qty;
    double v_out_strike_capt_qty;
    double v_buy_avail_qty;
    double v_sell_avail_qty;
    double v_posi_qty;
    double v_today_trade_fee;
    double v_today_pandl;
    double v_diff_qty;
    double v_over_night_trade_buy_qty;
    double v_over_night_trade_sell_qty;
    double v_over_night_strike_sell_qty;
    double v_over_night_sumtrd_sell_qty;
    double v_over_night_sumstk_sell_qty;
    double v_trade_amt;
    double v_trade_qty;
    double v_realize_pandl;
    double v_yield_rate;
    double v_avail_amt;
    double v_total_long_curr_qty;
    double v_total_short_curr_qty;
    double v_total_long_open_posi_value;
    double v_total_short_open_posi_value;
    double v_total_long_open_posi_fee;
    double v_total_short_open_posi_fee;
    double v_total_long_close_posi_value;
    double v_total_short_close_posi_value;
    double v_total_long_close_posi_qty;
    double v_total_short_close_posi_qty;
    double v_total_long_close_posi_fee;
    double v_total_short_close_posi_fee;
    double v_total_realize_pandl;
    double v_long_curr_qty;
    double v_short_curr_qty;
    double v_long_open_posi_value;
    double v_short_open_posi_value;
    double v_long_open_posi_fee;
    double v_short_open_posi_fee;
    double v_long_close_posi_qty;
    double v_short_close_posi_qty;
    double v_long_close_posi_value;
    double v_short_close_posi_value;
    double v_long_close_posi_fee;
    double v_short_close_posi_fee;
    int v_open_posi_time;
    double v_curr_qty;
    double v_open_posi_value;
    double v_open_posi_fee;
    double v_cost_price;
    double v_begin_amt;
    double v_unfroz_amt;
    double v_comm_unfroz_amt;
    double v_comm_capt_amt;
    double v_comm_releas_amt;
    double v_trade_frozen_amt;
    double v_trade_unfroz_amt;
    double v_trade_capt_amt;
    double v_trade_releas_amt;
    double v_strike_capt_amt;
    double v_strike_releas_amt;
    int v_lngsht_type;
    double v_open_posi_price;
    double v_close_posi_qty;
    double v_close_posi_market_value;
    double v_close_posi_fee;
    char v_posi_status[3];
    int64 v_exgp_cash_id;
    double v_exgp_frozen_amt;
    double v_exgp_unfroz_amt;
    double v_exgp_comm_frozen_amt;
    double v_exgp_comm_unfroz_amt;
    double v_exgp_comm_capt_amt;
    double v_exgp_comm_releas_amt;
    double v_exgp_trade_frozen_amt;
    double v_exgp_trade_unfroz_amt;
    double v_exgp_trade_capt_amt;
    double v_exgp_trade_releas_amt;
    double v_exgp_strike_capt_amt;
    double v_exgp_strike_releas_amt;
    int v_exgp_cash_update_times;
    int64 v_exgp_posi_id;
    double v_exgp_frozen_qty;
    double v_exgp_unfroz_qty;
    double v_exgp_comm_frozen_qty;
    double v_exgp_comm_unfroz_qty;
    double v_exgp_comm_capt_qty;
    double v_exgp_comm_releas_qty;
    double v_exgp_trade_frozen_qty;
    double v_exgp_trade_unfroz_qty;
    double v_exgp_trade_capt_qty;
    double v_exgp_trade_releas_qty;
    double v_exgp_strike_capt_qty;
    double v_exgp_strike_releas_qty;
    double v_exgp_strike_frozen_qty;
    double v_exgp_strike_unfroz_qty;
    double v_exgp_realize_pandl;
    double v_exgp_intrst_pandl;
    int v_exgp_posi_update_times;
    int64 v_asac_cash_id;
    double v_asac_frozen_amt;
    double v_asac_unfroz_amt;
    double v_asac_comm_frozen_amt;
    double v_asac_comm_unfroz_amt;
    double v_asac_comm_capt_amt;
    double v_asac_comm_releas_amt;
    double v_asac_trade_frozen_amt;
    double v_asac_trade_unfroz_amt;
    double v_asac_trade_capt_amt;
    double v_asac_trade_releas_amt;
    double v_asac_strike_capt_amt;
    double v_asac_strike_releas_amt;
    int v_asac_cash_update_times;
    int64 v_asac_posi_id;
    double v_asac_frozen_qty;
    double v_asac_unfroz_qty;
    double v_asac_comm_frozen_qty;
    double v_asac_comm_unfroz_qty;
    double v_asac_comm_capt_qty;
    double v_asac_comm_releas_qty;
    double v_asac_trade_frozen_qty;
    double v_asac_trade_unfroz_qty;
    double v_asac_trade_capt_qty;
    double v_asac_trade_releas_qty;
    double v_asac_strike_capt_qty;
    double v_asac_strike_releas_qty;
    double v_asac_strike_frozen_qty;
    double v_asac_strike_unfroz_qty;
    double v_asac_realize_pandl;
    double v_asac_intrst_pandl;
    int v_asac_posi_update_times;
    int64 v_exgp_target_posi_id;
    double v_exgp_target_frozen_qty;
    double v_exgp_target_unfroz_qty;
    double v_exgp_target_comm_frozen_qty;
    double v_exgp_target_comm_unfroz_qty;
    double v_exgp_target_comm_capt_qty;
    double v_exgp_target_comm_releas_qty;
    double v_exgp_target_trade_frozen_qty;
    double v_exgp_target_trade_unfroz_qty;
    double v_exgp_target_trade_capt_qty;
    double v_exgp_target_trade_releas_qty;
    double v_exgp_target_strike_capt_qty;
    double v_exgp_target_strike_releas_qty;
    double v_exgp_target_strike_frozen_qty;
    double v_exgp_target_strike_unfroz_qty;
    double v_exgp_target_realize_pandl;
    double v_exgp_target_cost_amt;
    double v_exgp_target_intrst_cost_amt;
    double v_exgp_target_intrst_pandl;
    int v_exgp_target_posi_update_times;
    int64 v_asac_target_posi_id;
    double v_asac_target_frozen_qty;
    double v_asac_target_unfroz_qty;
    double v_asac_target_comm_frozen_qty;
    double v_asac_target_comm_unfroz_qty;
    double v_asac_target_comm_capt_qty;
    double v_asac_target_comm_releas_qty;
    double v_asac_target_trade_frozen_qty;
    double v_asac_target_trade_unfroz_qty;
    double v_asac_target_trade_capt_qty;
    double v_asac_target_trade_releas_qty;
    double v_asac_target_strike_capt_qty;
    double v_asac_target_strike_releas_qty;
    double v_asac_target_strike_frozen_qty;
    double v_asac_target_strike_unfroz_qty;
    double v_asac_target_realize_pandl;
    double v_asac_target_cost_amt;
    double v_asac_target_intrst_cost_amt;
    double v_asac_target_intrst_pandl;
    int v_asac_target_posi_update_times;
    double v_exgp_put_impawn_qty;
    double v_asac_put_impawn_qty;
    int64 v_repo_strike_id;
    double v_exch_rate;
    double v_repo_qty;
    double v_repo_amt;
    double v_repo_rate;
    int v_repo_trade_date;
    int64 v_repo_order_id;
    double v_repo_back_amt;
    double v_repo_back_intrst;
    int v_repo_back_trade_date;
    char v_repo_status[3];
    int64 v_bond_repo_id;
    int v_row_count;
    char v_exch_group_no_rights_str[2049];
    char v_pd_no_rights_str[2049];
    int v_invest_type;
    double v_debt_fina_buy_strike_qty;
    double v_fina_return_strike_qty;
    double v_debt_loan_sell_strike_qty;
    double v_loan_return_strike_qty;
    double v_debt_fina_buy_order_qty;
    double v_fina_return_order_qty;
    double v_debt_loan_sell_order_qty;
    double v_loan_return_order_qty;
    double v_debt_fina_buy_comm_qty;
    double v_fina_return_comm_qty;
    double v_debt_loan_sell_comm_qty;
    double v_loan_return_comm_qty;
    double v_debt_fina_buy_strike_amt;
    double v_fina_return_strike_amt;
    double v_debt_loan_sell_strike_amt;
    double v_loan_return_strike_amt;
    double v_debt_fina_buy_order_amt;
    double v_fina_return_order_amt;
    double v_debt_loan_sell_order_amt;
    double v_loan_return_order_amt;
    double v_debt_fina_buy_comm_amt;
    double v_fina_return_comm_amt;
    double v_debt_loan_sell_comm_amt;
    double v_loan_return_comm_amt;
    double v_debt_strike_fee;
    double v_return_strike_fee;
    double v_debt_interest;
    double v_return_interest_amt;
    double v_strike_fee;
    int v_debt_order_no;
    double v_debt_amt;
    double v_debt_qty;
    double v_debt_fee;
    double v_intrst_base_amt;
    double v_debt_return_amt;
    double v_debt_return_qty;
    int v_debt_status;
    double v_frozen_qty;
    double v_unfroz_qty;
    double v_pre_settle_qty;
    double v_trade_frozen_qty;
    double v_trade_unfroz_qty;
    double v_strike_frozen_qty;
    double v_strike_unfroz_qty;
    double v_cost_amt;
    double v_intrst_cost_amt;
    double v_intrst_pandl;
    double v_combo_copies;
    char v_combo_status[3];
    double v_combo_cost;
    double v_combo_market_value;
    char v_log_error_code[33];
    char v_log_error_info[256];

    IGroup* lpMainMsg=NULL;
    int iRecordCount = 0;
    IGroup* lpMainMsgExgpPosiDebt=NULL;
    IGroup* lpMainMsgAsacPosiDebt=NULL;
    IGroup* lpMainMsgDebt=NULL;
    IGroup* lpMainMsgAsacDebt=NULL;

IFastMessage* lpPubMsg = NULL;
int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    strcpy(v_stock_acco, " ");
    strcpy(v_stock_code, " ");
    v_report_date=0;
    strcpy(v_report_no, " ");
    v_strike_date=0;
    v_strike_time=0;
    strcpy(v_strike_no, " ");
    v_order_dir=0;
    v_strike_price=0;
    v_strike_qty=0;
    v_strike_amt=0;
    strcpy(v_rsp_info, " ");
    v_strike_deal_type=0;
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_order_id=0;
    v_init_date=0;
    strcpy(v_co_busi_config_str, " ");
    v_tmp_strike_amt=0;
    v_tmp_strike_qty=0;
    v_tmp_strike_price=0;
    v_mach_time=0;
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    v_asset_acco_no=0;
    strcpy(v_original_stock_acco, " ");
    v_stock_acco_no=0;
    strcpy(v_original_stock_code, " ");
    v_stock_code_no=0;
    v_stock_type=0;
    v_asset_type=0;
    v_comm_id=0;
    v_order_date=0;
    v_order_time=0;
    v_order_batch_no=0;
    v_order_price=0;
    v_order_qty=0;
    v_original_order_dir=0;
    v_order_frozen_amt=0;
    strcpy(v_order_status, "0");
    v_price_type=0;
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    v_rsp_id=0;
    v_exter_comm_flag=0;
    v_external_no=0;
    strcpy(v_combo_code, " ");
    v_combo_posi_id=0;
    v_strategy_id=0;
    strcpy(v_contra_no, " ");
    v_asset_acco_type=0;
    v_exist_debt_flag=0;
    strcpy(v_sys_config_str, " ");
    strcpy(v_crncy_type, "CNY");
    strcpy(v_exch_crncy_type, "CNY");
    v_buy_ref_rate=0;
    v_sell_ref_rate=0;
    v_capit_reback_days=0;
    v_posi_reback_days=0;
    v_trade_code_no=0;
    v_target_code_no=0;
    v_intrst_days=0;
    v_net_price_flag=0;
    v_bond_accr_intrst=0;
    v_bond_rate_type=0;
    v_par_value=0;
    v_impawn_ratio=0;
    v_repo_days=0;
    v_repo_cale_days=0;
    v_repo_back_date=0;
    v_bond_qty_unit_set=0;
    v_apply_date=0;
    v_exgp_cost_amt=0;
    v_exgp_intrst_cost_amt=0;
    v_exgp_curr_qty=0;
    v_asac_cost_amt=0;
    v_asac_intrst_cost_amt=0;
    v_asac_curr_qty=0;
    v_exgp_avail_amt=0;
    v_asac_avail_amt=0;
    v_asac_T_hk_buy_total_amt=0;
    v_asac_T_hk_sell_total_amt=0;
    v_asac_T1_hk_buy_total_amt=0;
    v_asac_T1_hk_sell_total_amt=0;
    v_exgp_T_hk_buy_total_amt=0;
    v_exgp_T_hk_sell_total_amt=0;
    v_exgp_T1_hk_buy_total_amt=0;
    v_exgp_T1_hk_sell_total_amt=0;
    v_exgp_avail_qty=0;
    v_exgp_target_code_avail_qty=0;
    v_exgp_trade_code_avail_qty=0;
    v_asac_avail_qty=0;
    v_asac_target_code_avail_qty=0;
    v_asac_trade_code_avail_qty=0;
    v_exgp_loan_sell_amt=0;
    v_asac_loan_sell_amt=0;
    v_exgp_debt_loan_sell_strike_qty=0;
    v_exgp_debt_fina_buy_strike_amt=0;
    v_record_count=0;
    v_fina_return_type=0;
    v_sell_auto_back_debt=0;
    v_total_strike_amt=0;
    v_total_strike_qty=0;
    v_strike_id=0;
    v_report_time=0;
    v_comm_date=0;
    v_comm_batch_no=0;
    v_comm_executor=0;
    strcpy(v_target_code, " ");
    v_order_frozen_qty=0;
    v_strike_bond_accr_intrst=0;
    v_wtdraw_qty=0;
    v_cost_calc_type=0;
    v_update_times=1;
    v_strike_occur_amt=0;
    v_strike_occur_qty=0;
    v_trade_occur_amt=0;
    v_trade_occur_qty=0;
    v_open_posi_date=0;
    strcpy(v_detail_posi_id_str, " ");
    strcpy(v_stock_code_no_str, " ");
    v_curr_strike_amt=0;
    v_curr_strike_qty=0;
    v_tmp_update_times=1;
    v_tmp_all_fee=0;
    v_tmp_trade_commis=0;
    v_tmp_stamp_tax=0;
    v_tmp_trans_fee=0;
    v_tmp_brkage_fee=0;
    v_tmp_SEC_charges=0;
    v_tmp_other_fee=0;
    v_tmp_other_commis=0;
    v_tmp_trade_cost_fee=0;
    v_tmp_trade_system_use_fee=0;
    v_tmp_trade_tax=0;
    v_tmp_stock_settle_fee=0;
    v_T0_opor_fee_set_flag=0;
    v_row_id=0;
    v_curr_amt=0;
    v_frozen_amt=0;
    v_opor_warn_tshold=0;
    v_opor_stop_tshold=0;
    v_order_limit_time=0;
    v_per_secu_posi_ratio=0;
    v_posi_limit_time=5;
    v_order_ctrl_qty=0;
    v_order_ctrl_amt=0;
    v_stock_warn_ratio=0;
    v_stock_stop_ratio=0;
    v_stock_warn_amt=0;
    v_stock_stop_amt=0;
    v_trig_oper_type=0;
    v_open_close_permission=0;
    v_risk_oper=0;
    v_fee_calc_type=0;
    v_permit_margin_trade=0;
    v_buy_fee_ratio=0;
    v_sell_fee_ratio=0;
    v_buy_min_fee=0;
    v_sell_min_fee=0;
    strcpy(v_remark_info, " ");
    v_all_fee_for_tmp=0;
    v_all_fee=0;
    v_trade_commis=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_debt_type=0;
    strcpy(v_exgp_detail_posi_id_str, " ");
    strcpy(v_asac_detail_posi_id_str, " ");
    strcpy(v_asac_stock_code_no_str, " ");
    v_curr_strike_price=0;
    v_record_valid_flag=0;
    strcpy(v_wtdraw_status, "0");
    v_sum_order_row_id=0;
    v_sum_order_opor_no=0;
    v_sum_order_co_no=0;
    v_sum_order_pd_no=0;
    v_sum_order_exch_group_no=0;
    v_sum_order_asset_acco_no=0;
    v_sum_order_pass_no=0;
    strcpy(v_sum_order_exch_crncy_type, "CNY");
    v_sum_order_stock_code_no=0;
    v_sum_order_trade_code_no=0;
    v_sum_order_target_code_no=0;
    v_sum_order_external_no=0;
    v_sum_order_date=0;
    v_sum_order_batch_no=0;
    v_sum_order_dir=0;
    v_sum_order_price_type=0;
    v_sum_order_price=0;
    v_sum_order_qty=0;
    strcpy(v_order_sum_status, "0");
    v_sum_order_wtdraw_qty=0;
    v_sum_order_waste_qty=0;
    v_sum_order_strike_amt=0;
    v_sum_order_strike_qty=0;
    v_sum_order_strike_aver_price=0;
    v_sum_order_net_price_flag=0;
    v_sum_order_bond_accr_intrst=0;
    v_sum_order_bond_rate_type=0;
    v_sum_order_par_value=0;
    v_sum_order_impawn_ratio=0;
    strcpy(v_sum_order_oper_way, " ");
    v_sum_order_update_times=1;
    v_sum_strike_row_id=0;
    v_sum_strike_opor_no=0;
    v_sum_strike_co_no=0;
    v_sum_strike_pd_no=0;
    v_sum_strike_exch_group_no=0;
    v_sum_strike_asset_acco_no=0;
    v_sum_strike_pass_no=0;
    strcpy(v_sum_strike_out_acco, " ");
    v_sum_strike_stock_acco_no=0;
    v_sum_strike_stock_code_no=0;
    v_sum_strike_comm_id=0;
    v_sum_strike_report_date=0;
    strcpy(v_sum_strike_report_no, " ");
    v_sum_strike_order_date=0;
    v_sum_strike_order_id=0;
    v_sum_strike_order_dir=0;
    v_sum_strike_order_price=0;
    v_sum_strike_order_qty=0;
    v_sum_strike_strike_qty=0;
    v_sum_strike_strike_amt=0;
    v_sum_strike_all_fee=0;
    v_sum_strike_stamp_tax=0;
    v_sum_strike_trans_fee=0;
    v_sum_strike_brkage_fee=0;
    v_sum_strike_SEC_charges=0;
    v_sum_strike_other_fee=0;
    v_sum_strike_trade_commis=0;
    v_sum_strike_other_commis=0;
    v_sum_trade_tax=0;
    v_sum_trade_cost_fee=0;
    v_sum_trade_system_use_fee=0;
    v_sum_stock_settle_fee=0;
    v_sum_strike_net_price_flag=0;
    v_sum_strike_bond_accr_intrst=0;
    v_sum_strike_bond_rate_type=0;
    strcpy(v_sum_strike_order_oper_way, " ");
    v_sum_strike_exter_comm_flag=0;
    v_sum_strike_update_times=1;
    v_sum_strike_order_batch_no=0;
    v_sum_external_no=0;
    v_comm_time=0;
    v_comm_opor=0;
    v_comm_dir=0;
    v_comm_limit_price=0;
    v_limit_actual_price=0;
    v_comm_qty=0;
    v_comm_amt=0;
    v_comm_cancel_qty=0;
    v_comm_frozen_amt=0;
    v_comm_frozen_qty=0;
    strcpy(v_strike_status, "0");
    strcpy(v_comm_status, "0");
    v_comm_begin_date=0;
    v_comm_end_date=0;
    v_comm_begin_time=0;
    v_comm_end_time=0;
    v_comm_comple_date=0;
    v_comm_comple_time=0;
    v_comm_appr_date=0;
    v_comm_appr_time=0;
    strcpy(v_comm_appr_status, " ");
    v_comm_appr_oper=0;
    strcpy(v_comm_appr_remark, " ");
    v_basket_id=0;
    strcpy(v_comm_oper_way, " ");
    v_comm_comple_flag=0;
    v_strategy_capt_qty=0;
    v_strategy_order_qty=0;
    strcpy(v_comm_remark_info, " ");
    v_disp_opor=0;
    v_disp_status=0;
    v_read_flag=0;
    v_sum_comm_row_id=0;
    v_sum_comm_co_no=0;
    v_sum_comm_pd_no=0;
    v_sum_comm_exch_group_no=0;
    v_sum_comm_asset_acco_no=0;
    v_sum_comm_pass_no=0;
    strcpy(v_sum_comm_out_acco, " ");
    strcpy(v_sum_comm_exch_crncy_type, "CNY");
    v_sum_comm_stock_code_no=0;
    v_sum_comm_date=0;
    v_sum_comm_time=0;
    v_sum_comm_batch_no=0;
    v_sum_comm_opor=0;
    v_sum_comm_executor=0;
    v_sum_comm_dir=0;
    v_sum_comm_limit_price=0;
    v_sum_comm_qty=0;
    v_sum_comm_amt=0;
    v_sum_comm_order_qty=0;
    v_sum_comm_cancel_qty=0;
    v_sum_comm_await_cancel_qty=0;
    v_sum_comm_strike_amt=0;
    v_sum_comm_strike_qty=0;
    strcpy(v_sum_comm_strike_status, "0");
    strcpy(v_comm_sum_status, "0");
    v_sum_comm_begin_date=0;
    v_sum_comm_end_date=0;
    v_sum_comm_begin_time=0;
    v_sum_comm_end_time=0;
    v_sum_comm_comple_date=0;
    v_sum_comm_comple_time=0;
    v_sum_comm_max_comm_comple_date=0;
    v_sum_comm_max_comm_comple_time=0;
    v_sum_comm_appr_date=0;
    v_sum_comm_appr_time=0;
    v_sum_comm_appr_qty=0;
    strcpy(v_comm_sum_approve_status, "0");
    v_sum_comm_basket_id=0;
    v_sum_comm_net_price_flag=0;
    v_sum_comm_bond_accr_intrst=0;
    v_sum_comm_bond_rate_type=0;
    strcpy(v_sum_comm_oper_way, " ");
    v_sum_comm_exter_comm_flag=0;
    v_sum_buy_order_qty=0;
    v_sum_sell_order_qty=0;
    v_sum_buy_comm_qty=0;
    v_sum_sell_comm_qty=0;
    v_sum_buy_strike_qty=0;
    v_sum_sell_strike_qty=0;
    v_sum_buy_strike_amt=0;
    v_sum_sell_strike_amt=0;
    v_sum_buy_comm_amt=0;
    v_sum_sell_comm_amt=0;
    strcpy(v_sum_comm_remark_info, " ");
    v_sum_comm_update_times=1;
    strcpy(v_acco_concat_info, " ");
    v_source_stock_qty=0;
    v_single_limit_qty=0;
    v_assigned_qty=0;
    v_trade_releas_qty=0;
    v_trade_capt_qty=0;
    v_strike_releas_qty=0;
    v_strike_capt_qty=0;
    v_over_night_pandl=0;
    v_sum_realize_pandl=0;
    v_total_open_posi_fee=0;
    v_total_close_posi_fee=0;
    v_out_order_releas_qty=0;
    v_out_order_capt_qty=0;
    v_out_strike_releas_qty=0;
    v_out_strike_capt_qty=0;
    v_buy_avail_qty=0;
    v_sell_avail_qty=0;
    v_posi_qty=0;
    v_today_trade_fee=0;
    v_today_pandl=0;
    v_diff_qty=0;
    v_over_night_trade_buy_qty=0;
    v_over_night_trade_sell_qty=0;
    v_over_night_strike_sell_qty=0;
    v_over_night_sumtrd_sell_qty=0;
    v_over_night_sumstk_sell_qty=0;
    v_trade_amt=0;
    v_trade_qty=0;
    v_realize_pandl=0;
    v_yield_rate=0;
    v_avail_amt=0;
    v_total_long_curr_qty=0;
    v_total_short_curr_qty=0;
    v_total_long_open_posi_value=0;
    v_total_short_open_posi_value=0;
    v_total_long_open_posi_fee=0;
    v_total_short_open_posi_fee=0;
    v_total_long_close_posi_value=0;
    v_total_short_close_posi_value=0;
    v_total_long_close_posi_qty=0;
    v_total_short_close_posi_qty=0;
    v_total_long_close_posi_fee=0;
    v_total_short_close_posi_fee=0;
    v_total_realize_pandl=0;
    v_long_curr_qty=0;
    v_short_curr_qty=0;
    v_long_open_posi_value=0;
    v_short_open_posi_value=0;
    v_long_open_posi_fee=0;
    v_short_open_posi_fee=0;
    v_long_close_posi_qty=0;
    v_short_close_posi_qty=0;
    v_long_close_posi_value=0;
    v_short_close_posi_value=0;
    v_long_close_posi_fee=0;
    v_short_close_posi_fee=0;
    v_open_posi_time=0;
    v_curr_qty=0;
    v_open_posi_value=0;
    v_open_posi_fee=0;
    v_cost_price=0;
    v_begin_amt=0;
    v_unfroz_amt=0;
    v_comm_unfroz_amt=0;
    v_comm_capt_amt=0;
    v_comm_releas_amt=0;
    v_trade_frozen_amt=0;
    v_trade_unfroz_amt=0;
    v_trade_capt_amt=0;
    v_trade_releas_amt=0;
    v_strike_capt_amt=0;
    v_strike_releas_amt=0;
    v_lngsht_type=0;
    v_open_posi_price=0;
    v_close_posi_qty=0;
    v_close_posi_market_value=0;
    v_close_posi_fee=0;
    strcpy(v_posi_status, "0");
    v_exgp_cash_id=0;
    v_exgp_frozen_amt=0;
    v_exgp_unfroz_amt=0;
    v_exgp_comm_frozen_amt=0;
    v_exgp_comm_unfroz_amt=0;
    v_exgp_comm_capt_amt=0;
    v_exgp_comm_releas_amt=0;
    v_exgp_trade_frozen_amt=0;
    v_exgp_trade_unfroz_amt=0;
    v_exgp_trade_capt_amt=0;
    v_exgp_trade_releas_amt=0;
    v_exgp_strike_capt_amt=0;
    v_exgp_strike_releas_amt=0;
    v_exgp_cash_update_times=1;
    v_exgp_posi_id=0;
    v_exgp_frozen_qty=0;
    v_exgp_unfroz_qty=0;
    v_exgp_comm_frozen_qty=0;
    v_exgp_comm_unfroz_qty=0;
    v_exgp_comm_capt_qty=0;
    v_exgp_comm_releas_qty=0;
    v_exgp_trade_frozen_qty=0;
    v_exgp_trade_unfroz_qty=0;
    v_exgp_trade_capt_qty=0;
    v_exgp_trade_releas_qty=0;
    v_exgp_strike_capt_qty=0;
    v_exgp_strike_releas_qty=0;
    v_exgp_strike_frozen_qty=0;
    v_exgp_strike_unfroz_qty=0;
    v_exgp_realize_pandl=0;
    v_exgp_intrst_pandl=0;
    v_exgp_posi_update_times=1;
    v_asac_cash_id=0;
    v_asac_frozen_amt=0;
    v_asac_unfroz_amt=0;
    v_asac_comm_frozen_amt=0;
    v_asac_comm_unfroz_amt=0;
    v_asac_comm_capt_amt=0;
    v_asac_comm_releas_amt=0;
    v_asac_trade_frozen_amt=0;
    v_asac_trade_unfroz_amt=0;
    v_asac_trade_capt_amt=0;
    v_asac_trade_releas_amt=0;
    v_asac_strike_capt_amt=0;
    v_asac_strike_releas_amt=0;
    v_asac_cash_update_times=1;
    v_asac_posi_id=0;
    v_asac_frozen_qty=0;
    v_asac_unfroz_qty=0;
    v_asac_comm_frozen_qty=0;
    v_asac_comm_unfroz_qty=0;
    v_asac_comm_capt_qty=0;
    v_asac_comm_releas_qty=0;
    v_asac_trade_frozen_qty=0;
    v_asac_trade_unfroz_qty=0;
    v_asac_trade_capt_qty=0;
    v_asac_trade_releas_qty=0;
    v_asac_strike_capt_qty=0;
    v_asac_strike_releas_qty=0;
    v_asac_strike_frozen_qty=0;
    v_asac_strike_unfroz_qty=0;
    v_asac_realize_pandl=0;
    v_asac_intrst_pandl=0;
    v_asac_posi_update_times=1;
    v_exgp_target_posi_id=0;
    v_exgp_target_frozen_qty=0;
    v_exgp_target_unfroz_qty=0;
    v_exgp_target_comm_frozen_qty=0;
    v_exgp_target_comm_unfroz_qty=0;
    v_exgp_target_comm_capt_qty=0;
    v_exgp_target_comm_releas_qty=0;
    v_exgp_target_trade_frozen_qty=0;
    v_exgp_target_trade_unfroz_qty=0;
    v_exgp_target_trade_capt_qty=0;
    v_exgp_target_trade_releas_qty=0;
    v_exgp_target_strike_capt_qty=0;
    v_exgp_target_strike_releas_qty=0;
    v_exgp_target_strike_frozen_qty=0;
    v_exgp_target_strike_unfroz_qty=0;
    v_exgp_target_realize_pandl=0;
    v_exgp_target_cost_amt=0;
    v_exgp_target_intrst_cost_amt=0;
    v_exgp_target_intrst_pandl=0;
    v_exgp_target_posi_update_times=0;
    v_asac_target_posi_id=0;
    v_asac_target_frozen_qty=0;
    v_asac_target_unfroz_qty=0;
    v_asac_target_comm_frozen_qty=0;
    v_asac_target_comm_unfroz_qty=0;
    v_asac_target_comm_capt_qty=0;
    v_asac_target_comm_releas_qty=0;
    v_asac_target_trade_frozen_qty=0;
    v_asac_target_trade_unfroz_qty=0;
    v_asac_target_trade_capt_qty=0;
    v_asac_target_trade_releas_qty=0;
    v_asac_target_strike_capt_qty=0;
    v_asac_target_strike_releas_qty=0;
    v_asac_target_strike_frozen_qty=0;
    v_asac_target_strike_unfroz_qty=0;
    v_asac_target_realize_pandl=0;
    v_asac_target_cost_amt=0;
    v_asac_target_intrst_cost_amt=0;
    v_asac_target_intrst_pandl=0;
    v_asac_target_posi_update_times=0;
    v_exgp_put_impawn_qty=0;
    v_asac_put_impawn_qty=0;
    v_repo_strike_id=0;
    v_exch_rate=0;
    v_repo_qty=0;
    v_repo_amt=0;
    v_repo_rate=0;
    v_repo_trade_date=0;
    v_repo_order_id=0;
    v_repo_back_amt=0;
    v_repo_back_intrst=0;
    v_repo_back_trade_date=0;
    strcpy(v_repo_status, "0");
    v_bond_repo_id=0;
    v_row_count=-1;
    strcpy(v_exch_group_no_rights_str, " ");
    strcpy(v_pd_no_rights_str, " ");
    v_invest_type=0;
    v_debt_fina_buy_strike_qty=0;
    v_fina_return_strike_qty=0;
    v_debt_loan_sell_strike_qty=0;
    v_loan_return_strike_qty=0;
    v_debt_fina_buy_order_qty=0;
    v_fina_return_order_qty=0;
    v_debt_loan_sell_order_qty=0;
    v_loan_return_order_qty=0;
    v_debt_fina_buy_comm_qty=0;
    v_fina_return_comm_qty=0;
    v_debt_loan_sell_comm_qty=0;
    v_loan_return_comm_qty=0;
    v_debt_fina_buy_strike_amt=0;
    v_fina_return_strike_amt=0;
    v_debt_loan_sell_strike_amt=0;
    v_loan_return_strike_amt=0;
    v_debt_fina_buy_order_amt=0;
    v_fina_return_order_amt=0;
    v_debt_loan_sell_order_amt=0;
    v_loan_return_order_amt=0;
    v_debt_fina_buy_comm_amt=0;
    v_fina_return_comm_amt=0;
    v_debt_loan_sell_comm_amt=0;
    v_loan_return_comm_amt=0;
    v_debt_strike_fee=0;
    v_return_strike_fee=0;
    v_debt_interest=0;
    v_return_interest_amt=0;
    v_strike_fee=0;
    v_debt_order_no=0;
    v_debt_amt=0;
    v_debt_qty=0;
    v_debt_fee=0;
    v_intrst_base_amt=0;
    v_debt_return_amt=0;
    v_debt_return_qty=0;
    v_debt_status=0;
    v_frozen_qty=0;
    v_unfroz_qty=0;
    v_pre_settle_qty=0;
    v_trade_frozen_qty=0;
    v_trade_unfroz_qty=0;
    v_strike_frozen_qty=0;
    v_strike_unfroz_qty=0;
    v_cost_amt=0;
    v_intrst_cost_amt=0;
    v_intrst_pandl=0;
    v_combo_copies=0;
    strcpy(v_combo_status, "0");
    v_combo_cost=0;
    v_combo_market_value=0;
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_pass_no = lpInBizMsg->GetInt32(LDBIZ_PASS_NO_INT);
    strncpy(v_out_acco, lpInBizMsg->GetString(LDBIZ_OUT_ACCO_STR),32);
    v_out_acco[32] = '\0';
    v_exch_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_NO_INT);
    strncpy(v_stock_acco, lpInBizMsg->GetString(LDBIZ_STOCK_ACCO_STR),16);
    v_stock_acco[16] = '\0';
    strncpy(v_stock_code, lpInBizMsg->GetString(LDBIZ_STOCK_CODE_STR),6);
    v_stock_code[6] = '\0';
    v_report_date = lpInBizMsg->GetInt32(LDBIZ_REPORT_DATE_INT);
    strncpy(v_report_no, lpInBizMsg->GetString(LDBIZ_REPORT_NO_STR),32);
    v_report_no[32] = '\0';
    v_strike_date = lpInBizMsg->GetInt32(LDBIZ_STRIKE_DATE_INT);
    v_strike_time = lpInBizMsg->GetInt32(LDBIZ_STRIKE_TIME_INT);
    strncpy(v_strike_no, lpInBizMsg->GetString(LDBIZ_STRIKE_NO_STR),64);
    v_strike_no[64] = '\0';
    v_order_dir = lpInBizMsg->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_strike_price = lpInBizMsg->GetDouble(LDBIZ_STRIKE_PRICE_FLOAT);
    v_strike_qty = lpInBizMsg->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_amt = lpInBizMsg->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    strncpy(v_rsp_info, lpInBizMsg->GetString(LDBIZ_RSP_INFO_STR),255);
    v_rsp_info[255] = '\0';
    v_strike_deal_type = lpInBizMsg->GetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT);

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;
    IFastMessage* lpTSCall1Req3 = NULL;
    IFastMessage* lpTSCall1Ans3 = NULL;
    IFastMessage* lpTSCall1Req4 = NULL;
    IFastMessage* lpTSCall1Ans4 = NULL;
    IFastMessage* lpTSCall1Req5 = NULL;
    IFastMessage* lpTSCall1Ans5 = NULL;
    IFastMessage* lpTSCall1Req6 = NULL;
    IFastMessage* lpTSCall1Ans6 = NULL;
    IFastMessage* lpTSCall1Req7 = NULL;
    IFastMessage* lpTSCall1Ans7 = NULL;
    IFastMessage* lpTSCall1Req8 = NULL;
    IFastMessage* lpTSCall1Ans8 = NULL;
    IFastMessage* lpTSCall1Req9 = NULL;
    IFastMessage* lpTSCall1Ans9 = NULL;
    IFastMessage* lpTSCall1Req10 = NULL;
    IFastMessage* lpTSCall1Ans10 = NULL;
    IFastMessage* lpTSCall1Req11 = NULL;
    IFastMessage* lpTSCall1Ans11 = NULL;
    IFastMessage* lpTSCall1Req12 = NULL;
    IFastMessage* lpTSCall1Ans12 = NULL;
    IFastMessage* lpTSCall1Req13 = NULL;
    IFastMessage* lpTSCall1Ans13 = NULL;
    IFastMessage* lpTSCall1Req14 = NULL;
    IFastMessage* lpTSCall1Ans14 = NULL;
    IFastMessage* lpTSCall1Req15 = NULL;
    IFastMessage* lpTSCall1Ans15 = NULL;
    IFastMessage* lpTSCall1Req16 = NULL;
    IFastMessage* lpTSCall1Ans16 = NULL;
    IFastMessage* lpTSCall1Req17 = NULL;
    IFastMessage* lpTSCall1Ans17 = NULL;
    IFastMessage* lpTSCall1Req18 = NULL;
    IFastMessage* lpTSCall1Ans18 = NULL;
    IFastMessage* lpTSCall1Req19 = NULL;
    IFastMessage* lpTSCall1Ans19 = NULL;
    IFastMessage* lpTSCall1Req20 = NULL;
    IFastMessage* lpTSCall1Ans20 = NULL;
    IFastMessage* lpTSCall1Req21 = NULL;
    IFastMessage* lpTSCall1Ans21 = NULL;
    IFastMessage* lpTSCall1Req22 = NULL;
    IFastMessage* lpTSCall1Ans22 = NULL;
    IFastMessage* lpTSCall1Req23 = NULL;
    IFastMessage* lpTSCall1Ans23 = NULL;
    IFastMessage* lpTSCall1Req24 = NULL;
    IFastMessage* lpTSCall1Ans24 = NULL;
    IFastMessage* lpTSCall1Req25 = NULL;
    IFastMessage* lpTSCall1Ans25 = NULL;
    IFastMessage* lpTSCall1Req26 = NULL;
    IFastMessage* lpTSCall1Ans26 = NULL;
    IFastMessage* lpTSCall1Req27 = NULL;
    IFastMessage* lpTSCall1Ans27 = NULL;
    IFastMessage* lpTSCall1Req28 = NULL;
    IFastMessage* lpTSCall1Ans28 = NULL;
    IFastMessage* lpTSCall1Req29 = NULL;
    IFastMessage* lpTSCall1Ans29 = NULL;
    IFastMessage* lpTSCall1Req30 = NULL;
    IFastMessage* lpTSCall1Ans30 = NULL;
    IFastMessage* lpTSCall1Req31 = NULL;
    IFastMessage* lpTSCall1Ans31 = NULL;
    IFastMessage* lpTSCall1Req32 = NULL;
    IFastMessage* lpTSCall1Ans32 = NULL;
    IFastMessage* lpTSCall1Req33 = NULL;
    IFastMessage* lpTSCall1Ans33 = NULL;
    IFastMessage* lpTSCall1Req34 = NULL;
    IFastMessage* lpTSCall1Ans34 = NULL;
    IFastMessage* lpTSCall1Req35 = NULL;
    IFastMessage* lpTSCall1Ans35 = NULL;
    IFastMessage* lpTSCall1Req36 = NULL;
    IFastMessage* lpTSCall1Ans36 = NULL;
    IFastMessage* lpTSCall1Req37 = NULL;
    IFastMessage* lpTSCall1Ans37 = NULL;
    IFastMessage* lpTSCall1Req38 = NULL;
    IFastMessage* lpTSCall1Ans38 = NULL;
    IFastMessage* lpTSCall1Req39 = NULL;
    IFastMessage* lpTSCall1Ans39 = NULL;
    IFastMessage* lpTSCall1Req40 = NULL;
    IFastMessage* lpTSCall1Ans40 = NULL;
    IFastMessage* lpTSCall1Req41 = NULL;
    IFastMessage* lpTSCall1Ans41 = NULL;
    IFastMessage* lpTSCall1Req42 = NULL;
    IFastMessage* lpTSCall1Ans42 = NULL;
    IFastMessage* lpTSCall1Req43 = NULL;
    IFastMessage* lpTSCall1Ans43 = NULL;
    IFastMessage* lpTSCall1Req44 = NULL;
    IFastMessage* lpTSCall1Ans44 = NULL;
    IFastMessage* lpTSCall1Req45 = NULL;
    IFastMessage* lpTSCall1Ans45 = NULL;
    IFastMessage* lpTSCall1Req46 = NULL;
    IFastMessage* lpTSCall1Ans46 = NULL;
    IFastMessage* lpTSCall1Req47 = NULL;
    IFastMessage* lpTSCall1Ans47 = NULL;
    IFastMessage* lpTSCall1Req48 = NULL;
    IFastMessage* lpTSCall1Ans48 = NULL;

    //调用过程[事务_公共_公共接口_检查系统状态权限身份]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.1", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.1]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));

    //为便于汇总模式与非汇总模式通用，临时_变量用于保存本次成交的金额数量，而变量值为总金额数量

    // set @临时_成交金额# = @成交金额#;
    v_tmp_strike_amt = v_strike_amt;

    // set @临时_成交数量# = @成交数量#;
    v_tmp_strike_qty = v_strike_qty;

    // set @临时_成交价格# = @成交价格#;
    v_tmp_strike_price = v_strike_price;
    //质押操作不在这里处理成交

    // [检查报错返回][@订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》][754][@订单方向#]
    if (v_order_dir == 21 || v_order_dir == 22)
    {
        strcpy(v_error_code, "tdsecuL.5.21.754");
        snprintf(v_error_info, sizeof(v_error_info), "%s%d","订单方向=",v_order_dir);
        iRet = -1;
        goto END;
    }

    //9:25前 的成交不处理。Modify by wjp 20181101
    //调用过程[事务_交易证券_报盘_获取机器时间]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.131", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.131]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
    v_mach_time = lpTSCall1Ans1->GetInt32(LDBIZ_MACH_TIME_INT);


    // if @成交处理方式# = 0 then
    if (v_strike_deal_type == 0)
    {

        // set @成交处理方式# = 《成交处理方式-分笔》;
        v_strike_deal_type = 1;
    // end if;
    }

    //获取原订单信息，

    // set @初始化日期# = @成交日期#;
    v_init_date = v_strike_date;
    //调用过程[事务_交易证券_报盘_检查成交回报获取订单信息]
    //组织事务请求
    if(lpTSCall1Ans2)
    {
      lpTSCall1Ans2->FreeMsg();
      lpTSCall1Ans2=NULL;
    }
    lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.20", 0);
    lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req2->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req2->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req2->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req2->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpTSCall1Req2->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req2->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req2->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpTSCall1Req2->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpTSCall1Req2->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpTSCall1Req2->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpTSCall1Req2->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req2->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpTSCall1Req2->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpTSCall1Req2->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpTSCall1Req2->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
    lpTSCall1Req2->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
    if(!lpTSCall1Ans2)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.20]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans2->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
    v_co_no = lpTSCall1Ans2->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpTSCall1Ans2->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans2->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans2->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    strcpy(v_original_stock_acco, lpTSCall1Ans2->GetString(LDBIZ_ORIGINAL_STOCK_ACCO_STR));
    v_stock_acco_no = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_original_stock_code, lpTSCall1Ans2->GetString(LDBIZ_ORIGINAL_STOCK_CODE_STR));
    v_stock_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans2->GetInt32(LDBIZ_ASSET_TYPE_INT);
    v_comm_id = lpTSCall1Ans2->GetInt64(LDBIZ_COMM_ID_INT64);
    v_order_date = lpTSCall1Ans2->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_time = lpTSCall1Ans2->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_order_id = lpTSCall1Ans2->GetInt64(LDBIZ_ORDER_ID_INT64);
    v_order_batch_no = lpTSCall1Ans2->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    v_order_price = lpTSCall1Ans2->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans2->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    v_original_order_dir = lpTSCall1Ans2->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);
    v_order_frozen_amt = lpTSCall1Ans2->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans2->GetString(LDBIZ_ORDER_STATUS_STR));
    v_price_type = lpTSCall1Ans2->GetInt32(LDBIZ_PRICE_TYPE_INT);
    v_busi_opor_no = lpTSCall1Ans2->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strcpy(v_order_oper_way, lpTSCall1Ans2->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    v_rsp_id = lpTSCall1Ans2->GetInt64(LDBIZ_RSP_ID_INT64);
    v_exter_comm_flag = lpTSCall1Ans2->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_external_no = lpTSCall1Ans2->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
    strcpy(v_combo_code, lpTSCall1Ans2->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans2->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    v_strategy_id = lpTSCall1Ans2->GetInt64(LDBIZ_STRATEGY_ID_INT64);
    strcpy(v_contra_no, lpTSCall1Ans2->GetString(LDBIZ_CONTRA_NO_STR));
    v_asset_acco_type = lpTSCall1Ans2->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    v_exist_debt_flag = lpTSCall1Ans2->GetInt32(LDBIZ_EXIST_DEBT_FLAG_INT);

    //取系统内部的订单方向，而不取报盘给的订单方向，做一层保护

    // set @订单方向# = @原订单方向#;
    v_order_dir = v_original_order_dir;

    // set @证券代码# = @原证券代码#;
    strcpy(v_stock_code,v_original_stock_code);

    // set @股东代码# = @原股东代码#;
    strcpy(v_stock_acco,v_original_stock_acco);
    //调用过程[事务_公共_交易接口_检查交易系统状态权限]
    //组织事务请求
    if(lpTSCall1Ans3)
    {
      lpTSCall1Ans3->FreeMsg();
      lpTSCall1Ans3=NULL;
    }
    lpTSCall1Req3=glpFastMsgFactory->CreateFastMessage("pubT.25.232", 0);
    lpTSCall1Req3->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req3->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req3->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req3->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req3->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req3->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req3->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req3, &lpTSCall1Ans3, 5000);
    if(!lpTSCall1Ans3)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.232]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans3->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
    strcpy(v_co_busi_config_str, lpTSCall1Ans3->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));

    //公共子系统检查，这里需要增加输出
    //调用过程[事务_公共_交易接口_检查成交回报业务控制]
    //组织事务请求
    if(lpTSCall1Ans4)
    {
      lpTSCall1Ans4->FreeMsg();
      lpTSCall1Ans4=NULL;
    }
    lpTSCall1Req4=glpFastMsgFactory->CreateFastMessage("pubT.25.32", 0);
    lpTSCall1Req4->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req4->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req4->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req4->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req4->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req4->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req4->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req4->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req4->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req4, &lpTSCall1Ans4, 5000);
    if(!lpTSCall1Ans4)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.32]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans4->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans4->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_sys_config_str, lpTSCall1Ans4->GetString(LDBIZ_SYS_CONFIG_STR_STR));
    strcpy(v_crncy_type, lpTSCall1Ans4->GetString(LDBIZ_CRNCY_TYPE_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans4->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_buy_ref_rate = lpTSCall1Ans4->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
    v_sell_ref_rate = lpTSCall1Ans4->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
    v_stock_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_capit_reback_days = lpTSCall1Ans4->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
    v_posi_reback_days = lpTSCall1Ans4->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);
    v_trade_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_intrst_days = lpTSCall1Ans4->GetInt32(LDBIZ_INTRST_DAYS_INT);
    v_net_price_flag = lpTSCall1Ans4->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_bond_accr_intrst = lpTSCall1Ans4->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans4->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_par_value = lpTSCall1Ans4->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans4->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_repo_days = lpTSCall1Ans4->GetInt32(LDBIZ_REPO_DAYS_INT);
    v_repo_cale_days = lpTSCall1Ans4->GetInt32(LDBIZ_REPO_CALE_DAYS_INT);
    v_repo_back_date = lpTSCall1Ans4->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
    v_bond_qty_unit_set = lpTSCall1Ans4->GetInt32(LDBIZ_BOND_QTY_UNIT_SET_INT);
    v_apply_date = lpTSCall1Ans4->GetInt32(LDBIZ_APPLY_DATE_INT);


    // [检查报错返回][@申购日期# = @成交日期#][753][@证券代码#]
    if (v_apply_date == v_strike_date)
    {
        strcpy(v_error_code, "tdsecuL.5.21.753");
        snprintf(v_error_info, sizeof(v_error_info), "%s%s","证券代码=",v_stock_code);
        iRet = -1;
        goto END;
    }

    //获取成本，利息等
    //调用过程[事务_产品证券_交易接口_获取成交回报证券持仓成本]
    //组织事务请求
    if(lpTSCall1Ans5)
    {
      lpTSCall1Ans5->FreeMsg();
      lpTSCall1Ans5=NULL;
    }
    lpTSCall1Req5=glpFastMsgFactory->CreateFastMessage("pdsecuT.6.3", 0);
    lpTSCall1Req5->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req5->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req5->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req5->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req5->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req5->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req5->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req5->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req5->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req5->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req5->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req5->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req5->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req5->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    glpTSSubcallSerives->SubCall(lpTSCall1Req5, &lpTSCall1Ans5, 5000);
    if(!lpTSCall1Ans5)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pdsecuT.6.3]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans5->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
    v_exgp_cost_amt = lpTSCall1Ans5->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
    v_exgp_intrst_cost_amt = lpTSCall1Ans5->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
    v_exgp_curr_qty = lpTSCall1Ans5->GetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT);
    v_asac_cost_amt = lpTSCall1Ans5->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
    v_asac_intrst_cost_amt = lpTSCall1Ans5->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
    v_asac_curr_qty = lpTSCall1Ans5->GetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT);


    // if @成交处理方式# = 0 then
    if (v_strike_deal_type == 0)
    {

      // set @成交处理方式# = 《成交处理方式-分笔》;
      v_strike_deal_type = 1;
    // end if;
    }

    //调用过程[事务_产品证券_交易接口_检查账户状态获取可用]
    //组织事务请求
    if(lpTSCall1Ans6)
    {
      lpTSCall1Ans6->FreeMsg();
      lpTSCall1Ans6=NULL;
    }
    lpTSCall1Req6=glpFastMsgFactory->CreateFastMessage("pdsecuT.6.1", 0);
    lpTSCall1Req6->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req6->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req6->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req6->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req6->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req6->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req6->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req6->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req6->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req6->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req6->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req6->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req6->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req6->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
    lpTSCall1Req6->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
    lpTSCall1Req6->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req6->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req6->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpTSCall1Req6->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
    glpTSSubcallSerives->SubCall(lpTSCall1Req6, &lpTSCall1Ans6, 5000);
    if(!lpTSCall1Ans6)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pdsecuT.6.1]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans6->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
    v_stock_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_acco, lpTSCall1Ans6->GetString(LDBIZ_STOCK_ACCO_STR));
    v_exgp_avail_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_AVAIL_AMT_FLOAT);
    v_asac_avail_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_AVAIL_AMT_FLOAT);
    v_asac_T_hk_buy_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_T_HK_BUY_TOTAL_AMT_FLOAT);
    v_asac_T_hk_sell_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_T_HK_SELL_TOTAL_AMT_FLOAT);
    v_asac_T1_hk_buy_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_T1_HK_BUY_TOTAL_AMT_FLOAT);
    v_asac_T1_hk_sell_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_T1_HK_SELL_TOTAL_AMT_FLOAT);
    v_exgp_T_hk_buy_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_T_HK_BUY_TOTAL_AMT_FLOAT);
    v_exgp_T_hk_sell_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_T_HK_SELL_TOTAL_AMT_FLOAT);
    v_exgp_T1_hk_buy_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_T1_HK_BUY_TOTAL_AMT_FLOAT);
    v_exgp_T1_hk_sell_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_T1_HK_SELL_TOTAL_AMT_FLOAT);
    v_exgp_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_AVAIL_QTY_FLOAT);
    v_exgp_target_code_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_CODE_AVAIL_QTY_FLOAT);
    v_exgp_trade_code_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_CODE_AVAIL_QTY_FLOAT);
    v_asac_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_AVAIL_QTY_FLOAT);
    v_asac_target_code_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_CODE_AVAIL_QTY_FLOAT);
    v_asac_trade_code_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_CODE_AVAIL_QTY_FLOAT);
    v_exgp_loan_sell_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_LOAN_SELL_AMT_FLOAT);
    v_asac_loan_sell_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_LOAN_SELL_AMT_FLOAT);
    v_exgp_debt_loan_sell_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT);
    v_exgp_debt_fina_buy_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_DEBT_FINA_BUY_STRIKE_AMT_FLOAT);
    v_record_count = lpTSCall1Ans6->GetInt32(LDBIZ_RECORD_COUNT_INT);

    //增加债券张手转换
    //债券张手转换 (一手是十张，报的时候是张，回来是手，系统内都以张处理)
    //债券数量单位配置 bond_qty_unit_set 沪市(张)，深市(张) 1
    //债券数量单位配置 bond_qty_unt_set 沪市(手)，深市(手) 2
    //债券数量单位配置 bond_qty_unit_set 沪市(手)，深市(张) 3
    //债券数量单位配置 bond_qty_unit_set 沪市(张)，深市(手) 4

    // if (@订单方向# = 《订单方向-买入》 or @订单方向# = 《订单方向-卖出》) and @证券类型# > 20 and @证券类型# < 50 then
    if ((v_order_dir == 1 || v_order_dir == 2) && v_stock_type > 20 && v_stock_type < 50)
    {

      // if (@债券数量单位配置# = 2) or (@债券数量单位配置# = 3 and @市场编号# = 《市场编号-上海证券交易所》) or (@债券数量单位配置# = 4 and @市场编号# = 《市场编号-深圳证券交易所》) then
      if ((v_bond_qty_unit_set == 2) || (v_bond_qty_unit_set == 3 && v_exch_no == 1) || (v_bond_qty_unit_set == 4 && v_exch_no == 2))
      {
        //set @回报信息// = concat(@回报信息//,",原成交数量=",@成交数量//);

        // set @成交数量# = @成交数量# * 10;
        v_strike_qty = v_strike_qty * 10;
      // end if;
      }

    // end if;
    }

    //回购类操作和债券买卖的自己计算成交金额

    // if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
    if (v_order_dir == 3 || v_order_dir == 4)
    {

      // set @成交金额# = @票面面值# * @成交数量#;
      v_strike_amt = v_par_value * v_strike_qty;

    }
    // elseif (@订单方向# = 《订单方向-买入》 or @订单方向# = 《订单方向-卖出》  or @订单方向# = 《订单方向-融资买入》) and ((@证券类型# > 20 and @证券类型# < 50) or @成交金额#<= 0) then
    else if ((v_order_dir == 1 || v_order_dir == 2  || v_order_dir == 5) && ((v_stock_type > 20 && v_stock_type < 50) || v_strike_amt<= 0))
    {

      // set @成交金额# = @成交价格# * @成交数量#;
      v_strike_amt = v_strike_price * v_strike_qty;

    }
    // elseif @市场编号# = 《市场编号-沪港通证券交易所》 or @市场编号# = 《市场编号-深港通证券交易所》 then
    else if (v_exch_no == 3 || v_exch_no == 4)
    {
      //港股交易，为了解决报盘回来的成交金额可能为人民币，也可能为港币，故此修改

      // set @成交金额# = @成交价格# * @成交数量#;
      v_strike_amt = v_strike_price * v_strike_qty;
    // end if;
    }


    // if @资产账户类型# = 《资产账户类型-融资融券》 then
    if (v_asset_acco_type == 5)
    {
        //调用过程[事务_产品_交易接口_获取融资融券卖券还款方式]
        //组织事务请求
        if(lpTSCall1Ans7)
        {
          lpTSCall1Ans7->FreeMsg();
          lpTSCall1Ans7=NULL;
        }
        lpTSCall1Req7=glpFastMsgFactory->CreateFastMessage("prodT.8.112", 0);
        lpTSCall1Req7->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req7->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req7->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req7->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req7->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req7->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req7->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req7->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req7->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req7->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req7->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req7->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        glpTSSubcallSerives->SubCall(lpTSCall1Req7, &lpTSCall1Ans7, 5000);
        if(!lpTSCall1Ans7)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.8.112]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans7->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
        v_fina_return_type = lpTSCall1Ans7->GetInt32(LDBIZ_FINA_RETURN_TYPE_INT);
        v_sell_auto_back_debt = lpTSCall1Ans7->GetInt32(LDBIZ_SELL_AUTO_BACK_DEBT_INT);

    // end if;
    }

    //处理成交回报，不处理费用

    // if @成交处理方式# = 《成交处理方式-汇总》 then
    if (v_strike_deal_type == 2)
    {

        // set @总成交金额# = @成交金额#;
        v_total_strike_amt = v_strike_amt;

        // set @总成交数量# = @成交数量#;
        v_total_strike_qty = v_strike_qty;

        // if @资产账户类型# = 《资产账户类型-融资融券》 and ((@订单方向# = 《订单方向-融资买入》 or @订单方向# = 《订单方向-融券卖出》 or @订单方向# = 《订单方向-卖券还款》 or @订单方向# = 《订单方向-买券还券》 or @订单方向# = 《订单方向-直接还款》 or @订单方向# = 《订单方向-直接还券》) or  (@资产账户类型# = 《资产账户类型-融资融券》 and @订单方向# = 《订单方向-卖出》 and  @存在负债标志# = 《存在负债标志-存在》 and @卖出自动还款# = 《卖出自动还款-是》)) then
        if (v_asset_acco_type == 5 && ((v_order_dir == 5 || v_order_dir == 6 || v_order_dir == 7 || v_order_dir == 8 || v_order_dir == 14 || v_order_dir == 15) ||  (v_asset_acco_type == 5 && v_order_dir == 2 &&  v_exist_debt_flag == 2 && v_sell_auto_back_debt == 0)))
        {
            //调用过程[事务_交易证券_报盘_处理融资融券汇总成交回报]
            //组织事务请求
            if(lpTSCall1Ans8)
            {
              lpTSCall1Ans8->FreeMsg();
              lpTSCall1Ans8=NULL;
            }
            lpTSCall1Req8=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.136", 0);
            lpTSCall1Req8->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req8->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req8->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req8->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req8->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req8->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req8->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req8->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req8->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req8->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpTSCall1Req8->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpTSCall1Req8->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpTSCall1Req8->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
            lpTSCall1Req8->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
            lpTSCall1Req8->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
            lpTSCall1Req8->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpTSCall1Req8->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
            lpTSCall1Req8->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpTSCall1Req8->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
            lpTSCall1Req8->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
            lpTSCall1Req8->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
            lpTSCall1Req8->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpTSCall1Req8->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
            lpTSCall1Req8->SetDouble(LDBIZ_TOTAL_STRIKE_QTY_FLOAT,v_total_strike_qty);
            lpTSCall1Req8->SetDouble(LDBIZ_TOTAL_STRIKE_AMT_FLOAT,v_total_strike_amt);
            lpTSCall1Req8->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
            lpTSCall1Req8->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
            lpTSCall1Req8->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
            lpTSCall1Req8->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
            lpTSCall1Req8->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
            lpTSCall1Req8->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
            lpTSCall1Req8->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
            lpTSCall1Req8->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpTSCall1Req8->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpTSCall1Req8->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
            lpTSCall1Req8->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpTSCall1Req8->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpTSCall1Req8->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
            lpTSCall1Req8->SetInt64(LDBIZ_RSP_ID_INT64,v_rsp_id);
            lpTSCall1Req8->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req8->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
            lpTSCall1Req8->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
            lpTSCall1Req8->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
            lpTSCall1Req8->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpTSCall1Req8->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
            lpTSCall1Req8->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
            lpTSCall1Req8->SetInt32(LDBIZ_FINA_RETURN_TYPE_INT,v_fina_return_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req8, &lpTSCall1Ans8, 5000);
            if(!lpTSCall1Ans8)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.136]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans8->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
            v_strike_id = lpTSCall1Ans8->GetInt64(LDBIZ_STRIKE_ID_INT64);
            v_co_no = lpTSCall1Ans8->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans8->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpTSCall1Ans8->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpTSCall1Ans8->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_stock_acco_no = lpTSCall1Ans8->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_stock_code_no = lpTSCall1Ans8->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            v_order_date = lpTSCall1Ans8->GetInt32(LDBIZ_ORDER_DATE_INT);
            v_order_batch_no = lpTSCall1Ans8->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
            v_report_time = lpTSCall1Ans8->GetInt32(LDBIZ_REPORT_TIME_INT);
            v_comm_date = lpTSCall1Ans8->GetInt32(LDBIZ_COMM_DATE_INT);
            v_comm_id = lpTSCall1Ans8->GetInt64(LDBIZ_COMM_ID_INT64);
            v_comm_batch_no = lpTSCall1Ans8->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
            v_comm_executor = lpTSCall1Ans8->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
            v_busi_opor_no = lpTSCall1Ans8->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
            strcpy(v_order_oper_way, lpTSCall1Ans8->GetString(LDBIZ_ORDER_OPER_WAY_STR));
            strcpy(v_target_code, lpTSCall1Ans8->GetString(LDBIZ_TARGET_CODE_STR));
            v_strike_amt = lpTSCall1Ans8->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
            v_strike_qty = lpTSCall1Ans8->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
            v_order_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
            v_order_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
            v_strike_bond_accr_intrst = lpTSCall1Ans8->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
            v_wtdraw_qty = lpTSCall1Ans8->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
            v_cost_calc_type = lpTSCall1Ans8->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
            strcpy(v_order_status, lpTSCall1Ans8->GetString(LDBIZ_ORDER_STATUS_STR));
            v_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_UPDATE_TIMES_INT);
            v_strike_occur_amt = lpTSCall1Ans8->GetDouble(LDBIZ_STRIKE_OCCUR_AMT_FLOAT);
            v_strike_occur_qty = lpTSCall1Ans8->GetDouble(LDBIZ_STRIKE_OCCUR_QTY_FLOAT);
            v_trade_occur_amt = lpTSCall1Ans8->GetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT);
            v_trade_occur_qty = lpTSCall1Ans8->GetDouble(LDBIZ_TRADE_OCCUR_QTY_FLOAT);
            v_open_posi_date = lpTSCall1Ans8->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
            v_original_order_dir = lpTSCall1Ans8->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);
            strcpy(v_detail_posi_id_str, lpTSCall1Ans8->GetString(LDBIZ_DETAIL_POSI_ID_STR_STR));
            strcpy(v_stock_code_no_str, lpTSCall1Ans8->GetString(LDBIZ_STOCK_CODE_NO_STR_STR));

        }
        // else
        else
        {

            //调用过程[事务_交易证券_报盘_处理汇总成交回报]
            //组织事务请求
            if(lpTSCall1Ans9)
            {
              lpTSCall1Ans9->FreeMsg();
              lpTSCall1Ans9=NULL;
            }
            lpTSCall1Req9=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.22", 0);
            lpTSCall1Req9->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req9->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req9->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req9->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req9->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req9->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req9->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req9->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req9->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req9->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpTSCall1Req9->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpTSCall1Req9->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpTSCall1Req9->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
            lpTSCall1Req9->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
            lpTSCall1Req9->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
            lpTSCall1Req9->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpTSCall1Req9->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
            lpTSCall1Req9->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpTSCall1Req9->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
            lpTSCall1Req9->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
            lpTSCall1Req9->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
            lpTSCall1Req9->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpTSCall1Req9->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
            lpTSCall1Req9->SetDouble(LDBIZ_TOTAL_STRIKE_QTY_FLOAT,v_total_strike_qty);
            lpTSCall1Req9->SetDouble(LDBIZ_TOTAL_STRIKE_AMT_FLOAT,v_total_strike_amt);
            lpTSCall1Req9->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
            lpTSCall1Req9->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
            lpTSCall1Req9->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
            lpTSCall1Req9->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
            lpTSCall1Req9->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
            lpTSCall1Req9->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
            lpTSCall1Req9->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
            lpTSCall1Req9->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpTSCall1Req9->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpTSCall1Req9->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
            lpTSCall1Req9->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpTSCall1Req9->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpTSCall1Req9->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
            lpTSCall1Req9->SetInt64(LDBIZ_RSP_ID_INT64,v_rsp_id);
            lpTSCall1Req9->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req9->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
            lpTSCall1Req9->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
            lpTSCall1Req9->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
            lpTSCall1Req9->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpTSCall1Req9->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
            lpTSCall1Req9->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req9, &lpTSCall1Ans9, 5000);
            if(!lpTSCall1Ans9)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.22]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans9->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
            v_strike_id = lpTSCall1Ans9->GetInt64(LDBIZ_STRIKE_ID_INT64);
            v_co_no = lpTSCall1Ans9->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans9->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpTSCall1Ans9->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpTSCall1Ans9->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_stock_acco_no = lpTSCall1Ans9->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_stock_code_no = lpTSCall1Ans9->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            v_order_date = lpTSCall1Ans9->GetInt32(LDBIZ_ORDER_DATE_INT);
            v_order_batch_no = lpTSCall1Ans9->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
            v_report_time = lpTSCall1Ans9->GetInt32(LDBIZ_REPORT_TIME_INT);
            v_comm_date = lpTSCall1Ans9->GetInt32(LDBIZ_COMM_DATE_INT);
            v_comm_id = lpTSCall1Ans9->GetInt64(LDBIZ_COMM_ID_INT64);
            v_comm_batch_no = lpTSCall1Ans9->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
            v_comm_executor = lpTSCall1Ans9->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
            v_busi_opor_no = lpTSCall1Ans9->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
            strcpy(v_order_oper_way, lpTSCall1Ans9->GetString(LDBIZ_ORDER_OPER_WAY_STR));
            strcpy(v_target_code, lpTSCall1Ans9->GetString(LDBIZ_TARGET_CODE_STR));
            v_strike_amt = lpTSCall1Ans9->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
            v_strike_qty = lpTSCall1Ans9->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
            v_order_frozen_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
            v_order_frozen_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
            v_strike_bond_accr_intrst = lpTSCall1Ans9->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
            v_wtdraw_qty = lpTSCall1Ans9->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
            v_cost_calc_type = lpTSCall1Ans9->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
            strcpy(v_order_status, lpTSCall1Ans9->GetString(LDBIZ_ORDER_STATUS_STR));
            v_update_times = lpTSCall1Ans9->GetInt32(LDBIZ_UPDATE_TIMES_INT);
            v_trade_occur_amt = lpTSCall1Ans9->GetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT);
            v_open_posi_date = lpTSCall1Ans9->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
            v_original_order_dir = lpTSCall1Ans9->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);

        // end if;
        }


        // set @临时_成交金额# = @总成交金额# - @成交金额#;
        v_tmp_strike_amt = v_total_strike_amt - v_strike_amt;

        // set @临时_成交数量# = @总成交数量# - @成交数量#;
        v_tmp_strike_qty = v_total_strike_qty - v_strike_qty;

        // set @当笔成交金额# = @临时_成交金额#;
        v_curr_strike_amt = v_tmp_strike_amt;

        // set @当笔成交数量# = @临时_成交数量#;
        v_curr_strike_qty = v_tmp_strike_qty;

        // set @临时_成交价格# = @临时_成交金额# / @临时_成交数量#;
        v_tmp_strike_price = v_tmp_strike_amt / v_tmp_strike_qty;
    }
    // else
    else
    {


        // if @资产账户类型# = 《资产账户类型-融资融券》 and ((@订单方向# = 《订单方向-融资买入》 or @订单方向# = 《订单方向-融券卖出》 or @订单方向# = 《订单方向-卖券还款》 or @订单方向# = 《订单方向-买券还券》 or @订单方向# = 《订单方向-直接还款》 or @订单方向# = 《订单方向-直接还券》) or  (@资产账户类型# = 《资产账户类型-融资融券》 and @订单方向# = 《订单方向-卖出》 and  @存在负债标志# = 《存在负债标志-存在》 and @卖出自动还款# = 《卖出自动还款-是》)) then
        if (v_asset_acco_type == 5 && ((v_order_dir == 5 || v_order_dir == 6 || v_order_dir == 7 || v_order_dir == 8 || v_order_dir == 14 || v_order_dir == 15) ||  (v_asset_acco_type == 5 && v_order_dir == 2 &&  v_exist_debt_flag == 2 && v_sell_auto_back_debt == 0)))
        {
            //调用过程[事务_交易证券_报盘_处理融资融券成交回报]
            //组织事务请求
            if(lpTSCall1Ans10)
            {
              lpTSCall1Ans10->FreeMsg();
              lpTSCall1Ans10=NULL;
            }
            lpTSCall1Req10=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.132", 0);
            lpTSCall1Req10->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req10->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req10->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req10->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req10->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req10->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req10->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req10->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req10->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req10->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpTSCall1Req10->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpTSCall1Req10->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpTSCall1Req10->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
            lpTSCall1Req10->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
            lpTSCall1Req10->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
            lpTSCall1Req10->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpTSCall1Req10->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
            lpTSCall1Req10->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpTSCall1Req10->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
            lpTSCall1Req10->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
            lpTSCall1Req10->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
            lpTSCall1Req10->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpTSCall1Req10->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
            lpTSCall1Req10->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpTSCall1Req10->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpTSCall1Req10->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
            lpTSCall1Req10->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
            lpTSCall1Req10->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
            lpTSCall1Req10->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
            lpTSCall1Req10->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
            lpTSCall1Req10->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
            lpTSCall1Req10->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
            lpTSCall1Req10->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpTSCall1Req10->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpTSCall1Req10->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
            lpTSCall1Req10->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpTSCall1Req10->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpTSCall1Req10->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
            lpTSCall1Req10->SetInt64(LDBIZ_RSP_ID_INT64,v_rsp_id);
            lpTSCall1Req10->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req10->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
            lpTSCall1Req10->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
            lpTSCall1Req10->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
            lpTSCall1Req10->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpTSCall1Req10->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
            lpTSCall1Req10->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
            lpTSCall1Req10->SetInt32(LDBIZ_FINA_RETURN_TYPE_INT,v_fina_return_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req10, &lpTSCall1Ans10, 5000);
            if(!lpTSCall1Ans10)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.132]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans10->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
            v_strike_id = lpTSCall1Ans10->GetInt64(LDBIZ_STRIKE_ID_INT64);
            v_co_no = lpTSCall1Ans10->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans10->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpTSCall1Ans10->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpTSCall1Ans10->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_stock_acco_no = lpTSCall1Ans10->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_stock_code_no = lpTSCall1Ans10->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            strcpy(v_target_code, lpTSCall1Ans10->GetString(LDBIZ_TARGET_CODE_STR));
            v_order_date = lpTSCall1Ans10->GetInt32(LDBIZ_ORDER_DATE_INT);
            v_order_batch_no = lpTSCall1Ans10->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
            v_report_time = lpTSCall1Ans10->GetInt32(LDBIZ_REPORT_TIME_INT);
            v_comm_date = lpTSCall1Ans10->GetInt32(LDBIZ_COMM_DATE_INT);
            v_comm_id = lpTSCall1Ans10->GetInt64(LDBIZ_COMM_ID_INT64);
            v_comm_batch_no = lpTSCall1Ans10->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
            v_comm_executor = lpTSCall1Ans10->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
            v_external_no = lpTSCall1Ans10->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
            v_busi_opor_no = lpTSCall1Ans10->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
            strcpy(v_order_oper_way, lpTSCall1Ans10->GetString(LDBIZ_ORDER_OPER_WAY_STR));
            v_total_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_TOTAL_STRIKE_AMT_FLOAT);
            v_total_strike_qty = lpTSCall1Ans10->GetDouble(LDBIZ_TOTAL_STRIKE_QTY_FLOAT);
            v_cost_calc_type = lpTSCall1Ans10->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
            v_order_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
            v_order_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
            v_strike_bond_accr_intrst = lpTSCall1Ans10->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
            v_wtdraw_qty = lpTSCall1Ans10->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
            strcpy(v_order_status, lpTSCall1Ans10->GetString(LDBIZ_ORDER_STATUS_STR));
            v_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_UPDATE_TIMES_INT);
            v_strike_occur_amt = lpTSCall1Ans10->GetDouble(LDBIZ_STRIKE_OCCUR_AMT_FLOAT);
            v_strike_occur_qty = lpTSCall1Ans10->GetDouble(LDBIZ_STRIKE_OCCUR_QTY_FLOAT);
            v_trade_occur_amt = lpTSCall1Ans10->GetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT);
            v_trade_occur_qty = lpTSCall1Ans10->GetDouble(LDBIZ_TRADE_OCCUR_QTY_FLOAT);
            v_open_posi_date = lpTSCall1Ans10->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
            v_original_order_dir = lpTSCall1Ans10->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);

        }
        // else
        else
        {

            //调用过程[事务_交易证券_报盘_处理成交回报]
            //组织事务请求
            if(lpTSCall1Ans11)
            {
              lpTSCall1Ans11->FreeMsg();
              lpTSCall1Ans11=NULL;
            }
            lpTSCall1Req11=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.21", 0);
            lpTSCall1Req11->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req11->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req11->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req11->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req11->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req11->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req11->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req11->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req11->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req11->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpTSCall1Req11->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpTSCall1Req11->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpTSCall1Req11->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
            lpTSCall1Req11->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
            lpTSCall1Req11->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
            lpTSCall1Req11->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpTSCall1Req11->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
            lpTSCall1Req11->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpTSCall1Req11->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
            lpTSCall1Req11->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
            lpTSCall1Req11->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
            lpTSCall1Req11->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpTSCall1Req11->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
            lpTSCall1Req11->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpTSCall1Req11->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpTSCall1Req11->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
            lpTSCall1Req11->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
            lpTSCall1Req11->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
            lpTSCall1Req11->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
            lpTSCall1Req11->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
            lpTSCall1Req11->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
            lpTSCall1Req11->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
            lpTSCall1Req11->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpTSCall1Req11->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpTSCall1Req11->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
            lpTSCall1Req11->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpTSCall1Req11->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpTSCall1Req11->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
            lpTSCall1Req11->SetInt64(LDBIZ_RSP_ID_INT64,v_rsp_id);
            lpTSCall1Req11->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req11->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
            lpTSCall1Req11->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
            lpTSCall1Req11->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
            lpTSCall1Req11->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpTSCall1Req11->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
            lpTSCall1Req11->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req11, &lpTSCall1Ans11, 5000);
            if(!lpTSCall1Ans11)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.21]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans11->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
            v_strike_id = lpTSCall1Ans11->GetInt64(LDBIZ_STRIKE_ID_INT64);
            v_co_no = lpTSCall1Ans11->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans11->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpTSCall1Ans11->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpTSCall1Ans11->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_stock_acco_no = lpTSCall1Ans11->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_stock_code_no = lpTSCall1Ans11->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            strcpy(v_target_code, lpTSCall1Ans11->GetString(LDBIZ_TARGET_CODE_STR));
            v_order_date = lpTSCall1Ans11->GetInt32(LDBIZ_ORDER_DATE_INT);
            v_order_batch_no = lpTSCall1Ans11->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
            v_report_time = lpTSCall1Ans11->GetInt32(LDBIZ_REPORT_TIME_INT);
            v_comm_date = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_DATE_INT);
            v_comm_id = lpTSCall1Ans11->GetInt64(LDBIZ_COMM_ID_INT64);
            v_comm_batch_no = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
            v_comm_executor = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
            v_external_no = lpTSCall1Ans11->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
            v_busi_opor_no = lpTSCall1Ans11->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
            strcpy(v_order_oper_way, lpTSCall1Ans11->GetString(LDBIZ_ORDER_OPER_WAY_STR));
            v_total_strike_amt = lpTSCall1Ans11->GetDouble(LDBIZ_TOTAL_STRIKE_AMT_FLOAT);
            v_total_strike_qty = lpTSCall1Ans11->GetDouble(LDBIZ_TOTAL_STRIKE_QTY_FLOAT);
            v_cost_calc_type = lpTSCall1Ans11->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
            v_order_frozen_amt = lpTSCall1Ans11->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
            v_order_frozen_qty = lpTSCall1Ans11->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
            v_strike_bond_accr_intrst = lpTSCall1Ans11->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
            v_wtdraw_qty = lpTSCall1Ans11->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
            strcpy(v_order_status, lpTSCall1Ans11->GetString(LDBIZ_ORDER_STATUS_STR));
            v_update_times = lpTSCall1Ans11->GetInt32(LDBIZ_UPDATE_TIMES_INT);
            v_trade_occur_amt = lpTSCall1Ans11->GetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT);
            v_open_posi_date = lpTSCall1Ans11->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
            v_original_order_dir = lpTSCall1Ans11->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);

        // end if;
        }


        // set @当笔成交金额# = @临时_成交金额#;
        v_curr_strike_amt = v_tmp_strike_amt;

        // set @当笔成交数量# = @临时_成交数量#;
        v_curr_strike_qty = v_tmp_strike_qty;

        // set @成交金额# = @总成交金额# - @临时_成交金额#;
        v_strike_amt = v_total_strike_amt - v_tmp_strike_amt;

        // set @成交数量# = @总成交数量# - @临时_成交数量#;
        v_strike_qty = v_total_strike_qty - v_tmp_strike_qty;
    // end if;
    }

    //保证订单方向从订单表获取，防止成交回来的订单方向不正确，导致资金持仓处理有问题

    // set @订单方向# = @原订单方向#;
    v_order_dir = v_original_order_dir;

    // set @临时_更新次数# = @更新次数#;
    v_tmp_update_times = v_update_times;
    //处理成交回报后，再处理费用，以避免并发时导致的费用计算所获取的成交数量不一致
    //计算原费用

    // set @临时_全部费用# = 0;
    v_tmp_all_fee = 0;

    // set @临时_交易佣金# = 0;
    v_tmp_trade_commis = 0;

    // set @临时_印花税# = 0;
    v_tmp_stamp_tax = 0;

    // set @临时_过户费# = 0;
    v_tmp_trans_fee = 0;

    // set @临时_经手费# = 0;
    v_tmp_brkage_fee = 0;

    // set @临时_证管费# = 0;
    v_tmp_SEC_charges = 0;

    // set @临时_其他费用# = 0;
    v_tmp_other_fee = 0;

    // set @临时_其他佣金# = 0;
    v_tmp_other_commis = 0;

    // set @临时_交易费# = 0;
    v_tmp_trade_cost_fee = 0;

    // set @临时_交易系统使用费# = 0;
    v_tmp_trade_system_use_fee = 0;

    // set @临时_交易征费# = 0;
    v_tmp_trade_tax = 0;

    // set @临时_股份交收费# = 0;
    v_tmp_stock_settle_fee = 0;

    // if @成交数量# > 0 then
    if (v_strike_qty > 0)
    {

        // set @成交价格# = @成交金额# / @成交数量#;
        v_strike_price = v_strike_amt / v_strike_qty;

        // if @订单操作方式# = 《订单操作方式-增强交易》 or @订单操作方式# = 《订单操作方式-增强交易平仓》 then
        if (strcmp(v_order_oper_way , "14")==0 || strcmp(v_order_oper_way , "51")==0)
        {
            //调用过程[事务_交易证券_T0_获取机构级操作员费用设置标志]
            //组织事务请求
            if(lpTSCall1Ans12)
            {
              lpTSCall1Ans12->FreeMsg();
              lpTSCall1Ans12=NULL;
            }
            lpTSCall1Req12=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.103", 0);
            lpTSCall1Req12->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req12->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req12->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req12->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req12->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req12->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req12->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req12->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req12->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
            glpTSSubcallSerives->SubCall(lpTSCall1Req12, &lpTSCall1Ans12, 5000);
            if(!lpTSCall1Ans12)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.103]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans12->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
            v_T0_opor_fee_set_flag = lpTSCall1Ans12->GetInt32(LDBIZ_T0_OPOR_FEE_SET_FLAG_INT);

            //调用过程[事务_交易证券_T0_获取操作员阈值信息]
            //组织事务请求
            if(lpTSCall1Ans13)
            {
              lpTSCall1Ans13->FreeMsg();
              lpTSCall1Ans13=NULL;
            }
            lpTSCall1Req13=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.98", 0);
            lpTSCall1Req13->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req13->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req13->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req13->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req13->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req13->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req13->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req13->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req13->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
            glpTSSubcallSerives->SubCall(lpTSCall1Req13, &lpTSCall1Ans13, 5000);
            if(!lpTSCall1Ans13)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.98]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans13->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));
            v_row_id = lpTSCall1Ans13->GetInt64(LDBIZ_ROW_ID_INT64);
            v_curr_amt = lpTSCall1Ans13->GetDouble(LDBIZ_CURR_AMT_FLOAT);
            v_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_FROZEN_AMT_FLOAT);
            v_opor_warn_tshold = lpTSCall1Ans13->GetDouble(LDBIZ_OPOR_WARN_TSHOLD_FLOAT);
            v_opor_stop_tshold = lpTSCall1Ans13->GetDouble(LDBIZ_OPOR_STOP_TSHOLD_FLOAT);
            v_order_limit_time = lpTSCall1Ans13->GetInt32(LDBIZ_ORDER_LIMIT_TIME_INT);
            v_per_secu_posi_ratio = lpTSCall1Ans13->GetDouble(LDBIZ_PER_SECU_POSI_RATIO_FLOAT);
            v_posi_limit_time = lpTSCall1Ans13->GetInt32(LDBIZ_POSI_LIMIT_TIME_INT);
            v_order_ctrl_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ORDER_CTRL_QTY_FLOAT);
            v_order_ctrl_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ORDER_CTRL_AMT_FLOAT);
            v_stock_warn_ratio = lpTSCall1Ans13->GetDouble(LDBIZ_STOCK_WARN_RATIO_FLOAT);
            v_stock_stop_ratio = lpTSCall1Ans13->GetDouble(LDBIZ_STOCK_STOP_RATIO_FLOAT);
            v_stock_warn_amt = lpTSCall1Ans13->GetDouble(LDBIZ_STOCK_WARN_AMT_FLOAT);
            v_stock_stop_amt = lpTSCall1Ans13->GetDouble(LDBIZ_STOCK_STOP_AMT_FLOAT);
            v_trig_oper_type = lpTSCall1Ans13->GetInt32(LDBIZ_TRIG_OPER_TYPE_INT);
            v_open_close_permission = lpTSCall1Ans13->GetInt32(LDBIZ_OPEN_CLOSE_PERMISSION_INT);
            v_risk_oper = lpTSCall1Ans13->GetInt32(LDBIZ_RISK_OPER_INT);
            v_fee_calc_type = lpTSCall1Ans13->GetInt32(LDBIZ_FEE_CALC_TYPE_INT);
            v_permit_margin_trade = lpTSCall1Ans13->GetInt32(LDBIZ_PERMIT_MARGIN_TRADE_INT);
            v_buy_fee_ratio = lpTSCall1Ans13->GetDouble(LDBIZ_BUY_FEE_RATIO_FLOAT);
            v_sell_fee_ratio = lpTSCall1Ans13->GetDouble(LDBIZ_SELL_FEE_RATIO_FLOAT);
            v_buy_min_fee = lpTSCall1Ans13->GetDouble(LDBIZ_BUY_MIN_FEE_FLOAT);
            v_sell_min_fee = lpTSCall1Ans13->GetDouble(LDBIZ_SELL_MIN_FEE_FLOAT);
            strcpy(v_remark_info, lpTSCall1Ans13->GetString(LDBIZ_REMARK_INFO_STR));
            v_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // if @费用计算方式#  = 《费用计算方式-操作员》 and @T0操作员费用设置标志#=《T0操作员费用设置标志-设置》 then
            if (v_fee_calc_type  == 2 && v_T0_opor_fee_set_flag==1)
            {

                  // set @全部费用临时值#=0;
                  v_all_fee_for_tmp=0;
                  //调用过程[事务_交易证券_T0_操作员成交费用计算]
                  //组织事务请求
                  if(lpTSCall1Ans14)
                  {
                    lpTSCall1Ans14->FreeMsg();
                    lpTSCall1Ans14=NULL;
                  }
                  lpTSCall1Req14=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.100", 0);
                  lpTSCall1Req14->SetInt32(LDTAG_PRIORITY, iPriority);
                  lpTSCall1Req14->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                  lpTSCall1Req14->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                  lpTSCall1Req14->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                  lpTSCall1Req14->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                  lpTSCall1Req14->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                  lpTSCall1Req14->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                  lpTSCall1Req14->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                  lpTSCall1Req14->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                  lpTSCall1Req14->SetDouble(LDBIZ_BUY_MIN_FEE_FLOAT,v_buy_min_fee);
                  lpTSCall1Req14->SetDouble(LDBIZ_SELL_MIN_FEE_FLOAT,v_sell_min_fee);
                  lpTSCall1Req14->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                  lpTSCall1Req14->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
                  lpTSCall1Req14->SetDouble(LDBIZ_BUY_FEE_RATIO_FLOAT,v_buy_fee_ratio);
                  lpTSCall1Req14->SetDouble(LDBIZ_SELL_FEE_RATIO_FLOAT,v_sell_fee_ratio);
                  glpTSSubcallSerives->SubCall(lpTSCall1Req14, &lpTSCall1Ans14, 5000);
                  if(!lpTSCall1Ans14)  //  超时错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.100]subcall timed out!");
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO));
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans14->GetString(LDTAG_ERRORINFO));
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(strcmp(lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                  {
                      strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
                      strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
                      iRet=-1;
                      goto END;
                  }
                  //获取输出参数值
                  strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
                  v_all_fee = lpTSCall1Ans14->GetDouble(LDBIZ_ALL_FEE_FLOAT);

            //T0 费用增加。Modify by wjp20181017

                  // set @全部费用临时值#=@全部费用#;
                  v_all_fee_for_tmp=v_all_fee;
                  //调用过程[事务_公共_公共接口_计算证券成交费用]
                  //组织事务请求
                  if(lpTSCall1Ans15)
                  {
                    lpTSCall1Ans15->FreeMsg();
                    lpTSCall1Ans15=NULL;
                  }
                  lpTSCall1Req15=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
                  lpTSCall1Req15->SetInt32(LDTAG_PRIORITY, iPriority);
                  lpTSCall1Req15->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                  lpTSCall1Req15->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                  lpTSCall1Req15->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                  lpTSCall1Req15->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                  lpTSCall1Req15->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                  lpTSCall1Req15->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                  lpTSCall1Req15->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                  lpTSCall1Req15->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                  lpTSCall1Req15->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpTSCall1Req15->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                  lpTSCall1Req15->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpTSCall1Req15->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                  lpTSCall1Req15->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                  lpTSCall1Req15->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                  lpTSCall1Req15->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
                  lpTSCall1Req15->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                  lpTSCall1Req15->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                  lpTSCall1Req15->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                  lpTSCall1Req15->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                  lpTSCall1Req15->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                  glpTSSubcallSerives->SubCall(lpTSCall1Req15, &lpTSCall1Ans15, 5000);
                  if(!lpTSCall1Ans15)  //  超时错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO));
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans15->GetString(LDTAG_ERRORINFO));
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(strcmp(lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                  {
                      strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
                      strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
                      iRet=-1;
                      goto END;
                  }
                  //获取输出参数值
                  strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
                  v_trade_commis = lpTSCall1Ans15->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
                  v_all_fee = lpTSCall1Ans15->GetDouble(LDBIZ_ALL_FEE_FLOAT);
                  v_stamp_tax = lpTSCall1Ans15->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
                  v_trans_fee = lpTSCall1Ans15->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
                  v_brkage_fee = lpTSCall1Ans15->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
                  v_SEC_charges = lpTSCall1Ans15->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
                  v_other_fee = lpTSCall1Ans15->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
                  v_other_commis = lpTSCall1Ans15->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
                  v_trade_tax = lpTSCall1Ans15->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
                  v_trade_cost_fee = lpTSCall1Ans15->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
                  v_trade_system_use_fee = lpTSCall1Ans15->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
                  v_stock_settle_fee = lpTSCall1Ans15->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);


                  // set @全部费用#=@全部费用#+@全部费用临时值#-@交易佣金#;
                  v_all_fee=v_all_fee+v_all_fee_for_tmp-v_trade_commis;

                  // set @交易佣金#=@全部费用临时值#;
                  v_trade_commis=v_all_fee_for_tmp;
            }
            // else
            else
            {

                  //调用过程[事务_公共_公共接口_计算证券成交费用]
                  //组织事务请求
                  if(lpTSCall1Ans16)
                  {
                    lpTSCall1Ans16->FreeMsg();
                    lpTSCall1Ans16=NULL;
                  }
                  lpTSCall1Req16=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
                  lpTSCall1Req16->SetInt32(LDTAG_PRIORITY, iPriority);
                  lpTSCall1Req16->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                  lpTSCall1Req16->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                  lpTSCall1Req16->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                  lpTSCall1Req16->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                  lpTSCall1Req16->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                  lpTSCall1Req16->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                  lpTSCall1Req16->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                  lpTSCall1Req16->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                  lpTSCall1Req16->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpTSCall1Req16->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                  lpTSCall1Req16->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpTSCall1Req16->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                  lpTSCall1Req16->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                  lpTSCall1Req16->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                  lpTSCall1Req16->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
                  lpTSCall1Req16->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                  lpTSCall1Req16->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                  lpTSCall1Req16->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                  lpTSCall1Req16->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                  lpTSCall1Req16->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                  glpTSSubcallSerives->SubCall(lpTSCall1Req16, &lpTSCall1Ans16, 5000);
                  if(!lpTSCall1Ans16)  //  超时错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(lpTSCall1Ans16->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans16->GetInt32(LDTAG_ERRORNO));
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans16->GetString(LDTAG_ERRORINFO));
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(strcmp(lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                  {
                      strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
                      strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));
                      iRet=-1;
                      goto END;
                  }
                  //获取输出参数值
                  strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));
                  v_trade_commis = lpTSCall1Ans16->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
                  v_all_fee = lpTSCall1Ans16->GetDouble(LDBIZ_ALL_FEE_FLOAT);
                  v_stamp_tax = lpTSCall1Ans16->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
                  v_trans_fee = lpTSCall1Ans16->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
                  v_brkage_fee = lpTSCall1Ans16->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
                  v_SEC_charges = lpTSCall1Ans16->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
                  v_other_fee = lpTSCall1Ans16->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
                  v_other_commis = lpTSCall1Ans16->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
                  v_trade_tax = lpTSCall1Ans16->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
                  v_trade_cost_fee = lpTSCall1Ans16->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
                  v_trade_system_use_fee = lpTSCall1Ans16->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
                  v_stock_settle_fee = lpTSCall1Ans16->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);

            // end if;
            }

        }
        // else
        else
        {

             //调用过程[事务_公共_公共接口_计算证券成交费用]
             //组织事务请求
             if(lpTSCall1Ans17)
             {
               lpTSCall1Ans17->FreeMsg();
               lpTSCall1Ans17=NULL;
             }
             lpTSCall1Req17=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
             lpTSCall1Req17->SetInt32(LDTAG_PRIORITY, iPriority);
             lpTSCall1Req17->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
             lpTSCall1Req17->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
             lpTSCall1Req17->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
             lpTSCall1Req17->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
             lpTSCall1Req17->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
             lpTSCall1Req17->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
             lpTSCall1Req17->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
             lpTSCall1Req17->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
             lpTSCall1Req17->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
             lpTSCall1Req17->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
             lpTSCall1Req17->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
             lpTSCall1Req17->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
             lpTSCall1Req17->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
             lpTSCall1Req17->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
             lpTSCall1Req17->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
             lpTSCall1Req17->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
             lpTSCall1Req17->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
             lpTSCall1Req17->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
             lpTSCall1Req17->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
             lpTSCall1Req17->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
             glpTSSubcallSerives->SubCall(lpTSCall1Req17, &lpTSCall1Ans17, 5000);
             if(!lpTSCall1Ans17)  //  超时错误
             {
                 lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                 lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
                 iRet=-2;
                 goto ENDSYS;
             }
             else if(lpTSCall1Ans17->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
             {
                 lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans17->GetInt32(LDTAG_ERRORNO));
                 lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans17->GetString(LDTAG_ERRORINFO));
                 iRet=-2;
                 goto ENDSYS;
             }
             else if(strcmp(lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
             {
                 strcpy(v_error_code, lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR));
                 strcpy(v_error_info, lpTSCall1Ans17->GetString(LDBIZ_ERROR_INFO_STR));
                 iRet=-1;
                 goto END;
             }
             //获取输出参数值
             strcpy(v_error_code, lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR));
             strcpy(v_error_info, lpTSCall1Ans17->GetString(LDBIZ_ERROR_INFO_STR));
             v_trade_commis = lpTSCall1Ans17->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
             v_all_fee = lpTSCall1Ans17->GetDouble(LDBIZ_ALL_FEE_FLOAT);
             v_stamp_tax = lpTSCall1Ans17->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
             v_trans_fee = lpTSCall1Ans17->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
             v_brkage_fee = lpTSCall1Ans17->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
             v_SEC_charges = lpTSCall1Ans17->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
             v_other_fee = lpTSCall1Ans17->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
             v_other_commis = lpTSCall1Ans17->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
             v_trade_tax = lpTSCall1Ans17->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
             v_trade_cost_fee = lpTSCall1Ans17->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
             v_trade_system_use_fee = lpTSCall1Ans17->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
             v_stock_settle_fee = lpTSCall1Ans17->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);

        // end if;
        }


        // set @临时_全部费用# = @全部费用#;
        v_tmp_all_fee = v_all_fee;

        // set @临时_交易佣金# = @交易佣金#;
        v_tmp_trade_commis = v_trade_commis;

        // set @临时_印花税# = @印花税#;
        v_tmp_stamp_tax = v_stamp_tax;

        // set @临时_过户费# = @过户费#;
        v_tmp_trans_fee = v_trans_fee;

        // set @临时_经手费# = @经手费#;
        v_tmp_brkage_fee = v_brkage_fee;

        // set @临时_证管费# = @证管费#;
        v_tmp_SEC_charges = v_SEC_charges;

        // set @临时_其他费用# = @其他费用#;
        v_tmp_other_fee = v_other_fee;

        // set @临时_其他佣金# = @其他佣金#;
        v_tmp_other_commis = v_other_commis;

        // set @临时_交易费# = @交易费#;
        v_tmp_trade_cost_fee = v_trade_cost_fee;

        // set @临时_交易系统使用费# = @交易系统使用费#;
        v_tmp_trade_system_use_fee = v_trade_system_use_fee;

        // set @临时_交易征费# = @交易征费#;
        v_tmp_trade_tax = v_trade_tax;

        // set @临时_股份交收费# = @股份交收费#;
        v_tmp_stock_settle_fee = v_stock_settle_fee;
    // end if;
    }

    //计算新费用

    // set @成交价格# = @总成交金额#/ @总成交数量#;
    v_strike_price = v_total_strike_amt/ v_total_strike_qty;

    // set @成交数量# = @总成交数量#;
    v_strike_qty = v_total_strike_qty;

    // if @订单操作方式# = 《订单操作方式-增强交易》 or @订单操作方式# = 《订单操作方式-增强交易平仓》 then
    if (strcmp(v_order_oper_way , "14")==0 || strcmp(v_order_oper_way , "51")==0)
    {
        //调用过程[事务_交易证券_T0_获取机构级操作员费用设置标志]
        //组织事务请求
        if(lpTSCall1Ans18)
        {
          lpTSCall1Ans18->FreeMsg();
          lpTSCall1Ans18=NULL;
        }
        lpTSCall1Req18=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.103", 0);
        lpTSCall1Req18->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req18->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req18->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req18->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req18->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req18->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req18->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req18->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req18->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req18, &lpTSCall1Ans18, 5000);
        if(!lpTSCall1Ans18)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.103]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans18->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans18->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans18->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans18->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans18->GetString(LDBIZ_ERROR_INFO_STR));
        v_T0_opor_fee_set_flag = lpTSCall1Ans18->GetInt32(LDBIZ_T0_OPOR_FEE_SET_FLAG_INT);

        //调用过程[事务_交易证券_T0_获取操作员阈值信息]
        //组织事务请求
        if(lpTSCall1Ans19)
        {
          lpTSCall1Ans19->FreeMsg();
          lpTSCall1Ans19=NULL;
        }
        lpTSCall1Req19=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.98", 0);
        lpTSCall1Req19->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req19->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req19->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req19->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req19->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req19->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req19->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req19->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req19->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req19, &lpTSCall1Ans19, 5000);
        if(!lpTSCall1Ans19)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.98]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans19->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans19->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans19->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans19->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans19->GetInt64(LDBIZ_ROW_ID_INT64);
        v_curr_amt = lpTSCall1Ans19->GetDouble(LDBIZ_CURR_AMT_FLOAT);
        v_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_FROZEN_AMT_FLOAT);
        v_opor_warn_tshold = lpTSCall1Ans19->GetDouble(LDBIZ_OPOR_WARN_TSHOLD_FLOAT);
        v_opor_stop_tshold = lpTSCall1Ans19->GetDouble(LDBIZ_OPOR_STOP_TSHOLD_FLOAT);
        v_order_limit_time = lpTSCall1Ans19->GetInt32(LDBIZ_ORDER_LIMIT_TIME_INT);
        v_per_secu_posi_ratio = lpTSCall1Ans19->GetDouble(LDBIZ_PER_SECU_POSI_RATIO_FLOAT);
        v_posi_limit_time = lpTSCall1Ans19->GetInt32(LDBIZ_POSI_LIMIT_TIME_INT);
        v_order_ctrl_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ORDER_CTRL_QTY_FLOAT);
        v_order_ctrl_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ORDER_CTRL_AMT_FLOAT);
        v_stock_warn_ratio = lpTSCall1Ans19->GetDouble(LDBIZ_STOCK_WARN_RATIO_FLOAT);
        v_stock_stop_ratio = lpTSCall1Ans19->GetDouble(LDBIZ_STOCK_STOP_RATIO_FLOAT);
        v_stock_warn_amt = lpTSCall1Ans19->GetDouble(LDBIZ_STOCK_WARN_AMT_FLOAT);
        v_stock_stop_amt = lpTSCall1Ans19->GetDouble(LDBIZ_STOCK_STOP_AMT_FLOAT);
        v_trig_oper_type = lpTSCall1Ans19->GetInt32(LDBIZ_TRIG_OPER_TYPE_INT);
        v_open_close_permission = lpTSCall1Ans19->GetInt32(LDBIZ_OPEN_CLOSE_PERMISSION_INT);
        v_risk_oper = lpTSCall1Ans19->GetInt32(LDBIZ_RISK_OPER_INT);
        v_fee_calc_type = lpTSCall1Ans19->GetInt32(LDBIZ_FEE_CALC_TYPE_INT);
        v_permit_margin_trade = lpTSCall1Ans19->GetInt32(LDBIZ_PERMIT_MARGIN_TRADE_INT);
        v_buy_fee_ratio = lpTSCall1Ans19->GetDouble(LDBIZ_BUY_FEE_RATIO_FLOAT);
        v_sell_fee_ratio = lpTSCall1Ans19->GetDouble(LDBIZ_SELL_FEE_RATIO_FLOAT);
        v_buy_min_fee = lpTSCall1Ans19->GetDouble(LDBIZ_BUY_MIN_FEE_FLOAT);
        v_sell_min_fee = lpTSCall1Ans19->GetDouble(LDBIZ_SELL_MIN_FEE_FLOAT);
        strcpy(v_remark_info, lpTSCall1Ans19->GetString(LDBIZ_REMARK_INFO_STR));
        v_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // if @费用计算方式#  = 《费用计算方式-操作员》 and @T0操作员费用设置标志#=《T0操作员费用设置标志-设置》 then
        if (v_fee_calc_type  == 2 && v_T0_opor_fee_set_flag==1)
        {

               // set @全部费用临时值#=0;
               v_all_fee_for_tmp=0;
              //调用过程[事务_交易证券_T0_操作员成交费用计算]
              //组织事务请求
              if(lpTSCall1Ans20)
              {
                lpTSCall1Ans20->FreeMsg();
                lpTSCall1Ans20=NULL;
              }
              lpTSCall1Req20=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.100", 0);
              lpTSCall1Req20->SetInt32(LDTAG_PRIORITY, iPriority);
              lpTSCall1Req20->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
              lpTSCall1Req20->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
              lpTSCall1Req20->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
              lpTSCall1Req20->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
              lpTSCall1Req20->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
              lpTSCall1Req20->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
              lpTSCall1Req20->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
              lpTSCall1Req20->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
              lpTSCall1Req20->SetDouble(LDBIZ_BUY_MIN_FEE_FLOAT,v_buy_min_fee);
              lpTSCall1Req20->SetDouble(LDBIZ_SELL_MIN_FEE_FLOAT,v_sell_min_fee);
              lpTSCall1Req20->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
              lpTSCall1Req20->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
              lpTSCall1Req20->SetDouble(LDBIZ_BUY_FEE_RATIO_FLOAT,v_buy_fee_ratio);
              lpTSCall1Req20->SetDouble(LDBIZ_SELL_FEE_RATIO_FLOAT,v_sell_fee_ratio);
              glpTSSubcallSerives->SubCall(lpTSCall1Req20, &lpTSCall1Ans20, 5000);
              if(!lpTSCall1Ans20)  //  超时错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.100]subcall timed out!");
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(lpTSCall1Ans20->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans20->GetInt32(LDTAG_ERRORNO));
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans20->GetString(LDTAG_ERRORINFO));
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(strcmp(lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
              {
                  strcpy(v_error_code, lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans20->GetString(LDBIZ_ERROR_INFO_STR));
                  iRet=-1;
                  goto END;
              }
              //获取输出参数值
              strcpy(v_error_code, lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans20->GetString(LDBIZ_ERROR_INFO_STR));
              v_all_fee = lpTSCall1Ans20->GetDouble(LDBIZ_ALL_FEE_FLOAT);

         //T0 费用增加。Modify by wjp20181017 T0操作员交易佣金 覆盖 系统级，全部费用做轧差累加

               // set @全部费用临时值#=@全部费用#;
               v_all_fee_for_tmp=v_all_fee;
               //调用过程[事务_公共_公共接口_计算证券成交费用]
               //组织事务请求
               if(lpTSCall1Ans21)
               {
                 lpTSCall1Ans21->FreeMsg();
                 lpTSCall1Ans21=NULL;
               }
               lpTSCall1Req21=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
               lpTSCall1Req21->SetInt32(LDTAG_PRIORITY, iPriority);
               lpTSCall1Req21->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
               lpTSCall1Req21->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
               lpTSCall1Req21->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
               lpTSCall1Req21->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
               lpTSCall1Req21->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
               lpTSCall1Req21->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
               lpTSCall1Req21->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
               lpTSCall1Req21->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
               lpTSCall1Req21->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpTSCall1Req21->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
               lpTSCall1Req21->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
               lpTSCall1Req21->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
               lpTSCall1Req21->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
               lpTSCall1Req21->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
               lpTSCall1Req21->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
               lpTSCall1Req21->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
               lpTSCall1Req21->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
               lpTSCall1Req21->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
               lpTSCall1Req21->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
               lpTSCall1Req21->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
               glpTSSubcallSerives->SubCall(lpTSCall1Req21, &lpTSCall1Ans21, 5000);
               if(!lpTSCall1Ans21)  //  超时错误
               {
                   lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                   lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
                   iRet=-2;
                   goto ENDSYS;
               }
               else if(lpTSCall1Ans21->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
               {
                   lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans21->GetInt32(LDTAG_ERRORNO));
                   lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans21->GetString(LDTAG_ERRORINFO));
                   iRet=-2;
                   goto ENDSYS;
               }
               else if(strcmp(lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
               {
                   strcpy(v_error_code, lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR));
                   strcpy(v_error_info, lpTSCall1Ans21->GetString(LDBIZ_ERROR_INFO_STR));
                   iRet=-1;
                   goto END;
               }
               //获取输出参数值
               strcpy(v_error_code, lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR));
               strcpy(v_error_info, lpTSCall1Ans21->GetString(LDBIZ_ERROR_INFO_STR));
               v_trade_commis = lpTSCall1Ans21->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
               v_all_fee = lpTSCall1Ans21->GetDouble(LDBIZ_ALL_FEE_FLOAT);
               v_stamp_tax = lpTSCall1Ans21->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
               v_trans_fee = lpTSCall1Ans21->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
               v_brkage_fee = lpTSCall1Ans21->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
               v_SEC_charges = lpTSCall1Ans21->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
               v_other_fee = lpTSCall1Ans21->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
               v_other_commis = lpTSCall1Ans21->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
               v_trade_tax = lpTSCall1Ans21->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
               v_trade_cost_fee = lpTSCall1Ans21->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
               v_trade_system_use_fee = lpTSCall1Ans21->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
               v_stock_settle_fee = lpTSCall1Ans21->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);


                // set @全部费用#=@全部费用#+@全部费用临时值#-@交易佣金#;
                v_all_fee=v_all_fee+v_all_fee_for_tmp-v_trade_commis;

                // set @交易佣金#=@全部费用临时值#;
                v_trade_commis=v_all_fee_for_tmp;
        }
        // else
        else
        {

              //调用过程[事务_公共_公共接口_计算证券成交费用]
              //组织事务请求
              if(lpTSCall1Ans22)
              {
                lpTSCall1Ans22->FreeMsg();
                lpTSCall1Ans22=NULL;
              }
              lpTSCall1Req22=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
              lpTSCall1Req22->SetInt32(LDTAG_PRIORITY, iPriority);
              lpTSCall1Req22->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
              lpTSCall1Req22->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
              lpTSCall1Req22->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
              lpTSCall1Req22->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
              lpTSCall1Req22->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
              lpTSCall1Req22->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
              lpTSCall1Req22->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
              lpTSCall1Req22->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
              lpTSCall1Req22->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpTSCall1Req22->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpTSCall1Req22->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpTSCall1Req22->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
              lpTSCall1Req22->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
              lpTSCall1Req22->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
              lpTSCall1Req22->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
              lpTSCall1Req22->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
              lpTSCall1Req22->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
              lpTSCall1Req22->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
              lpTSCall1Req22->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
              lpTSCall1Req22->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
              glpTSSubcallSerives->SubCall(lpTSCall1Req22, &lpTSCall1Ans22, 5000);
              if(!lpTSCall1Ans22)  //  超时错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(lpTSCall1Ans22->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans22->GetInt32(LDTAG_ERRORNO));
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans22->GetString(LDTAG_ERRORINFO));
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(strcmp(lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
              {
                  strcpy(v_error_code, lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans22->GetString(LDBIZ_ERROR_INFO_STR));
                  iRet=-1;
                  goto END;
              }
              //获取输出参数值
              strcpy(v_error_code, lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans22->GetString(LDBIZ_ERROR_INFO_STR));
              v_trade_commis = lpTSCall1Ans22->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
              v_all_fee = lpTSCall1Ans22->GetDouble(LDBIZ_ALL_FEE_FLOAT);
              v_stamp_tax = lpTSCall1Ans22->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
              v_trans_fee = lpTSCall1Ans22->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
              v_brkage_fee = lpTSCall1Ans22->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
              v_SEC_charges = lpTSCall1Ans22->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
              v_other_fee = lpTSCall1Ans22->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
              v_other_commis = lpTSCall1Ans22->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
              v_trade_tax = lpTSCall1Ans22->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
              v_trade_cost_fee = lpTSCall1Ans22->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
              v_trade_system_use_fee = lpTSCall1Ans22->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
              v_stock_settle_fee = lpTSCall1Ans22->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);

        // end if;
        }

    }
    // else
    else
    {

         //调用过程[事务_公共_公共接口_计算证券成交费用]
         //组织事务请求
         if(lpTSCall1Ans23)
         {
           lpTSCall1Ans23->FreeMsg();
           lpTSCall1Ans23=NULL;
         }
         lpTSCall1Req23=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
         lpTSCall1Req23->SetInt32(LDTAG_PRIORITY, iPriority);
         lpTSCall1Req23->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
         lpTSCall1Req23->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
         lpTSCall1Req23->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
         lpTSCall1Req23->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
         lpTSCall1Req23->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
         lpTSCall1Req23->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
         lpTSCall1Req23->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
         lpTSCall1Req23->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
         lpTSCall1Req23->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
         lpTSCall1Req23->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
         lpTSCall1Req23->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
         lpTSCall1Req23->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
         lpTSCall1Req23->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
         lpTSCall1Req23->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
         lpTSCall1Req23->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
         lpTSCall1Req23->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
         lpTSCall1Req23->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
         lpTSCall1Req23->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
         lpTSCall1Req23->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
         lpTSCall1Req23->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
         glpTSSubcallSerives->SubCall(lpTSCall1Req23, &lpTSCall1Ans23, 5000);
         if(!lpTSCall1Ans23)  //  超时错误
         {
             lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
             lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
             iRet=-2;
             goto ENDSYS;
         }
         else if(lpTSCall1Ans23->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
         {
             lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans23->GetInt32(LDTAG_ERRORNO));
             lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans23->GetString(LDTAG_ERRORINFO));
             iRet=-2;
             goto ENDSYS;
         }
         else if(strcmp(lpTSCall1Ans23->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
         {
             strcpy(v_error_code, lpTSCall1Ans23->GetString(LDBIZ_ERROR_CODE_STR));
             strcpy(v_error_info, lpTSCall1Ans23->GetString(LDBIZ_ERROR_INFO_STR));
             iRet=-1;
             goto END;
         }
         //获取输出参数值
         strcpy(v_error_code, lpTSCall1Ans23->GetString(LDBIZ_ERROR_CODE_STR));
         strcpy(v_error_info, lpTSCall1Ans23->GetString(LDBIZ_ERROR_INFO_STR));
         v_trade_commis = lpTSCall1Ans23->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
         v_all_fee = lpTSCall1Ans23->GetDouble(LDBIZ_ALL_FEE_FLOAT);
         v_stamp_tax = lpTSCall1Ans23->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
         v_trans_fee = lpTSCall1Ans23->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
         v_brkage_fee = lpTSCall1Ans23->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
         v_SEC_charges = lpTSCall1Ans23->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
         v_other_fee = lpTSCall1Ans23->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
         v_other_commis = lpTSCall1Ans23->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
         v_trade_tax = lpTSCall1Ans23->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
         v_trade_cost_fee = lpTSCall1Ans23->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
         v_trade_system_use_fee = lpTSCall1Ans23->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
         v_stock_settle_fee = lpTSCall1Ans23->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);

    // end if;
    }

    //计算费用差
    //第一笔或者非港股通业务，【临时_交易系统使用费】会为0，第一笔之后的港股通业务，【临时_交易系统使用费】会大于0

    // if @临时_交易系统使用费# > 0 then
    if (v_tmp_trade_system_use_fee > 0)
    {

        // set @全部费用# = @全部费用# - @临时_全部费用# + @临时_交易系统使用费#;
        v_all_fee = v_all_fee - v_tmp_all_fee + v_tmp_trade_system_use_fee;
        //第一笔取自【交易系统使用费】，其余取自【临时_交易系统使用费】

        // set @交易系统使用费# = @临时_交易系统使用费#;
        v_trade_system_use_fee = v_tmp_trade_system_use_fee;
    }
    // else
    else
    {


        // set @全部费用# = @全部费用# - @临时_全部费用#;
        v_all_fee = v_all_fee - v_tmp_all_fee;
    // end if;
    }


    // set @交易佣金# = @交易佣金# - @临时_交易佣金#;
    v_trade_commis = v_trade_commis - v_tmp_trade_commis;

    // set @印花税# = @印花税# - @临时_印花税#;
    v_stamp_tax = v_stamp_tax - v_tmp_stamp_tax;

    // set @过户费# = @过户费# - @临时_过户费#;
    v_trans_fee = v_trans_fee - v_tmp_trans_fee;

    // set @经手费# = @经手费# - @临时_经手费#;
    v_brkage_fee = v_brkage_fee - v_tmp_brkage_fee;

    // set @证管费# = @证管费# - @临时_证管费#;
    v_SEC_charges = v_SEC_charges - v_tmp_SEC_charges;

    // set @其他费用# = @其他费用# - @临时_其他费用#;
    v_other_fee = v_other_fee - v_tmp_other_fee;

    // set @其他佣金# = @其他佣金# - @临时_其他佣金#;
    v_other_commis = v_other_commis - v_tmp_other_commis;

    // set @交易费# = @交易费# - @临时_交易费#;
    v_trade_cost_fee = v_trade_cost_fee - v_tmp_trade_cost_fee;

    // set @交易征费# = @交易征费# - @临时_交易征费#;
    v_trade_tax = v_trade_tax - v_tmp_trade_tax;

    // set @股份交收费# = @股份交收费# - @临时_股份交收费#;
    v_stock_settle_fee = v_stock_settle_fee - v_tmp_stock_settle_fee;
    //费用处理

    // set @成交价格# = @临时_成交价格#;
    v_strike_price = v_tmp_strike_price;

    // set @成交金额# = @临时_成交金额#;
    v_strike_amt = v_tmp_strike_amt;

    // set @成交数量# = @临时_成交数量#;
    v_strike_qty = v_tmp_strike_qty;

    // if @资产账户类型# = 《资产账户类型-融资融券》 and ((@订单方向# = 《订单方向-融资买入》 or @订单方向# = 《订单方向-融券卖出》 or @订单方向# = 《订单方向-卖券还款》 or @订单方向# = 《订单方向-买券还券》 or @订单方向# = 《订单方向-直接还款》 or @订单方向# = 《订单方向-直接还券》) or  (@资产账户类型# = 《资产账户类型-融资融券》 and @订单方向# = 《订单方向-卖出》 and  @存在负债标志# = 《存在负债标志-存在》 and @卖出自动还款# = 《卖出自动还款-是》)) then
    if (v_asset_acco_type == 5 && ((v_order_dir == 5 || v_order_dir == 6 || v_order_dir == 7 || v_order_dir == 8 || v_order_dir == 14 || v_order_dir == 15) ||  (v_asset_acco_type == 5 && v_order_dir == 2 &&  v_exist_debt_flag == 2 && v_sell_auto_back_debt == 0)))
    {
        //调用过程[事务_交易证券_报盘_处理融资融券成交回报费用]
        //组织事务请求
        if(lpTSCall1Ans24)
        {
          lpTSCall1Ans24->FreeMsg();
          lpTSCall1Ans24=NULL;
        }
        lpTSCall1Req24=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.135", 0);
        lpTSCall1Req24->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req24->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req24->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req24->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req24->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req24->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req24->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req24->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req24->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req24->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req24->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req24->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req24->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req24->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
        lpTSCall1Req24->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpTSCall1Req24->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req24->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpTSCall1Req24->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
        lpTSCall1Req24->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req24->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpTSCall1Req24->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req24->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
        lpTSCall1Req24->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
        lpTSCall1Req24->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req24->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpTSCall1Req24->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
        lpTSCall1Req24->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req24->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpTSCall1Req24->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpTSCall1Req24->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req24->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpTSCall1Req24->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
        lpTSCall1Req24->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
        lpTSCall1Req24->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
        lpTSCall1Req24->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
        lpTSCall1Req24->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
        lpTSCall1Req24->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
        lpTSCall1Req24->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
        lpTSCall1Req24->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
        lpTSCall1Req24->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
        lpTSCall1Req24->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
        lpTSCall1Req24->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
        lpTSCall1Req24->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
        lpTSCall1Req24->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
        lpTSCall1Req24->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
        lpTSCall1Req24->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
        lpTSCall1Req24->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
        lpTSCall1Req24->SetString(LDBIZ_TARGET_CODE_STR,v_target_code);
        lpTSCall1Req24->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
        lpTSCall1Req24->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpTSCall1Req24->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
        lpTSCall1Req24->SetInt32(LDBIZ_INTRST_DAYS_INT,v_intrst_days);
        lpTSCall1Req24->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpTSCall1Req24->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpTSCall1Req24->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
        lpTSCall1Req24->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
        lpTSCall1Req24->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
        lpTSCall1Req24->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
        lpTSCall1Req24->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
        lpTSCall1Req24->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        lpTSCall1Req24->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
        lpTSCall1Req24->SetInt32(LDBIZ_COST_CALC_TYPE_INT,v_cost_calc_type);
        lpTSCall1Req24->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpTSCall1Req24->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpTSCall1Req24->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
        lpTSCall1Req24->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpTSCall1Req24->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpTSCall1Req24->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
        lpTSCall1Req24->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
        lpTSCall1Req24->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
        lpTSCall1Req24->SetDouble(LDBIZ_STRIKE_OCCUR_AMT_FLOAT,v_strike_occur_amt);
        lpTSCall1Req24->SetDouble(LDBIZ_STRIKE_OCCUR_QTY_FLOAT,v_strike_occur_qty);
        lpTSCall1Req24->SetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT,v_trade_occur_amt);
        lpTSCall1Req24->SetDouble(LDBIZ_TRADE_OCCUR_QTY_FLOAT,v_trade_occur_qty);
        lpTSCall1Req24->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpTSCall1Req24->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        lpTSCall1Req24->SetString(LDBIZ_DETAIL_POSI_ID_STR_STR,v_detail_posi_id_str);
        lpTSCall1Req24->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req24->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
        lpTSCall1Req24->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
        lpTSCall1Req24->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpTSCall1Req24->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpTSCall1Req24->SetInt32(LDBIZ_FINA_RETURN_TYPE_INT,v_fina_return_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req24, &lpTSCall1Ans24, 5000);
        if(!lpTSCall1Ans24)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.135]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans24->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans24->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans24->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans24->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans24->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans24->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans24->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans24->GetString(LDBIZ_ERROR_INFO_STR));
        v_debt_type = lpTSCall1Ans24->GetInt32(LDBIZ_DEBT_TYPE_INT);
        strcpy(v_stock_code_no_str, lpTSCall1Ans24->GetString(LDBIZ_STOCK_CODE_NO_STR_STR));
        strcpy(v_exgp_detail_posi_id_str, lpTSCall1Ans24->GetString(LDBIZ_EXGP_DETAIL_POSI_ID_STR_STR));
        strcpy(v_asac_detail_posi_id_str, lpTSCall1Ans24->GetString(LDBIZ_ASAC_DETAIL_POSI_ID_STR_STR));
        strcpy(v_asac_stock_code_no_str, lpTSCall1Ans24->GetString(LDBIZ_ASAC_STOCK_CODE_NO_STR_STR));

    }
    // else
    else
    {

        //调用过程[事务_交易证券_报盘_处理成交回报费用]
        //组织事务请求
        if(lpTSCall1Ans25)
        {
          lpTSCall1Ans25->FreeMsg();
          lpTSCall1Ans25=NULL;
        }
        lpTSCall1Req25=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.23", 0);
        lpTSCall1Req25->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req25->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req25->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req25->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req25->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req25->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req25->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req25->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req25->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req25->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req25->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req25->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req25->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req25->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
        lpTSCall1Req25->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpTSCall1Req25->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req25->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpTSCall1Req25->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
        lpTSCall1Req25->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req25->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpTSCall1Req25->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req25->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
        lpTSCall1Req25->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
        lpTSCall1Req25->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req25->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpTSCall1Req25->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
        lpTSCall1Req25->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req25->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpTSCall1Req25->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpTSCall1Req25->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req25->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpTSCall1Req25->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
        lpTSCall1Req25->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
        lpTSCall1Req25->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
        lpTSCall1Req25->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
        lpTSCall1Req25->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
        lpTSCall1Req25->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
        lpTSCall1Req25->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
        lpTSCall1Req25->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
        lpTSCall1Req25->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
        lpTSCall1Req25->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
        lpTSCall1Req25->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
        lpTSCall1Req25->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
        lpTSCall1Req25->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
        lpTSCall1Req25->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
        lpTSCall1Req25->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
        lpTSCall1Req25->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
        lpTSCall1Req25->SetString(LDBIZ_TARGET_CODE_STR,v_target_code);
        lpTSCall1Req25->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
        lpTSCall1Req25->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpTSCall1Req25->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
        lpTSCall1Req25->SetInt32(LDBIZ_INTRST_DAYS_INT,v_intrst_days);
        lpTSCall1Req25->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpTSCall1Req25->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpTSCall1Req25->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
        lpTSCall1Req25->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
        lpTSCall1Req25->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
        lpTSCall1Req25->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
        lpTSCall1Req25->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
        lpTSCall1Req25->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        lpTSCall1Req25->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
        lpTSCall1Req25->SetInt32(LDBIZ_COST_CALC_TYPE_INT,v_cost_calc_type);
        lpTSCall1Req25->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpTSCall1Req25->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpTSCall1Req25->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
        lpTSCall1Req25->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpTSCall1Req25->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpTSCall1Req25->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
        lpTSCall1Req25->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
        lpTSCall1Req25->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
        lpTSCall1Req25->SetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT,v_trade_occur_amt);
        lpTSCall1Req25->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpTSCall1Req25->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        glpTSSubcallSerives->SubCall(lpTSCall1Req25, &lpTSCall1Ans25, 5000);
        if(!lpTSCall1Ans25)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.23]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans25->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans25->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans25->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans25->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans25->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans25->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans25->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans25->GetString(LDBIZ_ERROR_INFO_STR));

    // end if;
    }

    //调用过程[事务_交易证券_报盘_组合可用不足处理]
    //组织事务请求
    if(lpTSCall1Ans26)
    {
      lpTSCall1Ans26->FreeMsg();
      lpTSCall1Ans26=NULL;
    }
    lpTSCall1Req26=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.32", 0);
    lpTSCall1Req26->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req26->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req26->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req26->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req26->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req26->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req26->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req26->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req26->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req26->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req26->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req26->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req26->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req26->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req26->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpTSCall1Req26->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req26->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req26->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req26->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpTSCall1Req26->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpTSCall1Req26->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req26->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpTSCall1Req26->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req26->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
    lpTSCall1Req26->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
    lpTSCall1Req26->SetDouble(LDBIZ_EXGP_AVAIL_AMT_FLOAT,v_exgp_avail_amt);
    lpTSCall1Req26->SetDouble(LDBIZ_EXGP_AVAIL_QTY_FLOAT,v_exgp_avail_qty);
    lpTSCall1Req26->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
    lpTSCall1Req26->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpTSCall1Req26->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
    lpTSCall1Req26->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
    lpTSCall1Req26->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
    lpTSCall1Req26->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpTSCall1Req26->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
    lpTSCall1Req26->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpTSCall1Req26->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    glpTSSubcallSerives->SubCall(lpTSCall1Req26, &lpTSCall1Ans26, 5000);
    if(!lpTSCall1Ans26)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.32]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans26->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans26->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans26->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans26->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans26->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans26->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans26->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans26->GetString(LDBIZ_ERROR_INFO_STR));


    // set @当笔成交价格# = @临时_成交价格#;
    v_curr_strike_price = v_tmp_strike_price;

    // set @当笔成交金额# = @临时_成交金额#;
    v_curr_strike_amt = v_tmp_strike_amt;

    // set @当笔成交数量# = @临时_成交数量#;
    v_curr_strike_qty = v_tmp_strike_qty;

    // set @操作员编号# =@业务操作员编号#;
    v_opor_no =v_busi_opor_no;

    // set @更新次数# = 1;
    v_update_times = 1;

    // set @记录有效标志# =《记录有效标志-有效》;
    v_record_valid_flag =1;

    // [主动推送][secu.rptstrike][证券主推_报盘_成交主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.33", 0);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpPubMsg->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpPubMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
    lpPubMsg->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
    lpPubMsg->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
    lpPubMsg->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
    lpPubMsg->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
    lpPubMsg->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
    lpPubMsg->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
    lpPubMsg->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
    lpPubMsg->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
    lpPubMsg->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
    lpPubMsg->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
    lpPubMsg->SetInt32(LDBIZ_RECORD_VALID_FLAG_INT,v_record_valid_flag);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.rptstrike", lpPubMsg);


    // set @成交金额# = @总成交金额#;
    v_strike_amt = v_total_strike_amt;

    // set @成交数量# = @总成交数量#;
    v_strike_qty = v_total_strike_qty;

    // set @更新次数# = @临时_更新次数#;
    v_update_times = v_tmp_update_times;

    // set @撤单状态# = "0";
    strcpy(v_wtdraw_status,"0");

    // [主动推送][secu.order][证券主推_订单_订单主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
    lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
    lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);

    //调用过程[事务_交易证券_主推接口_获取汇总订单成交信息]
    //组织事务请求
    if(lpTSCall1Ans27)
    {
      lpTSCall1Ans27->FreeMsg();
      lpTSCall1Ans27=NULL;
    }
    lpTSCall1Req27=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.21", 0);
    lpTSCall1Req27->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req27->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req27->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req27->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req27->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req27->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req27->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req27->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req27->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req27->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpTSCall1Req27->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpTSCall1Req27->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpTSCall1Req27->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    glpTSSubcallSerives->SubCall(lpTSCall1Req27, &lpTSCall1Ans27, 5000);
    if(!lpTSCall1Ans27)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.21]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans27->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans27->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans27->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans27->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans27->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans27->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans27->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans27->GetString(LDBIZ_ERROR_INFO_STR));
    v_sum_order_row_id = lpTSCall1Ans27->GetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64);
    v_sum_order_opor_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT);
    v_sum_order_co_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_CO_NO_INT);
    v_sum_order_pd_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_PD_NO_INT);
    v_sum_order_exch_group_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT);
    v_sum_order_asset_acco_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT);
    v_sum_order_pass_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT);
    strcpy(v_sum_order_exch_crncy_type, lpTSCall1Ans27->GetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR));
    v_sum_order_stock_code_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT);
    v_sum_order_trade_code_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT);
    v_sum_order_target_code_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT);
    v_sum_order_external_no = lpTSCall1Ans27->GetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64);
    v_sum_order_date = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_DATE_INT);
    v_sum_order_batch_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT);
    v_sum_order_dir = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_DIR_INT);
    v_sum_order_price_type = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT);
    v_sum_order_price = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT);
    v_sum_order_qty = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT);
    strcpy(v_order_sum_status, lpTSCall1Ans27->GetString(LDBIZ_ORDER_SUM_STATUS_STR));
    v_sum_order_wtdraw_qty = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT);
    v_sum_order_waste_qty = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT);
    v_sum_order_strike_amt = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT);
    v_sum_order_strike_qty = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT);
    v_sum_order_strike_aver_price = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT);
    v_sum_order_net_price_flag = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT);
    v_sum_order_bond_accr_intrst = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT);
    v_sum_order_bond_rate_type = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT);
    v_sum_order_par_value = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT);
    v_sum_order_impawn_ratio = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT);
    strcpy(v_sum_order_oper_way, lpTSCall1Ans27->GetString(LDBIZ_SUM_ORDER_OPER_WAY_STR));
    v_sum_order_update_times = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT);
    v_sum_strike_row_id = lpTSCall1Ans27->GetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64);
    v_sum_strike_opor_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT);
    v_sum_strike_co_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT);
    v_sum_strike_pd_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT);
    v_sum_strike_exch_group_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT);
    v_sum_strike_asset_acco_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT);
    v_sum_strike_pass_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT);
    strcpy(v_sum_strike_out_acco, lpTSCall1Ans27->GetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR));
    v_sum_strike_stock_acco_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT);
    v_sum_strike_stock_code_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT);
    v_sum_strike_comm_id = lpTSCall1Ans27->GetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64);
    v_sum_strike_report_date = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT);
    strcpy(v_sum_strike_report_no, lpTSCall1Ans27->GetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR));
    v_sum_strike_order_date = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT);
    v_sum_strike_order_id = lpTSCall1Ans27->GetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64);
    v_sum_strike_order_dir = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT);
    v_sum_strike_order_price = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT);
    v_sum_strike_order_qty = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT);
    v_sum_strike_strike_qty = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT);
    v_sum_strike_strike_amt = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT);
    v_sum_strike_all_fee = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT);
    v_sum_strike_stamp_tax = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT);
    v_sum_strike_trans_fee = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT);
    v_sum_strike_brkage_fee = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT);
    v_sum_strike_SEC_charges = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT);
    v_sum_strike_other_fee = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT);
    v_sum_strike_trade_commis = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT);
    v_sum_strike_other_commis = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT);
    v_sum_trade_tax = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT);
    v_sum_trade_cost_fee = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT);
    v_sum_trade_system_use_fee = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT);
    v_sum_stock_settle_fee = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT);
    v_sum_strike_net_price_flag = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT);
    v_sum_strike_bond_accr_intrst = lpTSCall1Ans27->GetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT);
    v_sum_strike_bond_rate_type = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT);
    strcpy(v_sum_strike_order_oper_way, lpTSCall1Ans27->GetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR));
    v_sum_strike_exter_comm_flag = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT);
    v_sum_strike_update_times = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT);
    v_sum_strike_order_batch_no = lpTSCall1Ans27->GetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT);
    v_sum_external_no = lpTSCall1Ans27->GetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64);


    // if @订单批号# <> 0 then
    if (v_order_batch_no != 0)
    {

        // [主动推送][secu.ordertotal][证券主推_订单_订单汇总主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.21", 0);
        lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64,v_sum_order_row_id);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT,v_sum_order_opor_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_CO_NO_INT,v_sum_order_co_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PD_NO_INT,v_sum_order_pd_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT,v_sum_order_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT,v_sum_order_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT,v_sum_order_pass_no);
        lpPubMsg->SetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR,v_sum_order_exch_crncy_type);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT,v_sum_order_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT,v_sum_order_trade_code_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT,v_sum_order_target_code_no);
        lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64,v_sum_order_external_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DATE_INT,v_sum_order_date);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT,v_sum_order_batch_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DIR_INT,v_sum_order_dir);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT,v_sum_order_price_type);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT,v_sum_order_price);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT,v_sum_order_qty);
        lpPubMsg->SetString(LDBIZ_ORDER_SUM_STATUS_STR,v_order_sum_status);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT,v_sum_order_wtdraw_qty);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT,v_sum_order_waste_qty);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT,v_sum_order_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT,v_sum_order_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT,v_sum_order_strike_aver_price);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT,v_sum_order_net_price_flag);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT,v_sum_order_bond_accr_intrst);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT,v_sum_order_bond_rate_type);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT,v_sum_order_par_value);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT,v_sum_order_impawn_ratio);
        lpPubMsg->SetString(LDBIZ_SUM_ORDER_OPER_WAY_STR,v_sum_order_oper_way);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT,v_sum_order_update_times);
        glpPubSub_Interface->PubTopics("secu.ordertotal", lpPubMsg);

    // end if;
    }


    // [主动推送][secu.rptstriketotal][证券主推_报盘_成交汇总主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.34", 0);
    lpPubMsg->SetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64,v_sum_strike_row_id);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT,v_sum_strike_opor_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT,v_sum_strike_co_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT,v_sum_strike_pd_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT,v_sum_strike_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT,v_sum_strike_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT,v_sum_strike_pass_no);
    lpPubMsg->SetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR,v_sum_strike_out_acco);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT,v_sum_strike_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT,v_sum_strike_stock_code_no);
    lpPubMsg->SetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64,v_sum_strike_comm_id);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT,v_sum_strike_report_date);
    lpPubMsg->SetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR,v_sum_strike_report_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT,v_sum_strike_order_date);
    lpPubMsg->SetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64,v_sum_strike_order_id);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT,v_sum_strike_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT,v_sum_strike_order_dir);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT,v_sum_strike_order_price);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT,v_sum_strike_order_qty);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT,v_sum_strike_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT,v_sum_strike_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT,v_sum_strike_all_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT,v_sum_strike_stamp_tax);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT,v_sum_strike_trans_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT,v_sum_strike_brkage_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT,v_sum_strike_SEC_charges);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT,v_sum_strike_other_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT,v_sum_strike_trade_commis);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT,v_sum_strike_other_commis);
    lpPubMsg->SetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT,v_sum_trade_tax);
    lpPubMsg->SetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT,v_sum_trade_cost_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT,v_sum_trade_system_use_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT,v_sum_stock_settle_fee);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT,v_sum_strike_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT,v_sum_strike_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT,v_sum_strike_bond_rate_type);
    lpPubMsg->SetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR,v_sum_strike_order_oper_way);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT,v_sum_strike_exter_comm_flag);
    lpPubMsg->SetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64,v_sum_external_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT,v_sum_strike_update_times);
    glpPubSub_Interface->PubTopics("secu.rptstriketotal", lpPubMsg);


    // if @指令序号# > 0 then
    if (v_comm_id > 0)
    {
        //调用过程[事务_交易证券_主推接口_获取指令混合信息]
        //组织事务请求
        if(lpTSCall1Ans28)
        {
          lpTSCall1Ans28->FreeMsg();
          lpTSCall1Ans28=NULL;
        }
        lpTSCall1Req28=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
        lpTSCall1Req28->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req28->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req28->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req28->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req28->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req28->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req28->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req28->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req28->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        glpTSSubcallSerives->SubCall(lpTSCall1Req28, &lpTSCall1Ans28, 5000);
        if(!lpTSCall1Ans28)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans28->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans28->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans28->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans28->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans28->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans28->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans28->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans28->GetString(LDBIZ_ERROR_INFO_STR));
        v_init_date = lpTSCall1Ans28->GetInt32(LDBIZ_INIT_DATE_INT);
        v_co_no = lpTSCall1Ans28->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans28->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans28->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans28->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_pass_no = lpTSCall1Ans28->GetInt32(LDBIZ_PASS_NO_INT);
        strcpy(v_out_acco, lpTSCall1Ans28->GetString(LDBIZ_OUT_ACCO_STR));
        strcpy(v_exch_crncy_type, lpTSCall1Ans28->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
        v_stock_acco_no = lpTSCall1Ans28->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans28->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        v_stock_type = lpTSCall1Ans28->GetInt32(LDBIZ_STOCK_TYPE_INT);
        v_comm_date = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_time = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_TIME_INT);
        v_comm_batch_no = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_opor = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_OPOR_INT);
        v_comm_executor = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_comm_dir = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_DIR_INT);
        v_comm_limit_price = lpTSCall1Ans28->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
        v_limit_actual_price = lpTSCall1Ans28->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
        v_comm_qty = lpTSCall1Ans28->GetDouble(LDBIZ_COMM_QTY_FLOAT);
        v_comm_amt = lpTSCall1Ans28->GetDouble(LDBIZ_COMM_AMT_FLOAT);
        v_order_qty = lpTSCall1Ans28->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
        v_comm_cancel_qty = lpTSCall1Ans28->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
        v_strike_amt = lpTSCall1Ans28->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
        v_strike_qty = lpTSCall1Ans28->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
        v_comm_frozen_amt = lpTSCall1Ans28->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
        v_comm_frozen_qty = lpTSCall1Ans28->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
        strcpy(v_strike_status, lpTSCall1Ans28->GetString(LDBIZ_STRIKE_STATUS_STR));
        strcpy(v_comm_status, lpTSCall1Ans28->GetString(LDBIZ_COMM_STATUS_STR));
        v_comm_begin_date = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
        v_comm_end_date = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_END_DATE_INT);
        v_comm_begin_time = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
        v_comm_end_time = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_END_TIME_INT);
        v_comm_comple_date = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
        v_comm_comple_time = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
        v_comm_appr_date = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
        v_comm_appr_time = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
        strcpy(v_comm_appr_status, lpTSCall1Ans28->GetString(LDBIZ_COMM_APPR_STATUS_STR));
        v_comm_appr_oper = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
        strcpy(v_comm_appr_remark, lpTSCall1Ans28->GetString(LDBIZ_COMM_APPR_REMARK_STR));
        v_basket_id = lpTSCall1Ans28->GetInt64(LDBIZ_BASKET_ID_INT64);
        v_net_price_flag = lpTSCall1Ans28->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
        v_bond_accr_intrst = lpTSCall1Ans28->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
        v_bond_rate_type = lpTSCall1Ans28->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
        strcpy(v_comm_oper_way, lpTSCall1Ans28->GetString(LDBIZ_COMM_OPER_WAY_STR));
        v_exter_comm_flag = lpTSCall1Ans28->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
        v_comm_comple_flag = lpTSCall1Ans28->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
        v_strategy_capt_qty = lpTSCall1Ans28->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
        v_strategy_order_qty = lpTSCall1Ans28->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
        strcpy(v_contra_no, lpTSCall1Ans28->GetString(LDBIZ_CONTRA_NO_STR));
        strcpy(v_comm_remark_info, lpTSCall1Ans28->GetString(LDBIZ_COMM_REMARK_INFO_STR));
        v_disp_opor = lpTSCall1Ans28->GetInt32(LDBIZ_DISP_OPOR_INT);
        v_disp_status = lpTSCall1Ans28->GetInt32(LDBIZ_DISP_STATUS_INT);
        v_read_flag = lpTSCall1Ans28->GetInt32(LDBIZ_READ_FLAG_INT);
        v_update_times = lpTSCall1Ans28->GetInt32(LDBIZ_UPDATE_TIMES_INT);
        v_sum_comm_row_id = lpTSCall1Ans28->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
        v_sum_comm_co_no = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
        v_sum_comm_pd_no = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
        v_sum_comm_exch_group_no = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
        v_sum_comm_asset_acco_no = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
        v_sum_comm_pass_no = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
        strcpy(v_sum_comm_out_acco, lpTSCall1Ans28->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
        strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans28->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
        v_sum_comm_stock_code_no = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
        v_sum_comm_date = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
        v_sum_comm_time = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
        v_sum_comm_batch_no = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
        v_sum_comm_opor = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
        v_sum_comm_executor = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
        v_sum_comm_dir = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
        v_sum_comm_limit_price = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
        v_sum_comm_qty = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
        v_sum_comm_amt = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
        v_sum_comm_order_qty = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
        v_sum_comm_cancel_qty = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
        v_sum_comm_await_cancel_qty = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
        v_sum_comm_strike_amt = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
        v_sum_comm_strike_qty = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
        strcpy(v_sum_comm_strike_status, lpTSCall1Ans28->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
        strcpy(v_comm_sum_status, lpTSCall1Ans28->GetString(LDBIZ_COMM_SUM_STATUS_STR));
        v_sum_comm_begin_date = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
        v_sum_comm_end_date = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
        v_sum_comm_begin_time = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
        v_sum_comm_end_time = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
        v_sum_comm_comple_date = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
        v_sum_comm_comple_time = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
        v_sum_comm_max_comm_comple_date = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
        v_sum_comm_max_comm_comple_time = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
        v_sum_comm_appr_date = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
        v_sum_comm_appr_time = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
        v_sum_comm_appr_qty = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
        strcpy(v_comm_sum_approve_status, lpTSCall1Ans28->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
        v_sum_comm_basket_id = lpTSCall1Ans28->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
        v_sum_comm_net_price_flag = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
        v_sum_comm_bond_accr_intrst = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
        v_sum_comm_bond_rate_type = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
        strcpy(v_sum_comm_oper_way, lpTSCall1Ans28->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
        v_sum_comm_exter_comm_flag = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
        v_sum_buy_order_qty = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
        v_sum_sell_order_qty = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
        v_sum_buy_comm_qty = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
        v_sum_sell_comm_qty = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
        v_sum_buy_strike_qty = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
        v_sum_sell_strike_qty = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
        v_sum_buy_strike_amt = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
        v_sum_sell_strike_amt = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
        v_sum_buy_comm_amt = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
        v_sum_sell_comm_amt = lpTSCall1Ans28->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
        strcpy(v_sum_comm_remark_info, lpTSCall1Ans28->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
        v_sum_comm_update_times = lpTSCall1Ans28->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
        strcpy(v_acco_concat_info, lpTSCall1Ans28->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


        // [主动推送][secu.comm][证券主推_指令_指令主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
        lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
        lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
        lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
        lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
        lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
        lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
        lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
        lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
        lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
        lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
        lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
        lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
        lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
        lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
        lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
        lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
        lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
        lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
        lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
        lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


        // if @指令批号# > 0 then
        if (v_comm_batch_no > 0)
        {

            // set @指令备注信息#= @汇总指令备注信息#;
            strcpy(v_comm_remark_info,v_sum_comm_remark_info);

            // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
            lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
            lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
            lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
            lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
            lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
            lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
            lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
            glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

        // end if;
        }

    // end if;
    }

    //增强交易主推

    // if (@订单操作方式# = 《订单操作方式-增强交易》 or @订单操作方式# = 《订单操作方式-增强交易平仓》) then
    if ((strcmp(v_order_oper_way , "14")==0 || strcmp(v_order_oper_way , "51")==0))
    {
        //券源
        //调用过程[事务_交易证券_主推接口_获取券源信息]
        //组织事务请求
        if(lpTSCall1Ans29)
        {
          lpTSCall1Ans29->FreeMsg();
          lpTSCall1Ans29=NULL;
        }
        lpTSCall1Req29=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.35", 0);
        lpTSCall1Req29->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req29->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req29->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req29->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req29->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req29->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req29->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req29->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req29->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        lpTSCall1Req29->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req29->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req29->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req29->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req29->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req29, &lpTSCall1Ans29, 5000);
        if(!lpTSCall1Ans29)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.35]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans29->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans29->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans29->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans29->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans29->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans29->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans29->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans29->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans29->GetInt64(LDBIZ_ROW_ID_INT64);
        v_co_no = lpTSCall1Ans29->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans29->GetInt32(LDBIZ_PD_NO_INT);
        strcpy(v_stock_code, lpTSCall1Ans29->GetString(LDBIZ_STOCK_CODE_STR));
        v_exch_no = lpTSCall1Ans29->GetInt32(LDBIZ_EXCH_NO_INT);
        v_source_stock_qty = lpTSCall1Ans29->GetDouble(LDBIZ_SOURCE_STOCK_QTY_FLOAT);
        v_single_limit_qty = lpTSCall1Ans29->GetDouble(LDBIZ_SINGLE_LIMIT_QTY_FLOAT);
        v_assigned_qty = lpTSCall1Ans29->GetDouble(LDBIZ_ASSIGNED_QTY_FLOAT);
        v_trade_releas_qty = lpTSCall1Ans29->GetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT);
        v_trade_capt_qty = lpTSCall1Ans29->GetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT);
        v_strike_releas_qty = lpTSCall1Ans29->GetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT);
        v_strike_capt_qty = lpTSCall1Ans29->GetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT);
        v_over_night_pandl = lpTSCall1Ans29->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans29->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_total_open_posi_fee = lpTSCall1Ans29->GetDouble(LDBIZ_TOTAL_OPEN_POSI_FEE_FLOAT);
        v_total_close_posi_fee = lpTSCall1Ans29->GetDouble(LDBIZ_TOTAL_CLOSE_POSI_FEE_FLOAT);
        v_out_order_releas_qty = lpTSCall1Ans29->GetDouble(LDBIZ_OUT_ORDER_RELEAS_QTY_FLOAT);
        v_out_order_capt_qty = lpTSCall1Ans29->GetDouble(LDBIZ_OUT_ORDER_CAPT_QTY_FLOAT);
        v_out_strike_releas_qty = lpTSCall1Ans29->GetDouble(LDBIZ_OUT_STRIKE_RELEAS_QTY_FLOAT);
        v_out_strike_capt_qty = lpTSCall1Ans29->GetDouble(LDBIZ_OUT_STRIKE_CAPT_QTY_FLOAT);
        strcpy(v_remark_info, lpTSCall1Ans29->GetString(LDBIZ_REMARK_INFO_STR));
        v_buy_avail_qty = lpTSCall1Ans29->GetDouble(LDBIZ_BUY_AVAIL_QTY_FLOAT);
        v_sell_avail_qty = lpTSCall1Ans29->GetDouble(LDBIZ_SELL_AVAIL_QTY_FLOAT);
        v_posi_qty = lpTSCall1Ans29->GetDouble(LDBIZ_POSI_QTY_FLOAT);
        v_today_trade_fee = lpTSCall1Ans29->GetDouble(LDBIZ_TODAY_TRADE_FEE_FLOAT);
        v_today_pandl = lpTSCall1Ans29->GetDouble(LDBIZ_TODAY_PANDL_FLOAT);
        v_diff_qty = lpTSCall1Ans29->GetDouble(LDBIZ_DIFF_QTY_FLOAT);
        v_over_night_trade_buy_qty = lpTSCall1Ans29->GetDouble(LDBIZ_OVER_NIGHT_TRADE_BUY_QTY_FLOAT);
        v_over_night_trade_sell_qty = lpTSCall1Ans29->GetDouble(LDBIZ_OVER_NIGHT_TRADE_SELL_QTY_FLOAT);
        v_over_night_strike_sell_qty = lpTSCall1Ans29->GetDouble(LDBIZ_OVER_NIGHT_STRIKE_SELL_QTY_FLOAT);
        v_over_night_sumtrd_sell_qty = lpTSCall1Ans29->GetDouble(LDBIZ_OVER_NIGHT_SUMTRD_SELL_QTY_FLOAT);
        v_over_night_sumstk_sell_qty = lpTSCall1Ans29->GetDouble(LDBIZ_OVER_NIGHT_SUMSTK_SELL_QTY_FLOAT);
        v_update_times = lpTSCall1Ans29->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0stocksource][证券主推_增强交易_券源变化主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.701", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetDouble(LDBIZ_SOURCE_STOCK_QTY_FLOAT,v_source_stock_qty);
        lpPubMsg->SetDouble(LDBIZ_SINGLE_LIMIT_QTY_FLOAT,v_single_limit_qty);
        lpPubMsg->SetDouble(LDBIZ_ASSIGNED_QTY_FLOAT,v_assigned_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT,v_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT,v_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT,v_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT,v_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
        lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_OPEN_POSI_FEE_FLOAT,v_total_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_CLOSE_POSI_FEE_FLOAT,v_total_close_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_OUT_ORDER_RELEAS_QTY_FLOAT,v_out_order_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_OUT_ORDER_CAPT_QTY_FLOAT,v_out_order_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_OUT_STRIKE_RELEAS_QTY_FLOAT,v_out_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_OUT_STRIKE_CAPT_QTY_FLOAT,v_out_strike_capt_qty);
        lpPubMsg->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
        lpPubMsg->SetDouble(LDBIZ_BUY_AVAIL_QTY_FLOAT,v_buy_avail_qty);
        lpPubMsg->SetDouble(LDBIZ_SELL_AVAIL_QTY_FLOAT,v_sell_avail_qty);
        lpPubMsg->SetDouble(LDBIZ_POSI_QTY_FLOAT,v_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_TODAY_TRADE_FEE_FLOAT,v_today_trade_fee);
        lpPubMsg->SetDouble(LDBIZ_TODAY_PANDL_FLOAT,v_today_pandl);
        lpPubMsg->SetDouble(LDBIZ_DIFF_QTY_FLOAT,v_diff_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_TRADE_BUY_QTY_FLOAT,v_over_night_trade_buy_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_TRADE_SELL_QTY_FLOAT,v_over_night_trade_sell_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_STRIKE_SELL_QTY_FLOAT,v_over_night_strike_sell_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_SUMTRD_SELL_QTY_FLOAT,v_over_night_sumtrd_sell_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_SUMSTK_SELL_QTY_FLOAT,v_over_night_sumstk_sell_qty);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0stocksource", lpPubMsg);

        //账户汇总信息
        //调用过程[事务_交易证券_主推接口_获取账户汇总信息查询]
        //组织事务请求
        if(lpTSCall1Ans30)
        {
          lpTSCall1Ans30->FreeMsg();
          lpTSCall1Ans30=NULL;
        }
        lpTSCall1Req30=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.37", 0);
        lpTSCall1Req30->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req30->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req30->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req30->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req30->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req30->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req30->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req30->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req30->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req30, &lpTSCall1Ans30, 5000);
        if(!lpTSCall1Ans30)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.37]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans30->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans30->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans30->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans30->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans30->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans30->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans30->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans30->GetString(LDBIZ_ERROR_INFO_STR));
        v_trade_amt = lpTSCall1Ans30->GetDouble(LDBIZ_TRADE_AMT_FLOAT);
        v_trade_qty = lpTSCall1Ans30->GetDouble(LDBIZ_TRADE_QTY_FLOAT);
        v_realize_pandl = lpTSCall1Ans30->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
        v_yield_rate = lpTSCall1Ans30->GetDouble(LDBIZ_YIELD_RATE_FLOAT);
        v_all_fee = lpTSCall1Ans30->GetDouble(LDBIZ_ALL_FEE_FLOAT);
        v_over_night_pandl = lpTSCall1Ans30->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans30->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_update_times = lpTSCall1Ans30->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0accosum][证券主推_增强交易_t0账户汇总主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.703", 0);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetDouble(LDBIZ_TRADE_AMT_FLOAT,v_trade_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_QTY_FLOAT,v_trade_qty);
        lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_YIELD_RATE_FLOAT,v_yield_rate);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
        lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0accosum", lpPubMsg);

        //可用金额
        //调用过程[事务_交易证券_主推接口_获取t0操作员可用金额]
        //组织事务请求
        if(lpTSCall1Ans31)
        {
          lpTSCall1Ans31->FreeMsg();
          lpTSCall1Ans31=NULL;
        }
        lpTSCall1Req31=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.38", 0);
        lpTSCall1Req31->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req31->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req31->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req31->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req31->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req31->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req31->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req31->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req31->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req31->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req31, &lpTSCall1Ans31, 5000);
        if(!lpTSCall1Ans31)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.38]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans31->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans31->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans31->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans31->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans31->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans31->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans31->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans31->GetString(LDBIZ_ERROR_INFO_STR));
        v_avail_amt = lpTSCall1Ans31->GetDouble(LDBIZ_AVAIL_AMT_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans31->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_update_times = lpTSCall1Ans31->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0availcapital][证券主推_增强交易_t0操作员可用金额主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.704", 0);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetDouble(LDBIZ_AVAIL_AMT_FLOAT,v_avail_amt);
        lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0availcapital", lpPubMsg);

        //持仓汇总
        //调用过程[事务_交易证券_主推接口_获取t0持仓汇总信息]
        //组织事务请求
        if(lpTSCall1Ans32)
        {
          lpTSCall1Ans32->FreeMsg();
          lpTSCall1Ans32=NULL;
        }
        lpTSCall1Req32=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.40", 0);
        lpTSCall1Req32->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req32->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req32->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req32->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req32->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req32->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req32->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req32->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req32->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req32->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req32->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req32->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req32, &lpTSCall1Ans32, 5000);
        if(!lpTSCall1Ans32)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.40]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans32->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans32->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans32->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans32->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans32->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans32->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans32->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans32->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans32->GetInt64(LDBIZ_ROW_ID_INT64);
        v_co_no = lpTSCall1Ans32->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans32->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_no = lpTSCall1Ans32->GetInt32(LDBIZ_EXCH_NO_INT);
        strcpy(v_stock_code, lpTSCall1Ans32->GetString(LDBIZ_STOCK_CODE_STR));
        v_total_long_curr_qty = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_LONG_CURR_QTY_FLOAT);
        v_total_short_curr_qty = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_SHORT_CURR_QTY_FLOAT);
        v_total_long_open_posi_value = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_LONG_OPEN_POSI_VALUE_FLOAT);
        v_total_short_open_posi_value = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_SHORT_OPEN_POSI_VALUE_FLOAT);
        v_total_long_open_posi_fee = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_LONG_OPEN_POSI_FEE_FLOAT);
        v_total_short_open_posi_fee = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_SHORT_OPEN_POSI_FEE_FLOAT);
        v_total_long_close_posi_value = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_LONG_CLOSE_POSI_VALUE_FLOAT);
        v_total_short_close_posi_value = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_SHORT_CLOSE_POSI_VALUE_FLOAT);
        v_total_long_close_posi_qty = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_LONG_CLOSE_POSI_QTY_FLOAT);
        v_total_short_close_posi_qty = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_SHORT_CLOSE_POSI_QTY_FLOAT);
        v_total_long_close_posi_fee = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_LONG_CLOSE_POSI_FEE_FLOAT);
        v_total_short_close_posi_fee = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_SHORT_CLOSE_POSI_FEE_FLOAT);
        v_total_realize_pandl = lpTSCall1Ans32->GetDouble(LDBIZ_TOTAL_REALIZE_PANDL_FLOAT);
        v_long_curr_qty = lpTSCall1Ans32->GetDouble(LDBIZ_LONG_CURR_QTY_FLOAT);
        v_short_curr_qty = lpTSCall1Ans32->GetDouble(LDBIZ_SHORT_CURR_QTY_FLOAT);
        v_long_open_posi_value = lpTSCall1Ans32->GetDouble(LDBIZ_LONG_OPEN_POSI_VALUE_FLOAT);
        v_short_open_posi_value = lpTSCall1Ans32->GetDouble(LDBIZ_SHORT_OPEN_POSI_VALUE_FLOAT);
        v_long_open_posi_fee = lpTSCall1Ans32->GetDouble(LDBIZ_LONG_OPEN_POSI_FEE_FLOAT);
        v_short_open_posi_fee = lpTSCall1Ans32->GetDouble(LDBIZ_SHORT_OPEN_POSI_FEE_FLOAT);
        v_long_close_posi_qty = lpTSCall1Ans32->GetDouble(LDBIZ_LONG_CLOSE_POSI_QTY_FLOAT);
        v_short_close_posi_qty = lpTSCall1Ans32->GetDouble(LDBIZ_SHORT_CLOSE_POSI_QTY_FLOAT);
        v_long_close_posi_value = lpTSCall1Ans32->GetDouble(LDBIZ_LONG_CLOSE_POSI_VALUE_FLOAT);
        v_short_close_posi_value = lpTSCall1Ans32->GetDouble(LDBIZ_SHORT_CLOSE_POSI_VALUE_FLOAT);
        v_long_close_posi_fee = lpTSCall1Ans32->GetDouble(LDBIZ_LONG_CLOSE_POSI_FEE_FLOAT);
        v_short_close_posi_fee = lpTSCall1Ans32->GetDouble(LDBIZ_SHORT_CLOSE_POSI_FEE_FLOAT);
        v_realize_pandl = lpTSCall1Ans32->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
        v_over_night_pandl = lpTSCall1Ans32->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
        v_open_posi_date = lpTSCall1Ans32->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
        v_open_posi_time = lpTSCall1Ans32->GetInt32(LDBIZ_OPEN_POSI_TIME_INT);
        v_posi_qty = lpTSCall1Ans32->GetDouble(LDBIZ_POSI_QTY_FLOAT);
        v_curr_qty = lpTSCall1Ans32->GetDouble(LDBIZ_CURR_QTY_FLOAT);
        v_open_posi_value = lpTSCall1Ans32->GetDouble(LDBIZ_OPEN_POSI_VALUE_FLOAT);
        v_open_posi_fee = lpTSCall1Ans32->GetDouble(LDBIZ_OPEN_POSI_FEE_FLOAT);
        v_cost_price = lpTSCall1Ans32->GetDouble(LDBIZ_COST_PRICE_FLOAT);
        v_update_times = lpTSCall1Ans32->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0posisum][证券主推_增强交易_t0持仓汇总主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.706", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_LONG_CURR_QTY_FLOAT,v_total_long_curr_qty);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_SHORT_CURR_QTY_FLOAT,v_total_short_curr_qty);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_LONG_OPEN_POSI_VALUE_FLOAT,v_total_long_open_posi_value);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_SHORT_OPEN_POSI_VALUE_FLOAT,v_total_short_open_posi_value);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_LONG_OPEN_POSI_FEE_FLOAT,v_total_long_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_SHORT_OPEN_POSI_FEE_FLOAT,v_total_short_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_LONG_CLOSE_POSI_VALUE_FLOAT,v_total_long_close_posi_value);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_SHORT_CLOSE_POSI_VALUE_FLOAT,v_total_short_close_posi_value);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_LONG_CLOSE_POSI_QTY_FLOAT,v_total_long_close_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_SHORT_CLOSE_POSI_QTY_FLOAT,v_total_short_close_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_LONG_CLOSE_POSI_FEE_FLOAT,v_total_long_close_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_SHORT_CLOSE_POSI_FEE_FLOAT,v_total_short_close_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_REALIZE_PANDL_FLOAT,v_total_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_LONG_CURR_QTY_FLOAT,v_long_curr_qty);
        lpPubMsg->SetDouble(LDBIZ_SHORT_CURR_QTY_FLOAT,v_short_curr_qty);
        lpPubMsg->SetDouble(LDBIZ_LONG_OPEN_POSI_VALUE_FLOAT,v_long_open_posi_value);
        lpPubMsg->SetDouble(LDBIZ_SHORT_OPEN_POSI_VALUE_FLOAT,v_short_open_posi_value);
        lpPubMsg->SetDouble(LDBIZ_LONG_OPEN_POSI_FEE_FLOAT,v_long_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_SHORT_OPEN_POSI_FEE_FLOAT,v_short_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_LONG_CLOSE_POSI_QTY_FLOAT,v_long_close_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_SHORT_CLOSE_POSI_QTY_FLOAT,v_short_close_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_LONG_CLOSE_POSI_VALUE_FLOAT,v_long_close_posi_value);
        lpPubMsg->SetDouble(LDBIZ_SHORT_CLOSE_POSI_VALUE_FLOAT,v_short_close_posi_value);
        lpPubMsg->SetDouble(LDBIZ_LONG_CLOSE_POSI_FEE_FLOAT,v_long_close_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_SHORT_CLOSE_POSI_FEE_FLOAT,v_short_close_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
        lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
        lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_TIME_INT,v_open_posi_time);
        lpPubMsg->SetDouble(LDBIZ_POSI_QTY_FLOAT,v_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_CURR_QTY_FLOAT,v_curr_qty);
        lpPubMsg->SetDouble(LDBIZ_OPEN_POSI_VALUE_FLOAT,v_open_posi_value);
        lpPubMsg->SetDouble(LDBIZ_OPEN_POSI_FEE_FLOAT,v_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_COST_PRICE_FLOAT,v_cost_price);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0posisum", lpPubMsg);

        //调用过程[事务_交易证券_主推接口_获取操作员可用交易组资金信息]
        //组织事务请求
        if(lpTSCall1Ans33)
        {
          lpTSCall1Ans33->FreeMsg();
          lpTSCall1Ans33=NULL;
        }
        lpTSCall1Req33=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.46", 0);
        lpTSCall1Req33->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req33->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req33->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req33->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req33->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req33->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req33->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req33->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req33->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req33->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req33->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req33->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req33->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        lpTSCall1Req33->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req33, &lpTSCall1Ans33, 5000);
        if(!lpTSCall1Ans33)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.46]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans33->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans33->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans33->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans33->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans33->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans33->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans33->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans33->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans33->GetInt64(LDBIZ_ROW_ID_INT64);
        v_begin_amt = lpTSCall1Ans33->GetDouble(LDBIZ_BEGIN_AMT_FLOAT);
        v_curr_amt = lpTSCall1Ans33->GetDouble(LDBIZ_CURR_AMT_FLOAT);
        v_frozen_amt = lpTSCall1Ans33->GetDouble(LDBIZ_FROZEN_AMT_FLOAT);
        v_unfroz_amt = lpTSCall1Ans33->GetDouble(LDBIZ_UNFROZ_AMT_FLOAT);
        v_comm_frozen_amt = lpTSCall1Ans33->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
        v_comm_unfroz_amt = lpTSCall1Ans33->GetDouble(LDBIZ_COMM_UNFROZ_AMT_FLOAT);
        v_comm_capt_amt = lpTSCall1Ans33->GetDouble(LDBIZ_COMM_CAPT_AMT_FLOAT);
        v_comm_releas_amt = lpTSCall1Ans33->GetDouble(LDBIZ_COMM_RELEAS_AMT_FLOAT);
        v_trade_frozen_amt = lpTSCall1Ans33->GetDouble(LDBIZ_TRADE_FROZEN_AMT_FLOAT);
        v_trade_unfroz_amt = lpTSCall1Ans33->GetDouble(LDBIZ_TRADE_UNFROZ_AMT_FLOAT);
        v_trade_capt_amt = lpTSCall1Ans33->GetDouble(LDBIZ_TRADE_CAPT_AMT_FLOAT);
        v_trade_releas_amt = lpTSCall1Ans33->GetDouble(LDBIZ_TRADE_RELEAS_AMT_FLOAT);
        v_strike_capt_amt = lpTSCall1Ans33->GetDouble(LDBIZ_STRIKE_CAPT_AMT_FLOAT);
        v_strike_releas_amt = lpTSCall1Ans33->GetDouble(LDBIZ_STRIKE_RELEAS_AMT_FLOAT);
        v_update_times = lpTSCall1Ans33->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0oporallowexgrpcap][证券主推_增强交易_操作员可用交易组资金变化主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.710", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_BEGIN_AMT_FLOAT,v_begin_amt);
        lpPubMsg->SetDouble(LDBIZ_CURR_AMT_FLOAT,v_curr_amt);
        lpPubMsg->SetDouble(LDBIZ_FROZEN_AMT_FLOAT,v_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_UNFROZ_AMT_FLOAT,v_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_UNFROZ_AMT_FLOAT,v_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_CAPT_AMT_FLOAT,v_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_RELEAS_AMT_FLOAT,v_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_FROZEN_AMT_FLOAT,v_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_UNFROZ_AMT_FLOAT,v_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_CAPT_AMT_FLOAT,v_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_RELEAS_AMT_FLOAT,v_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_CAPT_AMT_FLOAT,v_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_RELEAS_AMT_FLOAT,v_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0oporallowexgrpcap", lpPubMsg);

        //遍历推持仓明细
        //调用过程[事务_交易证券_主推接口_获取t0持仓明细信息]
        //组织事务请求
        if(lpTSCall1Ans34)
        {
          lpTSCall1Ans34->FreeMsg();
          lpTSCall1Ans34=NULL;
        }
        lpTSCall1Req34=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.36", 0);
        lpTSCall1Req34->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req34->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req34->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req34->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req34->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req34->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req34->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req34->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req34->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req34->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req34->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req34->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req34, &lpTSCall1Ans34, 5000);
        if(!lpTSCall1Ans34)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.36]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans34->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans34->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans34->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans34->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans34->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans34->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans34->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans34->GetString(LDBIZ_ERROR_INFO_STR));


        // [获取结果集][lpMainMsg]
        lpMainMsg=lpTSCall1Ans34->GetGroup(LDTAG_NO_RESULTSET);


        // [遍历结果集开始][lpMainMsg]
        iRecordCount = lpMainMsg->GetRecordCount();
        for (int i = 0; i < iRecordCount;i++) 
        {
            IRecord* lpRecord =lpMainMsg->GetRecord(i);
            if(lpRecord)
            {

                //获取记录字段值
                v_row_id = lpRecord->GetInt64(LDBIZ_ROW_ID_INT64);
                v_co_no = lpRecord->GetInt32(LDBIZ_CO_NO_INT);
                v_pd_no = lpRecord->GetInt32(LDBIZ_PD_NO_INT);
                v_exch_no = lpRecord->GetInt32(LDBIZ_EXCH_NO_INT);
                strcpy(v_stock_code, lpRecord->GetString(LDBIZ_STOCK_CODE_STR));
                v_lngsht_type = lpRecord->GetInt32(LDBIZ_LNGSHT_TYPE_INT);
                v_curr_qty = lpRecord->GetDouble(LDBIZ_CURR_QTY_FLOAT);
                v_open_posi_date = lpRecord->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
                v_open_posi_time = lpRecord->GetInt32(LDBIZ_OPEN_POSI_TIME_INT);
                v_open_posi_price = lpRecord->GetDouble(LDBIZ_OPEN_POSI_PRICE_FLOAT);
                v_open_posi_value = lpRecord->GetDouble(LDBIZ_OPEN_POSI_VALUE_FLOAT);
                v_open_posi_fee = lpRecord->GetDouble(LDBIZ_OPEN_POSI_FEE_FLOAT);
                v_close_posi_qty = lpRecord->GetDouble(LDBIZ_CLOSE_POSI_QTY_FLOAT);
                v_close_posi_market_value = lpRecord->GetDouble(LDBIZ_CLOSE_POSI_MARKET_VALUE_FLOAT);
                v_close_posi_fee = lpRecord->GetDouble(LDBIZ_CLOSE_POSI_FEE_FLOAT);
                strcpy(v_strike_no, lpRecord->GetString(LDBIZ_STRIKE_NO_STR));
                v_realize_pandl = lpRecord->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
                v_over_night_pandl = lpRecord->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
                strcpy(v_posi_status, lpRecord->GetString(LDBIZ_POSI_STATUS_STR));
                strcpy(v_remark_info, lpRecord->GetString(LDBIZ_REMARK_INFO_STR));
                v_update_times = lpRecord->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.t0posidetail][证券主推_增强交易_t0持仓明细主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.702", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_LNGSHT_TYPE_INT,v_lngsht_type);
            lpPubMsg->SetDouble(LDBIZ_CURR_QTY_FLOAT,v_curr_qty);
            lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
            lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_TIME_INT,v_open_posi_time);
            lpPubMsg->SetDouble(LDBIZ_OPEN_POSI_PRICE_FLOAT,v_open_posi_price);
            lpPubMsg->SetDouble(LDBIZ_OPEN_POSI_VALUE_FLOAT,v_open_posi_value);
            lpPubMsg->SetDouble(LDBIZ_OPEN_POSI_FEE_FLOAT,v_open_posi_fee);
            lpPubMsg->SetDouble(LDBIZ_CLOSE_POSI_QTY_FLOAT,v_close_posi_qty);
            lpPubMsg->SetDouble(LDBIZ_CLOSE_POSI_MARKET_VALUE_FLOAT,v_close_posi_market_value);
            lpPubMsg->SetDouble(LDBIZ_CLOSE_POSI_FEE_FLOAT,v_close_posi_fee);
            lpPubMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
            lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
            lpPubMsg->SetString(LDBIZ_POSI_STATUS_STR,v_posi_status);
            lpPubMsg->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.t0posidetail", lpPubMsg);


        // [遍历结果集结束][lpMainMsg]
            }
        }

    // end if;
    }

    //质押提交和质押转回，要推交易代码和标准券代码

    // if @订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》 then
    if (v_order_dir == 21 || v_order_dir == 22)
    {
      //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
      //组织事务请求
      if(lpTSCall1Ans35)
      {
        lpTSCall1Ans35->FreeMsg();
        lpTSCall1Ans35=NULL;
      }
      lpTSCall1Req35=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
      lpTSCall1Req35->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req35->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req35->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req35->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req35->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req35->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req35->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req35->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req35->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req35->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req35->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req35->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req35->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req35->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
      lpTSCall1Req35->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpTSCall1Req35->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
      glpTSSubcallSerives->SubCall(lpTSCall1Req35, &lpTSCall1Ans35, 5000);
      if(!lpTSCall1Ans35)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans35->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans35->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans35->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans35->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans35->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans35->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans35->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans35->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans35->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans35->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans35->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans35->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans35->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans35->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans35->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans35->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
      v_exgp_target_posi_id = lpTSCall1Ans35->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
      v_exgp_target_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
      v_exgp_target_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
      v_exgp_target_comm_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
      v_exgp_target_comm_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_target_comm_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
      v_exgp_target_comm_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
      v_exgp_target_trade_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_target_trade_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_target_trade_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
      v_exgp_target_trade_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_target_strike_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_target_strike_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_target_strike_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_target_strike_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_target_realize_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
      v_exgp_target_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
      v_exgp_target_intrst_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
      v_exgp_target_intrst_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
      v_exgp_target_posi_update_times = lpTSCall1Ans35->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
      v_asac_target_posi_id = lpTSCall1Ans35->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
      v_asac_target_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
      v_asac_target_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
      v_asac_target_comm_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
      v_asac_target_comm_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
      v_asac_target_comm_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
      v_asac_target_comm_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
      v_asac_target_trade_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
      v_asac_target_trade_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_target_trade_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
      v_asac_target_trade_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
      v_asac_target_strike_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
      v_asac_target_strike_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_target_strike_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_target_strike_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_target_realize_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
      v_asac_target_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
      v_asac_target_intrst_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
      v_asac_target_intrst_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
      v_asac_target_posi_update_times = lpTSCall1Ans35->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
      v_exgp_put_impawn_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
      v_asac_put_impawn_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


      // set @证券代码编号# = @交易代码编号#;
      v_stock_code_no = v_trade_code_no;

      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


      // set @交易组提交质押数量# = 0;
      v_exgp_put_impawn_qty = 0;

      // set @资产账户提交质押数量# = 0;
      v_asac_put_impawn_qty = 0;

      // set @证券代码编号# = @标的代码编号#;
      v_stock_code_no = v_target_code_no;

      // set @交易组持仓序号# = @交易组标的持仓序号#;
      v_exgp_posi_id = v_exgp_target_posi_id;

      // set @交易组冻结数量# = @交易组标的冻结数量#;
      v_exgp_frozen_qty = v_exgp_target_frozen_qty;

      // set @交易组解冻数量# = @交易组标的解冻数量#;
      v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

      // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
      v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

      // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
      v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

      // set @交易组指令占用数量# = @交易组标的指令占用数量#;
      v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

      // set @交易组指令释放数量# = @交易组标的指令释放数量#;
      v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

      // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
      v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

      // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
      v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

      // set @交易组交易占用数量# = @交易组标的交易占用数量#;
      v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

      // set @交易组交易释放数量# = @交易组标的交易释放数量#;
      v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

      // set @交易组成交占用数量# = @交易组标的成交占用数量#;
      v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

      // set @交易组成交释放数量# = @交易组标的成交释放数量#;
      v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

      // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
      v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

      // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
      v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

      // set @交易组实现盈亏# = @交易组标的实现盈亏#;
      v_exgp_realize_pandl = v_exgp_target_realize_pandl;

      // set @交易组成本金额# = @交易组标的成本金额#;
      v_exgp_cost_amt = v_exgp_target_cost_amt;

      // set @交易组利息成本金额# = @交易组标的利息成本金额#;
      v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

      // set @交易组利息收益# = @交易组标的利息收益#;
      v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

      // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
      v_exgp_posi_update_times = v_exgp_target_posi_update_times;

      // set @资产账户持仓序号# = @资产账户标的持仓序号#;
      v_asac_posi_id = v_asac_target_posi_id;

      // set @资产账户冻结数量# = @资产账户标的冻结数量#;
      v_asac_frozen_qty = v_asac_target_frozen_qty;

      // set @资产账户解冻数量# = @资产账户标的解冻数量#;
      v_asac_unfroz_qty = v_asac_target_unfroz_qty;

      // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
      v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

      // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
      v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

      // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
      v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

      // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
      v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

      // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
      v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

      // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
      v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

      // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
      v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

      // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
      v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

      // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
      v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

      // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
      v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

      // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
      v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

      // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
      v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

      // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
      v_asac_realize_pandl = v_asac_target_realize_pandl;

      // set @资产账户成本金额# = @资产账户标的成本金额#;
      v_asac_cost_amt = v_asac_target_cost_amt;

      // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
      v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

      // set @资产账户利息收益# = @资产账户标的利息收益#;
      v_asac_intrst_pandl = v_asac_target_intrst_pandl;

      // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
      v_asac_posi_update_times = v_asac_target_posi_update_times;

      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


    }
    // else if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
    else if (v_order_dir == 3 || v_order_dir == 4)
    {

      // set @证券代码编号# = @标的代码编号#;
      v_stock_code_no = v_target_code_no;
      //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
      //组织事务请求
      if(lpTSCall1Ans36)
      {
        lpTSCall1Ans36->FreeMsg();
        lpTSCall1Ans36=NULL;
      }
      lpTSCall1Req36=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
      lpTSCall1Req36->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req36->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req36->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req36->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req36->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req36->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req36->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req36->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req36->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req36->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req36->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req36->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req36->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req36->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpTSCall1Req36->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      glpTSSubcallSerives->SubCall(lpTSCall1Req36, &lpTSCall1Ans36, 5000);
      if(!lpTSCall1Ans36)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans36->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans36->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans36->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans36->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans36->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans36->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans36->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans36->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans36->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans36->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans36->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans36->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans36->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans36->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans36->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans36->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


      // set @回购成交序号# = @成交序号#;
      v_repo_strike_id = v_strike_id;
      //调用过程[事务_交易证券_主推接口_获取债券回购信息]
      //组织事务请求
      if(lpTSCall1Ans37)
      {
        lpTSCall1Ans37->FreeMsg();
        lpTSCall1Ans37=NULL;
      }
      lpTSCall1Req37=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.30", 0);
      lpTSCall1Req37->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req37->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req37->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req37->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req37->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req37->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req37->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req37->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req37->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
      glpTSSubcallSerives->SubCall(lpTSCall1Req37, &lpTSCall1Ans37, 5000);
      if(!lpTSCall1Ans37)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.30]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans37->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans37->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans37->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans37->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans37->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans37->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans37->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans37->GetString(LDBIZ_ERROR_INFO_STR));
      v_init_date = lpTSCall1Ans37->GetInt32(LDBIZ_INIT_DATE_INT);
      v_co_no = lpTSCall1Ans37->GetInt32(LDBIZ_CO_NO_INT);
      v_pd_no = lpTSCall1Ans37->GetInt32(LDBIZ_PD_NO_INT);
      v_exch_group_no = lpTSCall1Ans37->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
      v_asset_acco_no = lpTSCall1Ans37->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
      strcpy(v_crncy_type, lpTSCall1Ans37->GetString(LDBIZ_CRNCY_TYPE_STR));
      strcpy(v_exch_crncy_type, lpTSCall1Ans37->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
      v_exch_rate = lpTSCall1Ans37->GetDouble(LDBIZ_EXCH_RATE_FLOAT);
      v_exch_no = lpTSCall1Ans37->GetInt32(LDBIZ_EXCH_NO_INT);
      v_stock_acco_no = lpTSCall1Ans37->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
      v_stock_code_no = lpTSCall1Ans37->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
      v_target_code_no = lpTSCall1Ans37->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
      v_comm_id = lpTSCall1Ans37->GetInt64(LDBIZ_COMM_ID_INT64);
      v_order_dir = lpTSCall1Ans37->GetInt32(LDBIZ_ORDER_DIR_INT);
      v_repo_qty = lpTSCall1Ans37->GetDouble(LDBIZ_REPO_QTY_FLOAT);
      v_repo_amt = lpTSCall1Ans37->GetDouble(LDBIZ_REPO_AMT_FLOAT);
      v_repo_rate = lpTSCall1Ans37->GetDouble(LDBIZ_REPO_RATE_FLOAT);
      v_repo_trade_date = lpTSCall1Ans37->GetInt32(LDBIZ_REPO_TRADE_DATE_INT);
      v_repo_order_id = lpTSCall1Ans37->GetInt64(LDBIZ_REPO_ORDER_ID_INT64);
      v_repo_days = lpTSCall1Ans37->GetInt32(LDBIZ_REPO_DAYS_INT);
      v_repo_cale_days = lpTSCall1Ans37->GetInt32(LDBIZ_REPO_CALE_DAYS_INT);
      v_repo_back_date = lpTSCall1Ans37->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
      v_repo_back_amt = lpTSCall1Ans37->GetDouble(LDBIZ_REPO_BACK_AMT_FLOAT);
      v_repo_back_intrst = lpTSCall1Ans37->GetDouble(LDBIZ_REPO_BACK_INTRST_FLOAT);
      v_repo_back_trade_date = lpTSCall1Ans37->GetInt32(LDBIZ_REPO_BACK_TRADE_DATE_INT);
      strcpy(v_repo_status, lpTSCall1Ans37->GetString(LDBIZ_REPO_STATUS_STR));
      v_bond_repo_id = lpTSCall1Ans37->GetInt64(LDBIZ_BOND_REPO_ID_INT64);
      v_update_times = lpTSCall1Ans37->GetInt32(LDBIZ_UPDATE_TIMES_INT);


      // [主动推送][secu.exgpbondrepo][证券主推_持仓_交易组债券回购主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.82", 0);
      lpPubMsg->SetInt64(LDBIZ_BOND_REPO_ID_INT64,v_bond_repo_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXCH_RATE_FLOAT,v_exch_rate);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
      lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
      lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
      lpPubMsg->SetDouble(LDBIZ_REPO_QTY_FLOAT,v_repo_qty);
      lpPubMsg->SetDouble(LDBIZ_REPO_AMT_FLOAT,v_repo_amt);
      lpPubMsg->SetDouble(LDBIZ_REPO_RATE_FLOAT,v_repo_rate);
      lpPubMsg->SetInt32(LDBIZ_REPO_TRADE_DATE_INT,v_repo_trade_date);
      lpPubMsg->SetInt64(LDBIZ_REPO_ORDER_ID_INT64,v_repo_order_id);
      lpPubMsg->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
      lpPubMsg->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
      lpPubMsg->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
      lpPubMsg->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
      lpPubMsg->SetDouble(LDBIZ_REPO_BACK_AMT_FLOAT,v_repo_back_amt);
      lpPubMsg->SetDouble(LDBIZ_REPO_BACK_INTRST_FLOAT,v_repo_back_intrst);
      lpPubMsg->SetInt32(LDBIZ_REPO_BACK_TRADE_DATE_INT,v_repo_back_trade_date);
      lpPubMsg->SetString(LDBIZ_REPO_STATUS_STR,v_repo_status);
      lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpbondrepo", lpPubMsg);


    }
    // else if @资产账户类型# = 《资产账户类型-融资融券》 and ((@订单方向# = 《订单方向-融资买入》 or @订单方向# = 《订单方向-融券卖出》 or @订单方向# = 《订单方向-卖券还款》 or @订单方向# = 《订单方向-买券还券》 or @订单方向# = 《订单方向-直接还款》 or @订单方向# = 《订单方向-直接还券》) or  (@资产账户类型# = 《资产账户类型-融资融券》 and @订单方向# = 《订单方向-卖出》 and  @存在负债标志# = 《存在负债标志-存在》 and @卖出自动还款# = 《卖出自动还款-是》)) then
    else if (v_asset_acco_type == 5 && ((v_order_dir == 5 || v_order_dir == 6 || v_order_dir == 7 || v_order_dir == 8 || v_order_dir == 14 || v_order_dir == 15) ||  (v_asset_acco_type == 5 && v_order_dir == 2 &&  v_exist_debt_flag == 2 && v_sell_auto_back_debt == 0)))
    {

        // set @交易组提交质押数量# = 0;
        v_exgp_put_impawn_qty = 0;

        // set @资产账户提交质押数量# = 0;
        v_asac_put_impawn_qty = 0;
        //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
        //组织事务请求
        if(lpTSCall1Ans38)
        {
          lpTSCall1Ans38->FreeMsg();
          lpTSCall1Ans38=NULL;
        }
        lpTSCall1Req38=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
        lpTSCall1Req38->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req38->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req38->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req38->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req38->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req38->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req38->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req38->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req38->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req38->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req38->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req38->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req38->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req38->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req38->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req38, &lpTSCall1Ans38, 5000);
        if(!lpTSCall1Ans38)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans38->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans38->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans38->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans38->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans38->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans38->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans38->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans38->GetString(LDBIZ_ERROR_INFO_STR));
        v_exgp_cash_id = lpTSCall1Ans38->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
        v_exgp_frozen_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
        v_exgp_unfroz_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
        v_exgp_comm_frozen_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
        v_exgp_comm_unfroz_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
        v_exgp_comm_capt_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
        v_exgp_comm_releas_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
        v_exgp_trade_frozen_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
        v_exgp_trade_unfroz_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
        v_exgp_trade_capt_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
        v_exgp_trade_releas_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
        v_exgp_strike_capt_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
        v_exgp_strike_releas_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
        v_exgp_cash_update_times = lpTSCall1Ans38->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
        v_exgp_posi_id = lpTSCall1Ans38->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
        v_exgp_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
        v_exgp_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
        v_exgp_comm_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
        v_exgp_comm_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
        v_exgp_comm_capt_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
        v_exgp_comm_releas_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
        v_exgp_trade_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
        v_exgp_trade_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
        v_exgp_trade_capt_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
        v_exgp_trade_releas_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
        v_exgp_strike_capt_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
        v_exgp_strike_releas_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
        v_exgp_strike_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
        v_exgp_strike_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
        v_exgp_realize_pandl = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
        v_exgp_cost_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
        v_exgp_intrst_cost_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
        v_exgp_intrst_pandl = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
        v_exgp_posi_update_times = lpTSCall1Ans38->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
        v_asac_cash_id = lpTSCall1Ans38->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
        v_asac_frozen_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
        v_asac_unfroz_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
        v_asac_comm_frozen_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
        v_asac_comm_unfroz_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
        v_asac_comm_capt_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
        v_asac_comm_releas_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
        v_asac_trade_frozen_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
        v_asac_trade_unfroz_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
        v_asac_trade_capt_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
        v_asac_trade_releas_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
        v_asac_strike_capt_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
        v_asac_strike_releas_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
        v_asac_cash_update_times = lpTSCall1Ans38->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
        v_asac_posi_id = lpTSCall1Ans38->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
        v_asac_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
        v_asac_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
        v_asac_comm_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
        v_asac_comm_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
        v_asac_comm_capt_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
        v_asac_comm_releas_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
        v_asac_trade_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
        v_asac_trade_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
        v_asac_trade_capt_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
        v_asac_trade_releas_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
        v_asac_strike_capt_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
        v_asac_strike_releas_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
        v_asac_strike_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
        v_asac_strike_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
        v_asac_realize_pandl = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
        v_asac_cost_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
        v_asac_intrst_cost_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
        v_asac_intrst_pandl = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
        v_asac_posi_update_times = lpTSCall1Ans38->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


        // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
        glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


        // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


        // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
        glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


        // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

        //主推：交易证券_账户_交易组业务资金负债表、交易证券_账户_资产账户业务资金负债表、交易证券_账户_交易组业务持仓负债表、交易证券_账户_资产账户业务持仓负债表、交易证券_                账户_资产账户负债明细表、交易证券_账户_交易组负债明细表

        // set @记录序号# = 0;
        v_row_id = 0;

        // set @指定行数# = - 1;
        v_row_count = - 1;

        // set @交易组编号权限串# = " ";
        strcpy(v_exch_group_no_rights_str," ");

        // set @产品编号权限串# = " ";
        strcpy(v_pd_no_rights_str," ");
        //调用过程[事务_交易证券_账户_查询交易组业务持仓负债结果集]
        //组织事务请求
        if(lpTSCall1Ans39)
        {
          lpTSCall1Ans39->FreeMsg();
          lpTSCall1Ans39=NULL;
        }
        lpTSCall1Req39=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.71", 0);
        lpTSCall1Req39->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req39->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req39->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req39->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req39->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req39->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req39->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req39->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req39->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req39->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req39->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req39->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req39->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpTSCall1Req39->SetInt32(LDBIZ_ROW_COUNT_INT,v_row_count);
        lpTSCall1Req39->SetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR,v_exch_group_no_rights_str);
        lpTSCall1Req39->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
        lpTSCall1Req39->SetString(LDBIZ_STOCK_CODE_NO_STR_STR,v_stock_code_no_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req39, &lpTSCall1Ans39, 5000);
        if(!lpTSCall1Ans39)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.71]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans39->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans39->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans39->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans39->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans39->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans39->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans39->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans39->GetString(LDBIZ_ERROR_INFO_STR));


        // [获取结果集][lpMainMsgExgpPosiDebt]
        lpMainMsgExgpPosiDebt=lpTSCall1Ans39->GetGroup(LDTAG_NO_RESULTSET);


        // [遍历结果集开始][lpMainMsgExgpPosiDebt]
        iRecordCount = lpMainMsgExgpPosiDebt->GetRecordCount();
        for (int i = 0; i < iRecordCount;i++) 
        {
            IRecord* lpRecord =lpMainMsgExgpPosiDebt->GetRecord(i);
            if(lpRecord)
            {

                //获取记录字段值
                v_row_id = lpRecord->GetInt64(LDBIZ_ROW_ID_INT64);
                v_co_no = lpRecord->GetInt32(LDBIZ_CO_NO_INT);
                v_pd_no = lpRecord->GetInt32(LDBIZ_PD_NO_INT);
                v_exch_group_no = lpRecord->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
                v_asset_acco_no = lpRecord->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
                v_exch_no = lpRecord->GetInt32(LDBIZ_EXCH_NO_INT);
                v_stock_acco_no = lpRecord->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
                strcpy(v_stock_code, lpRecord->GetString(LDBIZ_STOCK_CODE_STR));
                v_stock_code_no = lpRecord->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
                v_stock_type = lpRecord->GetInt32(LDBIZ_STOCK_TYPE_INT);
                v_asset_type = lpRecord->GetInt32(LDBIZ_ASSET_TYPE_INT);
                v_invest_type = lpRecord->GetInt32(LDBIZ_INVEST_TYPE_INT);
                v_debt_type = lpRecord->GetInt32(LDBIZ_DEBT_TYPE_INT);
                v_debt_fina_buy_strike_qty = lpRecord->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT);
                v_fina_return_strike_qty = lpRecord->GetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT);
                v_debt_loan_sell_strike_qty = lpRecord->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT);
                v_loan_return_strike_qty = lpRecord->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT);
                v_debt_fina_buy_order_qty = lpRecord->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT);
                v_fina_return_order_qty = lpRecord->GetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT);
                v_debt_loan_sell_order_qty = lpRecord->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT);
                v_loan_return_order_qty = lpRecord->GetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT);
                v_debt_fina_buy_comm_qty = lpRecord->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT);
                v_fina_return_comm_qty = lpRecord->GetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT);
                v_debt_loan_sell_comm_qty = lpRecord->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT);
                v_loan_return_comm_qty = lpRecord->GetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT);
                v_debt_fina_buy_strike_amt = lpRecord->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT);
                v_fina_return_strike_amt = lpRecord->GetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT);
                v_debt_loan_sell_strike_amt = lpRecord->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
                v_loan_return_strike_amt = lpRecord->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
                v_debt_fina_buy_order_amt = lpRecord->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT);
                v_fina_return_order_amt = lpRecord->GetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT);
                v_debt_loan_sell_order_amt = lpRecord->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT);
                v_loan_return_order_amt = lpRecord->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
                v_debt_fina_buy_comm_amt = lpRecord->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT);
                v_fina_return_comm_amt = lpRecord->GetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT);
                v_debt_loan_sell_comm_amt = lpRecord->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT);
                v_loan_return_comm_amt = lpRecord->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
                v_debt_strike_fee = lpRecord->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
                v_return_strike_fee = lpRecord->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
                v_debt_interest = lpRecord->GetDouble(LDBIZ_DEBT_INTEREST_FLOAT);
                v_return_interest_amt = lpRecord->GetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT);
                v_update_times = lpRecord->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.exgpposidebt][证券主推_持仓_交易组业务持仓负债主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.928", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
            lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
            lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
            lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.exgpposidebt", lpPubMsg);


        // [遍历结果集结束][lpMainMsgExgpPosiDebt]
            }
        }


        // set @证券代码编号串# = @资产账户证券代码编号串#;
        strcpy(v_stock_code_no_str,v_asac_stock_code_no_str);
        //调用过程[事务_交易证券_账户_查询资产账户业务持仓负债结果集]
        //组织事务请求
        if(lpTSCall1Ans40)
        {
          lpTSCall1Ans40->FreeMsg();
          lpTSCall1Ans40=NULL;
        }
        lpTSCall1Req40=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.72", 0);
        lpTSCall1Req40->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req40->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req40->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req40->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req40->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req40->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req40->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req40->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req40->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req40->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req40->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req40->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpTSCall1Req40->SetInt32(LDBIZ_ROW_COUNT_INT,v_row_count);
        lpTSCall1Req40->SetString(LDBIZ_PD_NO_RIGHTS_STR_STR,v_pd_no_rights_str);
        lpTSCall1Req40->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
        lpTSCall1Req40->SetString(LDBIZ_STOCK_CODE_NO_STR_STR,v_stock_code_no_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req40, &lpTSCall1Ans40, 5000);
        if(!lpTSCall1Ans40)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.72]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans40->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans40->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans40->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans40->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans40->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans40->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans40->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans40->GetString(LDBIZ_ERROR_INFO_STR));


        // [获取结果集][lpMainMsgAsacPosiDebt]
        lpMainMsgAsacPosiDebt=lpTSCall1Ans40->GetGroup(LDTAG_NO_RESULTSET);


        // [遍历结果集开始][lpMainMsgAsacPosiDebt]
        iRecordCount = lpMainMsgAsacPosiDebt->GetRecordCount();
        for (int i = 0; i < iRecordCount;i++) 
        {
            IRecord* lpRecord =lpMainMsgAsacPosiDebt->GetRecord(i);
            if(lpRecord)
            {

                //获取记录字段值
                v_row_id = lpRecord->GetInt64(LDBIZ_ROW_ID_INT64);
                v_co_no = lpRecord->GetInt32(LDBIZ_CO_NO_INT);
                v_pd_no = lpRecord->GetInt32(LDBIZ_PD_NO_INT);
                v_asset_acco_no = lpRecord->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
                v_exch_no = lpRecord->GetInt32(LDBIZ_EXCH_NO_INT);
                v_stock_acco_no = lpRecord->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
                strcpy(v_stock_code, lpRecord->GetString(LDBIZ_STOCK_CODE_STR));
                v_stock_code_no = lpRecord->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
                v_stock_type = lpRecord->GetInt32(LDBIZ_STOCK_TYPE_INT);
                v_asset_type = lpRecord->GetInt32(LDBIZ_ASSET_TYPE_INT);
                v_invest_type = lpRecord->GetInt32(LDBIZ_INVEST_TYPE_INT);
                v_debt_type = lpRecord->GetInt32(LDBIZ_DEBT_TYPE_INT);
                v_debt_fina_buy_strike_qty = lpRecord->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT);
                v_fina_return_strike_qty = lpRecord->GetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT);
                v_debt_loan_sell_strike_qty = lpRecord->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT);
                v_loan_return_strike_qty = lpRecord->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT);
                v_debt_fina_buy_order_qty = lpRecord->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT);
                v_fina_return_order_qty = lpRecord->GetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT);
                v_debt_loan_sell_order_qty = lpRecord->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT);
                v_loan_return_order_qty = lpRecord->GetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT);
                v_debt_fina_buy_comm_qty = lpRecord->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT);
                v_fina_return_comm_qty = lpRecord->GetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT);
                v_debt_loan_sell_comm_qty = lpRecord->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT);
                v_loan_return_comm_qty = lpRecord->GetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT);
                v_debt_fina_buy_strike_amt = lpRecord->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT);
                v_fina_return_strike_amt = lpRecord->GetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT);
                v_debt_loan_sell_strike_amt = lpRecord->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
                v_loan_return_strike_amt = lpRecord->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
                v_debt_fina_buy_order_amt = lpRecord->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT);
                v_fina_return_order_amt = lpRecord->GetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT);
                v_debt_loan_sell_order_amt = lpRecord->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT);
                v_loan_return_order_amt = lpRecord->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
                v_debt_fina_buy_comm_amt = lpRecord->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT);
                v_fina_return_comm_amt = lpRecord->GetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT);
                v_debt_loan_sell_comm_amt = lpRecord->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT);
                v_loan_return_comm_amt = lpRecord->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
                v_debt_strike_fee = lpRecord->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
                v_return_strike_fee = lpRecord->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
                v_debt_interest = lpRecord->GetDouble(LDBIZ_DEBT_INTEREST_FLOAT);
                v_return_interest_amt = lpRecord->GetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT);
                v_update_times = lpRecord->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.asacposidebt][证券主推_持仓_资产账户业务持仓负债主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.929", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
            lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
            lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
            lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
            lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.asacposidebt", lpPubMsg);


        // [遍历结果集结束][lpMainMsgAsacPosiDebt]
            }
        }

        //调用过程[事务_交易证券_账户_查询资产账户业务资金负债]
        //组织事务请求
        if(lpTSCall1Ans41)
        {
          lpTSCall1Ans41->FreeMsg();
          lpTSCall1Ans41=NULL;
        }
        lpTSCall1Req41=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.75", 0);
        lpTSCall1Req41->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req41->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req41->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req41->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req41->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req41->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req41->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req41->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req41->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req41->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req41->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req41->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req41, &lpTSCall1Ans41, 5000);
        if(!lpTSCall1Ans41)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.75]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans41->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans41->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans41->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans41->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans41->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans41->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans41->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans41->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans41->GetInt64(LDBIZ_ROW_ID_INT64);
        v_debt_loan_sell_strike_amt = lpTSCall1Ans41->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
        v_debt_strike_fee = lpTSCall1Ans41->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
        v_loan_return_strike_amt = lpTSCall1Ans41->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
        v_loan_return_order_amt = lpTSCall1Ans41->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
        v_loan_return_comm_amt = lpTSCall1Ans41->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
        v_return_strike_fee = lpTSCall1Ans41->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
        v_update_times = lpTSCall1Ans41->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.asaccapitaldebt][证券主推_资金_资产账户业务资金负债主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.930", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.asaccapitaldebt", lpPubMsg);

        //调用过程[事务_交易证券_账户_查询交易组业务资金负债]
        //组织事务请求
        if(lpTSCall1Ans42)
        {
          lpTSCall1Ans42->FreeMsg();
          lpTSCall1Ans42=NULL;
        }
        lpTSCall1Req42=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.74", 0);
        lpTSCall1Req42->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req42->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req42->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req42->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req42->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req42->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req42->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req42->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req42->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req42->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req42->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req42->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req42->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req42, &lpTSCall1Ans42, 5000);
        if(!lpTSCall1Ans42)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.74]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans42->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans42->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans42->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans42->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans42->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans42->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans42->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans42->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans42->GetInt64(LDBIZ_ROW_ID_INT64);
        v_debt_loan_sell_strike_amt = lpTSCall1Ans42->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
        v_debt_strike_fee = lpTSCall1Ans42->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
        v_loan_return_strike_amt = lpTSCall1Ans42->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
        v_loan_return_order_amt = lpTSCall1Ans42->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
        v_loan_return_comm_amt = lpTSCall1Ans42->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
        v_return_strike_fee = lpTSCall1Ans42->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
        v_update_times = lpTSCall1Ans42->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.exgpcapitaldebt][证券主推_资金_交易组业务资金负债主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.931", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.exgpcapitaldebt", lpPubMsg);


        // set @明细持仓序号串# = @交易组明细持仓序号串#;
        strcpy(v_detail_posi_id_str,v_exgp_detail_posi_id_str);
        //调用过程[事务_交易证券_账户_根据记录序号串查询交易组负债明细结果集]
        //组织事务请求
        if(lpTSCall1Ans43)
        {
          lpTSCall1Ans43->FreeMsg();
          lpTSCall1Ans43=NULL;
        }
        lpTSCall1Req43=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.78", 0);
        lpTSCall1Req43->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req43->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req43->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req43->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req43->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req43->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req43->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req43->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req43->SetString(LDBIZ_DETAIL_POSI_ID_STR_STR,v_detail_posi_id_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req43, &lpTSCall1Ans43, 5000);
        if(!lpTSCall1Ans43)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.78]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans43->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans43->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans43->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans43->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans43->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans43->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans43->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans43->GetString(LDBIZ_ERROR_INFO_STR));


        // [获取结果集][lpMainMsgDebt]
        lpMainMsgDebt=lpTSCall1Ans43->GetGroup(LDTAG_NO_RESULTSET);


        // [遍历结果集开始][lpMainMsgDebt]
        iRecordCount = lpMainMsgDebt->GetRecordCount();
        for (int i = 0; i < iRecordCount;i++) 
        {
            IRecord* lpRecord =lpMainMsgDebt->GetRecord(i);
            if(lpRecord)
            {

                //获取记录字段值
                v_row_id = lpRecord->GetInt64(LDBIZ_ROW_ID_INT64);
                v_init_date = lpRecord->GetInt32(LDBIZ_INIT_DATE_INT);
                v_co_no = lpRecord->GetInt32(LDBIZ_CO_NO_INT);
                v_pd_no = lpRecord->GetInt32(LDBIZ_PD_NO_INT);
                v_exch_group_no = lpRecord->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
                v_asset_acco_no = lpRecord->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
                v_exch_no = lpRecord->GetInt32(LDBIZ_EXCH_NO_INT);
                v_stock_acco_no = lpRecord->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
                v_stock_code_no = lpRecord->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
                v_stock_type = lpRecord->GetInt32(LDBIZ_STOCK_TYPE_INT);
                v_asset_type = lpRecord->GetInt32(LDBIZ_ASSET_TYPE_INT);
                v_debt_type = lpRecord->GetInt32(LDBIZ_DEBT_TYPE_INT);
                v_strike_qty = lpRecord->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
                v_strike_amt = lpRecord->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
                v_strike_fee = lpRecord->GetDouble(LDBIZ_STRIKE_FEE_FLOAT);
                v_debt_order_no = lpRecord->GetInt32(LDBIZ_DEBT_ORDER_NO_INT);
                strcpy(v_report_no, lpRecord->GetString(LDBIZ_REPORT_NO_STR));
                v_order_date = lpRecord->GetInt32(LDBIZ_ORDER_DATE_INT);
                v_order_time = lpRecord->GetInt32(LDBIZ_ORDER_TIME_INT);
                v_order_dir = lpRecord->GetInt32(LDBIZ_ORDER_DIR_INT);
                v_order_price = lpRecord->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
                v_order_qty = lpRecord->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
                v_debt_amt = lpRecord->GetDouble(LDBIZ_DEBT_AMT_FLOAT);
                v_debt_qty = lpRecord->GetDouble(LDBIZ_DEBT_QTY_FLOAT);
                v_debt_fee = lpRecord->GetDouble(LDBIZ_DEBT_FEE_FLOAT);
                v_debt_interest = lpRecord->GetDouble(LDBIZ_DEBT_INTEREST_FLOAT);
                v_intrst_base_amt = lpRecord->GetDouble(LDBIZ_INTRST_BASE_AMT_FLOAT);
                v_debt_return_amt = lpRecord->GetDouble(LDBIZ_DEBT_RETURN_AMT_FLOAT);
                v_debt_return_qty = lpRecord->GetDouble(LDBIZ_DEBT_RETURN_QTY_FLOAT);
                v_return_interest_amt = lpRecord->GetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT);
                v_debt_status = lpRecord->GetInt32(LDBIZ_DEBT_STATUS_INT);
                strcpy(v_remark_info, lpRecord->GetString(LDBIZ_REMARK_INFO_STR));
                v_update_times = lpRecord->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.exgpposidebtjour][证券主推_持仓_交易组负债明细主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.932", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
            lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_FEE_FLOAT,v_strike_fee);
            lpPubMsg->SetInt32(LDBIZ_DEBT_ORDER_NO_INT,v_debt_order_no);
            lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
            lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_AMT_FLOAT,v_debt_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_QTY_FLOAT,v_debt_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FEE_FLOAT,v_debt_fee);
            lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
            lpPubMsg->SetDouble(LDBIZ_INTRST_BASE_AMT_FLOAT,v_intrst_base_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_RETURN_AMT_FLOAT,v_debt_return_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_RETURN_QTY_FLOAT,v_debt_return_qty);
            lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
            lpPubMsg->SetInt32(LDBIZ_DEBT_STATUS_INT,v_debt_status);
            lpPubMsg->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.exgpposidebtjour", lpPubMsg);


        // [遍历结果集结束][lpMainMsgDebt]
            }
        }


        // set @明细持仓序号串# = @资产账户明细持仓序号串#;
        strcpy(v_detail_posi_id_str,v_asac_detail_posi_id_str);
        //调用过程[事务_交易证券_账户_根据记录序号串查询资产账户负债明细结果集]
        //组织事务请求
        if(lpTSCall1Ans44)
        {
          lpTSCall1Ans44->FreeMsg();
          lpTSCall1Ans44=NULL;
        }
        lpTSCall1Req44=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.85", 0);
        lpTSCall1Req44->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req44->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req44->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req44->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req44->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req44->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req44->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req44->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req44->SetString(LDBIZ_DETAIL_POSI_ID_STR_STR,v_detail_posi_id_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req44, &lpTSCall1Ans44, 5000);
        if(!lpTSCall1Ans44)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.85]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans44->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans44->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans44->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans44->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans44->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans44->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans44->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans44->GetString(LDBIZ_ERROR_INFO_STR));


        // [获取结果集][lpMainMsgAsacDebt]
        lpMainMsgAsacDebt=lpTSCall1Ans44->GetGroup(LDTAG_NO_RESULTSET);


        // [遍历结果集开始][lpMainMsgDebt]
        iRecordCount = lpMainMsgDebt->GetRecordCount();
        for (int i = 0; i < iRecordCount;i++) 
        {
            IRecord* lpRecord =lpMainMsgDebt->GetRecord(i);
            if(lpRecord)
            {

                //获取记录字段值
                v_row_id = lpRecord->GetInt64(LDBIZ_ROW_ID_INT64);
                v_init_date = lpRecord->GetInt32(LDBIZ_INIT_DATE_INT);
                v_co_no = lpRecord->GetInt32(LDBIZ_CO_NO_INT);
                v_pd_no = lpRecord->GetInt32(LDBIZ_PD_NO_INT);
                v_asset_acco_no = lpRecord->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
                v_exch_no = lpRecord->GetInt32(LDBIZ_EXCH_NO_INT);
                v_stock_acco_no = lpRecord->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
                v_stock_code_no = lpRecord->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
                v_stock_type = lpRecord->GetInt32(LDBIZ_STOCK_TYPE_INT);
                v_asset_type = lpRecord->GetInt32(LDBIZ_ASSET_TYPE_INT);
                v_debt_type = lpRecord->GetInt32(LDBIZ_DEBT_TYPE_INT);
                v_strike_qty = lpRecord->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
                v_strike_amt = lpRecord->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
                v_strike_fee = lpRecord->GetDouble(LDBIZ_STRIKE_FEE_FLOAT);
                v_debt_order_no = lpRecord->GetInt32(LDBIZ_DEBT_ORDER_NO_INT);
                strcpy(v_report_no, lpRecord->GetString(LDBIZ_REPORT_NO_STR));
                v_order_date = lpRecord->GetInt32(LDBIZ_ORDER_DATE_INT);
                v_order_time = lpRecord->GetInt32(LDBIZ_ORDER_TIME_INT);
                v_order_dir = lpRecord->GetInt32(LDBIZ_ORDER_DIR_INT);
                v_order_price = lpRecord->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
                v_order_qty = lpRecord->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
                v_debt_amt = lpRecord->GetDouble(LDBIZ_DEBT_AMT_FLOAT);
                v_debt_qty = lpRecord->GetDouble(LDBIZ_DEBT_QTY_FLOAT);
                v_debt_fee = lpRecord->GetDouble(LDBIZ_DEBT_FEE_FLOAT);
                v_debt_interest = lpRecord->GetDouble(LDBIZ_DEBT_INTEREST_FLOAT);
                v_intrst_base_amt = lpRecord->GetDouble(LDBIZ_INTRST_BASE_AMT_FLOAT);
                v_debt_return_amt = lpRecord->GetDouble(LDBIZ_DEBT_RETURN_AMT_FLOAT);
                v_debt_return_qty = lpRecord->GetDouble(LDBIZ_DEBT_RETURN_QTY_FLOAT);
                v_return_interest_amt = lpRecord->GetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT);
                v_debt_status = lpRecord->GetInt32(LDBIZ_DEBT_STATUS_INT);
                strcpy(v_remark_info, lpRecord->GetString(LDBIZ_REMARK_INFO_STR));
                v_update_times = lpRecord->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.asacposidebtjour][证券主推_持仓_资产账户负债明细主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.936", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
            lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_FEE_FLOAT,v_strike_fee);
            lpPubMsg->SetInt32(LDBIZ_DEBT_ORDER_NO_INT,v_debt_order_no);
            lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
            lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_AMT_FLOAT,v_debt_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_QTY_FLOAT,v_debt_qty);
            lpPubMsg->SetDouble(LDBIZ_DEBT_FEE_FLOAT,v_debt_fee);
            lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
            lpPubMsg->SetDouble(LDBIZ_INTRST_BASE_AMT_FLOAT,v_intrst_base_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_RETURN_AMT_FLOAT,v_debt_return_amt);
            lpPubMsg->SetDouble(LDBIZ_DEBT_RETURN_QTY_FLOAT,v_debt_return_qty);
            lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
            lpPubMsg->SetInt32(LDBIZ_DEBT_STATUS_INT,v_debt_status);
            lpPubMsg->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.asacposidebtjour", lpPubMsg);


        // [遍历结果集结束][lpMainMsgAsacDebt]
            }
        }

    }
    // else
    else
    {

      //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
      //组织事务请求
      if(lpTSCall1Ans45)
      {
        lpTSCall1Ans45->FreeMsg();
        lpTSCall1Ans45=NULL;
      }
      lpTSCall1Req45=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
      lpTSCall1Req45->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req45->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req45->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req45->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req45->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req45->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req45->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req45->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req45->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req45->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req45->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req45->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req45->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req45->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpTSCall1Req45->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      glpTSSubcallSerives->SubCall(lpTSCall1Req45, &lpTSCall1Ans45, 5000);
      if(!lpTSCall1Ans45)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans45->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans45->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans45->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans45->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans45->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans45->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans45->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans45->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans45->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans45->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans45->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans45->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans45->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans45->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans45->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans45->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans45->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans45->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

    // end if;
    }

    //组合交易主推(组合持仓表,组合收益表)

    // if @订单操作方式# = 《订单操作方式-组合买入》 or @订单操作方式# = 《订单操作方式-组合卖出》 or @订单操作方式# = 《订单操作方式-组合调仓》 then
    if (strcmp(v_order_oper_way , "26")==0 || strcmp(v_order_oper_way , "27")==0 || strcmp(v_order_oper_way , "28")==0)
    {
        //调用过程[事务_交易证券_主推接口_获取组合持仓]
        //组织事务请求
        if(lpTSCall1Ans46)
        {
          lpTSCall1Ans46->FreeMsg();
          lpTSCall1Ans46=NULL;
        }
        lpTSCall1Req46=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.43", 0);
        lpTSCall1Req46->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req46->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req46->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req46->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req46->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req46->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req46->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req46->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req46->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req46->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req46->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req46->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpTSCall1Req46->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req46->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
        lpTSCall1Req46->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        glpTSSubcallSerives->SubCall(lpTSCall1Req46, &lpTSCall1Ans46, 5000);
        if(!lpTSCall1Ans46)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.43]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans46->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans46->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans46->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans46->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans46->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans46->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans46->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans46->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans46->GetInt64(LDBIZ_ROW_ID_INT64);
        v_co_no = lpTSCall1Ans46->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans46->GetInt32(LDBIZ_PD_NO_INT);
        strcpy(v_stock_code, lpTSCall1Ans46->GetString(LDBIZ_STOCK_CODE_STR));
        v_exch_no = lpTSCall1Ans46->GetInt32(LDBIZ_EXCH_NO_INT);
        v_curr_qty = lpTSCall1Ans46->GetDouble(LDBIZ_CURR_QTY_FLOAT);
        v_posi_qty = lpTSCall1Ans46->GetDouble(LDBIZ_POSI_QTY_FLOAT);
        v_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_FROZEN_QTY_FLOAT);
        v_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_UNFROZ_QTY_FLOAT);
        v_pre_settle_qty = lpTSCall1Ans46->GetDouble(LDBIZ_PRE_SETTLE_QTY_FLOAT);
        v_trade_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_TRADE_FROZEN_QTY_FLOAT);
        v_trade_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_TRADE_UNFROZ_QTY_FLOAT);
        v_trade_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT);
        v_trade_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT);
        v_strike_capt_qty = lpTSCall1Ans46->GetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT);
        v_strike_releas_qty = lpTSCall1Ans46->GetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT);
        v_strike_frozen_qty = lpTSCall1Ans46->GetDouble(LDBIZ_STRIKE_FROZEN_QTY_FLOAT);
        v_strike_unfroz_qty = lpTSCall1Ans46->GetDouble(LDBIZ_STRIKE_UNFROZ_QTY_FLOAT);
        v_realize_pandl = lpTSCall1Ans46->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
        v_cost_amt = lpTSCall1Ans46->GetDouble(LDBIZ_COST_AMT_FLOAT);
        v_intrst_cost_amt = lpTSCall1Ans46->GetDouble(LDBIZ_INTRST_COST_AMT_FLOAT);
        v_intrst_pandl = lpTSCall1Ans46->GetDouble(LDBIZ_INTRST_PANDL_FLOAT);
        v_update_times = lpTSCall1Ans46->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.comboposi][证券主推_组合_组合持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.905", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
        lpPubMsg->SetDouble(LDBIZ_POSI_QTY_FLOAT,v_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_CURR_QTY_FLOAT,v_curr_qty);
        lpPubMsg->SetDouble(LDBIZ_FROZEN_QTY_FLOAT,v_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_UNFROZ_QTY_FLOAT,v_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_PRE_SETTLE_QTY_FLOAT,v_pre_settle_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_FROZEN_QTY_FLOAT,v_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_UNFROZ_QTY_FLOAT,v_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT,v_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT,v_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT,v_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT,v_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_FROZEN_QTY_FLOAT,v_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_UNFROZ_QTY_FLOAT,v_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_COST_AMT_FLOAT,v_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_INTRST_COST_AMT_FLOAT,v_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_INTRST_PANDL_FLOAT,v_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.comboposi", lpPubMsg);

        //调用过程[事务_交易证券_主推接口_获取组合收益]
        //组织事务请求
        if(lpTSCall1Ans47)
        {
          lpTSCall1Ans47->FreeMsg();
          lpTSCall1Ans47=NULL;
        }
        lpTSCall1Req47=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.44", 0);
        lpTSCall1Req47->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req47->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req47->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req47->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req47->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req47->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req47->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req47->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req47->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req47->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req47->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req47->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req47->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        glpTSSubcallSerives->SubCall(lpTSCall1Req47, &lpTSCall1Ans47, 5000);
        if(!lpTSCall1Ans47)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.44]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans47->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans47->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans47->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans47->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans47->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans47->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans47->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans47->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans47->GetInt64(LDBIZ_ROW_ID_INT64);
        v_open_posi_date = lpTSCall1Ans47->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
        v_combo_copies = lpTSCall1Ans47->GetDouble(LDBIZ_COMBO_COPIES_FLOAT);
        strcpy(v_combo_status, lpTSCall1Ans47->GetString(LDBIZ_COMBO_STATUS_STR));
        v_combo_cost = lpTSCall1Ans47->GetDouble(LDBIZ_COMBO_COST_FLOAT);
        v_combo_market_value = lpTSCall1Ans47->GetDouble(LDBIZ_COMBO_MARKET_VALUE_FLOAT);
        v_realize_pandl = lpTSCall1Ans47->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans47->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_update_times = lpTSCall1Ans47->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.comboincome][证券主推_组合_组合收益主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.906", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
        lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpPubMsg->SetDouble(LDBIZ_COMBO_COPIES_FLOAT,v_combo_copies);
        lpPubMsg->SetString(LDBIZ_COMBO_STATUS_STR,v_combo_status);
        lpPubMsg->SetDouble(LDBIZ_COMBO_COST_FLOAT,v_combo_cost);
        lpPubMsg->SetDouble(LDBIZ_COMBO_MARKET_VALUE_FLOAT,v_combo_market_value);
        lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.comboincome", lpPubMsg);

    // end if;
    }


END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans48)
        {
          lpTSCall1Ans48->FreeMsg();
          lpTSCall1Ans48=NULL;
        }
        lpTSCall1Req48=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req48->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req48->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req48->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req48->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req48->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req48->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req48->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req48->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req48->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req48->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req48, &lpTSCall1Ans48, 5000);
        if (lpTSCall1Ans48)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans48->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans48->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans48->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans48->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans48->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
    lpOutBizMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpOutBizMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpOutBizMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpOutBizMsg->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpOutBizMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpOutBizMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpOutBizMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpOutBizMsg->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpOutBizMsg->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpOutBizMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpOutBizMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpOutBizMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpOutBizMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpOutBizMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpOutBizMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpOutBizMsg->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    if(lpTSCall1Ans3)
        lpTSCall1Ans3->FreeMsg();
    if(lpTSCall1Ans4)
        lpTSCall1Ans4->FreeMsg();
    if(lpTSCall1Ans5)
        lpTSCall1Ans5->FreeMsg();
    if(lpTSCall1Ans6)
        lpTSCall1Ans6->FreeMsg();
    if(lpTSCall1Ans7)
        lpTSCall1Ans7->FreeMsg();
    if(lpTSCall1Ans8)
        lpTSCall1Ans8->FreeMsg();
    if(lpTSCall1Ans9)
        lpTSCall1Ans9->FreeMsg();
    if(lpTSCall1Ans10)
        lpTSCall1Ans10->FreeMsg();
    if(lpTSCall1Ans11)
        lpTSCall1Ans11->FreeMsg();
    if(lpTSCall1Ans12)
        lpTSCall1Ans12->FreeMsg();
    if(lpTSCall1Ans13)
        lpTSCall1Ans13->FreeMsg();
    if(lpTSCall1Ans14)
        lpTSCall1Ans14->FreeMsg();
    if(lpTSCall1Ans15)
        lpTSCall1Ans15->FreeMsg();
    if(lpTSCall1Ans16)
        lpTSCall1Ans16->FreeMsg();
    if(lpTSCall1Ans17)
        lpTSCall1Ans17->FreeMsg();
    if(lpTSCall1Ans18)
        lpTSCall1Ans18->FreeMsg();
    if(lpTSCall1Ans19)
        lpTSCall1Ans19->FreeMsg();
    if(lpTSCall1Ans20)
        lpTSCall1Ans20->FreeMsg();
    if(lpTSCall1Ans21)
        lpTSCall1Ans21->FreeMsg();
    if(lpTSCall1Ans22)
        lpTSCall1Ans22->FreeMsg();
    if(lpTSCall1Ans23)
        lpTSCall1Ans23->FreeMsg();
    if(lpTSCall1Ans24)
        lpTSCall1Ans24->FreeMsg();
    if(lpTSCall1Ans25)
        lpTSCall1Ans25->FreeMsg();
    if(lpTSCall1Ans26)
        lpTSCall1Ans26->FreeMsg();
    if(lpTSCall1Ans27)
        lpTSCall1Ans27->FreeMsg();
    if(lpTSCall1Ans28)
        lpTSCall1Ans28->FreeMsg();
    if(lpTSCall1Ans29)
        lpTSCall1Ans29->FreeMsg();
    if(lpTSCall1Ans30)
        lpTSCall1Ans30->FreeMsg();
    if(lpTSCall1Ans31)
        lpTSCall1Ans31->FreeMsg();
    if(lpTSCall1Ans32)
        lpTSCall1Ans32->FreeMsg();
    if(lpTSCall1Ans33)
        lpTSCall1Ans33->FreeMsg();
    if(lpTSCall1Ans34)
        lpTSCall1Ans34->FreeMsg();
    if(lpTSCall1Ans35)
        lpTSCall1Ans35->FreeMsg();
    if(lpTSCall1Ans36)
        lpTSCall1Ans36->FreeMsg();
    if(lpTSCall1Ans37)
        lpTSCall1Ans37->FreeMsg();
    if(lpTSCall1Ans38)
        lpTSCall1Ans38->FreeMsg();
    if(lpTSCall1Ans39)
        lpTSCall1Ans39->FreeMsg();
    if(lpTSCall1Ans40)
        lpTSCall1Ans40->FreeMsg();
    if(lpTSCall1Ans41)
        lpTSCall1Ans41->FreeMsg();
    if(lpTSCall1Ans42)
        lpTSCall1Ans42->FreeMsg();
    if(lpTSCall1Ans43)
        lpTSCall1Ans43->FreeMsg();
    if(lpTSCall1Ans44)
        lpTSCall1Ans44->FreeMsg();
    if(lpTSCall1Ans45)
        lpTSCall1Ans45->FreeMsg();
    if(lpTSCall1Ans46)
        lpTSCall1Ans46->FreeMsg();
    if(lpTSCall1Ans47)
        lpTSCall1Ans47->FreeMsg();
    if(lpTSCall1Ans48)
        lpTSCall1Ans48->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_处理订单补单回报
int LD_CALL_MODE fnFunc3(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    char v_stock_acco[17];
    char v_stock_code[7];
    int64 v_external_no;
    int v_report_date;
    int v_report_time;
    char v_report_no[33];
    int v_order_dir;
    double v_order_price;
    double v_order_qty;
    char v_order_status[3];
    int v_price_type;
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int64 v_order_id;
    int v_co_no;
    int v_pd_no;
    int v_asset_acco_no;
    int v_exch_group_no;
    int v_strike_date;
    int v_stock_type;
    int v_init_date;
    char v_sys_config_str[65];
    char v_co_busi_config_str[65];
    char v_exgp_busi_config_str[65];
    int v_stock_code_no;
    int v_asset_type;
    char v_crncy_type[4];
    char v_exch_crncy_type[4];
    double v_buy_ref_rate;
    double v_sell_ref_rate;
    double v_par_value;
    double v_impawn_ratio;
    int v_net_price_flag;
    int v_intrst_days;
    double v_bond_accr_intrst;
    int v_bond_rate_type;
    int v_trade_code_no;
    int v_target_code_no;
    int v_min_unit;
    double v_up_limit_price;
    double v_down_limit_price;
    double v_last_price;
    int v_repo_days;
    int v_repo_back_date;
    int v_capit_reback_days;
    int v_posi_reback_days;
    int v_bond_qty_unit_set;
    int v_apply_date;
    char v_trade_acco[33];
    char v_busi_config_str[65];
    char v_busi_ctrl_str[65];
    char v_asac_busi_config_str[65];
    char v_split_fee_typr_str[65];
    char v_busi_limit_str[2049];
    double v_nav_asset;
    int v_exter_comm_flag;
    double v_market_price_ratio;
    int v_market_price_type;
    int v_cost_calc_type;
    double v_order_market_price;
    int v_sys_type;
    char v_opor_no_str1[2049];
    char v_opor_no_str2[2049];
    char v_opor_no_str3[2049];
    double v_fina_limit_max;
    double v_loan_limit_max;
    int v_asset_acco_type;
    int v_sell_auto_back_debt;
    int v_stock_acco_no;
    char v_rsp_info[256];
    char v_order_rsp_status[3];
    int v_busi_opor_no;
    double v_trade_commis;
    double v_all_fee;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    double v_order_frozen_amt;
    int v_comm_opor;
    int v_order_date;
    int v_order_batch_no;
    int64 v_compli_trig_id;
    int v_repo_cale_days;
    double v_exgp_avail_amt;
    double v_asac_avail_amt;
    double v_exgp_avail_qty;
    double v_asac_avail_qty;
    int64 v_comm_id;
    int v_comm_batch_no;
    char v_combo_code[33];
    int64 v_combo_posi_id;
    int64 v_strategy_id;
    char v_contra_no[33];
    int v_record_count;
    int v_order_time;
    double v_order_frozen_qty;
    double v_wtdraw_qty;
    double v_strike_amt;
    double v_strike_qty;
    double v_strike_bond_accr_intrst;
    char v_order_oper_way[3];
    int v_debt_type;
    int v_update_times;
    double v_curr_strike_price;
    double v_curr_strike_amt;
    double v_curr_strike_qty;
    int64 v_strike_id;
    char v_wtdraw_status[3];
    int64 v_exgp_cash_id;
    double v_exgp_frozen_amt;
    double v_exgp_unfroz_amt;
    double v_exgp_comm_frozen_amt;
    double v_exgp_comm_unfroz_amt;
    double v_exgp_comm_capt_amt;
    double v_exgp_comm_releas_amt;
    double v_exgp_trade_frozen_amt;
    double v_exgp_trade_unfroz_amt;
    double v_exgp_trade_capt_amt;
    double v_exgp_trade_releas_amt;
    double v_exgp_strike_capt_amt;
    double v_exgp_strike_releas_amt;
    int v_exgp_cash_update_times;
    int64 v_exgp_posi_id;
    double v_exgp_frozen_qty;
    double v_exgp_unfroz_qty;
    double v_exgp_comm_frozen_qty;
    double v_exgp_comm_unfroz_qty;
    double v_exgp_comm_capt_qty;
    double v_exgp_comm_releas_qty;
    double v_exgp_trade_frozen_qty;
    double v_exgp_trade_unfroz_qty;
    double v_exgp_trade_capt_qty;
    double v_exgp_trade_releas_qty;
    double v_exgp_strike_capt_qty;
    double v_exgp_strike_releas_qty;
    double v_exgp_strike_frozen_qty;
    double v_exgp_strike_unfroz_qty;
    double v_exgp_realize_pandl;
    double v_exgp_cost_amt;
    double v_exgp_intrst_cost_amt;
    double v_exgp_intrst_pandl;
    int v_exgp_posi_update_times;
    int64 v_asac_cash_id;
    double v_asac_frozen_amt;
    double v_asac_unfroz_amt;
    double v_asac_comm_frozen_amt;
    double v_asac_comm_unfroz_amt;
    double v_asac_comm_capt_amt;
    double v_asac_comm_releas_amt;
    double v_asac_trade_frozen_amt;
    double v_asac_trade_unfroz_amt;
    double v_asac_trade_capt_amt;
    double v_asac_trade_releas_amt;
    double v_asac_strike_capt_amt;
    double v_asac_strike_releas_amt;
    int v_asac_cash_update_times;
    int64 v_asac_posi_id;
    double v_asac_frozen_qty;
    double v_asac_unfroz_qty;
    double v_asac_comm_frozen_qty;
    double v_asac_comm_unfroz_qty;
    double v_asac_comm_capt_qty;
    double v_asac_comm_releas_qty;
    double v_asac_trade_frozen_qty;
    double v_asac_trade_unfroz_qty;
    double v_asac_trade_capt_qty;
    double v_asac_trade_releas_qty;
    double v_asac_strike_capt_qty;
    double v_asac_strike_releas_qty;
    double v_asac_strike_frozen_qty;
    double v_asac_strike_unfroz_qty;
    double v_asac_realize_pandl;
    double v_asac_cost_amt;
    double v_asac_intrst_cost_amt;
    double v_asac_intrst_pandl;
    int v_asac_posi_update_times;
    int64 v_exgp_target_posi_id;
    double v_exgp_target_frozen_qty;
    double v_exgp_target_unfroz_qty;
    double v_exgp_target_comm_frozen_qty;
    double v_exgp_target_comm_unfroz_qty;
    double v_exgp_target_comm_capt_qty;
    double v_exgp_target_comm_releas_qty;
    double v_exgp_target_trade_frozen_qty;
    double v_exgp_target_trade_unfroz_qty;
    double v_exgp_target_trade_capt_qty;
    double v_exgp_target_trade_releas_qty;
    double v_exgp_target_strike_capt_qty;
    double v_exgp_target_strike_releas_qty;
    double v_exgp_target_strike_frozen_qty;
    double v_exgp_target_strike_unfroz_qty;
    double v_exgp_target_realize_pandl;
    double v_exgp_target_cost_amt;
    double v_exgp_target_intrst_cost_amt;
    double v_exgp_target_intrst_pandl;
    int v_exgp_target_posi_update_times;
    int64 v_asac_target_posi_id;
    double v_asac_target_frozen_qty;
    double v_asac_target_unfroz_qty;
    double v_asac_target_comm_frozen_qty;
    double v_asac_target_comm_unfroz_qty;
    double v_asac_target_comm_capt_qty;
    double v_asac_target_comm_releas_qty;
    double v_asac_target_trade_frozen_qty;
    double v_asac_target_trade_unfroz_qty;
    double v_asac_target_trade_capt_qty;
    double v_asac_target_trade_releas_qty;
    double v_asac_target_strike_capt_qty;
    double v_asac_target_strike_releas_qty;
    double v_asac_target_strike_frozen_qty;
    double v_asac_target_strike_unfroz_qty;
    double v_asac_target_realize_pandl;
    double v_asac_target_cost_amt;
    double v_asac_target_intrst_cost_amt;
    double v_asac_target_intrst_pandl;
    int v_asac_target_posi_update_times;
    double v_exgp_put_impawn_qty;
    double v_asac_put_impawn_qty;
    int64 v_row_id;
    int v_invest_type;
    double v_debt_fina_buy_strike_qty;
    double v_fina_return_strike_qty;
    double v_debt_loan_sell_strike_qty;
    double v_loan_return_strike_qty;
    double v_debt_fina_buy_order_qty;
    double v_fina_return_order_qty;
    double v_debt_loan_sell_order_qty;
    double v_loan_return_order_qty;
    double v_debt_fina_buy_comm_qty;
    double v_fina_return_comm_qty;
    double v_debt_loan_sell_comm_qty;
    double v_loan_return_comm_qty;
    double v_debt_fina_buy_strike_amt;
    double v_fina_return_strike_amt;
    double v_debt_loan_sell_strike_amt;
    double v_loan_return_strike_amt;
    double v_debt_fina_buy_order_amt;
    double v_fina_return_order_amt;
    double v_debt_loan_sell_order_amt;
    double v_loan_return_order_amt;
    double v_debt_fina_buy_comm_amt;
    double v_fina_return_comm_amt;
    double v_debt_loan_sell_comm_amt;
    double v_loan_return_comm_amt;
    double v_debt_strike_fee;
    double v_return_strike_fee;
    double v_debt_interest;
    double v_return_interest_amt;
    double v_strike_price;
    int v_strike_time;
    char v_strike_no[65];
    int v_strike_deal_type;
    double v_exgp_curr_qty;
    double v_asac_curr_qty;
    int64 v_rsp_id;
    char v_target_code[7];
    int v_comm_date;
    int v_comm_executor;
    double v_total_strike_amt;
    double v_total_strike_qty;
    double v_trade_occur_amt;
    int v_open_posi_date;
    int v_original_order_dir;
    int v_tmp_update_times;
    int v_record_valid_flag;
    char v_log_error_code[33];
    char v_log_error_info[256];


IFastMessage* lpPubMsg = NULL;
int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    strcpy(v_stock_acco, " ");
    strcpy(v_stock_code, " ");
    v_external_no=0;
    v_report_date=0;
    v_report_time=0;
    strcpy(v_report_no, " ");
    v_order_dir=0;
    v_order_price=0;
    v_order_qty=0;
    strcpy(v_order_status, "0");
    v_price_type=0;
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_order_id=0;
    v_co_no=0;
    v_pd_no=0;
    v_asset_acco_no=0;
    v_exch_group_no=0;
    v_strike_date=0;
    v_stock_type=0;
    v_init_date=0;
    strcpy(v_sys_config_str, " ");
    strcpy(v_co_busi_config_str, " ");
    strcpy(v_exgp_busi_config_str, " ");
    v_stock_code_no=0;
    v_asset_type=0;
    strcpy(v_crncy_type, "CNY");
    strcpy(v_exch_crncy_type, "CNY");
    v_buy_ref_rate=0;
    v_sell_ref_rate=0;
    v_par_value=0;
    v_impawn_ratio=0;
    v_net_price_flag=0;
    v_intrst_days=0;
    v_bond_accr_intrst=0;
    v_bond_rate_type=0;
    v_trade_code_no=0;
    v_target_code_no=0;
    v_min_unit=0;
    v_up_limit_price=0;
    v_down_limit_price=0;
    v_last_price=0;
    v_repo_days=0;
    v_repo_back_date=0;
    v_capit_reback_days=0;
    v_posi_reback_days=0;
    v_bond_qty_unit_set=0;
    v_apply_date=0;
    strcpy(v_trade_acco, " ");
    strcpy(v_busi_config_str, " ");
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_asac_busi_config_str, " ");
    strcpy(v_split_fee_typr_str, " ");
    strcpy(v_busi_limit_str, " ");
    v_nav_asset=0;
    v_exter_comm_flag=0;
    v_market_price_ratio=0;
    v_market_price_type=0;
    v_cost_calc_type=0;
    v_order_market_price=0;
    v_sys_type=0;
    strcpy(v_opor_no_str1, " ");
    strcpy(v_opor_no_str2, " ");
    strcpy(v_opor_no_str3, " ");
    v_fina_limit_max=0;
    v_loan_limit_max=0;
    v_asset_acco_type=0;
    v_sell_auto_back_debt=0;
    v_stock_acco_no=0;
    strcpy(v_rsp_info, " ");
    strcpy(v_order_rsp_status, "0");
    v_busi_opor_no=0;
    v_trade_commis=0;
    v_all_fee=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_order_frozen_amt=0;
    v_comm_opor=0;
    v_order_date=0;
    v_order_batch_no=0;
    v_compli_trig_id=0;
    v_repo_cale_days=0;
    v_exgp_avail_amt=0;
    v_asac_avail_amt=0;
    v_exgp_avail_qty=0;
    v_asac_avail_qty=0;
    v_comm_id=0;
    v_comm_batch_no=0;
    strcpy(v_combo_code, " ");
    v_combo_posi_id=0;
    v_strategy_id=0;
    strcpy(v_contra_no, " ");
    v_record_count=0;
    v_order_time=0;
    v_order_frozen_qty=0;
    v_wtdraw_qty=0;
    v_strike_amt=0;
    v_strike_qty=0;
    v_strike_bond_accr_intrst=0;
    strcpy(v_order_oper_way, " ");
    v_debt_type=0;
    v_update_times=1;
    v_curr_strike_price=0;
    v_curr_strike_amt=0;
    v_curr_strike_qty=0;
    v_strike_id=0;
    strcpy(v_wtdraw_status, "0");
    v_exgp_cash_id=0;
    v_exgp_frozen_amt=0;
    v_exgp_unfroz_amt=0;
    v_exgp_comm_frozen_amt=0;
    v_exgp_comm_unfroz_amt=0;
    v_exgp_comm_capt_amt=0;
    v_exgp_comm_releas_amt=0;
    v_exgp_trade_frozen_amt=0;
    v_exgp_trade_unfroz_amt=0;
    v_exgp_trade_capt_amt=0;
    v_exgp_trade_releas_amt=0;
    v_exgp_strike_capt_amt=0;
    v_exgp_strike_releas_amt=0;
    v_exgp_cash_update_times=1;
    v_exgp_posi_id=0;
    v_exgp_frozen_qty=0;
    v_exgp_unfroz_qty=0;
    v_exgp_comm_frozen_qty=0;
    v_exgp_comm_unfroz_qty=0;
    v_exgp_comm_capt_qty=0;
    v_exgp_comm_releas_qty=0;
    v_exgp_trade_frozen_qty=0;
    v_exgp_trade_unfroz_qty=0;
    v_exgp_trade_capt_qty=0;
    v_exgp_trade_releas_qty=0;
    v_exgp_strike_capt_qty=0;
    v_exgp_strike_releas_qty=0;
    v_exgp_strike_frozen_qty=0;
    v_exgp_strike_unfroz_qty=0;
    v_exgp_realize_pandl=0;
    v_exgp_cost_amt=0;
    v_exgp_intrst_cost_amt=0;
    v_exgp_intrst_pandl=0;
    v_exgp_posi_update_times=1;
    v_asac_cash_id=0;
    v_asac_frozen_amt=0;
    v_asac_unfroz_amt=0;
    v_asac_comm_frozen_amt=0;
    v_asac_comm_unfroz_amt=0;
    v_asac_comm_capt_amt=0;
    v_asac_comm_releas_amt=0;
    v_asac_trade_frozen_amt=0;
    v_asac_trade_unfroz_amt=0;
    v_asac_trade_capt_amt=0;
    v_asac_trade_releas_amt=0;
    v_asac_strike_capt_amt=0;
    v_asac_strike_releas_amt=0;
    v_asac_cash_update_times=1;
    v_asac_posi_id=0;
    v_asac_frozen_qty=0;
    v_asac_unfroz_qty=0;
    v_asac_comm_frozen_qty=0;
    v_asac_comm_unfroz_qty=0;
    v_asac_comm_capt_qty=0;
    v_asac_comm_releas_qty=0;
    v_asac_trade_frozen_qty=0;
    v_asac_trade_unfroz_qty=0;
    v_asac_trade_capt_qty=0;
    v_asac_trade_releas_qty=0;
    v_asac_strike_capt_qty=0;
    v_asac_strike_releas_qty=0;
    v_asac_strike_frozen_qty=0;
    v_asac_strike_unfroz_qty=0;
    v_asac_realize_pandl=0;
    v_asac_cost_amt=0;
    v_asac_intrst_cost_amt=0;
    v_asac_intrst_pandl=0;
    v_asac_posi_update_times=1;
    v_exgp_target_posi_id=0;
    v_exgp_target_frozen_qty=0;
    v_exgp_target_unfroz_qty=0;
    v_exgp_target_comm_frozen_qty=0;
    v_exgp_target_comm_unfroz_qty=0;
    v_exgp_target_comm_capt_qty=0;
    v_exgp_target_comm_releas_qty=0;
    v_exgp_target_trade_frozen_qty=0;
    v_exgp_target_trade_unfroz_qty=0;
    v_exgp_target_trade_capt_qty=0;
    v_exgp_target_trade_releas_qty=0;
    v_exgp_target_strike_capt_qty=0;
    v_exgp_target_strike_releas_qty=0;
    v_exgp_target_strike_frozen_qty=0;
    v_exgp_target_strike_unfroz_qty=0;
    v_exgp_target_realize_pandl=0;
    v_exgp_target_cost_amt=0;
    v_exgp_target_intrst_cost_amt=0;
    v_exgp_target_intrst_pandl=0;
    v_exgp_target_posi_update_times=0;
    v_asac_target_posi_id=0;
    v_asac_target_frozen_qty=0;
    v_asac_target_unfroz_qty=0;
    v_asac_target_comm_frozen_qty=0;
    v_asac_target_comm_unfroz_qty=0;
    v_asac_target_comm_capt_qty=0;
    v_asac_target_comm_releas_qty=0;
    v_asac_target_trade_frozen_qty=0;
    v_asac_target_trade_unfroz_qty=0;
    v_asac_target_trade_capt_qty=0;
    v_asac_target_trade_releas_qty=0;
    v_asac_target_strike_capt_qty=0;
    v_asac_target_strike_releas_qty=0;
    v_asac_target_strike_frozen_qty=0;
    v_asac_target_strike_unfroz_qty=0;
    v_asac_target_realize_pandl=0;
    v_asac_target_cost_amt=0;
    v_asac_target_intrst_cost_amt=0;
    v_asac_target_intrst_pandl=0;
    v_asac_target_posi_update_times=0;
    v_exgp_put_impawn_qty=0;
    v_asac_put_impawn_qty=0;
    v_row_id=0;
    v_invest_type=0;
    v_debt_fina_buy_strike_qty=0;
    v_fina_return_strike_qty=0;
    v_debt_loan_sell_strike_qty=0;
    v_loan_return_strike_qty=0;
    v_debt_fina_buy_order_qty=0;
    v_fina_return_order_qty=0;
    v_debt_loan_sell_order_qty=0;
    v_loan_return_order_qty=0;
    v_debt_fina_buy_comm_qty=0;
    v_fina_return_comm_qty=0;
    v_debt_loan_sell_comm_qty=0;
    v_loan_return_comm_qty=0;
    v_debt_fina_buy_strike_amt=0;
    v_fina_return_strike_amt=0;
    v_debt_loan_sell_strike_amt=0;
    v_loan_return_strike_amt=0;
    v_debt_fina_buy_order_amt=0;
    v_fina_return_order_amt=0;
    v_debt_loan_sell_order_amt=0;
    v_loan_return_order_amt=0;
    v_debt_fina_buy_comm_amt=0;
    v_fina_return_comm_amt=0;
    v_debt_loan_sell_comm_amt=0;
    v_loan_return_comm_amt=0;
    v_debt_strike_fee=0;
    v_return_strike_fee=0;
    v_debt_interest=0;
    v_return_interest_amt=0;
    v_strike_price=0;
    v_strike_time=0;
    strcpy(v_strike_no, " ");
    v_strike_deal_type=0;
    v_exgp_curr_qty=0;
    v_asac_curr_qty=0;
    v_rsp_id=0;
    strcpy(v_target_code, " ");
    v_comm_date=0;
    v_comm_executor=0;
    v_total_strike_amt=0;
    v_total_strike_qty=0;
    v_trade_occur_amt=0;
    v_open_posi_date=0;
    v_original_order_dir=0;
    v_tmp_update_times=1;
    v_record_valid_flag=0;
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_pass_no = lpInBizMsg->GetInt32(LDBIZ_PASS_NO_INT);
    strncpy(v_out_acco, lpInBizMsg->GetString(LDBIZ_OUT_ACCO_STR),32);
    v_out_acco[32] = '\0';
    v_exch_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_NO_INT);
    strncpy(v_stock_acco, lpInBizMsg->GetString(LDBIZ_STOCK_ACCO_STR),16);
    v_stock_acco[16] = '\0';
    strncpy(v_stock_code, lpInBizMsg->GetString(LDBIZ_STOCK_CODE_STR),6);
    v_stock_code[6] = '\0';
    v_external_no = lpInBizMsg->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
    v_report_date = lpInBizMsg->GetInt32(LDBIZ_REPORT_DATE_INT);
    v_report_time = lpInBizMsg->GetInt32(LDBIZ_REPORT_TIME_INT);
    strncpy(v_report_no, lpInBizMsg->GetString(LDBIZ_REPORT_NO_STR),32);
    v_report_no[32] = '\0';
    v_order_dir = lpInBizMsg->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_order_price = lpInBizMsg->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpInBizMsg->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    strncpy(v_order_status, lpInBizMsg->GetString(LDBIZ_ORDER_STATUS_STR),2);
    v_order_status[2] = '\0';
    v_price_type = lpInBizMsg->GetInt32(LDBIZ_PRICE_TYPE_INT);

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;
    IFastMessage* lpTSCall1Req3 = NULL;
    IFastMessage* lpTSCall1Ans3 = NULL;
    IFastMessage* lpTSCall1Req4 = NULL;
    IFastMessage* lpTSCall1Ans4 = NULL;
    IFastMessage* lpTSCall1Req5 = NULL;
    IFastMessage* lpTSCall1Ans5 = NULL;
    IFastMessage* lpTSCall1Req6 = NULL;
    IFastMessage* lpTSCall1Ans6 = NULL;
    IFastMessage* lpTSCall1Req7 = NULL;
    IFastMessage* lpTSCall1Ans7 = NULL;
    IFastMessage* lpTSCall1Req8 = NULL;
    IFastMessage* lpTSCall1Ans8 = NULL;
    IFastMessage* lpTSCall1Req9 = NULL;
    IFastMessage* lpTSCall1Ans9 = NULL;
    IFastMessage* lpTSCall1Req10 = NULL;
    IFastMessage* lpTSCall1Ans10 = NULL;
    IFastMessage* lpTSCall1Req11 = NULL;
    IFastMessage* lpTSCall1Ans11 = NULL;
    IFastMessage* lpTSCall1Req12 = NULL;
    IFastMessage* lpTSCall1Ans12 = NULL;
    IFastMessage* lpTSCall1Req13 = NULL;
    IFastMessage* lpTSCall1Ans13 = NULL;
    IFastMessage* lpTSCall1Req14 = NULL;
    IFastMessage* lpTSCall1Ans14 = NULL;
    IFastMessage* lpTSCall1Req15 = NULL;
    IFastMessage* lpTSCall1Ans15 = NULL;
    IFastMessage* lpTSCall1Req16 = NULL;
    IFastMessage* lpTSCall1Ans16 = NULL;
    IFastMessage* lpTSCall1Req17 = NULL;
    IFastMessage* lpTSCall1Ans17 = NULL;
    IFastMessage* lpTSCall1Req18 = NULL;
    IFastMessage* lpTSCall1Ans18 = NULL;

    //调用过程[事务_产品_公共接口_外部账号获取资产账户编号]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("prodT.6.7", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req0->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.6.7]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_co_no = lpTSCall1Ans0->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpTSCall1Ans0->GetInt32(LDBIZ_PD_NO_INT);
    v_asset_acco_no = lpTSCall1Ans0->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);

    //调用过程[事务_产品_交易接口_获取资产账户默认交易组编号]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("prodT.8.111", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.8.111]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
    v_exch_group_no = lpTSCall1Ans1->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);


    // set @成交日期# = @申报日期#;
    v_strike_date = v_report_date;
    //报盘补单无法区分订单方向 新股申购和可转债申购，故此修改

    // if @证券类型# = 《证券类型-债券申购》  and @订单方向# = 《订单方向-买入》 then
    if (v_stock_type == 32  && v_order_dir == 1)
    {

        // set @订单方向# = 《订单方向-可转债申购》;
        v_order_dir = 13;

    }
    // elseif @证券类型# = 《证券类型-申购》  and @订单方向# = 《订单方向-买入》 then
    else if (v_stock_type == 2  && v_order_dir == 1)
    {

        // set @订单方向# = 《订单方向-新股申购》;
        v_order_dir = 11;
    // end if;
    }

    //公共子系统检查
    //调用过程[事务_公共_交易接口_检查系统状态交易业务]
    //组织事务请求
    if(lpTSCall1Ans2)
    {
      lpTSCall1Ans2->FreeMsg();
      lpTSCall1Ans2=NULL;
    }
    lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.25.27", 0);
    lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req2->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req2->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req2->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req2->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req2->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpTSCall1Req2->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpTSCall1Req2->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req2->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
    if(!lpTSCall1Ans2)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.27]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans2->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans2->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_sys_config_str, lpTSCall1Ans2->GetString(LDBIZ_SYS_CONFIG_STR_STR));
    v_pd_no = lpTSCall1Ans2->GetInt32(LDBIZ_PD_NO_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans2->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
    strcpy(v_exgp_busi_config_str, lpTSCall1Ans2->GetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR));
    v_stock_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans2->GetInt32(LDBIZ_ASSET_TYPE_INT);
    strcpy(v_crncy_type, lpTSCall1Ans2->GetString(LDBIZ_CRNCY_TYPE_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans2->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_buy_ref_rate = lpTSCall1Ans2->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
    v_sell_ref_rate = lpTSCall1Ans2->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
    v_par_value = lpTSCall1Ans2->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans2->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_net_price_flag = lpTSCall1Ans2->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_intrst_days = lpTSCall1Ans2->GetInt32(LDBIZ_INTRST_DAYS_INT);
    v_bond_accr_intrst = lpTSCall1Ans2->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans2->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_trade_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_min_unit = lpTSCall1Ans2->GetInt32(LDBIZ_MIN_UNIT_INT);
    v_up_limit_price = lpTSCall1Ans2->GetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT);
    v_down_limit_price = lpTSCall1Ans2->GetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT);
    v_last_price = lpTSCall1Ans2->GetDouble(LDBIZ_LAST_PRICE_FLOAT);
    v_repo_days = lpTSCall1Ans2->GetInt32(LDBIZ_REPO_DAYS_INT);
    v_repo_back_date = lpTSCall1Ans2->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
    v_capit_reback_days = lpTSCall1Ans2->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
    v_posi_reback_days = lpTSCall1Ans2->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);
    v_bond_qty_unit_set = lpTSCall1Ans2->GetInt32(LDBIZ_BOND_QTY_UNIT_SET_INT);
    v_apply_date = lpTSCall1Ans2->GetInt32(LDBIZ_APPLY_DATE_INT);
    strcpy(v_trade_acco, lpTSCall1Ans2->GetString(LDBIZ_TRADE_ACCO_STR));


    // set @业务控制配置串# = @交易组业务控制配置串#;
    strcpy(v_busi_config_str,v_exgp_busi_config_str);
    //产品子系统检查，检查账户状态，获取当前资金等

    // set @业务控制串# = "11111";
    strcpy(v_busi_ctrl_str,"11111");
    //调用过程[事务_产品_交易接口_检查交易产品账户信息]
    //组织事务请求
    if(lpTSCall1Ans3)
    {
      lpTSCall1Ans3->FreeMsg();
      lpTSCall1Ans3=NULL;
    }
    lpTSCall1Req3=glpFastMsgFactory->CreateFastMessage("prodT.8.21", 0);
    lpTSCall1Req3->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req3->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req3->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req3->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req3->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req3->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req3->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req3->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req3->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req3->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req3->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
    lpTSCall1Req3->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req3->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req3->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req3->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpTSCall1Req3->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpTSCall1Req3->SetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT,v_up_limit_price);
    lpTSCall1Req3->SetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT,v_down_limit_price);
    lpTSCall1Req3->SetDouble(LDBIZ_LAST_PRICE_FLOAT,v_last_price);
    lpTSCall1Req3->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
    lpTSCall1Req3->SetString(LDBIZ_BUSI_CONFIG_STR_STR,v_busi_config_str);
    lpTSCall1Req3->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
    glpTSSubcallSerives->SubCall(lpTSCall1Req3, &lpTSCall1Ans3, 5000);
    if(!lpTSCall1Ans3)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.8.21]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans3->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
    strcpy(v_exgp_busi_config_str, lpTSCall1Ans3->GetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR));
    strcpy(v_asac_busi_config_str, lpTSCall1Ans3->GetString(LDBIZ_ASAC_BUSI_CONFIG_STR_STR));
    strcpy(v_split_fee_typr_str, lpTSCall1Ans3->GetString(LDBIZ_SPLIT_FEE_TYPR_STR_STR));
    strcpy(v_busi_limit_str, lpTSCall1Ans3->GetString(LDBIZ_BUSI_LIMIT_STR_STR));
    v_pass_no = lpTSCall1Ans3->GetInt32(LDBIZ_PASS_NO_INT);
    strcpy(v_out_acco, lpTSCall1Ans3->GetString(LDBIZ_OUT_ACCO_STR));
    v_nav_asset = lpTSCall1Ans3->GetDouble(LDBIZ_NAV_ASSET_FLOAT);
    v_exter_comm_flag = lpTSCall1Ans3->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_market_price_ratio = lpTSCall1Ans3->GetDouble(LDBIZ_MARKET_PRICE_RATIO_FLOAT);
    v_market_price_type = lpTSCall1Ans3->GetInt32(LDBIZ_MARKET_PRICE_TYPE_INT);
    v_cost_calc_type = lpTSCall1Ans3->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
    v_order_market_price = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_MARKET_PRICE_FLOAT);
    v_sys_type = lpTSCall1Ans3->GetInt32(LDBIZ_SYS_TYPE_INT);
    strcpy(v_opor_no_str1, lpTSCall1Ans3->GetString(LDBIZ_OPOR_NO_STR1_STR));
    strcpy(v_opor_no_str2, lpTSCall1Ans3->GetString(LDBIZ_OPOR_NO_STR2_STR));
    strcpy(v_opor_no_str3, lpTSCall1Ans3->GetString(LDBIZ_OPOR_NO_STR3_STR));
    v_fina_limit_max = lpTSCall1Ans3->GetDouble(LDBIZ_FINA_LIMIT_MAX_FLOAT);
    v_loan_limit_max = lpTSCall1Ans3->GetDouble(LDBIZ_LOAN_LIMIT_MAX_FLOAT);
    v_asset_acco_type = lpTSCall1Ans3->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    v_sell_auto_back_debt = lpTSCall1Ans3->GetInt32(LDBIZ_SELL_AUTO_BACK_DEBT_INT);

    //调用过程[事务_产品证券_公共接口_检查股东账户状态]
    //组织事务请求
    if(lpTSCall1Ans4)
    {
      lpTSCall1Ans4->FreeMsg();
      lpTSCall1Ans4=NULL;
    }
    lpTSCall1Req4=glpFastMsgFactory->CreateFastMessage("pdsecuT.4.101", 0);
    lpTSCall1Req4->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req4->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req4->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req4->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req4->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req4->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req4->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req4->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    glpTSSubcallSerives->SubCall(lpTSCall1Req4, &lpTSCall1Ans4, 5000);
    if(!lpTSCall1Ans4)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pdsecuT.4.101]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans4->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
    v_stock_acco_no = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_acco, lpTSCall1Ans4->GetString(LDBIZ_STOCK_ACCO_STR));


    // set @回报信息# ="报盘换机补单";
    strcpy(v_rsp_info,"报盘换机补单");

    // set @订单回报状态# =《订单回报状态-已报》;
    strcpy(v_order_rsp_status,"1");

    // if @申购日期# = @申报日期# then
    if (v_apply_date == v_report_date)
    {

        // set @订单方向# = 《订单方向-新股申购》;
        v_order_dir = 11;
    // end if;
    }


    // if (@订单方向# = 《订单方向-买入》 or @订单方向# = 《订单方向-卖出》) and @证券类型# > 20 and @证券类型# < 50 then
    if ((v_order_dir == 1 || v_order_dir == 2) && v_stock_type > 20 && v_stock_type < 50)
    {

      // if (@债券数量单位配置# = 2) or (@债券数量单位配置# = 3 and @市场编号# = 《市场编号-上海证券交易所》) or (@债券数量单位配置# = 4 and @市场编号# = 《市场编号-深圳证券交易所》) then
      if ((v_bond_qty_unit_set == 2) || (v_bond_qty_unit_set == 3 && v_exch_no == 1) || (v_bond_qty_unit_set == 4 && v_exch_no == 2))
      {

        // set @订单数量# = @订单数量# * 10;
        v_order_qty = v_order_qty * 10;
      // end if;
      }

    // end if;
    }


    // set @业务操作员编号# = @操作员编号#;
    v_busi_opor_no = v_opor_no;
    //如果是买入，需计算费用

    // if @订单方向# = 《订单方向-买入》 or @订单方向# = 《订单方向-融券回购》 or @订单方向# = 《订单方向-融资买入》 or  @订单方向# = 《订单方向-买券还券》 then
    if (v_order_dir == 1 || v_order_dir == 4 || v_order_dir == 5 ||  v_order_dir == 8)
    {
        //调用过程[事务_公共_公共接口_计算证券订单费用]
        //组织事务请求
        if(lpTSCall1Ans5)
        {
          lpTSCall1Ans5->FreeMsg();
          lpTSCall1Ans5=NULL;
        }
        lpTSCall1Req5=glpFastMsgFactory->CreateFastMessage("pubT.24.203", 0);
        lpTSCall1Req5->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req5->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req5->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req5->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req5->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req5->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req5->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req5->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req5->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req5->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req5->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req5->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req5->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpTSCall1Req5->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req5->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpTSCall1Req5->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
        lpTSCall1Req5->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpTSCall1Req5->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
        lpTSCall1Req5->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpTSCall1Req5->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        glpTSSubcallSerives->SubCall(lpTSCall1Req5, &lpTSCall1Ans5, 5000);
        if(!lpTSCall1Ans5)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.203]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans5->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
        v_trade_commis = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
        v_all_fee = lpTSCall1Ans5->GetDouble(LDBIZ_ALL_FEE_FLOAT);
        v_stamp_tax = lpTSCall1Ans5->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
        v_trans_fee = lpTSCall1Ans5->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
        v_brkage_fee = lpTSCall1Ans5->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
        v_SEC_charges = lpTSCall1Ans5->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
        v_other_fee = lpTSCall1Ans5->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
        v_other_commis = lpTSCall1Ans5->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
        v_trade_tax = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
        v_trade_cost_fee = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
        v_trade_system_use_fee = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
        v_stock_settle_fee = lpTSCall1Ans5->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);
        v_order_frozen_amt = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);

    // end if;
    }


    // set @指令下达人# =0;
    v_comm_opor =0;

    // set @订单日期# =@申报日期#;
    v_order_date =v_report_date;

    // set @订单批号# =0;
    v_order_batch_no =0;

    // set @合规触警序号# =0;
    v_compli_trig_id =0;

    // set @回购实际天数# = 0;
    v_repo_cale_days = 0;

    // set @交易组可用金额# = 0;
    v_exgp_avail_amt = 0;

    // set @资产账户可用金额# = 0;
    v_asac_avail_amt = 0;

    // set @交易组可用数量# = 0;
    v_exgp_avail_qty = 0;

    // set @资产账户可用数量# = 0;
    v_asac_avail_qty = 0;
    //补单订单处理

    // set @指令序号# =0;
    v_comm_id =0;

    // set @指令批号# =0;
    v_comm_batch_no =0;

    // set @订单批号# =0;
    v_order_batch_no =0;

    // set @组合代码# = " ";
    strcpy(v_combo_code," ");

    // set @组合持仓序号#=0;
    v_combo_posi_id=0;

    // set @策略序号# =0;
    v_strategy_id =0;

    // set @合同编号# = " ";
    strcpy(v_contra_no," ");
    //调用过程[事务_交易证券_报盘_新增补单订单]
    //组织事务请求
    if(lpTSCall1Ans6)
    {
      lpTSCall1Ans6->FreeMsg();
      lpTSCall1Ans6=NULL;
    }
    lpTSCall1Req6=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.31", 0);
    lpTSCall1Req6->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req6->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req6->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req6->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req6->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req6->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req6->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req6->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req6->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
    lpTSCall1Req6->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req6->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req6->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req6->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req6->SetString(LDBIZ_TRADE_ACCO_STR,v_trade_acco);
    lpTSCall1Req6->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req6->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req6->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req6->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
    lpTSCall1Req6->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpTSCall1Req6->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
    lpTSCall1Req6->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
    lpTSCall1Req6->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req6->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpTSCall1Req6->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpTSCall1Req6->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req6->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req6->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
    lpTSCall1Req6->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
    lpTSCall1Req6->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req6->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
    lpTSCall1Req6->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpTSCall1Req6->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpTSCall1Req6->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpTSCall1Req6->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpTSCall1Req6->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpTSCall1Req6->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req6->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpTSCall1Req6->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpTSCall1Req6->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpTSCall1Req6->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpTSCall1Req6->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpTSCall1Req6->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
    lpTSCall1Req6->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
    lpTSCall1Req6->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
    lpTSCall1Req6->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
    lpTSCall1Req6->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
    lpTSCall1Req6->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
    lpTSCall1Req6->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
    lpTSCall1Req6->SetInt64(LDBIZ_COMPLI_TRIG_ID_INT64,v_compli_trig_id);
    lpTSCall1Req6->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpTSCall1Req6->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpTSCall1Req6->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpTSCall1Req6->SetInt32(LDBIZ_INTRST_DAYS_INT,v_intrst_days);
    lpTSCall1Req6->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpTSCall1Req6->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpTSCall1Req6->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpTSCall1Req6->SetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR,v_exgp_busi_config_str);
    lpTSCall1Req6->SetDouble(LDBIZ_EXGP_AVAIL_AMT_FLOAT,v_exgp_avail_amt);
    lpTSCall1Req6->SetString(LDBIZ_ASAC_BUSI_CONFIG_STR_STR,v_asac_busi_config_str);
    lpTSCall1Req6->SetDouble(LDBIZ_ASAC_AVAIL_AMT_FLOAT,v_asac_avail_amt);
    lpTSCall1Req6->SetDouble(LDBIZ_EXGP_AVAIL_QTY_FLOAT,v_exgp_avail_qty);
    lpTSCall1Req6->SetDouble(LDBIZ_ASAC_AVAIL_QTY_FLOAT,v_asac_avail_qty);
    lpTSCall1Req6->SetDouble(LDBIZ_NAV_ASSET_FLOAT,v_nav_asset);
    lpTSCall1Req6->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
    lpTSCall1Req6->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
    lpTSCall1Req6->SetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT,v_up_limit_price);
    lpTSCall1Req6->SetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT,v_down_limit_price);
    lpTSCall1Req6->SetString(LDBIZ_BUSI_LIMIT_STR_STR,v_busi_limit_str);
    lpTSCall1Req6->SetInt32(LDBIZ_COST_CALC_TYPE_INT,v_cost_calc_type);
    lpTSCall1Req6->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
    glpTSSubcallSerives->SubCall(lpTSCall1Req6, &lpTSCall1Ans6, 5000);
    if(!lpTSCall1Ans6)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.31]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans6->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
    v_order_id = lpTSCall1Ans6->GetInt64(LDBIZ_ORDER_ID_INT64);
    v_record_count = lpTSCall1Ans6->GetInt32(LDBIZ_RECORD_COUNT_INT);
    v_order_date = lpTSCall1Ans6->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_time = lpTSCall1Ans6->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_order_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    v_order_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
    v_wtdraw_qty = lpTSCall1Ans6->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
    v_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    v_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_bond_accr_intrst = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
    strcpy(v_order_oper_way, lpTSCall1Ans6->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    v_debt_type = lpTSCall1Ans6->GetInt32(LDBIZ_DEBT_TYPE_INT);
    v_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_UPDATE_TIMES_INT);


    // if @订单序号# > 0 then
    if (v_order_id > 0)
    {

        // set @当笔成交价格# = 0;
        v_curr_strike_price = 0;

        // set @当笔成交金额# = 0;
        v_curr_strike_amt = 0;

        // set @当笔成交数量# = 0;
        v_curr_strike_qty = 0;

        // set @成交序号# = 0;
        v_strike_id = 0;

        // set @全部费用# = 0;
        v_all_fee = 0;

        // set @撤单状态# = "0";
        strcpy(v_wtdraw_status,"0");

        // [主动推送][secu.order][证券主推_订单_订单主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
        lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
        lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
        lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
        lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
        lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
        lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
        lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
        lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
        lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
        lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
        lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
        lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
        lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
        lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
        lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
        lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
        lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
        lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
        lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


        // if @记录个数# = 1 then
        if (v_record_count == 1)
        {
             //质押提交和质押转回，要推交易代码和标准券代码

             // if @订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》 then
             if (v_order_dir == 21 || v_order_dir == 22)
             {
               //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
               //组织事务请求
               if(lpTSCall1Ans7)
               {
                 lpTSCall1Ans7->FreeMsg();
                 lpTSCall1Ans7=NULL;
               }
               lpTSCall1Req7=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
               lpTSCall1Req7->SetInt32(LDTAG_PRIORITY, iPriority);
               lpTSCall1Req7->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
               lpTSCall1Req7->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
               lpTSCall1Req7->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
               lpTSCall1Req7->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
               lpTSCall1Req7->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
               lpTSCall1Req7->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
               lpTSCall1Req7->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
               lpTSCall1Req7->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpTSCall1Req7->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpTSCall1Req7->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
               lpTSCall1Req7->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpTSCall1Req7->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
               lpTSCall1Req7->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
               lpTSCall1Req7->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
               lpTSCall1Req7->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
               glpTSSubcallSerives->SubCall(lpTSCall1Req7, &lpTSCall1Ans7, 5000);
               if(!lpTSCall1Ans7)  //  超时错误
               {
                   lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                   lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
                   iRet=-2;
                   goto ENDSYS;
               }
               else if(lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
               {
                   lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO));
                   lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans7->GetString(LDTAG_ERRORINFO));
                   iRet=-2;
                   goto ENDSYS;
               }
               else if(strcmp(lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
               {
                   strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
                   strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
                   iRet=-1;
                   goto END;
               }
               //获取输出参数值
               strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
               strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
               v_exgp_cash_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
               v_exgp_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
               v_exgp_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
               v_exgp_comm_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
               v_exgp_comm_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
               v_exgp_comm_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
               v_exgp_comm_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
               v_exgp_trade_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
               v_exgp_trade_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
               v_exgp_trade_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
               v_exgp_trade_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
               v_exgp_strike_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
               v_exgp_strike_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
               v_exgp_cash_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
               v_exgp_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
               v_exgp_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
               v_exgp_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
               v_exgp_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
               v_exgp_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
               v_exgp_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
               v_exgp_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
               v_exgp_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
               v_exgp_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
               v_exgp_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
               v_exgp_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
               v_exgp_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
               v_exgp_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
               v_exgp_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
               v_exgp_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
               v_exgp_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
               v_exgp_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
               v_exgp_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
               v_exgp_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
               v_exgp_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
               v_asac_cash_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
               v_asac_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
               v_asac_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
               v_asac_comm_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
               v_asac_comm_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
               v_asac_comm_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
               v_asac_comm_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
               v_asac_trade_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
               v_asac_trade_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
               v_asac_trade_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
               v_asac_trade_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
               v_asac_strike_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
               v_asac_strike_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
               v_asac_cash_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
               v_asac_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
               v_asac_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
               v_asac_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
               v_asac_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
               v_asac_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
               v_asac_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
               v_asac_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
               v_asac_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
               v_asac_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
               v_asac_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
               v_asac_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
               v_asac_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
               v_asac_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
               v_asac_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
               v_asac_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
               v_asac_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
               v_asac_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
               v_asac_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
               v_asac_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
               v_asac_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
               v_exgp_target_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
               v_exgp_target_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
               v_exgp_target_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
               v_exgp_target_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
               v_exgp_target_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
               v_exgp_target_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
               v_exgp_target_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
               v_exgp_target_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
               v_exgp_target_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
               v_exgp_target_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
               v_exgp_target_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
               v_exgp_target_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
               v_exgp_target_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
               v_exgp_target_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
               v_exgp_target_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
               v_exgp_target_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
               v_exgp_target_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
               v_exgp_target_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
               v_exgp_target_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
               v_exgp_target_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
               v_asac_target_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
               v_asac_target_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
               v_asac_target_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
               v_asac_target_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
               v_asac_target_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
               v_asac_target_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
               v_asac_target_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
               v_asac_target_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
               v_asac_target_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
               v_asac_target_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
               v_asac_target_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
               v_asac_target_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
               v_asac_target_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
               v_asac_target_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
               v_asac_target_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
               v_asac_target_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
               v_asac_target_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
               v_asac_target_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
               v_asac_target_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
               v_asac_target_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
               v_exgp_put_impawn_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
               v_asac_put_impawn_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


               // set @证券代码编号# = @交易代码编号#;
               v_stock_code_no = v_trade_code_no;

               // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
               lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
               lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
               lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
               glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


               // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
               lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
               lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
               lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
               lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
               glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


               // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
               lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
               lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
               lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
               glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


               // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
               lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
               lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
               lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
               lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
               glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


               // set @证券代码编号# = @标的代码编号#;
               v_stock_code_no = v_target_code_no;

               // set @交易组提交质押数量# = 0;
               v_exgp_put_impawn_qty = 0;

               // set @资产账户提交质押数量# = 0;
               v_asac_put_impawn_qty = 0;

               // set @交易组持仓序号# = @交易组标的持仓序号#;
               v_exgp_posi_id = v_exgp_target_posi_id;

               // set @交易组冻结数量# = @交易组标的冻结数量#;
               v_exgp_frozen_qty = v_exgp_target_frozen_qty;

               // set @交易组解冻数量# = @交易组标的解冻数量#;
               v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

               // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
               v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

               // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
               v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

               // set @交易组指令占用数量# = @交易组标的指令占用数量#;
               v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

               // set @交易组指令释放数量# = @交易组标的指令释放数量#;
               v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

               // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
               v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

               // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
               v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

               // set @交易组交易占用数量# = @交易组标的交易占用数量#;
               v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

               // set @交易组交易释放数量# = @交易组标的交易释放数量#;
               v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

               // set @交易组成交占用数量# = @交易组标的成交占用数量#;
               v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

               // set @交易组成交释放数量# = @交易组标的成交释放数量#;
               v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

               // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
               v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

               // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
               v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

               // set @交易组实现盈亏# = @交易组标的实现盈亏#;
               v_exgp_realize_pandl = v_exgp_target_realize_pandl;

               // set @交易组成本金额# = @交易组标的成本金额#;
               v_exgp_cost_amt = v_exgp_target_cost_amt;

               // set @交易组利息成本金额# = @交易组标的利息成本金额#;
               v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

               // set @交易组利息收益# = @交易组标的利息收益#;
               v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

               // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
               v_exgp_posi_update_times = v_exgp_target_posi_update_times;

               // set @资产账户持仓序号# = @资产账户标的持仓序号#;
               v_asac_posi_id = v_asac_target_posi_id;

               // set @资产账户冻结数量# = @资产账户标的冻结数量#;
               v_asac_frozen_qty = v_asac_target_frozen_qty;

               // set @资产账户解冻数量# = @资产账户标的解冻数量#;
               v_asac_unfroz_qty = v_asac_target_unfroz_qty;

               // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
               v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

               // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
               v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

               // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
               v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

               // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
               v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

               // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
               v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

               // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
               v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

               // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
               v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

               // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
               v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

               // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
               v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

               // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
               v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

               // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
               v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

               // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
               v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

               // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
               v_asac_realize_pandl = v_asac_target_realize_pandl;

               // set @资产账户成本金额# = @资产账户标的成本金额#;
               v_asac_cost_amt = v_asac_target_cost_amt;

               // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
               v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

               // set @资产账户利息收益# = @资产账户标的利息收益#;
               v_asac_intrst_pandl = v_asac_target_intrst_pandl;

               // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
               v_asac_posi_update_times = v_asac_target_posi_update_times;

               // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
               lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
               lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
               lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
               lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
               glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


               // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
               lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
               lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
               lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
               lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
               glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


             }
             // else if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
             else if (v_order_dir == 3 || v_order_dir == 4)
             {

               // set @证券代码编号# = @标的代码编号#;
               v_stock_code_no = v_target_code_no;
               //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
               //组织事务请求
               if(lpTSCall1Ans8)
               {
                 lpTSCall1Ans8->FreeMsg();
                 lpTSCall1Ans8=NULL;
               }
               lpTSCall1Req8=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
               lpTSCall1Req8->SetInt32(LDTAG_PRIORITY, iPriority);
               lpTSCall1Req8->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
               lpTSCall1Req8->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
               lpTSCall1Req8->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
               lpTSCall1Req8->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
               lpTSCall1Req8->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
               lpTSCall1Req8->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
               lpTSCall1Req8->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
               lpTSCall1Req8->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpTSCall1Req8->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpTSCall1Req8->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
               lpTSCall1Req8->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpTSCall1Req8->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
               lpTSCall1Req8->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
               lpTSCall1Req8->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
               glpTSSubcallSerives->SubCall(lpTSCall1Req8, &lpTSCall1Ans8, 5000);
               if(!lpTSCall1Ans8)  //  超时错误
               {
                   lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                   lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                   iRet=-2;
                   goto ENDSYS;
               }
               else if(lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
               {
                   lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO));
                   lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans8->GetString(LDTAG_ERRORINFO));
                   iRet=-2;
                   goto ENDSYS;
               }
               else if(strcmp(lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
               {
                   strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
                   strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
                   iRet=-1;
                   goto END;
               }
               //获取输出参数值
               strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
               strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
               v_exgp_cash_id = lpTSCall1Ans8->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
               v_exgp_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
               v_exgp_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
               v_exgp_comm_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
               v_exgp_comm_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
               v_exgp_comm_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
               v_exgp_comm_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
               v_exgp_trade_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
               v_exgp_trade_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
               v_exgp_trade_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
               v_exgp_trade_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
               v_exgp_strike_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
               v_exgp_strike_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
               v_exgp_cash_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
               v_exgp_posi_id = lpTSCall1Ans8->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
               v_exgp_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
               v_exgp_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
               v_exgp_comm_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
               v_exgp_comm_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
               v_exgp_comm_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
               v_exgp_comm_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
               v_exgp_trade_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
               v_exgp_trade_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
               v_exgp_trade_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
               v_exgp_trade_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
               v_exgp_strike_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
               v_exgp_strike_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
               v_exgp_strike_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
               v_exgp_strike_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
               v_exgp_realize_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
               v_exgp_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
               v_exgp_intrst_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
               v_exgp_intrst_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
               v_exgp_posi_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
               v_asac_cash_id = lpTSCall1Ans8->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
               v_asac_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
               v_asac_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
               v_asac_comm_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
               v_asac_comm_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
               v_asac_comm_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
               v_asac_comm_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
               v_asac_trade_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
               v_asac_trade_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
               v_asac_trade_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
               v_asac_trade_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
               v_asac_strike_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
               v_asac_strike_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
               v_asac_cash_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
               v_asac_posi_id = lpTSCall1Ans8->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
               v_asac_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
               v_asac_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
               v_asac_comm_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
               v_asac_comm_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
               v_asac_comm_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
               v_asac_comm_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
               v_asac_trade_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
               v_asac_trade_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
               v_asac_trade_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
               v_asac_trade_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
               v_asac_strike_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
               v_asac_strike_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
               v_asac_strike_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
               v_asac_strike_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
               v_asac_realize_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
               v_asac_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
               v_asac_intrst_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
               v_asac_intrst_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
               v_asac_posi_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


               // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
               lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
               lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
               lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
               glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


               // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
               lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
               lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
               lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
               lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
               glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


               // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
               lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
               lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
               lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
               glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


               // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
               lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
               lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
               lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
               lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
               glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


             }
             // else if @资产账户类型# = 《资产账户类型-融资融券》 then
             else if (v_asset_acco_type == 5)
             {
                //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
                //组织事务请求
                if(lpTSCall1Ans9)
                {
                  lpTSCall1Ans9->FreeMsg();
                  lpTSCall1Ans9=NULL;
                }
                lpTSCall1Req9=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
                lpTSCall1Req9->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req9->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req9->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req9->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req9->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req9->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req9->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req9->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req9->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpTSCall1Req9->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpTSCall1Req9->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                lpTSCall1Req9->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpTSCall1Req9->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                lpTSCall1Req9->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                lpTSCall1Req9->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                glpTSSubcallSerives->SubCall(lpTSCall1Req9, &lpTSCall1Ans9, 5000);
                if(!lpTSCall1Ans9)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans9->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
                v_exgp_cash_id = lpTSCall1Ans9->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
                v_exgp_frozen_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
                v_exgp_unfroz_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
                v_exgp_comm_frozen_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
                v_exgp_comm_unfroz_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
                v_exgp_comm_capt_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
                v_exgp_comm_releas_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
                v_exgp_trade_frozen_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
                v_exgp_trade_unfroz_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
                v_exgp_trade_capt_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
                v_exgp_trade_releas_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
                v_exgp_strike_capt_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
                v_exgp_strike_releas_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
                v_exgp_cash_update_times = lpTSCall1Ans9->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
                v_exgp_posi_id = lpTSCall1Ans9->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
                v_exgp_frozen_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
                v_exgp_unfroz_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
                v_exgp_comm_frozen_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
                v_exgp_comm_unfroz_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
                v_exgp_comm_capt_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
                v_exgp_comm_releas_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
                v_exgp_trade_frozen_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
                v_exgp_trade_unfroz_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
                v_exgp_trade_capt_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
                v_exgp_trade_releas_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
                v_exgp_strike_capt_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
                v_exgp_strike_releas_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
                v_exgp_strike_frozen_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
                v_exgp_strike_unfroz_qty = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
                v_exgp_realize_pandl = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
                v_exgp_cost_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
                v_exgp_intrst_cost_amt = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
                v_exgp_intrst_pandl = lpTSCall1Ans9->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
                v_exgp_posi_update_times = lpTSCall1Ans9->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
                v_asac_cash_id = lpTSCall1Ans9->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
                v_asac_frozen_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
                v_asac_unfroz_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
                v_asac_comm_frozen_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
                v_asac_comm_unfroz_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
                v_asac_comm_capt_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
                v_asac_comm_releas_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
                v_asac_trade_frozen_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
                v_asac_trade_unfroz_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
                v_asac_trade_capt_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
                v_asac_trade_releas_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
                v_asac_strike_capt_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
                v_asac_strike_releas_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
                v_asac_cash_update_times = lpTSCall1Ans9->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
                v_asac_posi_id = lpTSCall1Ans9->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
                v_asac_frozen_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
                v_asac_unfroz_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
                v_asac_comm_frozen_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
                v_asac_comm_unfroz_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
                v_asac_comm_capt_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
                v_asac_comm_releas_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
                v_asac_trade_frozen_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
                v_asac_trade_unfroz_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
                v_asac_trade_capt_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
                v_asac_trade_releas_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
                v_asac_strike_capt_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
                v_asac_strike_releas_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
                v_asac_strike_frozen_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
                v_asac_strike_unfroz_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
                v_asac_realize_pandl = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
                v_asac_cost_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
                v_asac_intrst_cost_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
                v_asac_intrst_pandl = lpTSCall1Ans9->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
                v_asac_posi_update_times = lpTSCall1Ans9->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


                // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
                lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
                lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
                lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
                glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


                // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
                lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
                lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
                lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
                lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
                lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
                lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
                lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
                glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


                // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
                lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
                lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
                lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
                glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


                // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
                lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
                lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
                lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
                lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
                lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
                lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
                lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
                glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

                //主推：交易证券_账户_交易组业务资金负债表、交易证券_账户_资产账户业务资金负债表、交易证券_账户_交易组业务持仓负债表、交易证券_账户_资产账户业务持仓负债表、    交易    证券_    账户_资产账户负债明细表、交易证券_账户_交易组负债明细表
                //调用过程[事务_交易证券_账户_查询交易组业务持仓负债]
                //组织事务请求
                if(lpTSCall1Ans10)
                {
                  lpTSCall1Ans10->FreeMsg();
                  lpTSCall1Ans10=NULL;
                }
                lpTSCall1Req10=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.76", 0);
                lpTSCall1Req10->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req10->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req10->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req10->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req10->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req10->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req10->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req10->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req10->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                lpTSCall1Req10->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpTSCall1Req10->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpTSCall1Req10->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpTSCall1Req10->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                lpTSCall1Req10->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                lpTSCall1Req10->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                lpTSCall1Req10->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
                glpTSSubcallSerives->SubCall(lpTSCall1Req10, &lpTSCall1Ans10, 5000);
                if(!lpTSCall1Ans10)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.76]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans10->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
                v_row_id = lpTSCall1Ans10->GetInt64(LDBIZ_ROW_ID_INT64);
                v_exch_no = lpTSCall1Ans10->GetInt32(LDBIZ_EXCH_NO_INT);
                v_stock_type = lpTSCall1Ans10->GetInt32(LDBIZ_STOCK_TYPE_INT);
                v_asset_type = lpTSCall1Ans10->GetInt32(LDBIZ_ASSET_TYPE_INT);
                v_invest_type = lpTSCall1Ans10->GetInt32(LDBIZ_INVEST_TYPE_INT);
                v_debt_fina_buy_strike_qty = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT);
                v_fina_return_strike_qty = lpTSCall1Ans10->GetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT);
                v_debt_loan_sell_strike_qty = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT);
                v_loan_return_strike_qty = lpTSCall1Ans10->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT);
                v_debt_fina_buy_order_qty = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT);
                v_fina_return_order_qty = lpTSCall1Ans10->GetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT);
                v_debt_loan_sell_order_qty = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT);
                v_loan_return_order_qty = lpTSCall1Ans10->GetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT);
                v_debt_fina_buy_comm_qty = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT);
                v_fina_return_comm_qty = lpTSCall1Ans10->GetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT);
                v_debt_loan_sell_comm_qty = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT);
                v_loan_return_comm_qty = lpTSCall1Ans10->GetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT);
                v_debt_fina_buy_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT);
                v_fina_return_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT);
                v_debt_loan_sell_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
                v_loan_return_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
                v_debt_fina_buy_order_amt = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT);
                v_fina_return_order_amt = lpTSCall1Ans10->GetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT);
                v_debt_loan_sell_order_amt = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT);
                v_loan_return_order_amt = lpTSCall1Ans10->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
                v_debt_fina_buy_comm_amt = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT);
                v_fina_return_comm_amt = lpTSCall1Ans10->GetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT);
                v_debt_loan_sell_comm_amt = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT);
                v_loan_return_comm_amt = lpTSCall1Ans10->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
                v_debt_strike_fee = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
                v_return_strike_fee = lpTSCall1Ans10->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
                v_debt_interest = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_INTEREST_FLOAT);
                v_return_interest_amt = lpTSCall1Ans10->GetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT);
                v_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_UPDATE_TIMES_INT);


                // [主动推送][secu.exgpposidebt][证券主推_持仓_交易组业务持仓负债主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.928", 0);
                lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
                lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
                lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
                lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
                lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
                lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
                lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
                lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
                lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
                lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
                lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
                lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                glpPubSub_Interface->PubTopics("secu.exgpposidebt", lpPubMsg);

                //调用过程[事务_交易证券_账户_查询资产账户业务持仓负债]
                //组织事务请求
                if(lpTSCall1Ans11)
                {
                  lpTSCall1Ans11->FreeMsg();
                  lpTSCall1Ans11=NULL;
                }
                lpTSCall1Req11=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.77", 0);
                lpTSCall1Req11->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req11->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req11->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req11->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req11->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req11->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req11->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req11->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req11->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                lpTSCall1Req11->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpTSCall1Req11->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpTSCall1Req11->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpTSCall1Req11->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                lpTSCall1Req11->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                lpTSCall1Req11->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
                glpTSSubcallSerives->SubCall(lpTSCall1Req11, &lpTSCall1Ans11, 5000);
                if(!lpTSCall1Ans11)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.77]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans11->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));


                // [主动推送][secu.asacposidebt][证券主推_持仓_资产账户业务持仓负债主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.929", 0);
                lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
                lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
                lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
                lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
                lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
                lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
                lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
                lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
                lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
                lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
                lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
                lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                glpPubSub_Interface->PubTopics("secu.asacposidebt", lpPubMsg);

                //调用过程[事务_交易证券_账户_查询资产账户业务资金负债]
                //组织事务请求
                if(lpTSCall1Ans12)
                {
                  lpTSCall1Ans12->FreeMsg();
                  lpTSCall1Ans12=NULL;
                }
                lpTSCall1Req12=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.75", 0);
                lpTSCall1Req12->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req12->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req12->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req12->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req12->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req12->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req12->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req12->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req12->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                lpTSCall1Req12->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpTSCall1Req12->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpTSCall1Req12->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                glpTSSubcallSerives->SubCall(lpTSCall1Req12, &lpTSCall1Ans12, 5000);
                if(!lpTSCall1Ans12)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.75]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans12->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
                v_row_id = lpTSCall1Ans12->GetInt64(LDBIZ_ROW_ID_INT64);
                v_debt_loan_sell_strike_amt = lpTSCall1Ans12->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
                v_debt_strike_fee = lpTSCall1Ans12->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
                v_loan_return_strike_amt = lpTSCall1Ans12->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
                v_loan_return_order_amt = lpTSCall1Ans12->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
                v_loan_return_comm_amt = lpTSCall1Ans12->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
                v_return_strike_fee = lpTSCall1Ans12->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
                v_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_UPDATE_TIMES_INT);


                // [主动推送][secu.asaccapitaldebt][证券主推_资金_资产账户业务资金负债主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.930", 0);
                lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
                lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
                lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                glpPubSub_Interface->PubTopics("secu.asaccapitaldebt", lpPubMsg);

                //调用过程[事务_交易证券_账户_查询交易组业务资金负债]
                //组织事务请求
                if(lpTSCall1Ans13)
                {
                  lpTSCall1Ans13->FreeMsg();
                  lpTSCall1Ans13=NULL;
                }
                lpTSCall1Req13=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.74", 0);
                lpTSCall1Req13->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req13->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req13->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req13->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req13->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req13->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req13->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req13->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req13->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                lpTSCall1Req13->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpTSCall1Req13->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpTSCall1Req13->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpTSCall1Req13->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                glpTSSubcallSerives->SubCall(lpTSCall1Req13, &lpTSCall1Ans13, 5000);
                if(!lpTSCall1Ans13)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.74]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans13->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));
                v_row_id = lpTSCall1Ans13->GetInt64(LDBIZ_ROW_ID_INT64);
                v_debt_loan_sell_strike_amt = lpTSCall1Ans13->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
                v_debt_strike_fee = lpTSCall1Ans13->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
                v_loan_return_strike_amt = lpTSCall1Ans13->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
                v_loan_return_order_amt = lpTSCall1Ans13->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
                v_loan_return_comm_amt = lpTSCall1Ans13->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
                v_return_strike_fee = lpTSCall1Ans13->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
                v_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_UPDATE_TIMES_INT);


                // [主动推送][secu.exgpcapitaldebt][证券主推_资金_交易组业务资金负债主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.931", 0);
                lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
                lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
                lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
                lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                glpPubSub_Interface->PubTopics("secu.exgpcapitaldebt", lpPubMsg);

             }
             // else
             else
             {

               //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
               //组织事务请求
               if(lpTSCall1Ans14)
               {
                 lpTSCall1Ans14->FreeMsg();
                 lpTSCall1Ans14=NULL;
               }
               lpTSCall1Req14=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
               lpTSCall1Req14->SetInt32(LDTAG_PRIORITY, iPriority);
               lpTSCall1Req14->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
               lpTSCall1Req14->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
               lpTSCall1Req14->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
               lpTSCall1Req14->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
               lpTSCall1Req14->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
               lpTSCall1Req14->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
               lpTSCall1Req14->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
               lpTSCall1Req14->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpTSCall1Req14->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpTSCall1Req14->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
               lpTSCall1Req14->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpTSCall1Req14->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
               lpTSCall1Req14->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
               lpTSCall1Req14->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
               glpTSSubcallSerives->SubCall(lpTSCall1Req14, &lpTSCall1Ans14, 5000);
               if(!lpTSCall1Ans14)  //  超时错误
               {
                   lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                   lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                   iRet=-2;
                   goto ENDSYS;
               }
               else if(lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
               {
                   lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO));
                   lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans14->GetString(LDTAG_ERRORINFO));
                   iRet=-2;
                   goto ENDSYS;
               }
               else if(strcmp(lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
               {
                   strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
                   strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
                   iRet=-1;
                   goto END;
               }
               //获取输出参数值
               strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
               strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
               v_exgp_cash_id = lpTSCall1Ans14->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
               v_exgp_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
               v_exgp_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
               v_exgp_comm_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
               v_exgp_comm_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
               v_exgp_comm_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
               v_exgp_comm_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
               v_exgp_trade_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
               v_exgp_trade_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
               v_exgp_trade_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
               v_exgp_trade_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
               v_exgp_strike_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
               v_exgp_strike_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
               v_exgp_cash_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
               v_exgp_posi_id = lpTSCall1Ans14->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
               v_exgp_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
               v_exgp_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
               v_exgp_comm_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
               v_exgp_comm_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
               v_exgp_comm_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
               v_exgp_comm_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
               v_exgp_trade_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
               v_exgp_trade_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
               v_exgp_trade_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
               v_exgp_trade_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
               v_exgp_strike_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
               v_exgp_strike_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
               v_exgp_strike_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
               v_exgp_strike_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
               v_exgp_realize_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
               v_exgp_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
               v_exgp_intrst_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
               v_exgp_intrst_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
               v_exgp_posi_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
               v_asac_cash_id = lpTSCall1Ans14->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
               v_asac_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
               v_asac_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
               v_asac_comm_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
               v_asac_comm_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
               v_asac_comm_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
               v_asac_comm_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
               v_asac_trade_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
               v_asac_trade_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
               v_asac_trade_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
               v_asac_trade_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
               v_asac_strike_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
               v_asac_strike_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
               v_asac_cash_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
               v_asac_posi_id = lpTSCall1Ans14->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
               v_asac_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
               v_asac_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
               v_asac_comm_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
               v_asac_comm_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
               v_asac_comm_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
               v_asac_comm_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
               v_asac_trade_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
               v_asac_trade_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
               v_asac_trade_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
               v_asac_trade_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
               v_asac_strike_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
               v_asac_strike_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
               v_asac_strike_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
               v_asac_strike_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
               v_asac_realize_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
               v_asac_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
               v_asac_intrst_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
               v_asac_intrst_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
               v_asac_posi_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


               // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
               lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
               lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
               lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
               glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


               // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
               lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
               lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
               lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
               lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
               lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
               glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


               // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
               lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
               lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
               lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
               glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


               // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
               lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
               lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
               lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
               lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
               lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
               lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
               lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
               lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
               lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
               lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
               lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
               lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
               lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
               glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

             // end if;
             }

        // end if;
        }

    // end if;
    }

    //回报成功需要处理质押提交或质押转回

    // if @记录个数# = 1 and (@订单方向# = 《订单方向-质押提交》 or  @订单方向# = 《订单方向-质押转回》) then
    if (v_record_count == 1 && (v_order_dir == 21 ||  v_order_dir == 22))
    {

         // set @成交价格# = @订单价格#;
         v_strike_price = v_order_price;

         // set @成交数量# = @订单数量#;
         v_strike_qty = v_order_qty;
         //调用过程[事务_公共_公共接口_计算证券成交费用]
         //组织事务请求
         if(lpTSCall1Ans15)
         {
           lpTSCall1Ans15->FreeMsg();
           lpTSCall1Ans15=NULL;
         }
         lpTSCall1Req15=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
         lpTSCall1Req15->SetInt32(LDTAG_PRIORITY, iPriority);
         lpTSCall1Req15->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
         lpTSCall1Req15->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
         lpTSCall1Req15->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
         lpTSCall1Req15->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
         lpTSCall1Req15->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
         lpTSCall1Req15->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
         lpTSCall1Req15->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
         lpTSCall1Req15->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
         lpTSCall1Req15->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
         lpTSCall1Req15->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
         lpTSCall1Req15->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
         lpTSCall1Req15->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
         lpTSCall1Req15->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
         lpTSCall1Req15->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
         lpTSCall1Req15->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
         lpTSCall1Req15->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
         lpTSCall1Req15->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
         lpTSCall1Req15->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
         lpTSCall1Req15->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
         lpTSCall1Req15->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
         glpTSSubcallSerives->SubCall(lpTSCall1Req15, &lpTSCall1Ans15, 5000);
         if(!lpTSCall1Ans15)  //  超时错误
         {
             lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
             lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
             iRet=-2;
             goto ENDSYS;
         }
         else if(lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
         {
             lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO));
             lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans15->GetString(LDTAG_ERRORINFO));
             iRet=-2;
             goto ENDSYS;
         }
         else if(strcmp(lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
         {
             strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
             strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
             iRet=-1;
             goto END;
         }
         //获取输出参数值
         strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
         strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
         v_trade_commis = lpTSCall1Ans15->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
         v_all_fee = lpTSCall1Ans15->GetDouble(LDBIZ_ALL_FEE_FLOAT);
         v_stamp_tax = lpTSCall1Ans15->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
         v_trans_fee = lpTSCall1Ans15->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
         v_brkage_fee = lpTSCall1Ans15->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
         v_SEC_charges = lpTSCall1Ans15->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
         v_other_fee = lpTSCall1Ans15->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
         v_other_commis = lpTSCall1Ans15->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
         v_trade_tax = lpTSCall1Ans15->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
         v_trade_cost_fee = lpTSCall1Ans15->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
         v_trade_system_use_fee = lpTSCall1Ans15->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
         v_stock_settle_fee = lpTSCall1Ans15->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);


         // set @成交日期# = @申报日期#;
         v_strike_date = v_report_date;

         // set @成交时间# = @申报时间#;
         v_strike_time = v_report_time;

         // set @成交编号# = concat("P_", @订单序号#);
         snprintf(v_strike_no,sizeof(v_strike_no),"%s%ld","P_",v_order_id);

         // set @成交金额# = @成交价格# * @成交数量#;
         v_strike_amt = v_strike_price * v_strike_qty;

         // set @回报信息# = "报盘机补单回报触发质押成交。";
         strcpy(v_rsp_info,"报盘机补单回报触发质押成交。");

         // set @成交处理方式# = 《成交处理方式-分笔》;
         v_strike_deal_type = 1;

         // set @交易组成本金额# = 0;
         v_exgp_cost_amt = 0;

         // set @交易组利息成本金额# = 0;
         v_exgp_intrst_cost_amt = 0;

         // set @交易组当前数量# = 0;
         v_exgp_curr_qty = 0;

         // set @资产账户成本金额# = 0;
         v_asac_cost_amt = 0;

         // set @资产账户利息成本金额# = 0;
         v_asac_intrst_cost_amt = 0;

         // set @资产账户当前数量# = 0;
         v_asac_curr_qty = 0;

         // set @回报序号# = 0;
         v_rsp_id = 0;

         // set @组合代码# = " ";
         strcpy(v_combo_code," ");
         //调用过程[事务_交易证券_报盘_处理成交回报]
         //组织事务请求
         if(lpTSCall1Ans16)
         {
           lpTSCall1Ans16->FreeMsg();
           lpTSCall1Ans16=NULL;
         }
         lpTSCall1Req16=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.21", 0);
         lpTSCall1Req16->SetInt32(LDTAG_PRIORITY, iPriority);
         lpTSCall1Req16->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
         lpTSCall1Req16->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
         lpTSCall1Req16->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
         lpTSCall1Req16->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
         lpTSCall1Req16->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
         lpTSCall1Req16->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
         lpTSCall1Req16->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
         lpTSCall1Req16->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
         lpTSCall1Req16->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
         lpTSCall1Req16->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
         lpTSCall1Req16->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
         lpTSCall1Req16->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
         lpTSCall1Req16->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
         lpTSCall1Req16->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
         lpTSCall1Req16->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
         lpTSCall1Req16->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
         lpTSCall1Req16->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
         lpTSCall1Req16->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
         lpTSCall1Req16->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
         lpTSCall1Req16->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
         lpTSCall1Req16->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
         lpTSCall1Req16->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
         lpTSCall1Req16->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
         lpTSCall1Req16->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
         lpTSCall1Req16->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
         lpTSCall1Req16->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
         lpTSCall1Req16->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
         lpTSCall1Req16->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
         lpTSCall1Req16->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
         lpTSCall1Req16->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
         lpTSCall1Req16->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
         lpTSCall1Req16->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
         lpTSCall1Req16->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
         lpTSCall1Req16->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
         lpTSCall1Req16->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
         lpTSCall1Req16->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
         lpTSCall1Req16->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
         lpTSCall1Req16->SetInt64(LDBIZ_RSP_ID_INT64,v_rsp_id);
         lpTSCall1Req16->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
         lpTSCall1Req16->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
         lpTSCall1Req16->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
         lpTSCall1Req16->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
         lpTSCall1Req16->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
         lpTSCall1Req16->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
         lpTSCall1Req16->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
         glpTSSubcallSerives->SubCall(lpTSCall1Req16, &lpTSCall1Ans16, 5000);
         if(!lpTSCall1Ans16)  //  超时错误
         {
             lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
             lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.21]subcall timed out!");
             iRet=-2;
             goto ENDSYS;
         }
         else if(lpTSCall1Ans16->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
         {
             lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans16->GetInt32(LDTAG_ERRORNO));
             lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans16->GetString(LDTAG_ERRORINFO));
             iRet=-2;
             goto ENDSYS;
         }
         else if(strcmp(lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
         {
             strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
             strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));
             iRet=-1;
             goto END;
         }
         //获取输出参数值
         strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
         strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));
         v_strike_id = lpTSCall1Ans16->GetInt64(LDBIZ_STRIKE_ID_INT64);
         v_co_no = lpTSCall1Ans16->GetInt32(LDBIZ_CO_NO_INT);
         v_pd_no = lpTSCall1Ans16->GetInt32(LDBIZ_PD_NO_INT);
         v_exch_group_no = lpTSCall1Ans16->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
         v_asset_acco_no = lpTSCall1Ans16->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
         v_stock_acco_no = lpTSCall1Ans16->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
         v_stock_code_no = lpTSCall1Ans16->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
         strcpy(v_target_code, lpTSCall1Ans16->GetString(LDBIZ_TARGET_CODE_STR));
         v_order_date = lpTSCall1Ans16->GetInt32(LDBIZ_ORDER_DATE_INT);
         v_order_batch_no = lpTSCall1Ans16->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
         v_report_time = lpTSCall1Ans16->GetInt32(LDBIZ_REPORT_TIME_INT);
         v_comm_date = lpTSCall1Ans16->GetInt32(LDBIZ_COMM_DATE_INT);
         v_comm_id = lpTSCall1Ans16->GetInt64(LDBIZ_COMM_ID_INT64);
         v_comm_batch_no = lpTSCall1Ans16->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
         v_comm_executor = lpTSCall1Ans16->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
         v_external_no = lpTSCall1Ans16->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
         v_busi_opor_no = lpTSCall1Ans16->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
         strcpy(v_order_oper_way, lpTSCall1Ans16->GetString(LDBIZ_ORDER_OPER_WAY_STR));
         v_total_strike_amt = lpTSCall1Ans16->GetDouble(LDBIZ_TOTAL_STRIKE_AMT_FLOAT);
         v_total_strike_qty = lpTSCall1Ans16->GetDouble(LDBIZ_TOTAL_STRIKE_QTY_FLOAT);
         v_cost_calc_type = lpTSCall1Ans16->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
         v_order_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
         v_order_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
         v_strike_bond_accr_intrst = lpTSCall1Ans16->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
         v_wtdraw_qty = lpTSCall1Ans16->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
         strcpy(v_order_status, lpTSCall1Ans16->GetString(LDBIZ_ORDER_STATUS_STR));
         v_update_times = lpTSCall1Ans16->GetInt32(LDBIZ_UPDATE_TIMES_INT);
         v_trade_occur_amt = lpTSCall1Ans16->GetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT);
         v_open_posi_date = lpTSCall1Ans16->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
         v_original_order_dir = lpTSCall1Ans16->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);


        // set @当笔成交价格# = @成交价格#;
        v_curr_strike_price = v_strike_price;

        // set @当笔成交金额# = @成交金额#;
        v_curr_strike_amt = v_strike_amt;

        // set @当笔成交数量# = @成交数量#;
        v_curr_strike_qty = v_strike_qty;

        // set @临时_更新次数# = @更新次数#;
        v_tmp_update_times = v_update_times;

        // set @操作员编号# =@业务操作员编号#;
        v_opor_no =v_busi_opor_no;

        // set @更新次数# = 1;
        v_update_times = 1;

        // set @记录有效标志# =《记录有效标志-有效》;
        v_record_valid_flag =1;

        // [主动推送][secu.rptstrike][证券主推_报盘_成交主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.33", 0);
        lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
        lpPubMsg->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
        lpPubMsg->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
        lpPubMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
        lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
        lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
        lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
        lpPubMsg->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
        lpPubMsg->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
        lpPubMsg->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
        lpPubMsg->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
        lpPubMsg->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
        lpPubMsg->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
        lpPubMsg->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
        lpPubMsg->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
        lpPubMsg->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
        lpPubMsg->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
        lpPubMsg->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
        lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
        lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
        lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
        lpPubMsg->SetInt32(LDBIZ_RECORD_VALID_FLAG_INT,v_record_valid_flag);
        lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
        lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.rptstrike", lpPubMsg);


        // set @更新次数# = @临时_更新次数#;
        v_update_times = v_tmp_update_times;

        // set @成交金额# = @总成交金额#;
        v_strike_amt = v_total_strike_amt;

        // set @成交数量# = @总成交数量#;
        v_strike_qty = v_total_strike_qty;

        // set @撤单状态# = "0";
        strcpy(v_wtdraw_status,"0");

        // [主动推送][secu.order][证券主推_订单_订单主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
        lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
        lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
        lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
        lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
        lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
        lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
        lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
        lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
        lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
        lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
        lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
        lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
        lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
        lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
        lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
        lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
        lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
        lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
        lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);

      //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
      //组织事务请求
      if(lpTSCall1Ans17)
      {
        lpTSCall1Ans17->FreeMsg();
        lpTSCall1Ans17=NULL;
      }
      lpTSCall1Req17=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
      lpTSCall1Req17->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req17->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req17->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req17->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req17->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req17->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req17->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req17->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req17->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req17->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req17->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req17->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req17->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req17->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
      lpTSCall1Req17->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpTSCall1Req17->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
      glpTSSubcallSerives->SubCall(lpTSCall1Req17, &lpTSCall1Ans17, 5000);
      if(!lpTSCall1Ans17)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans17->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans17->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans17->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans17->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans17->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans17->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans17->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans17->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans17->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans17->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans17->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans17->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans17->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
      v_exgp_target_posi_id = lpTSCall1Ans17->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
      v_exgp_target_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
      v_exgp_target_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
      v_exgp_target_comm_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
      v_exgp_target_comm_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_target_comm_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
      v_exgp_target_comm_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
      v_exgp_target_trade_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_target_trade_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_target_trade_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
      v_exgp_target_trade_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_target_strike_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_target_strike_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_target_strike_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_target_strike_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_target_realize_pandl = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
      v_exgp_target_cost_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
      v_exgp_target_intrst_cost_amt = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
      v_exgp_target_intrst_pandl = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
      v_exgp_target_posi_update_times = lpTSCall1Ans17->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
      v_asac_target_posi_id = lpTSCall1Ans17->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
      v_asac_target_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
      v_asac_target_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
      v_asac_target_comm_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
      v_asac_target_comm_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
      v_asac_target_comm_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
      v_asac_target_comm_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
      v_asac_target_trade_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
      v_asac_target_trade_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_target_trade_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
      v_asac_target_trade_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
      v_asac_target_strike_capt_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
      v_asac_target_strike_releas_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_target_strike_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_target_strike_unfroz_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_target_realize_pandl = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
      v_asac_target_cost_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
      v_asac_target_intrst_cost_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
      v_asac_target_intrst_pandl = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
      v_asac_target_posi_update_times = lpTSCall1Ans17->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
      v_exgp_put_impawn_qty = lpTSCall1Ans17->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
      v_asac_put_impawn_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


      // set @交易组提交质押数量# = 0;
      v_exgp_put_impawn_qty = 0;

      // set @资产账户提交质押数量# = 0;
      v_asac_put_impawn_qty = 0;

      // set @交易组持仓序号# = @交易组标的持仓序号#;
      v_exgp_posi_id = v_exgp_target_posi_id;

      // set @交易组冻结数量# = @交易组标的冻结数量#;
      v_exgp_frozen_qty = v_exgp_target_frozen_qty;

      // set @交易组解冻数量# = @交易组标的解冻数量#;
      v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

      // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
      v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

      // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
      v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

      // set @交易组指令占用数量# = @交易组标的指令占用数量#;
      v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

      // set @交易组指令释放数量# = @交易组标的指令释放数量#;
      v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

      // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
      v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

      // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
      v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

      // set @交易组交易占用数量# = @交易组标的交易占用数量#;
      v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

      // set @交易组交易释放数量# = @交易组标的交易释放数量#;
      v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

      // set @交易组成交占用数量# = @交易组标的成交占用数量#;
      v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

      // set @交易组成交释放数量# = @交易组标的成交释放数量#;
      v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

      // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
      v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

      // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
      v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

      // set @交易组实现盈亏# = @交易组标的实现盈亏#;
      v_exgp_realize_pandl = v_exgp_target_realize_pandl;

      // set @交易组成本金额# = @交易组标的成本金额#;
      v_exgp_cost_amt = v_exgp_target_cost_amt;

      // set @交易组利息成本金额# = @交易组标的利息成本金额#;
      v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

      // set @交易组利息收益# = @交易组标的利息收益#;
      v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

      // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
      v_exgp_posi_update_times = v_exgp_target_posi_update_times;

      // set @资产账户持仓序号# = @资产账户标的持仓序号#;
      v_asac_posi_id = v_asac_target_posi_id;

      // set @资产账户冻结数量# = @资产账户标的冻结数量#;
      v_asac_frozen_qty = v_asac_target_frozen_qty;

      // set @资产账户解冻数量# = @资产账户标的解冻数量#;
      v_asac_unfroz_qty = v_asac_target_unfroz_qty;

      // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
      v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

      // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
      v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

      // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
      v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

      // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
      v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

      // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
      v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

      // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
      v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

      // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
      v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

      // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
      v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

      // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
      v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

      // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
      v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

      // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
      v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

      // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
      v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

      // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
      v_asac_realize_pandl = v_asac_target_realize_pandl;

      // set @资产账户成本金额# = @资产账户标的成本金额#;
      v_asac_cost_amt = v_asac_target_cost_amt;

      // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
      v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

      // set @资产账户利息收益# = @资产账户标的利息收益#;
      v_asac_intrst_pandl = v_asac_target_intrst_pandl;

      // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
      v_asac_posi_update_times = v_asac_target_posi_update_times;

      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

    // end if;
    }


END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans18)
        {
          lpTSCall1Ans18->FreeMsg();
          lpTSCall1Ans18=NULL;
        }
        lpTSCall1Req18=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req18->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req18->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req18->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req18->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req18->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req18->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req18->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req18->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req18->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req18->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req18, &lpTSCall1Ans18, 5000);
        if (lpTSCall1Ans18)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans18->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans18->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans18->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans18->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
    lpOutBizMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpOutBizMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpOutBizMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpOutBizMsg->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpOutBizMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpOutBizMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpOutBizMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpOutBizMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpOutBizMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpOutBizMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpOutBizMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpOutBizMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpOutBizMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpOutBizMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpOutBizMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    if(lpTSCall1Ans3)
        lpTSCall1Ans3->FreeMsg();
    if(lpTSCall1Ans4)
        lpTSCall1Ans4->FreeMsg();
    if(lpTSCall1Ans5)
        lpTSCall1Ans5->FreeMsg();
    if(lpTSCall1Ans6)
        lpTSCall1Ans6->FreeMsg();
    if(lpTSCall1Ans7)
        lpTSCall1Ans7->FreeMsg();
    if(lpTSCall1Ans8)
        lpTSCall1Ans8->FreeMsg();
    if(lpTSCall1Ans9)
        lpTSCall1Ans9->FreeMsg();
    if(lpTSCall1Ans10)
        lpTSCall1Ans10->FreeMsg();
    if(lpTSCall1Ans11)
        lpTSCall1Ans11->FreeMsg();
    if(lpTSCall1Ans12)
        lpTSCall1Ans12->FreeMsg();
    if(lpTSCall1Ans13)
        lpTSCall1Ans13->FreeMsg();
    if(lpTSCall1Ans14)
        lpTSCall1Ans14->FreeMsg();
    if(lpTSCall1Ans15)
        lpTSCall1Ans15->FreeMsg();
    if(lpTSCall1Ans16)
        lpTSCall1Ans16->FreeMsg();
    if(lpTSCall1Ans17)
        lpTSCall1Ans17->FreeMsg();
    if(lpTSCall1Ans18)
        lpTSCall1Ans18->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_修改订单错单
int LD_CALL_MODE fnFunc4(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_order_date;
    int64 v_order_id;
    int v_strike_date;
    int v_strike_time;
    char v_strike_no[65];
    double v_strike_qty;
    double v_strike_price;
    int v_deal_type;
    char v_deal_status[3];
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    double v_tmp_strike_qty;
    double v_tmp_strike_price;
    int v_busi_opor_no;
    char v_order_oper_way[3];
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    int v_asset_acco_no;
    int v_pass_no;
    int v_exch_no;
    int v_stock_acco_no;
    char v_stock_acco[17];
    int v_stock_code_no;
    char v_stock_code[7];
    int v_stock_type;
    int v_asset_type;
    int64 v_comm_id;
    int v_comm_batch_no;
    int v_report_date;
    int v_report_time;
    char v_report_no[33];
    int v_order_time;
    int v_order_dir;
    double v_order_price;
    double v_order_qty;
    double v_order_frozen_qty;
    double v_order_frozen_amt;
    char v_order_status[3];
    int v_price_type;
    double v_strike_amt;
    double v_all_fee;
    double v_wtdraw_qty;
    int v_wtdraw_time;
    int v_exter_comm_flag;
    int v_cost_calc_type;
    char v_combo_code[33];
    int64 v_combo_posi_id;
    int64 v_strategy_id;
    int v_order_batch_no;
    char v_out_acco[33];
    int v_asset_acco_type;
    char v_contra_no[33];
    int v_exist_debt_flag;
    int v_update_times;
    int v_init_date;
    char v_sys_config_str[65];
    char v_co_busi_config_str[65];
    char v_exgp_busi_config_str[65];
    char v_crncy_type[4];
    char v_exch_crncy_type[4];
    double v_buy_ref_rate;
    double v_sell_ref_rate;
    double v_par_value;
    double v_impawn_ratio;
    int v_net_price_flag;
    int v_intrst_days;
    double v_bond_accr_intrst;
    int v_bond_rate_type;
    int v_trade_code_no;
    int v_target_code_no;
    int v_min_unit;
    double v_up_limit_price;
    double v_down_limit_price;
    double v_last_price;
    int v_repo_days;
    int v_repo_back_date;
    int v_capit_reback_days;
    int v_posi_reback_days;
    int v_bond_qty_unit_set;
    int v_apply_date;
    char v_trade_acco[33];
    char v_busi_config_str[65];
    int v_repo_cale_days;
    char v_busi_ctrl_str[65];
    char v_asac_busi_config_str[65];
    char v_split_fee_typr_str[65];
    char v_busi_limit_str[2049];
    double v_nav_asset;
    double v_market_price_ratio;
    int v_market_price_type;
    double v_order_market_price;
    int v_sys_type;
    char v_opor_no_str1[2049];
    char v_opor_no_str2[2049];
    char v_opor_no_str3[2049];
    double v_fina_limit_max;
    double v_loan_limit_max;
    int v_sell_auto_back_debt;
    char v_rsp_status[3];
    char v_rsp_info[256];
    int64 v_external_no;
    int v_comm_date;
    int v_comm_executor;
    int v_comm_opor;
    double v_strike_bond_accr_intrst;
    char v_wtdraw_status[3];
    char v_old_order_status[3];
    int v_open_posi_date;
    double v_curr_strike_price;
    double v_curr_strike_amt;
    double v_curr_strike_qty;
    int64 v_strike_id;
    int64 v_sum_order_row_id;
    int v_sum_order_opor_no;
    int v_sum_order_co_no;
    int v_sum_order_pd_no;
    int v_sum_order_exch_group_no;
    int v_sum_order_asset_acco_no;
    int v_sum_order_pass_no;
    char v_sum_order_exch_crncy_type[4];
    int v_sum_order_stock_code_no;
    int v_sum_order_trade_code_no;
    int v_sum_order_target_code_no;
    int64 v_sum_order_external_no;
    int v_sum_order_date;
    int v_sum_order_batch_no;
    int v_sum_order_dir;
    int v_sum_order_price_type;
    double v_sum_order_price;
    double v_sum_order_qty;
    char v_order_sum_status[3];
    double v_sum_order_wtdraw_qty;
    double v_sum_order_waste_qty;
    double v_sum_order_strike_amt;
    double v_sum_order_strike_qty;
    double v_sum_order_strike_aver_price;
    int v_sum_order_net_price_flag;
    double v_sum_order_bond_accr_intrst;
    int v_sum_order_bond_rate_type;
    double v_sum_order_par_value;
    double v_sum_order_impawn_ratio;
    char v_sum_order_oper_way[3];
    int v_sum_order_update_times;
    int64 v_sum_strike_row_id;
    int v_sum_strike_opor_no;
    int v_sum_strike_co_no;
    int v_sum_strike_pd_no;
    int v_sum_strike_exch_group_no;
    int v_sum_strike_asset_acco_no;
    int v_sum_strike_pass_no;
    char v_sum_strike_out_acco[33];
    int v_sum_strike_stock_acco_no;
    int v_sum_strike_stock_code_no;
    int64 v_sum_strike_comm_id;
    int v_sum_strike_report_date;
    char v_sum_strike_report_no[33];
    int v_sum_strike_order_date;
    int64 v_sum_strike_order_id;
    int v_sum_strike_order_dir;
    double v_sum_strike_order_price;
    double v_sum_strike_order_qty;
    double v_sum_strike_strike_qty;
    double v_sum_strike_strike_amt;
    double v_sum_strike_all_fee;
    double v_sum_strike_stamp_tax;
    double v_sum_strike_trans_fee;
    double v_sum_strike_brkage_fee;
    double v_sum_strike_SEC_charges;
    double v_sum_strike_other_fee;
    double v_sum_strike_trade_commis;
    double v_sum_strike_other_commis;
    double v_sum_trade_tax;
    double v_sum_trade_cost_fee;
    double v_sum_trade_system_use_fee;
    double v_sum_stock_settle_fee;
    int v_sum_strike_net_price_flag;
    double v_sum_strike_bond_accr_intrst;
    int v_sum_strike_bond_rate_type;
    char v_sum_strike_order_oper_way[3];
    int v_sum_strike_exter_comm_flag;
    int v_sum_strike_update_times;
    int v_sum_strike_order_batch_no;
    int64 v_sum_external_no;
    int v_comm_time;
    int v_comm_dir;
    double v_comm_limit_price;
    double v_limit_actual_price;
    double v_comm_qty;
    double v_comm_amt;
    double v_comm_cancel_qty;
    double v_comm_frozen_amt;
    double v_comm_frozen_qty;
    char v_strike_status[3];
    char v_comm_status[3];
    int v_comm_begin_date;
    int v_comm_end_date;
    int v_comm_begin_time;
    int v_comm_end_time;
    int v_comm_comple_date;
    int v_comm_comple_time;
    int v_comm_appr_date;
    int v_comm_appr_time;
    char v_comm_appr_status[3];
    int v_comm_appr_oper;
    char v_comm_appr_remark[256];
    int64 v_basket_id;
    char v_comm_oper_way[3];
    int v_comm_comple_flag;
    double v_strategy_capt_qty;
    double v_strategy_order_qty;
    char v_comm_remark_info[1025];
    int v_disp_opor;
    int v_disp_status;
    int v_read_flag;
    int64 v_sum_comm_row_id;
    int v_sum_comm_co_no;
    int v_sum_comm_pd_no;
    int v_sum_comm_exch_group_no;
    int v_sum_comm_asset_acco_no;
    int v_sum_comm_pass_no;
    char v_sum_comm_out_acco[33];
    char v_sum_comm_exch_crncy_type[4];
    int v_sum_comm_stock_code_no;
    int v_sum_comm_date;
    int v_sum_comm_time;
    int v_sum_comm_batch_no;
    int v_sum_comm_opor;
    int v_sum_comm_executor;
    int v_sum_comm_dir;
    double v_sum_comm_limit_price;
    double v_sum_comm_qty;
    double v_sum_comm_amt;
    double v_sum_comm_order_qty;
    double v_sum_comm_cancel_qty;
    double v_sum_comm_await_cancel_qty;
    double v_sum_comm_strike_amt;
    double v_sum_comm_strike_qty;
    char v_sum_comm_strike_status[3];
    char v_comm_sum_status[3];
    int v_sum_comm_begin_date;
    int v_sum_comm_end_date;
    int v_sum_comm_begin_time;
    int v_sum_comm_end_time;
    int v_sum_comm_comple_date;
    int v_sum_comm_comple_time;
    int v_sum_comm_max_comm_comple_date;
    int v_sum_comm_max_comm_comple_time;
    int v_sum_comm_appr_date;
    int v_sum_comm_appr_time;
    double v_sum_comm_appr_qty;
    char v_comm_sum_approve_status[3];
    int64 v_sum_comm_basket_id;
    int v_sum_comm_net_price_flag;
    double v_sum_comm_bond_accr_intrst;
    int v_sum_comm_bond_rate_type;
    char v_sum_comm_oper_way[3];
    int v_sum_comm_exter_comm_flag;
    double v_sum_buy_order_qty;
    double v_sum_sell_order_qty;
    double v_sum_buy_comm_qty;
    double v_sum_sell_comm_qty;
    double v_sum_buy_strike_qty;
    double v_sum_sell_strike_qty;
    double v_sum_buy_strike_amt;
    double v_sum_sell_strike_amt;
    double v_sum_buy_comm_amt;
    double v_sum_sell_comm_amt;
    char v_sum_comm_remark_info[256];
    int v_sum_comm_update_times;
    char v_acco_concat_info[4097];
    int64 v_exgp_cash_id;
    double v_exgp_frozen_amt;
    double v_exgp_unfroz_amt;
    double v_exgp_comm_frozen_amt;
    double v_exgp_comm_unfroz_amt;
    double v_exgp_comm_capt_amt;
    double v_exgp_comm_releas_amt;
    double v_exgp_trade_frozen_amt;
    double v_exgp_trade_unfroz_amt;
    double v_exgp_trade_capt_amt;
    double v_exgp_trade_releas_amt;
    double v_exgp_strike_capt_amt;
    double v_exgp_strike_releas_amt;
    int v_exgp_cash_update_times;
    int64 v_exgp_posi_id;
    double v_exgp_frozen_qty;
    double v_exgp_unfroz_qty;
    double v_exgp_comm_frozen_qty;
    double v_exgp_comm_unfroz_qty;
    double v_exgp_comm_capt_qty;
    double v_exgp_comm_releas_qty;
    double v_exgp_trade_frozen_qty;
    double v_exgp_trade_unfroz_qty;
    double v_exgp_trade_capt_qty;
    double v_exgp_trade_releas_qty;
    double v_exgp_strike_capt_qty;
    double v_exgp_strike_releas_qty;
    double v_exgp_strike_frozen_qty;
    double v_exgp_strike_unfroz_qty;
    double v_exgp_realize_pandl;
    double v_exgp_cost_amt;
    double v_exgp_intrst_cost_amt;
    double v_exgp_intrst_pandl;
    int v_exgp_posi_update_times;
    int64 v_asac_cash_id;
    double v_asac_frozen_amt;
    double v_asac_unfroz_amt;
    double v_asac_comm_frozen_amt;
    double v_asac_comm_unfroz_amt;
    double v_asac_comm_capt_amt;
    double v_asac_comm_releas_amt;
    double v_asac_trade_frozen_amt;
    double v_asac_trade_unfroz_amt;
    double v_asac_trade_capt_amt;
    double v_asac_trade_releas_amt;
    double v_asac_strike_capt_amt;
    double v_asac_strike_releas_amt;
    int v_asac_cash_update_times;
    int64 v_asac_posi_id;
    double v_asac_frozen_qty;
    double v_asac_unfroz_qty;
    double v_asac_comm_frozen_qty;
    double v_asac_comm_unfroz_qty;
    double v_asac_comm_capt_qty;
    double v_asac_comm_releas_qty;
    double v_asac_trade_frozen_qty;
    double v_asac_trade_unfroz_qty;
    double v_asac_trade_capt_qty;
    double v_asac_trade_releas_qty;
    double v_asac_strike_capt_qty;
    double v_asac_strike_releas_qty;
    double v_asac_strike_frozen_qty;
    double v_asac_strike_unfroz_qty;
    double v_asac_realize_pandl;
    double v_asac_cost_amt;
    double v_asac_intrst_cost_amt;
    double v_asac_intrst_pandl;
    int v_asac_posi_update_times;
    int64 v_exgp_target_posi_id;
    double v_exgp_target_frozen_qty;
    double v_exgp_target_unfroz_qty;
    double v_exgp_target_comm_frozen_qty;
    double v_exgp_target_comm_unfroz_qty;
    double v_exgp_target_comm_capt_qty;
    double v_exgp_target_comm_releas_qty;
    double v_exgp_target_trade_frozen_qty;
    double v_exgp_target_trade_unfroz_qty;
    double v_exgp_target_trade_capt_qty;
    double v_exgp_target_trade_releas_qty;
    double v_exgp_target_strike_capt_qty;
    double v_exgp_target_strike_releas_qty;
    double v_exgp_target_strike_frozen_qty;
    double v_exgp_target_strike_unfroz_qty;
    double v_exgp_target_realize_pandl;
    double v_exgp_target_cost_amt;
    double v_exgp_target_intrst_cost_amt;
    double v_exgp_target_intrst_pandl;
    int v_exgp_target_posi_update_times;
    int64 v_asac_target_posi_id;
    double v_asac_target_frozen_qty;
    double v_asac_target_unfroz_qty;
    double v_asac_target_comm_frozen_qty;
    double v_asac_target_comm_unfroz_qty;
    double v_asac_target_comm_capt_qty;
    double v_asac_target_comm_releas_qty;
    double v_asac_target_trade_frozen_qty;
    double v_asac_target_trade_unfroz_qty;
    double v_asac_target_trade_capt_qty;
    double v_asac_target_trade_releas_qty;
    double v_asac_target_strike_capt_qty;
    double v_asac_target_strike_releas_qty;
    double v_asac_target_strike_frozen_qty;
    double v_asac_target_strike_unfroz_qty;
    double v_asac_target_realize_pandl;
    double v_asac_target_cost_amt;
    double v_asac_target_intrst_cost_amt;
    double v_asac_target_intrst_pandl;
    int v_asac_target_posi_update_times;
    double v_exgp_put_impawn_qty;
    double v_asac_put_impawn_qty;
    int64 v_modi_order_id;
    int v_modi_order_date;
    int v_modi_order_time;
    int v_modi_batch_no;
    double v_modi_order_price;
    double v_modi_order_qty;
    int v_modi_price_type;
    char v_modi_order_status[3];
    int64 v_new_order_id;
    char v_remark_info[256];
    char v_order_rsp_status[3];
    int64 v_row_id;
    double v_exgp_curr_qty;
    double v_asac_curr_qty;
    char v_tmp_strike_no[65];
    double v_tmp_strike_amt;
    int v_strike_deal_type;
    int64 v_rsp_id;
    char v_target_code[7];
    double v_total_strike_amt;
    double v_total_strike_qty;
    double v_trade_occur_amt;
    int v_original_order_dir;
    double v_tmp_all_fee;
    double v_tmp_trade_commis;
    double v_tmp_stamp_tax;
    double v_tmp_trans_fee;
    double v_tmp_brkage_fee;
    double v_tmp_SEC_charges;
    double v_tmp_other_fee;
    double v_tmp_other_commis;
    int v_T0_opor_fee_set_flag;
    double v_curr_amt;
    double v_frozen_amt;
    double v_opor_warn_tshold;
    double v_opor_stop_tshold;
    int v_order_limit_time;
    double v_per_secu_posi_ratio;
    int v_posi_limit_time;
    double v_order_ctrl_qty;
    double v_order_ctrl_amt;
    double v_stock_warn_ratio;
    double v_stock_stop_ratio;
    double v_stock_warn_amt;
    double v_stock_stop_amt;
    int v_trig_oper_type;
    int v_open_close_permission;
    int v_risk_oper;
    int v_fee_calc_type;
    int v_permit_margin_trade;
    double v_buy_fee_ratio;
    double v_sell_fee_ratio;
    double v_buy_min_fee;
    double v_sell_min_fee;
    double v_all_fee_for_tmp;
    double v_trade_commis;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    double v_tmp_trade_cost_fee;
    double v_tmp_trade_system_use_fee;
    double v_tmp_trade_tax;
    double v_tmp_stock_settle_fee;
    int v_tmp_update_times;
    int v_record_valid_flag;
    int v_tmp_order_batch_no;
    int64 v_repo_strike_id;
    double v_exch_rate;
    double v_repo_qty;
    double v_repo_amt;
    double v_repo_rate;
    int v_repo_trade_date;
    int64 v_repo_order_id;
    double v_repo_back_amt;
    double v_repo_back_intrst;
    int v_repo_back_trade_date;
    char v_repo_status[3];
    int64 v_bond_repo_id;
    double v_source_stock_qty;
    double v_single_limit_qty;
    double v_assigned_qty;
    double v_trade_releas_qty;
    double v_trade_capt_qty;
    double v_strike_releas_qty;
    double v_strike_capt_qty;
    double v_over_night_pandl;
    double v_sum_realize_pandl;
    double v_total_open_posi_fee;
    double v_total_close_posi_fee;
    double v_out_order_releas_qty;
    double v_out_order_capt_qty;
    double v_out_strike_releas_qty;
    double v_out_strike_capt_qty;
    double v_buy_avail_qty;
    double v_sell_avail_qty;
    double v_posi_qty;
    double v_today_trade_fee;
    double v_today_pandl;
    double v_diff_qty;
    double v_over_night_trade_buy_qty;
    double v_over_night_trade_sell_qty;
    double v_over_night_strike_sell_qty;
    double v_over_night_sumtrd_sell_qty;
    double v_over_night_sumstk_sell_qty;
    double v_trade_amt;
    double v_trade_qty;
    double v_realize_pandl;
    double v_yield_rate;
    double v_avail_amt;
    double v_total_long_curr_qty;
    double v_total_short_curr_qty;
    double v_total_long_open_posi_value;
    double v_total_short_open_posi_value;
    double v_total_long_open_posi_fee;
    double v_total_short_open_posi_fee;
    double v_total_long_close_posi_value;
    double v_total_short_close_posi_value;
    double v_total_long_close_posi_qty;
    double v_total_short_close_posi_qty;
    double v_total_long_close_posi_fee;
    double v_total_short_close_posi_fee;
    double v_total_realize_pandl;
    double v_long_curr_qty;
    double v_short_curr_qty;
    double v_long_open_posi_value;
    double v_short_open_posi_value;
    double v_long_open_posi_fee;
    double v_short_open_posi_fee;
    double v_long_close_posi_qty;
    double v_short_close_posi_qty;
    double v_long_close_posi_value;
    double v_short_close_posi_value;
    double v_long_close_posi_fee;
    double v_short_close_posi_fee;
    int v_open_posi_time;
    double v_curr_qty;
    double v_open_posi_value;
    double v_open_posi_fee;
    double v_cost_price;
    double v_begin_amt;
    double v_unfroz_amt;
    double v_comm_unfroz_amt;
    double v_comm_capt_amt;
    double v_comm_releas_amt;
    double v_trade_frozen_amt;
    double v_trade_unfroz_amt;
    double v_trade_capt_amt;
    double v_trade_releas_amt;
    double v_strike_capt_amt;
    double v_strike_releas_amt;
    int v_lngsht_type;
    double v_open_posi_price;
    double v_close_posi_qty;
    double v_close_posi_market_value;
    double v_close_posi_fee;
    char v_posi_status[3];
    double v_frozen_qty;
    double v_unfroz_qty;
    double v_pre_settle_qty;
    double v_trade_frozen_qty;
    double v_trade_unfroz_qty;
    double v_strike_frozen_qty;
    double v_strike_unfroz_qty;
    double v_cost_amt;
    double v_intrst_cost_amt;
    double v_intrst_pandl;
    double v_combo_copies;
    char v_combo_status[3];
    double v_combo_cost;
    double v_combo_market_value;
    char v_log_error_code[33];
    char v_log_error_info[256];

    IGroup* lpMainMsg=NULL;
    int iRecordCount = 0;

IFastMessage* lpPubMsg = NULL;
int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_order_date=0;
    v_order_id=0;
    v_strike_date=0;
    v_strike_time=0;
    strcpy(v_strike_no, " ");
    v_strike_qty=0;
    v_strike_price=0;
    v_deal_type=0;
    strcpy(v_deal_status, "0");
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_tmp_strike_qty=0;
    v_tmp_strike_price=0;
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    v_asset_acco_no=0;
    v_pass_no=0;
    v_exch_no=0;
    v_stock_acco_no=0;
    strcpy(v_stock_acco, " ");
    v_stock_code_no=0;
    strcpy(v_stock_code, " ");
    v_stock_type=0;
    v_asset_type=0;
    v_comm_id=0;
    v_comm_batch_no=0;
    v_report_date=0;
    v_report_time=0;
    strcpy(v_report_no, " ");
    v_order_time=0;
    v_order_dir=0;
    v_order_price=0;
    v_order_qty=0;
    v_order_frozen_qty=0;
    v_order_frozen_amt=0;
    strcpy(v_order_status, "0");
    v_price_type=0;
    v_strike_amt=0;
    v_all_fee=0;
    v_wtdraw_qty=0;
    v_wtdraw_time=0;
    v_exter_comm_flag=0;
    v_cost_calc_type=0;
    strcpy(v_combo_code, " ");
    v_combo_posi_id=0;
    v_strategy_id=0;
    v_order_batch_no=0;
    strcpy(v_out_acco, " ");
    v_asset_acco_type=0;
    strcpy(v_contra_no, " ");
    v_exist_debt_flag=0;
    v_update_times=1;
    v_init_date=0;
    strcpy(v_sys_config_str, " ");
    strcpy(v_co_busi_config_str, " ");
    strcpy(v_exgp_busi_config_str, " ");
    strcpy(v_crncy_type, "CNY");
    strcpy(v_exch_crncy_type, "CNY");
    v_buy_ref_rate=0;
    v_sell_ref_rate=0;
    v_par_value=0;
    v_impawn_ratio=0;
    v_net_price_flag=0;
    v_intrst_days=0;
    v_bond_accr_intrst=0;
    v_bond_rate_type=0;
    v_trade_code_no=0;
    v_target_code_no=0;
    v_min_unit=0;
    v_up_limit_price=0;
    v_down_limit_price=0;
    v_last_price=0;
    v_repo_days=0;
    v_repo_back_date=0;
    v_capit_reback_days=0;
    v_posi_reback_days=0;
    v_bond_qty_unit_set=0;
    v_apply_date=0;
    strcpy(v_trade_acco, " ");
    strcpy(v_busi_config_str, " ");
    v_repo_cale_days=0;
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_asac_busi_config_str, " ");
    strcpy(v_split_fee_typr_str, " ");
    strcpy(v_busi_limit_str, " ");
    v_nav_asset=0;
    v_market_price_ratio=0;
    v_market_price_type=0;
    v_order_market_price=0;
    v_sys_type=0;
    strcpy(v_opor_no_str1, " ");
    strcpy(v_opor_no_str2, " ");
    strcpy(v_opor_no_str3, " ");
    v_fina_limit_max=0;
    v_loan_limit_max=0;
    v_sell_auto_back_debt=0;
    strcpy(v_rsp_status, "0");
    strcpy(v_rsp_info, " ");
    v_external_no=0;
    v_comm_date=0;
    v_comm_executor=0;
    v_comm_opor=0;
    v_strike_bond_accr_intrst=0;
    strcpy(v_wtdraw_status, "0");
    strcpy(v_old_order_status, "0");
    v_open_posi_date=0;
    v_curr_strike_price=0;
    v_curr_strike_amt=0;
    v_curr_strike_qty=0;
    v_strike_id=0;
    v_sum_order_row_id=0;
    v_sum_order_opor_no=0;
    v_sum_order_co_no=0;
    v_sum_order_pd_no=0;
    v_sum_order_exch_group_no=0;
    v_sum_order_asset_acco_no=0;
    v_sum_order_pass_no=0;
    strcpy(v_sum_order_exch_crncy_type, "CNY");
    v_sum_order_stock_code_no=0;
    v_sum_order_trade_code_no=0;
    v_sum_order_target_code_no=0;
    v_sum_order_external_no=0;
    v_sum_order_date=0;
    v_sum_order_batch_no=0;
    v_sum_order_dir=0;
    v_sum_order_price_type=0;
    v_sum_order_price=0;
    v_sum_order_qty=0;
    strcpy(v_order_sum_status, "0");
    v_sum_order_wtdraw_qty=0;
    v_sum_order_waste_qty=0;
    v_sum_order_strike_amt=0;
    v_sum_order_strike_qty=0;
    v_sum_order_strike_aver_price=0;
    v_sum_order_net_price_flag=0;
    v_sum_order_bond_accr_intrst=0;
    v_sum_order_bond_rate_type=0;
    v_sum_order_par_value=0;
    v_sum_order_impawn_ratio=0;
    strcpy(v_sum_order_oper_way, " ");
    v_sum_order_update_times=1;
    v_sum_strike_row_id=0;
    v_sum_strike_opor_no=0;
    v_sum_strike_co_no=0;
    v_sum_strike_pd_no=0;
    v_sum_strike_exch_group_no=0;
    v_sum_strike_asset_acco_no=0;
    v_sum_strike_pass_no=0;
    strcpy(v_sum_strike_out_acco, " ");
    v_sum_strike_stock_acco_no=0;
    v_sum_strike_stock_code_no=0;
    v_sum_strike_comm_id=0;
    v_sum_strike_report_date=0;
    strcpy(v_sum_strike_report_no, " ");
    v_sum_strike_order_date=0;
    v_sum_strike_order_id=0;
    v_sum_strike_order_dir=0;
    v_sum_strike_order_price=0;
    v_sum_strike_order_qty=0;
    v_sum_strike_strike_qty=0;
    v_sum_strike_strike_amt=0;
    v_sum_strike_all_fee=0;
    v_sum_strike_stamp_tax=0;
    v_sum_strike_trans_fee=0;
    v_sum_strike_brkage_fee=0;
    v_sum_strike_SEC_charges=0;
    v_sum_strike_other_fee=0;
    v_sum_strike_trade_commis=0;
    v_sum_strike_other_commis=0;
    v_sum_trade_tax=0;
    v_sum_trade_cost_fee=0;
    v_sum_trade_system_use_fee=0;
    v_sum_stock_settle_fee=0;
    v_sum_strike_net_price_flag=0;
    v_sum_strike_bond_accr_intrst=0;
    v_sum_strike_bond_rate_type=0;
    strcpy(v_sum_strike_order_oper_way, " ");
    v_sum_strike_exter_comm_flag=0;
    v_sum_strike_update_times=1;
    v_sum_strike_order_batch_no=0;
    v_sum_external_no=0;
    v_comm_time=0;
    v_comm_dir=0;
    v_comm_limit_price=0;
    v_limit_actual_price=0;
    v_comm_qty=0;
    v_comm_amt=0;
    v_comm_cancel_qty=0;
    v_comm_frozen_amt=0;
    v_comm_frozen_qty=0;
    strcpy(v_strike_status, "0");
    strcpy(v_comm_status, "0");
    v_comm_begin_date=0;
    v_comm_end_date=0;
    v_comm_begin_time=0;
    v_comm_end_time=0;
    v_comm_comple_date=0;
    v_comm_comple_time=0;
    v_comm_appr_date=0;
    v_comm_appr_time=0;
    strcpy(v_comm_appr_status, " ");
    v_comm_appr_oper=0;
    strcpy(v_comm_appr_remark, " ");
    v_basket_id=0;
    strcpy(v_comm_oper_way, " ");
    v_comm_comple_flag=0;
    v_strategy_capt_qty=0;
    v_strategy_order_qty=0;
    strcpy(v_comm_remark_info, " ");
    v_disp_opor=0;
    v_disp_status=0;
    v_read_flag=0;
    v_sum_comm_row_id=0;
    v_sum_comm_co_no=0;
    v_sum_comm_pd_no=0;
    v_sum_comm_exch_group_no=0;
    v_sum_comm_asset_acco_no=0;
    v_sum_comm_pass_no=0;
    strcpy(v_sum_comm_out_acco, " ");
    strcpy(v_sum_comm_exch_crncy_type, "CNY");
    v_sum_comm_stock_code_no=0;
    v_sum_comm_date=0;
    v_sum_comm_time=0;
    v_sum_comm_batch_no=0;
    v_sum_comm_opor=0;
    v_sum_comm_executor=0;
    v_sum_comm_dir=0;
    v_sum_comm_limit_price=0;
    v_sum_comm_qty=0;
    v_sum_comm_amt=0;
    v_sum_comm_order_qty=0;
    v_sum_comm_cancel_qty=0;
    v_sum_comm_await_cancel_qty=0;
    v_sum_comm_strike_amt=0;
    v_sum_comm_strike_qty=0;
    strcpy(v_sum_comm_strike_status, "0");
    strcpy(v_comm_sum_status, "0");
    v_sum_comm_begin_date=0;
    v_sum_comm_end_date=0;
    v_sum_comm_begin_time=0;
    v_sum_comm_end_time=0;
    v_sum_comm_comple_date=0;
    v_sum_comm_comple_time=0;
    v_sum_comm_max_comm_comple_date=0;
    v_sum_comm_max_comm_comple_time=0;
    v_sum_comm_appr_date=0;
    v_sum_comm_appr_time=0;
    v_sum_comm_appr_qty=0;
    strcpy(v_comm_sum_approve_status, "0");
    v_sum_comm_basket_id=0;
    v_sum_comm_net_price_flag=0;
    v_sum_comm_bond_accr_intrst=0;
    v_sum_comm_bond_rate_type=0;
    strcpy(v_sum_comm_oper_way, " ");
    v_sum_comm_exter_comm_flag=0;
    v_sum_buy_order_qty=0;
    v_sum_sell_order_qty=0;
    v_sum_buy_comm_qty=0;
    v_sum_sell_comm_qty=0;
    v_sum_buy_strike_qty=0;
    v_sum_sell_strike_qty=0;
    v_sum_buy_strike_amt=0;
    v_sum_sell_strike_amt=0;
    v_sum_buy_comm_amt=0;
    v_sum_sell_comm_amt=0;
    strcpy(v_sum_comm_remark_info, " ");
    v_sum_comm_update_times=1;
    strcpy(v_acco_concat_info, " ");
    v_exgp_cash_id=0;
    v_exgp_frozen_amt=0;
    v_exgp_unfroz_amt=0;
    v_exgp_comm_frozen_amt=0;
    v_exgp_comm_unfroz_amt=0;
    v_exgp_comm_capt_amt=0;
    v_exgp_comm_releas_amt=0;
    v_exgp_trade_frozen_amt=0;
    v_exgp_trade_unfroz_amt=0;
    v_exgp_trade_capt_amt=0;
    v_exgp_trade_releas_amt=0;
    v_exgp_strike_capt_amt=0;
    v_exgp_strike_releas_amt=0;
    v_exgp_cash_update_times=1;
    v_exgp_posi_id=0;
    v_exgp_frozen_qty=0;
    v_exgp_unfroz_qty=0;
    v_exgp_comm_frozen_qty=0;
    v_exgp_comm_unfroz_qty=0;
    v_exgp_comm_capt_qty=0;
    v_exgp_comm_releas_qty=0;
    v_exgp_trade_frozen_qty=0;
    v_exgp_trade_unfroz_qty=0;
    v_exgp_trade_capt_qty=0;
    v_exgp_trade_releas_qty=0;
    v_exgp_strike_capt_qty=0;
    v_exgp_strike_releas_qty=0;
    v_exgp_strike_frozen_qty=0;
    v_exgp_strike_unfroz_qty=0;
    v_exgp_realize_pandl=0;
    v_exgp_cost_amt=0;
    v_exgp_intrst_cost_amt=0;
    v_exgp_intrst_pandl=0;
    v_exgp_posi_update_times=1;
    v_asac_cash_id=0;
    v_asac_frozen_amt=0;
    v_asac_unfroz_amt=0;
    v_asac_comm_frozen_amt=0;
    v_asac_comm_unfroz_amt=0;
    v_asac_comm_capt_amt=0;
    v_asac_comm_releas_amt=0;
    v_asac_trade_frozen_amt=0;
    v_asac_trade_unfroz_amt=0;
    v_asac_trade_capt_amt=0;
    v_asac_trade_releas_amt=0;
    v_asac_strike_capt_amt=0;
    v_asac_strike_releas_amt=0;
    v_asac_cash_update_times=1;
    v_asac_posi_id=0;
    v_asac_frozen_qty=0;
    v_asac_unfroz_qty=0;
    v_asac_comm_frozen_qty=0;
    v_asac_comm_unfroz_qty=0;
    v_asac_comm_capt_qty=0;
    v_asac_comm_releas_qty=0;
    v_asac_trade_frozen_qty=0;
    v_asac_trade_unfroz_qty=0;
    v_asac_trade_capt_qty=0;
    v_asac_trade_releas_qty=0;
    v_asac_strike_capt_qty=0;
    v_asac_strike_releas_qty=0;
    v_asac_strike_frozen_qty=0;
    v_asac_strike_unfroz_qty=0;
    v_asac_realize_pandl=0;
    v_asac_cost_amt=0;
    v_asac_intrst_cost_amt=0;
    v_asac_intrst_pandl=0;
    v_asac_posi_update_times=1;
    v_exgp_target_posi_id=0;
    v_exgp_target_frozen_qty=0;
    v_exgp_target_unfroz_qty=0;
    v_exgp_target_comm_frozen_qty=0;
    v_exgp_target_comm_unfroz_qty=0;
    v_exgp_target_comm_capt_qty=0;
    v_exgp_target_comm_releas_qty=0;
    v_exgp_target_trade_frozen_qty=0;
    v_exgp_target_trade_unfroz_qty=0;
    v_exgp_target_trade_capt_qty=0;
    v_exgp_target_trade_releas_qty=0;
    v_exgp_target_strike_capt_qty=0;
    v_exgp_target_strike_releas_qty=0;
    v_exgp_target_strike_frozen_qty=0;
    v_exgp_target_strike_unfroz_qty=0;
    v_exgp_target_realize_pandl=0;
    v_exgp_target_cost_amt=0;
    v_exgp_target_intrst_cost_amt=0;
    v_exgp_target_intrst_pandl=0;
    v_exgp_target_posi_update_times=0;
    v_asac_target_posi_id=0;
    v_asac_target_frozen_qty=0;
    v_asac_target_unfroz_qty=0;
    v_asac_target_comm_frozen_qty=0;
    v_asac_target_comm_unfroz_qty=0;
    v_asac_target_comm_capt_qty=0;
    v_asac_target_comm_releas_qty=0;
    v_asac_target_trade_frozen_qty=0;
    v_asac_target_trade_unfroz_qty=0;
    v_asac_target_trade_capt_qty=0;
    v_asac_target_trade_releas_qty=0;
    v_asac_target_strike_capt_qty=0;
    v_asac_target_strike_releas_qty=0;
    v_asac_target_strike_frozen_qty=0;
    v_asac_target_strike_unfroz_qty=0;
    v_asac_target_realize_pandl=0;
    v_asac_target_cost_amt=0;
    v_asac_target_intrst_cost_amt=0;
    v_asac_target_intrst_pandl=0;
    v_asac_target_posi_update_times=0;
    v_exgp_put_impawn_qty=0;
    v_asac_put_impawn_qty=0;
    v_modi_order_id=0;
    v_modi_order_date=0;
    v_modi_order_time=0;
    v_modi_batch_no=0;
    v_modi_order_price=0;
    v_modi_order_qty=0;
    v_modi_price_type=0;
    strcpy(v_modi_order_status, " ");
    v_new_order_id=0;
    strcpy(v_remark_info, " ");
    strcpy(v_order_rsp_status, "0");
    v_row_id=0;
    v_exgp_curr_qty=0;
    v_asac_curr_qty=0;
    strcpy(v_tmp_strike_no, " ");
    v_tmp_strike_amt=0;
    v_strike_deal_type=0;
    v_rsp_id=0;
    strcpy(v_target_code, " ");
    v_total_strike_amt=0;
    v_total_strike_qty=0;
    v_trade_occur_amt=0;
    v_original_order_dir=0;
    v_tmp_all_fee=0;
    v_tmp_trade_commis=0;
    v_tmp_stamp_tax=0;
    v_tmp_trans_fee=0;
    v_tmp_brkage_fee=0;
    v_tmp_SEC_charges=0;
    v_tmp_other_fee=0;
    v_tmp_other_commis=0;
    v_T0_opor_fee_set_flag=0;
    v_curr_amt=0;
    v_frozen_amt=0;
    v_opor_warn_tshold=0;
    v_opor_stop_tshold=0;
    v_order_limit_time=0;
    v_per_secu_posi_ratio=0;
    v_posi_limit_time=5;
    v_order_ctrl_qty=0;
    v_order_ctrl_amt=0;
    v_stock_warn_ratio=0;
    v_stock_stop_ratio=0;
    v_stock_warn_amt=0;
    v_stock_stop_amt=0;
    v_trig_oper_type=0;
    v_open_close_permission=0;
    v_risk_oper=0;
    v_fee_calc_type=0;
    v_permit_margin_trade=0;
    v_buy_fee_ratio=0;
    v_sell_fee_ratio=0;
    v_buy_min_fee=0;
    v_sell_min_fee=0;
    v_all_fee_for_tmp=0;
    v_trade_commis=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_tmp_trade_cost_fee=0;
    v_tmp_trade_system_use_fee=0;
    v_tmp_trade_tax=0;
    v_tmp_stock_settle_fee=0;
    v_tmp_update_times=1;
    v_record_valid_flag=0;
    v_tmp_order_batch_no=0;
    v_repo_strike_id=0;
    v_exch_rate=0;
    v_repo_qty=0;
    v_repo_amt=0;
    v_repo_rate=0;
    v_repo_trade_date=0;
    v_repo_order_id=0;
    v_repo_back_amt=0;
    v_repo_back_intrst=0;
    v_repo_back_trade_date=0;
    strcpy(v_repo_status, "0");
    v_bond_repo_id=0;
    v_source_stock_qty=0;
    v_single_limit_qty=0;
    v_assigned_qty=0;
    v_trade_releas_qty=0;
    v_trade_capt_qty=0;
    v_strike_releas_qty=0;
    v_strike_capt_qty=0;
    v_over_night_pandl=0;
    v_sum_realize_pandl=0;
    v_total_open_posi_fee=0;
    v_total_close_posi_fee=0;
    v_out_order_releas_qty=0;
    v_out_order_capt_qty=0;
    v_out_strike_releas_qty=0;
    v_out_strike_capt_qty=0;
    v_buy_avail_qty=0;
    v_sell_avail_qty=0;
    v_posi_qty=0;
    v_today_trade_fee=0;
    v_today_pandl=0;
    v_diff_qty=0;
    v_over_night_trade_buy_qty=0;
    v_over_night_trade_sell_qty=0;
    v_over_night_strike_sell_qty=0;
    v_over_night_sumtrd_sell_qty=0;
    v_over_night_sumstk_sell_qty=0;
    v_trade_amt=0;
    v_trade_qty=0;
    v_realize_pandl=0;
    v_yield_rate=0;
    v_avail_amt=0;
    v_total_long_curr_qty=0;
    v_total_short_curr_qty=0;
    v_total_long_open_posi_value=0;
    v_total_short_open_posi_value=0;
    v_total_long_open_posi_fee=0;
    v_total_short_open_posi_fee=0;
    v_total_long_close_posi_value=0;
    v_total_short_close_posi_value=0;
    v_total_long_close_posi_qty=0;
    v_total_short_close_posi_qty=0;
    v_total_long_close_posi_fee=0;
    v_total_short_close_posi_fee=0;
    v_total_realize_pandl=0;
    v_long_curr_qty=0;
    v_short_curr_qty=0;
    v_long_open_posi_value=0;
    v_short_open_posi_value=0;
    v_long_open_posi_fee=0;
    v_short_open_posi_fee=0;
    v_long_close_posi_qty=0;
    v_short_close_posi_qty=0;
    v_long_close_posi_value=0;
    v_short_close_posi_value=0;
    v_long_close_posi_fee=0;
    v_short_close_posi_fee=0;
    v_open_posi_time=0;
    v_curr_qty=0;
    v_open_posi_value=0;
    v_open_posi_fee=0;
    v_cost_price=0;
    v_begin_amt=0;
    v_unfroz_amt=0;
    v_comm_unfroz_amt=0;
    v_comm_capt_amt=0;
    v_comm_releas_amt=0;
    v_trade_frozen_amt=0;
    v_trade_unfroz_amt=0;
    v_trade_capt_amt=0;
    v_trade_releas_amt=0;
    v_strike_capt_amt=0;
    v_strike_releas_amt=0;
    v_lngsht_type=0;
    v_open_posi_price=0;
    v_close_posi_qty=0;
    v_close_posi_market_value=0;
    v_close_posi_fee=0;
    strcpy(v_posi_status, "0");
    v_frozen_qty=0;
    v_unfroz_qty=0;
    v_pre_settle_qty=0;
    v_trade_frozen_qty=0;
    v_trade_unfroz_qty=0;
    v_strike_frozen_qty=0;
    v_strike_unfroz_qty=0;
    v_cost_amt=0;
    v_intrst_cost_amt=0;
    v_intrst_pandl=0;
    v_combo_copies=0;
    strcpy(v_combo_status, "0");
    v_combo_cost=0;
    v_combo_market_value=0;
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_order_date = lpInBizMsg->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_id = lpInBizMsg->GetInt64(LDBIZ_ORDER_ID_INT64);
    v_strike_date = lpInBizMsg->GetInt32(LDBIZ_STRIKE_DATE_INT);
    v_strike_time = lpInBizMsg->GetInt32(LDBIZ_STRIKE_TIME_INT);
    strncpy(v_strike_no, lpInBizMsg->GetString(LDBIZ_STRIKE_NO_STR),64);
    v_strike_no[64] = '\0';
    v_strike_qty = lpInBizMsg->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_price = lpInBizMsg->GetDouble(LDBIZ_STRIKE_PRICE_FLOAT);
    v_deal_type = lpInBizMsg->GetInt32(LDBIZ_DEAL_TYPE_INT);
    strncpy(v_deal_status, lpInBizMsg->GetString(LDBIZ_DEAL_STATUS_STR),2);
    v_deal_status[2] = '\0';

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;
    IFastMessage* lpTSCall1Req3 = NULL;
    IFastMessage* lpTSCall1Ans3 = NULL;
    IFastMessage* lpTSCall1Req4 = NULL;
    IFastMessage* lpTSCall1Ans4 = NULL;
    IFastMessage* lpTSCall1Req5 = NULL;
    IFastMessage* lpTSCall1Ans5 = NULL;
    IFastMessage* lpTSCall1Req6 = NULL;
    IFastMessage* lpTSCall1Ans6 = NULL;
    IFastMessage* lpTSCall1Req7 = NULL;
    IFastMessage* lpTSCall1Ans7 = NULL;
    IFastMessage* lpTSCall1Req8 = NULL;
    IFastMessage* lpTSCall1Ans8 = NULL;
    IFastMessage* lpTSCall1Req9 = NULL;
    IFastMessage* lpTSCall1Ans9 = NULL;
    IFastMessage* lpTSCall1Req10 = NULL;
    IFastMessage* lpTSCall1Ans10 = NULL;
    IFastMessage* lpTSCall1Req11 = NULL;
    IFastMessage* lpTSCall1Ans11 = NULL;
    IFastMessage* lpTSCall1Req12 = NULL;
    IFastMessage* lpTSCall1Ans12 = NULL;
    IFastMessage* lpTSCall1Req13 = NULL;
    IFastMessage* lpTSCall1Ans13 = NULL;
    IFastMessage* lpTSCall1Req14 = NULL;
    IFastMessage* lpTSCall1Ans14 = NULL;
    IFastMessage* lpTSCall1Req15 = NULL;
    IFastMessage* lpTSCall1Ans15 = NULL;
    IFastMessage* lpTSCall1Req16 = NULL;
    IFastMessage* lpTSCall1Ans16 = NULL;
    IFastMessage* lpTSCall1Req17 = NULL;
    IFastMessage* lpTSCall1Ans17 = NULL;
    IFastMessage* lpTSCall1Req18 = NULL;
    IFastMessage* lpTSCall1Ans18 = NULL;
    IFastMessage* lpTSCall1Req19 = NULL;
    IFastMessage* lpTSCall1Ans19 = NULL;
    IFastMessage* lpTSCall1Req20 = NULL;
    IFastMessage* lpTSCall1Ans20 = NULL;
    IFastMessage* lpTSCall1Req21 = NULL;
    IFastMessage* lpTSCall1Ans21 = NULL;
    IFastMessage* lpTSCall1Req22 = NULL;
    IFastMessage* lpTSCall1Ans22 = NULL;
    IFastMessage* lpTSCall1Req23 = NULL;
    IFastMessage* lpTSCall1Ans23 = NULL;
    IFastMessage* lpTSCall1Req24 = NULL;
    IFastMessage* lpTSCall1Ans24 = NULL;
    IFastMessage* lpTSCall1Req25 = NULL;
    IFastMessage* lpTSCall1Ans25 = NULL;
    IFastMessage* lpTSCall1Req26 = NULL;
    IFastMessage* lpTSCall1Ans26 = NULL;
    IFastMessage* lpTSCall1Req27 = NULL;
    IFastMessage* lpTSCall1Ans27 = NULL;
    IFastMessage* lpTSCall1Req28 = NULL;
    IFastMessage* lpTSCall1Ans28 = NULL;
    IFastMessage* lpTSCall1Req29 = NULL;
    IFastMessage* lpTSCall1Ans29 = NULL;
    IFastMessage* lpTSCall1Req30 = NULL;
    IFastMessage* lpTSCall1Ans30 = NULL;
    IFastMessage* lpTSCall1Req31 = NULL;
    IFastMessage* lpTSCall1Ans31 = NULL;
    IFastMessage* lpTSCall1Req32 = NULL;
    IFastMessage* lpTSCall1Ans32 = NULL;
    IFastMessage* lpTSCall1Req33 = NULL;
    IFastMessage* lpTSCall1Ans33 = NULL;
    IFastMessage* lpTSCall1Req34 = NULL;
    IFastMessage* lpTSCall1Ans34 = NULL;
    IFastMessage* lpTSCall1Req35 = NULL;
    IFastMessage* lpTSCall1Ans35 = NULL;
    IFastMessage* lpTSCall1Req36 = NULL;
    IFastMessage* lpTSCall1Ans36 = NULL;
    IFastMessage* lpTSCall1Req37 = NULL;
    IFastMessage* lpTSCall1Ans37 = NULL;
    IFastMessage* lpTSCall1Req38 = NULL;
    IFastMessage* lpTSCall1Ans38 = NULL;
    IFastMessage* lpTSCall1Req39 = NULL;
    IFastMessage* lpTSCall1Ans39 = NULL;
    IFastMessage* lpTSCall1Req40 = NULL;
    IFastMessage* lpTSCall1Ans40 = NULL;
    IFastMessage* lpTSCall1Req41 = NULL;
    IFastMessage* lpTSCall1Ans41 = NULL;
    IFastMessage* lpTSCall1Req42 = NULL;
    IFastMessage* lpTSCall1Ans42 = NULL;
    IFastMessage* lpTSCall1Req43 = NULL;
    IFastMessage* lpTSCall1Ans43 = NULL;
    IFastMessage* lpTSCall1Req44 = NULL;
    IFastMessage* lpTSCall1Ans44 = NULL;
    IFastMessage* lpTSCall1Req45 = NULL;
    IFastMessage* lpTSCall1Ans45 = NULL;
    IFastMessage* lpTSCall1Req46 = NULL;
    IFastMessage* lpTSCall1Ans46 = NULL;
    IFastMessage* lpTSCall1Req47 = NULL;
    IFastMessage* lpTSCall1Ans47 = NULL;


    // set @临时_成交数量# = @成交数量#;
    v_tmp_strike_qty = v_strike_qty;

    // set @临时_成交价格# = @成交价格#;
    v_tmp_strike_price = v_strike_price;
    //取原委托信息
    //调用过程[事务_交易证券_交易_获取订单信息]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.71", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpTSCall1Req0->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.71]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_busi_opor_no = lpTSCall1Ans0->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strcpy(v_order_oper_way, lpTSCall1Ans0->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    v_co_no = lpTSCall1Ans0->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpTSCall1Ans0->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans0->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans0->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    v_pass_no = lpTSCall1Ans0->GetInt32(LDBIZ_PASS_NO_INT);
    v_exch_no = lpTSCall1Ans0->GetInt32(LDBIZ_EXCH_NO_INT);
    v_stock_acco_no = lpTSCall1Ans0->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_acco, lpTSCall1Ans0->GetString(LDBIZ_STOCK_ACCO_STR));
    v_stock_code_no = lpTSCall1Ans0->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strcpy(v_stock_code, lpTSCall1Ans0->GetString(LDBIZ_STOCK_CODE_STR));
    v_stock_type = lpTSCall1Ans0->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans0->GetInt32(LDBIZ_ASSET_TYPE_INT);
    v_comm_id = lpTSCall1Ans0->GetInt64(LDBIZ_COMM_ID_INT64);
    v_comm_batch_no = lpTSCall1Ans0->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
    v_report_date = lpTSCall1Ans0->GetInt32(LDBIZ_REPORT_DATE_INT);
    v_report_time = lpTSCall1Ans0->GetInt32(LDBIZ_REPORT_TIME_INT);
    strcpy(v_report_no, lpTSCall1Ans0->GetString(LDBIZ_REPORT_NO_STR));
    v_order_time = lpTSCall1Ans0->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_order_dir = lpTSCall1Ans0->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_order_price = lpTSCall1Ans0->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans0->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    v_order_frozen_qty = lpTSCall1Ans0->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
    v_order_frozen_amt = lpTSCall1Ans0->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans0->GetString(LDBIZ_ORDER_STATUS_STR));
    v_price_type = lpTSCall1Ans0->GetInt32(LDBIZ_PRICE_TYPE_INT);
    v_strike_qty = lpTSCall1Ans0->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_amt = lpTSCall1Ans0->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    v_all_fee = lpTSCall1Ans0->GetDouble(LDBIZ_ALL_FEE_FLOAT);
    v_wtdraw_qty = lpTSCall1Ans0->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
    v_wtdraw_time = lpTSCall1Ans0->GetInt32(LDBIZ_WTDRAW_TIME_INT);
    v_exter_comm_flag = lpTSCall1Ans0->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_cost_calc_type = lpTSCall1Ans0->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
    strcpy(v_combo_code, lpTSCall1Ans0->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans0->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    v_strategy_id = lpTSCall1Ans0->GetInt64(LDBIZ_STRATEGY_ID_INT64);
    v_order_batch_no = lpTSCall1Ans0->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    strcpy(v_out_acco, lpTSCall1Ans0->GetString(LDBIZ_OUT_ACCO_STR));
    v_asset_acco_type = lpTSCall1Ans0->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    strcpy(v_contra_no, lpTSCall1Ans0->GetString(LDBIZ_CONTRA_NO_STR));
    v_exist_debt_flag = lpTSCall1Ans0->GetInt32(LDBIZ_EXIST_DEBT_FLAG_INT);
    v_update_times = lpTSCall1Ans0->GetInt32(LDBIZ_UPDATE_TIMES_INT);

    //公共子系统检查，检查交易日期时间
    //调用过程[事务_公共_交易接口_检查系统状态交易业务]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("pubT.25.27", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req1->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req1->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req1->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req1->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpTSCall1Req1->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpTSCall1Req1->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req1->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.27]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans1->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_sys_config_str, lpTSCall1Ans1->GetString(LDBIZ_SYS_CONFIG_STR_STR));
    v_pd_no = lpTSCall1Ans1->GetInt32(LDBIZ_PD_NO_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans1->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
    strcpy(v_exgp_busi_config_str, lpTSCall1Ans1->GetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR));
    v_stock_code_no = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans1->GetInt32(LDBIZ_ASSET_TYPE_INT);
    strcpy(v_crncy_type, lpTSCall1Ans1->GetString(LDBIZ_CRNCY_TYPE_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans1->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_buy_ref_rate = lpTSCall1Ans1->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
    v_sell_ref_rate = lpTSCall1Ans1->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
    v_par_value = lpTSCall1Ans1->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans1->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_net_price_flag = lpTSCall1Ans1->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_intrst_days = lpTSCall1Ans1->GetInt32(LDBIZ_INTRST_DAYS_INT);
    v_bond_accr_intrst = lpTSCall1Ans1->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans1->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_trade_code_no = lpTSCall1Ans1->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans1->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_min_unit = lpTSCall1Ans1->GetInt32(LDBIZ_MIN_UNIT_INT);
    v_up_limit_price = lpTSCall1Ans1->GetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT);
    v_down_limit_price = lpTSCall1Ans1->GetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT);
    v_last_price = lpTSCall1Ans1->GetDouble(LDBIZ_LAST_PRICE_FLOAT);
    v_repo_days = lpTSCall1Ans1->GetInt32(LDBIZ_REPO_DAYS_INT);
    v_repo_back_date = lpTSCall1Ans1->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
    v_capit_reback_days = lpTSCall1Ans1->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
    v_posi_reback_days = lpTSCall1Ans1->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);
    v_bond_qty_unit_set = lpTSCall1Ans1->GetInt32(LDBIZ_BOND_QTY_UNIT_SET_INT);
    v_apply_date = lpTSCall1Ans1->GetInt32(LDBIZ_APPLY_DATE_INT);
    strcpy(v_trade_acco, lpTSCall1Ans1->GetString(LDBIZ_TRADE_ACCO_STR));


    // set @业务控制配置串# = @交易组业务控制配置串#;
    strcpy(v_busi_config_str,v_exgp_busi_config_str);

    // set @回购实际天数# = @计息天数#;
    v_repo_cale_days = v_intrst_days;
    //产品子系统检查，检查账户状态，获取当前资金等

    // set @业务控制串# = "11111";
    strcpy(v_busi_ctrl_str,"11111");
    //调用过程[事务_产品_交易接口_检查交易产品账户信息]
    //组织事务请求
    if(lpTSCall1Ans2)
    {
      lpTSCall1Ans2->FreeMsg();
      lpTSCall1Ans2=NULL;
    }
    lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("prodT.8.21", 0);
    lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req2->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req2->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req2->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req2->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req2->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req2->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpTSCall1Req2->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpTSCall1Req2->SetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT,v_up_limit_price);
    lpTSCall1Req2->SetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT,v_down_limit_price);
    lpTSCall1Req2->SetDouble(LDBIZ_LAST_PRICE_FLOAT,v_last_price);
    lpTSCall1Req2->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
    lpTSCall1Req2->SetString(LDBIZ_BUSI_CONFIG_STR_STR,v_busi_config_str);
    lpTSCall1Req2->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
    glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
    if(!lpTSCall1Ans2)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.8.21]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans2->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
    strcpy(v_exgp_busi_config_str, lpTSCall1Ans2->GetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR));
    strcpy(v_asac_busi_config_str, lpTSCall1Ans2->GetString(LDBIZ_ASAC_BUSI_CONFIG_STR_STR));
    strcpy(v_split_fee_typr_str, lpTSCall1Ans2->GetString(LDBIZ_SPLIT_FEE_TYPR_STR_STR));
    strcpy(v_busi_limit_str, lpTSCall1Ans2->GetString(LDBIZ_BUSI_LIMIT_STR_STR));
    v_pass_no = lpTSCall1Ans2->GetInt32(LDBIZ_PASS_NO_INT);
    strcpy(v_out_acco, lpTSCall1Ans2->GetString(LDBIZ_OUT_ACCO_STR));
    v_nav_asset = lpTSCall1Ans2->GetDouble(LDBIZ_NAV_ASSET_FLOAT);
    v_exter_comm_flag = lpTSCall1Ans2->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_market_price_ratio = lpTSCall1Ans2->GetDouble(LDBIZ_MARKET_PRICE_RATIO_FLOAT);
    v_market_price_type = lpTSCall1Ans2->GetInt32(LDBIZ_MARKET_PRICE_TYPE_INT);
    v_cost_calc_type = lpTSCall1Ans2->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
    v_order_market_price = lpTSCall1Ans2->GetDouble(LDBIZ_ORDER_MARKET_PRICE_FLOAT);
    v_sys_type = lpTSCall1Ans2->GetInt32(LDBIZ_SYS_TYPE_INT);
    strcpy(v_opor_no_str1, lpTSCall1Ans2->GetString(LDBIZ_OPOR_NO_STR1_STR));
    strcpy(v_opor_no_str2, lpTSCall1Ans2->GetString(LDBIZ_OPOR_NO_STR2_STR));
    strcpy(v_opor_no_str3, lpTSCall1Ans2->GetString(LDBIZ_OPOR_NO_STR3_STR));
    v_fina_limit_max = lpTSCall1Ans2->GetDouble(LDBIZ_FINA_LIMIT_MAX_FLOAT);
    v_loan_limit_max = lpTSCall1Ans2->GetDouble(LDBIZ_LOAN_LIMIT_MAX_FLOAT);
    v_asset_acco_type = lpTSCall1Ans2->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    v_sell_auto_back_debt = lpTSCall1Ans2->GetInt32(LDBIZ_SELL_AUTO_BACK_DEBT_INT);


    // set @回报状态# = 《回报状态-成功》;
    strcpy(v_rsp_status,"1");

    // set @回报信息# = "修改订单错单！";
    strcpy(v_rsp_info,"修改订单错单！");
    //原订单状态为待撤,做撤成或撤废处理

    // if @处理类型# =《处理类型-撤单》 then
    if (v_deal_type ==2)
    {

        // [检查报错返回][@订单方向# = 《订单方向-新股申购》 or @订单方向# = 《订单方向-配售申购》  or @证券类型# = 《证券类型-申购》][768][@订单方向#,@证券类型#,@订单状态#]
        if (v_order_dir == 11 || v_order_dir == 23  || v_stock_type == 2)
        {
            strcpy(v_error_code, "tdsecuL.5.41.768");
            snprintf(v_error_info, sizeof(v_error_info), "%s%d%s%d%s%s","订单方向=",v_order_dir,"证券类型=",v_stock_type,"订单状态=",v_order_status);
            iRet = -1;
            goto END;
        }


        // if @处理状态# = 《处理状态-失败》 then
        if (strcmp(v_deal_status , "2")==0)
        {

            // [检查报错返回][ @订单状态# <>《订单状态-待撤》][770][@订单方向#,@证券类型#,@订单状态#]
            if (strcmp( v_order_status ,"3")!=0)
            {
                strcpy(v_error_code, "tdsecuL.5.41.770");
                snprintf(v_error_info, sizeof(v_error_info), "%s%d%s%d%s%s","订单方向=",v_order_dir,"证券类型=",v_stock_type,"订单状态=",v_order_status);
                iRet = -1;
                goto END;
            }

            //[检查报错返回][ @订单状态// = 《订单状态-未报》 or  @订单状态// = 《订单状态-待报》 or @订单状态// = 《订单状态-正报》][770][@订单方向//,@证券类型//,@订单状态//]

            // set @回报状态# = 《回报状态-失败》;
            strcpy(v_rsp_status,"2");

            // set @撤单数量# = 0;
            v_wtdraw_qty = 0;
        }
        // else
        else
        {


            // set @回报状态# = 《回报状态-成功》;
            strcpy(v_rsp_status,"1");

            // set @撤单数量# = @订单数量# - @成交数量#;
            v_wtdraw_qty = v_order_qty - v_strike_qty;
        // end if;
        }

        //调用过程[事务_交易证券_报盘_处理撤单回报]
        //组织事务请求
        if(lpTSCall1Ans3)
        {
          lpTSCall1Ans3->FreeMsg();
          lpTSCall1Ans3=NULL;
        }
        lpTSCall1Req3=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.11", 0);
        lpTSCall1Req3->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req3->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req3->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req3->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req3->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req3->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req3->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req3->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req3->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req3->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpTSCall1Req3->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
        lpTSCall1Req3->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpTSCall1Req3->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req3->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpTSCall1Req3->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req3->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
        lpTSCall1Req3->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req3->SetString(LDBIZ_RSP_STATUS_STR,v_rsp_status);
        lpTSCall1Req3->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req3, &lpTSCall1Ans3, 5000);
        if(!lpTSCall1Ans3)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.11]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans3->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
        v_co_no = lpTSCall1Ans3->GetInt32(LDBIZ_CO_NO_INT);
        v_busi_opor_no = lpTSCall1Ans3->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
        v_pd_no = lpTSCall1Ans3->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans3->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans3->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_stock_acco_no = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        v_trade_code_no = lpTSCall1Ans3->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
        v_target_code_no = lpTSCall1Ans3->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
        v_stock_type = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_TYPE_INT);
        v_external_no = lpTSCall1Ans3->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
        strcpy(v_exch_crncy_type, lpTSCall1Ans3->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
        v_comm_date = lpTSCall1Ans3->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_id = lpTSCall1Ans3->GetInt64(LDBIZ_COMM_ID_INT64);
        v_comm_batch_no = lpTSCall1Ans3->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_executor = lpTSCall1Ans3->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_comm_opor = lpTSCall1Ans3->GetInt32(LDBIZ_COMM_OPOR_INT);
        v_order_date = lpTSCall1Ans3->GetInt32(LDBIZ_ORDER_DATE_INT);
        v_order_batch_no = lpTSCall1Ans3->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
        v_order_dir = lpTSCall1Ans3->GetInt32(LDBIZ_ORDER_DIR_INT);
        v_price_type = lpTSCall1Ans3->GetInt32(LDBIZ_PRICE_TYPE_INT);
        v_order_price = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
        v_order_qty = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
        strcpy(v_order_status, lpTSCall1Ans3->GetString(LDBIZ_ORDER_STATUS_STR));
        v_net_price_flag = lpTSCall1Ans3->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
        v_intrst_days = lpTSCall1Ans3->GetInt32(LDBIZ_INTRST_DAYS_INT);
        v_par_value = lpTSCall1Ans3->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
        v_bond_accr_intrst = lpTSCall1Ans3->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
        v_strike_qty = lpTSCall1Ans3->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
        v_strike_amt = lpTSCall1Ans3->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
        v_strike_bond_accr_intrst = lpTSCall1Ans3->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
        v_impawn_ratio = lpTSCall1Ans3->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
        v_order_frozen_amt = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
        v_order_frozen_qty = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
        strcpy(v_wtdraw_status, lpTSCall1Ans3->GetString(LDBIZ_WTDRAW_STATUS_STR));
        strcpy(v_old_order_status, lpTSCall1Ans3->GetString(LDBIZ_OLD_ORDER_STATUS_STR));
        strcpy(v_combo_code, lpTSCall1Ans3->GetString(LDBIZ_COMBO_CODE_STR));
        v_combo_posi_id = lpTSCall1Ans3->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
        v_open_posi_date = lpTSCall1Ans3->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
        v_update_times = lpTSCall1Ans3->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // set @操作员编号# = @业务操作员编号#;
        v_opor_no = v_busi_opor_no;

        // set @当笔成交价格# = 0;
        v_curr_strike_price = 0;

        // set @当笔成交金额# = 0;
        v_curr_strike_amt = 0;

        // set @当笔成交数量# = 0;
        v_curr_strike_qty = 0;

        // set @成交序号# = 0;
        v_strike_id = 0;

        // set @全部费用# = 0;
        v_all_fee = 0;

        // [主动推送][secu.order][证券主推_订单_订单主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
        lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
        lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
        lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
        lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
        lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
        lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
        lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
        lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
        lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
        lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
        lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
        lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
        lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
        lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
        lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
        lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
        lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
        lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
        lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


        // if  @订单批号# > 0 then
        if ( v_order_batch_no > 0)
        {

            // set @成交序号# = 0;
            v_strike_id = 0;
            //调用过程[事务_交易证券_主推接口_获取汇总订单成交信息]
            //组织事务请求
            if(lpTSCall1Ans4)
            {
              lpTSCall1Ans4->FreeMsg();
              lpTSCall1Ans4=NULL;
            }
            lpTSCall1Req4=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.21", 0);
            lpTSCall1Req4->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req4->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req4->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req4->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req4->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req4->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req4->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req4->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req4->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpTSCall1Req4->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req4->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
            lpTSCall1Req4->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req4, &lpTSCall1Ans4, 5000);
            if(!lpTSCall1Ans4)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.21]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans4->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
            v_sum_order_row_id = lpTSCall1Ans4->GetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64);
            v_sum_order_opor_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT);
            v_sum_order_co_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_CO_NO_INT);
            v_sum_order_pd_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_PD_NO_INT);
            v_sum_order_exch_group_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT);
            v_sum_order_asset_acco_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT);
            v_sum_order_pass_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT);
            strcpy(v_sum_order_exch_crncy_type, lpTSCall1Ans4->GetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR));
            v_sum_order_stock_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT);
            v_sum_order_trade_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT);
            v_sum_order_target_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT);
            v_sum_order_external_no = lpTSCall1Ans4->GetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64);
            v_sum_order_date = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_DATE_INT);
            v_sum_order_batch_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT);
            v_sum_order_dir = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_DIR_INT);
            v_sum_order_price_type = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT);
            v_sum_order_price = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT);
            v_sum_order_qty = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT);
            strcpy(v_order_sum_status, lpTSCall1Ans4->GetString(LDBIZ_ORDER_SUM_STATUS_STR));
            v_sum_order_wtdraw_qty = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT);
            v_sum_order_waste_qty = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT);
            v_sum_order_strike_amt = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT);
            v_sum_order_strike_qty = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT);
            v_sum_order_strike_aver_price = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT);
            v_sum_order_net_price_flag = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT);
            v_sum_order_bond_accr_intrst = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT);
            v_sum_order_bond_rate_type = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT);
            v_sum_order_par_value = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT);
            v_sum_order_impawn_ratio = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT);
            strcpy(v_sum_order_oper_way, lpTSCall1Ans4->GetString(LDBIZ_SUM_ORDER_OPER_WAY_STR));
            v_sum_order_update_times = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT);
            v_sum_strike_row_id = lpTSCall1Ans4->GetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64);
            v_sum_strike_opor_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT);
            v_sum_strike_co_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT);
            v_sum_strike_pd_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT);
            v_sum_strike_exch_group_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT);
            v_sum_strike_asset_acco_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT);
            v_sum_strike_pass_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT);
            strcpy(v_sum_strike_out_acco, lpTSCall1Ans4->GetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR));
            v_sum_strike_stock_acco_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT);
            v_sum_strike_stock_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT);
            v_sum_strike_comm_id = lpTSCall1Ans4->GetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64);
            v_sum_strike_report_date = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT);
            strcpy(v_sum_strike_report_no, lpTSCall1Ans4->GetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR));
            v_sum_strike_order_date = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT);
            v_sum_strike_order_id = lpTSCall1Ans4->GetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64);
            v_sum_strike_order_dir = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT);
            v_sum_strike_order_price = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT);
            v_sum_strike_order_qty = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT);
            v_sum_strike_strike_qty = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT);
            v_sum_strike_strike_amt = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT);
            v_sum_strike_all_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT);
            v_sum_strike_stamp_tax = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT);
            v_sum_strike_trans_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT);
            v_sum_strike_brkage_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT);
            v_sum_strike_SEC_charges = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT);
            v_sum_strike_other_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT);
            v_sum_strike_trade_commis = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT);
            v_sum_strike_other_commis = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT);
            v_sum_trade_tax = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT);
            v_sum_trade_cost_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT);
            v_sum_trade_system_use_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT);
            v_sum_stock_settle_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT);
            v_sum_strike_net_price_flag = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT);
            v_sum_strike_bond_accr_intrst = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT);
            v_sum_strike_bond_rate_type = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT);
            strcpy(v_sum_strike_order_oper_way, lpTSCall1Ans4->GetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR));
            v_sum_strike_exter_comm_flag = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT);
            v_sum_strike_update_times = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT);
            v_sum_strike_order_batch_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT);
            v_sum_external_no = lpTSCall1Ans4->GetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64);


            // [主动推送][secu.ordertotal][证券主推_订单_订单汇总主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.21", 0);
            lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64,v_sum_order_row_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT,v_sum_order_opor_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_CO_NO_INT,v_sum_order_co_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PD_NO_INT,v_sum_order_pd_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT,v_sum_order_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT,v_sum_order_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT,v_sum_order_pass_no);
            lpPubMsg->SetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR,v_sum_order_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT,v_sum_order_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT,v_sum_order_trade_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT,v_sum_order_target_code_no);
            lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64,v_sum_order_external_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DATE_INT,v_sum_order_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT,v_sum_order_batch_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DIR_INT,v_sum_order_dir);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT,v_sum_order_price_type);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT,v_sum_order_price);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT,v_sum_order_qty);
            lpPubMsg->SetString(LDBIZ_ORDER_SUM_STATUS_STR,v_order_sum_status);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT,v_sum_order_wtdraw_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT,v_sum_order_waste_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT,v_sum_order_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT,v_sum_order_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT,v_sum_order_strike_aver_price);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT,v_sum_order_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT,v_sum_order_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT,v_sum_order_bond_rate_type);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT,v_sum_order_par_value);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT,v_sum_order_impawn_ratio);
            lpPubMsg->SetString(LDBIZ_SUM_ORDER_OPER_WAY_STR,v_sum_order_oper_way);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT,v_sum_order_update_times);
            glpPubSub_Interface->PubTopics("secu.ordertotal", lpPubMsg);

        // end if;
        }


        // if @指令序号# > 0 then
        if (v_comm_id > 0)
        {
            //调用过程[事务_交易证券_主推接口_获取指令混合信息]
            //组织事务请求
            if(lpTSCall1Ans5)
            {
              lpTSCall1Ans5->FreeMsg();
              lpTSCall1Ans5=NULL;
            }
            lpTSCall1Req5=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
            lpTSCall1Req5->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req5->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req5->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req5->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req5->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req5->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req5->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req5->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req5->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req5, &lpTSCall1Ans5, 5000);
            if(!lpTSCall1Ans5)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans5->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
            v_init_date = lpTSCall1Ans5->GetInt32(LDBIZ_INIT_DATE_INT);
            v_co_no = lpTSCall1Ans5->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans5->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpTSCall1Ans5->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_pass_no = lpTSCall1Ans5->GetInt32(LDBIZ_PASS_NO_INT);
            strcpy(v_out_acco, lpTSCall1Ans5->GetString(LDBIZ_OUT_ACCO_STR));
            strcpy(v_exch_crncy_type, lpTSCall1Ans5->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
            v_stock_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_stock_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            v_stock_type = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_TYPE_INT);
            v_comm_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_DATE_INT);
            v_comm_time = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_TIME_INT);
            v_comm_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
            v_comm_opor = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_OPOR_INT);
            v_comm_executor = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
            v_comm_dir = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_DIR_INT);
            v_comm_limit_price = lpTSCall1Ans5->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
            v_limit_actual_price = lpTSCall1Ans5->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
            v_comm_qty = lpTSCall1Ans5->GetDouble(LDBIZ_COMM_QTY_FLOAT);
            v_comm_amt = lpTSCall1Ans5->GetDouble(LDBIZ_COMM_AMT_FLOAT);
            v_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
            v_comm_cancel_qty = lpTSCall1Ans5->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
            v_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
            v_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
            v_comm_frozen_amt = lpTSCall1Ans5->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
            v_comm_frozen_qty = lpTSCall1Ans5->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
            strcpy(v_strike_status, lpTSCall1Ans5->GetString(LDBIZ_STRIKE_STATUS_STR));
            strcpy(v_comm_status, lpTSCall1Ans5->GetString(LDBIZ_COMM_STATUS_STR));
            v_comm_begin_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
            v_comm_end_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_END_DATE_INT);
            v_comm_begin_time = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
            v_comm_end_time = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_END_TIME_INT);
            v_comm_comple_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
            v_comm_comple_time = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
            v_comm_appr_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
            v_comm_appr_time = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
            strcpy(v_comm_appr_status, lpTSCall1Ans5->GetString(LDBIZ_COMM_APPR_STATUS_STR));
            v_comm_appr_oper = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
            strcpy(v_comm_appr_remark, lpTSCall1Ans5->GetString(LDBIZ_COMM_APPR_REMARK_STR));
            v_basket_id = lpTSCall1Ans5->GetInt64(LDBIZ_BASKET_ID_INT64);
            v_net_price_flag = lpTSCall1Ans5->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
            v_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
            v_bond_rate_type = lpTSCall1Ans5->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
            strcpy(v_comm_oper_way, lpTSCall1Ans5->GetString(LDBIZ_COMM_OPER_WAY_STR));
            v_exter_comm_flag = lpTSCall1Ans5->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
            v_comm_comple_flag = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
            v_strategy_capt_qty = lpTSCall1Ans5->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
            v_strategy_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
            strcpy(v_contra_no, lpTSCall1Ans5->GetString(LDBIZ_CONTRA_NO_STR));
            strcpy(v_comm_remark_info, lpTSCall1Ans5->GetString(LDBIZ_COMM_REMARK_INFO_STR));
            v_disp_opor = lpTSCall1Ans5->GetInt32(LDBIZ_DISP_OPOR_INT);
            v_disp_status = lpTSCall1Ans5->GetInt32(LDBIZ_DISP_STATUS_INT);
            v_read_flag = lpTSCall1Ans5->GetInt32(LDBIZ_READ_FLAG_INT);
            v_update_times = lpTSCall1Ans5->GetInt32(LDBIZ_UPDATE_TIMES_INT);
            v_sum_comm_row_id = lpTSCall1Ans5->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
            v_sum_comm_co_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
            v_sum_comm_pd_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
            v_sum_comm_exch_group_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
            v_sum_comm_asset_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
            v_sum_comm_pass_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
            strcpy(v_sum_comm_out_acco, lpTSCall1Ans5->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
            strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans5->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
            v_sum_comm_stock_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
            v_sum_comm_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
            v_sum_comm_time = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
            v_sum_comm_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
            v_sum_comm_opor = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
            v_sum_comm_executor = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
            v_sum_comm_dir = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
            v_sum_comm_limit_price = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
            v_sum_comm_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
            v_sum_comm_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
            v_sum_comm_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
            v_sum_comm_cancel_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
            v_sum_comm_await_cancel_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
            v_sum_comm_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
            v_sum_comm_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
            strcpy(v_sum_comm_strike_status, lpTSCall1Ans5->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
            strcpy(v_comm_sum_status, lpTSCall1Ans5->GetString(LDBIZ_COMM_SUM_STATUS_STR));
            v_sum_comm_begin_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
            v_sum_comm_end_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
            v_sum_comm_begin_time = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
            v_sum_comm_end_time = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
            v_sum_comm_comple_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
            v_sum_comm_comple_time = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
            v_sum_comm_max_comm_comple_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
            v_sum_comm_max_comm_comple_time = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
            v_sum_comm_appr_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
            v_sum_comm_appr_time = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
            v_sum_comm_appr_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
            strcpy(v_comm_sum_approve_status, lpTSCall1Ans5->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
            v_sum_comm_basket_id = lpTSCall1Ans5->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
            v_sum_comm_net_price_flag = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
            v_sum_comm_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
            v_sum_comm_bond_rate_type = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
            strcpy(v_sum_comm_oper_way, lpTSCall1Ans5->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
            v_sum_comm_exter_comm_flag = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
            v_sum_buy_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
            v_sum_sell_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
            v_sum_buy_comm_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
            v_sum_sell_comm_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
            v_sum_buy_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
            v_sum_sell_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
            v_sum_buy_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
            v_sum_sell_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
            v_sum_buy_comm_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
            v_sum_sell_comm_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
            strcpy(v_sum_comm_remark_info, lpTSCall1Ans5->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
            v_sum_comm_update_times = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
            strcpy(v_acco_concat_info, lpTSCall1Ans5->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


            // [主动推送][secu.comm][证券主推_指令_指令主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
            lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
            lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
            lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
            lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
            lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
            lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
            lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
            lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
            lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
            lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
            lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
            lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
            lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
            lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
            lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
            lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
            lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
            lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
            lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


            // if @指令批号# > 0 then
            if (v_comm_batch_no > 0)
            {

                // set @指令备注信息#= @汇总指令备注信息#;
                strcpy(v_comm_remark_info,v_sum_comm_remark_info);

                // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
                lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
                lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
                lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
                lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
                lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
                glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

            // end if;
            }

        // end if;
        }

        //质押提交和质押转回，要推交易代码和标准券代码

        // if @订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》 then
        if (v_order_dir == 21 || v_order_dir == 22)
        {
          //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
          //组织事务请求
          if(lpTSCall1Ans6)
          {
            lpTSCall1Ans6->FreeMsg();
            lpTSCall1Ans6=NULL;
          }
          lpTSCall1Req6=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
          lpTSCall1Req6->SetInt32(LDTAG_PRIORITY, iPriority);
          lpTSCall1Req6->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
          lpTSCall1Req6->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
          lpTSCall1Req6->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
          lpTSCall1Req6->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
          lpTSCall1Req6->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
          lpTSCall1Req6->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
          lpTSCall1Req6->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
          lpTSCall1Req6->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpTSCall1Req6->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpTSCall1Req6->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
          lpTSCall1Req6->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpTSCall1Req6->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
          lpTSCall1Req6->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
          lpTSCall1Req6->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
          lpTSCall1Req6->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
          glpTSSubcallSerives->SubCall(lpTSCall1Req6, &lpTSCall1Ans6, 5000);
          if(!lpTSCall1Ans6)  //  超时错误
          {
              lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
              lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
              iRet=-2;
              goto ENDSYS;
          }
          else if(lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
          {
              lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO));
              lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans6->GetString(LDTAG_ERRORINFO));
              iRet=-2;
              goto ENDSYS;
          }
          else if(strcmp(lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
          {
              strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
              iRet=-1;
              goto END;
          }
          //获取输出参数值
          strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
          v_exgp_cash_id = lpTSCall1Ans6->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
          v_exgp_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
          v_exgp_unfroz_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
          v_exgp_comm_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
          v_exgp_comm_unfroz_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
          v_exgp_comm_capt_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
          v_exgp_comm_releas_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
          v_exgp_trade_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
          v_exgp_trade_unfroz_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
          v_exgp_trade_capt_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
          v_exgp_trade_releas_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
          v_exgp_strike_capt_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
          v_exgp_strike_releas_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
          v_exgp_cash_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
          v_exgp_posi_id = lpTSCall1Ans6->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
          v_exgp_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
          v_exgp_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
          v_exgp_comm_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
          v_exgp_comm_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
          v_exgp_comm_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
          v_exgp_comm_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
          v_exgp_trade_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
          v_exgp_trade_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
          v_exgp_trade_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
          v_exgp_trade_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
          v_exgp_strike_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
          v_exgp_strike_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
          v_exgp_strike_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
          v_exgp_strike_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
          v_exgp_realize_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
          v_exgp_cost_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
          v_exgp_intrst_cost_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
          v_exgp_intrst_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
          v_exgp_posi_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
          v_asac_cash_id = lpTSCall1Ans6->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
          v_asac_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
          v_asac_unfroz_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
          v_asac_comm_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
          v_asac_comm_unfroz_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
          v_asac_comm_capt_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
          v_asac_comm_releas_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
          v_asac_trade_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
          v_asac_trade_unfroz_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
          v_asac_trade_capt_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
          v_asac_trade_releas_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
          v_asac_strike_capt_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
          v_asac_strike_releas_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
          v_asac_cash_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
          v_asac_posi_id = lpTSCall1Ans6->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
          v_asac_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
          v_asac_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
          v_asac_comm_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
          v_asac_comm_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
          v_asac_comm_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
          v_asac_comm_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
          v_asac_trade_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
          v_asac_trade_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
          v_asac_trade_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
          v_asac_trade_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
          v_asac_strike_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
          v_asac_strike_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
          v_asac_strike_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
          v_asac_strike_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
          v_asac_realize_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
          v_asac_cost_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
          v_asac_intrst_cost_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
          v_asac_intrst_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
          v_asac_posi_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
          v_exgp_target_posi_id = lpTSCall1Ans6->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
          v_exgp_target_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
          v_exgp_target_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
          v_exgp_target_comm_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
          v_exgp_target_comm_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
          v_exgp_target_comm_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
          v_exgp_target_comm_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
          v_exgp_target_trade_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
          v_exgp_target_trade_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
          v_exgp_target_trade_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
          v_exgp_target_trade_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
          v_exgp_target_strike_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
          v_exgp_target_strike_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
          v_exgp_target_strike_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
          v_exgp_target_strike_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
          v_exgp_target_realize_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
          v_exgp_target_cost_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
          v_exgp_target_intrst_cost_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
          v_exgp_target_intrst_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
          v_exgp_target_posi_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
          v_asac_target_posi_id = lpTSCall1Ans6->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
          v_asac_target_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
          v_asac_target_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
          v_asac_target_comm_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
          v_asac_target_comm_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
          v_asac_target_comm_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
          v_asac_target_comm_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
          v_asac_target_trade_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
          v_asac_target_trade_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
          v_asac_target_trade_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
          v_asac_target_trade_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
          v_asac_target_strike_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
          v_asac_target_strike_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
          v_asac_target_strike_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
          v_asac_target_strike_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
          v_asac_target_realize_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
          v_asac_target_cost_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
          v_asac_target_intrst_cost_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
          v_asac_target_intrst_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
          v_asac_target_posi_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
          v_exgp_put_impawn_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
          v_asac_put_impawn_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


          // set @证券代码编号# = @交易代码编号#;
          v_stock_code_no = v_trade_code_no;

          // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
          lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
          lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
          lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
          glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


          // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
          lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
          lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
          lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
          lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
          glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


          // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
          lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
          lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
          lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
          glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


          // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
          lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
          lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
          lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
          lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
          glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


          // set @证券代码编号# = @标的代码编号#;
          v_stock_code_no = v_target_code_no;

          // set @交易组提交质押数量# = 0;
          v_exgp_put_impawn_qty = 0;

          // set @资产账户提交质押数量# = 0;
          v_asac_put_impawn_qty = 0;

          // set @交易组持仓序号# = @交易组标的持仓序号#;
          v_exgp_posi_id = v_exgp_target_posi_id;

          // set @交易组冻结数量# = @交易组标的冻结数量#;
          v_exgp_frozen_qty = v_exgp_target_frozen_qty;

          // set @交易组解冻数量# = @交易组标的解冻数量#;
          v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

          // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
          v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

          // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
          v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

          // set @交易组指令占用数量# = @交易组标的指令占用数量#;
          v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

          // set @交易组指令释放数量# = @交易组标的指令释放数量#;
          v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

          // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
          v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

          // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
          v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

          // set @交易组交易占用数量# = @交易组标的交易占用数量#;
          v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

          // set @交易组交易释放数量# = @交易组标的交易释放数量#;
          v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

          // set @交易组成交占用数量# = @交易组标的成交占用数量#;
          v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

          // set @交易组成交释放数量# = @交易组标的成交释放数量#;
          v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

          // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
          v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

          // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
          v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

          // set @交易组实现盈亏# = @交易组标的实现盈亏#;
          v_exgp_realize_pandl = v_exgp_target_realize_pandl;

          // set @交易组成本金额# = @交易组标的成本金额#;
          v_exgp_cost_amt = v_exgp_target_cost_amt;

          // set @交易组利息成本金额# = @交易组标的利息成本金额#;
          v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

          // set @交易组利息收益# = @交易组标的利息收益#;
          v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

          // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
          v_exgp_posi_update_times = v_exgp_target_posi_update_times;

          // set @资产账户持仓序号# = @资产账户标的持仓序号#;
          v_asac_posi_id = v_asac_target_posi_id;

          // set @资产账户冻结数量# = @资产账户标的冻结数量#;
          v_asac_frozen_qty = v_asac_target_frozen_qty;

          // set @资产账户解冻数量# = @资产账户标的解冻数量#;
          v_asac_unfroz_qty = v_asac_target_unfroz_qty;

          // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
          v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

          // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
          v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

          // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
          v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

          // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
          v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

          // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
          v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

          // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
          v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

          // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
          v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

          // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
          v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

          // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
          v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

          // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
          v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

          // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
          v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

          // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
          v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

          // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
          v_asac_realize_pandl = v_asac_target_realize_pandl;

          // set @资产账户成本金额# = @资产账户标的成本金额#;
          v_asac_cost_amt = v_asac_target_cost_amt;

          // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
          v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

          // set @资产账户利息收益# = @资产账户标的利息收益#;
          v_asac_intrst_pandl = v_asac_target_intrst_pandl;

          // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
          v_asac_posi_update_times = v_asac_target_posi_update_times;

          // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
          lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
          lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
          lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
          lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
          glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


          // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
          lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
          lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
          lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
          lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
          glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


        }
        // else if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
        else if (v_order_dir == 3 || v_order_dir == 4)
        {

          // set @证券代码编号# = @标的代码编号#;
          v_stock_code_no = v_target_code_no;
          //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
          //组织事务请求
          if(lpTSCall1Ans7)
          {
            lpTSCall1Ans7->FreeMsg();
            lpTSCall1Ans7=NULL;
          }
          lpTSCall1Req7=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
          lpTSCall1Req7->SetInt32(LDTAG_PRIORITY, iPriority);
          lpTSCall1Req7->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
          lpTSCall1Req7->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
          lpTSCall1Req7->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
          lpTSCall1Req7->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
          lpTSCall1Req7->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
          lpTSCall1Req7->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
          lpTSCall1Req7->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
          lpTSCall1Req7->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpTSCall1Req7->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpTSCall1Req7->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
          lpTSCall1Req7->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpTSCall1Req7->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
          lpTSCall1Req7->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
          lpTSCall1Req7->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
          glpTSSubcallSerives->SubCall(lpTSCall1Req7, &lpTSCall1Ans7, 5000);
          if(!lpTSCall1Ans7)  //  超时错误
          {
              lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
              lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
              iRet=-2;
              goto ENDSYS;
          }
          else if(lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
          {
              lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO));
              lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans7->GetString(LDTAG_ERRORINFO));
              iRet=-2;
              goto ENDSYS;
          }
          else if(strcmp(lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
          {
              strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
              iRet=-1;
              goto END;
          }
          //获取输出参数值
          strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
          v_exgp_cash_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
          v_exgp_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
          v_exgp_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
          v_exgp_comm_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
          v_exgp_comm_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
          v_exgp_comm_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
          v_exgp_comm_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
          v_exgp_trade_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
          v_exgp_trade_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
          v_exgp_trade_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
          v_exgp_trade_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
          v_exgp_strike_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
          v_exgp_strike_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
          v_exgp_cash_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
          v_exgp_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
          v_exgp_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
          v_exgp_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
          v_exgp_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
          v_exgp_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
          v_exgp_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
          v_exgp_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
          v_exgp_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
          v_exgp_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
          v_exgp_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
          v_exgp_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
          v_exgp_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
          v_exgp_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
          v_exgp_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
          v_exgp_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
          v_exgp_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
          v_exgp_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
          v_exgp_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
          v_exgp_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
          v_exgp_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
          v_asac_cash_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
          v_asac_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
          v_asac_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
          v_asac_comm_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
          v_asac_comm_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
          v_asac_comm_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
          v_asac_comm_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
          v_asac_trade_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
          v_asac_trade_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
          v_asac_trade_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
          v_asac_trade_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
          v_asac_strike_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
          v_asac_strike_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
          v_asac_cash_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
          v_asac_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
          v_asac_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
          v_asac_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
          v_asac_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
          v_asac_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
          v_asac_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
          v_asac_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
          v_asac_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
          v_asac_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
          v_asac_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
          v_asac_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
          v_asac_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
          v_asac_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
          v_asac_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
          v_asac_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
          v_asac_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
          v_asac_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
          v_asac_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
          v_asac_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
          v_asac_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


          // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
          lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
          lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
          lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
          glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


          // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
          lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
          lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
          lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
          lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
          glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


          // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
          lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
          lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
          lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
          glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


          // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
          lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
          lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
          lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
          lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
          glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

        }
        // else
        else
        {

          //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
          //组织事务请求
          if(lpTSCall1Ans8)
          {
            lpTSCall1Ans8->FreeMsg();
            lpTSCall1Ans8=NULL;
          }
          lpTSCall1Req8=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
          lpTSCall1Req8->SetInt32(LDTAG_PRIORITY, iPriority);
          lpTSCall1Req8->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
          lpTSCall1Req8->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
          lpTSCall1Req8->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
          lpTSCall1Req8->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
          lpTSCall1Req8->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
          lpTSCall1Req8->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
          lpTSCall1Req8->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
          lpTSCall1Req8->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpTSCall1Req8->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpTSCall1Req8->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
          lpTSCall1Req8->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpTSCall1Req8->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
          lpTSCall1Req8->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
          lpTSCall1Req8->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
          glpTSSubcallSerives->SubCall(lpTSCall1Req8, &lpTSCall1Ans8, 5000);
          if(!lpTSCall1Ans8)  //  超时错误
          {
              lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
              lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
              iRet=-2;
              goto ENDSYS;
          }
          else if(lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
          {
              lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO));
              lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans8->GetString(LDTAG_ERRORINFO));
              iRet=-2;
              goto ENDSYS;
          }
          else if(strcmp(lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
          {
              strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
              iRet=-1;
              goto END;
          }
          //获取输出参数值
          strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
          v_exgp_cash_id = lpTSCall1Ans8->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
          v_exgp_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
          v_exgp_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
          v_exgp_comm_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
          v_exgp_comm_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
          v_exgp_comm_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
          v_exgp_comm_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
          v_exgp_trade_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
          v_exgp_trade_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
          v_exgp_trade_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
          v_exgp_trade_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
          v_exgp_strike_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
          v_exgp_strike_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
          v_exgp_cash_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
          v_exgp_posi_id = lpTSCall1Ans8->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
          v_exgp_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
          v_exgp_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
          v_exgp_comm_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
          v_exgp_comm_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
          v_exgp_comm_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
          v_exgp_comm_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
          v_exgp_trade_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
          v_exgp_trade_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
          v_exgp_trade_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
          v_exgp_trade_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
          v_exgp_strike_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
          v_exgp_strike_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
          v_exgp_strike_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
          v_exgp_strike_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
          v_exgp_realize_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
          v_exgp_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
          v_exgp_intrst_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
          v_exgp_intrst_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
          v_exgp_posi_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
          v_asac_cash_id = lpTSCall1Ans8->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
          v_asac_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
          v_asac_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
          v_asac_comm_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
          v_asac_comm_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
          v_asac_comm_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
          v_asac_comm_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
          v_asac_trade_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
          v_asac_trade_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
          v_asac_trade_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
          v_asac_trade_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
          v_asac_strike_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
          v_asac_strike_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
          v_asac_cash_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
          v_asac_posi_id = lpTSCall1Ans8->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
          v_asac_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
          v_asac_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
          v_asac_comm_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
          v_asac_comm_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
          v_asac_comm_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
          v_asac_comm_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
          v_asac_trade_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
          v_asac_trade_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
          v_asac_trade_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
          v_asac_trade_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
          v_asac_strike_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
          v_asac_strike_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
          v_asac_strike_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
          v_asac_strike_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
          v_asac_realize_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
          v_asac_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
          v_asac_intrst_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
          v_asac_intrst_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
          v_asac_posi_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


          // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
          lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
          lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
          lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
          glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


          // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
          lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
          lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
          lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
          lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
          lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
          glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


          // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
          lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
          lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
          lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
          glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


          // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
          lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
          lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
          lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
          lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
          lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
          lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
          lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
          lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
          lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
          lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
          lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
          lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
          lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
          glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

        // end if;
        }


         // if @撤单状态# = 《撤单状态-失败》  then
         if (strcmp(v_wtdraw_status , "4" )==0)
         {
            //调用过程[事务_交易证券_交易_更新获取改单信息]
            //组织事务请求
            if(lpTSCall1Ans9)
            {
              lpTSCall1Ans9->FreeMsg();
              lpTSCall1Ans9=NULL;
            }
            lpTSCall1Req9=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.62", 0);
            lpTSCall1Req9->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req9->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req9->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req9->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req9->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req9->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req9->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req9->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req9->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpTSCall1Req9->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req9, &lpTSCall1Ans9, 5000);
            if(!lpTSCall1Ans9)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.62]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans9->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
            v_modi_order_id = lpTSCall1Ans9->GetInt64(LDBIZ_MODI_ORDER_ID_INT64);
            v_modi_order_date = lpTSCall1Ans9->GetInt32(LDBIZ_MODI_ORDER_DATE_INT);
            v_modi_order_time = lpTSCall1Ans9->GetInt32(LDBIZ_MODI_ORDER_TIME_INT);
            v_modi_batch_no = lpTSCall1Ans9->GetInt32(LDBIZ_MODI_BATCH_NO_INT);
            v_modi_order_price = lpTSCall1Ans9->GetDouble(LDBIZ_MODI_ORDER_PRICE_FLOAT);
            v_modi_order_qty = lpTSCall1Ans9->GetDouble(LDBIZ_MODI_ORDER_QTY_FLOAT);
            v_modi_price_type = lpTSCall1Ans9->GetInt32(LDBIZ_MODI_PRICE_TYPE_INT);
            v_exch_no = lpTSCall1Ans9->GetInt32(LDBIZ_EXCH_NO_INT);
            v_stock_code_no = lpTSCall1Ans9->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            strcpy(v_stock_code, lpTSCall1Ans9->GetString(LDBIZ_STOCK_CODE_STR));
            strcpy(v_crncy_type, lpTSCall1Ans9->GetString(LDBIZ_CRNCY_TYPE_STR));
            strcpy(v_exch_crncy_type, lpTSCall1Ans9->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
            strcpy(v_order_oper_way, lpTSCall1Ans9->GetString(LDBIZ_ORDER_OPER_WAY_STR));
            v_busi_opor_no = lpTSCall1Ans9->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);


            // if @改单序号# <> 0 then
            if (v_modi_order_id != 0)
            {

                 // set @改单状态# = 《改单状态-失败》;
                 strcpy(v_modi_order_status,"4");

                 // set @新订单序号# = 0;
                 v_new_order_id = 0;

                 // set @备注信息# = "撤单失败";
                 strcpy(v_remark_info,"撤单失败");
                //调用过程[事务_交易证券_交易_更新改单状态]
                //组织事务请求
                if(lpTSCall1Ans10)
                {
                  lpTSCall1Ans10->FreeMsg();
                  lpTSCall1Ans10=NULL;
                }
                lpTSCall1Req10=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.61", 0);
                lpTSCall1Req10->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req10->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req10->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req10->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req10->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req10->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req10->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req10->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req10->SetInt32(LDBIZ_MODI_ORDER_DATE_INT,v_modi_order_date);
                lpTSCall1Req10->SetInt64(LDBIZ_MODI_ORDER_ID_INT64,v_modi_order_id);
                lpTSCall1Req10->SetString(LDBIZ_MODI_ORDER_STATUS_STR,v_modi_order_status);
                lpTSCall1Req10->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
                lpTSCall1Req10->SetInt64(LDBIZ_NEW_ORDER_ID_INT64,v_new_order_id);
                glpTSSubcallSerives->SubCall(lpTSCall1Req10, &lpTSCall1Ans10, 5000);
                if(!lpTSCall1Ans10)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.61]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans10->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));

             // end if;
             }

         // end if;
         }

    //订单回报处理废单

    }
    // elseif @处理类型# = 《处理类型-成交》 then
    else if (v_deal_type == 1)
    {

        // if @处理状态# = 《处理状态-失败》 then
        if (strcmp(v_deal_status , "2")==0)
        {

            // [检查报错返回][@订单状态# <> 《订单状态-未报》 and  @订单状态# <> 《订单状态-待报》 and @订单状态# <> 《订单状态-正报》 and @订单状态# <> 《订单状态-已报》 and @订单状态# <> 《订单状态-待撤》][769][@订单状态#]
            if (strcmp(v_order_status , "1")!=0 &&  strcmp(v_order_status , "a")!=0 && strcmp(v_order_status , "b")!=0 && strcmp(v_order_status , "2")!=0 && strcmp(v_order_status , "3")!=0)
            {
                strcpy(v_error_code, "tdsecuL.5.41.769");
                snprintf(v_error_info, sizeof(v_error_info), "%s%s","订单状态=",v_order_status);
                iRet = -1;
                goto END;
            }


            // set @订单回报状态# = 《订单回报状态-废单》;
            strcpy(v_order_rsp_status,"2");

            // if @订单状态# = 《订单状态-已报》 then
            if (strcmp(v_order_status , "2")==0)
            {

                // set @订单回报状态# = 《订单回报状态-已报废单》;
                strcpy(v_order_rsp_status,"3");
            }
            // else
            else
            {


                // set @申报编号# = concat("F_", @订单序号#);
                snprintf(v_report_no,sizeof(v_report_no),"%s%ld","F_",v_order_id);
            // end if;
            }

            //调用过程[事务_交易证券_报盘_处理订单回报]
            //组织事务请求
            if(lpTSCall1Ans11)
            {
              lpTSCall1Ans11->FreeMsg();
              lpTSCall1Ans11=NULL;
            }
            lpTSCall1Req11=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.1", 0);
            lpTSCall1Req11->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req11->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req11->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req11->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req11->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req11->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req11->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req11->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req11->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req11->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpTSCall1Req11->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpTSCall1Req11->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpTSCall1Req11->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
            lpTSCall1Req11->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
            lpTSCall1Req11->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
            lpTSCall1Req11->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
            lpTSCall1Req11->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpTSCall1Req11->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpTSCall1Req11->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req11->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpTSCall1Req11->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
            lpTSCall1Req11->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpTSCall1Req11->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
            lpTSCall1Req11->SetString(LDBIZ_ORDER_RSP_STATUS_STR,v_order_rsp_status);
            lpTSCall1Req11->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req11, &lpTSCall1Ans11, 5000);
            if(!lpTSCall1Ans11)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.1]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans11->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
            v_co_no = lpTSCall1Ans11->GetInt32(LDBIZ_CO_NO_INT);
            v_busi_opor_no = lpTSCall1Ans11->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
            v_pd_no = lpTSCall1Ans11->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpTSCall1Ans11->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpTSCall1Ans11->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_stock_code_no = lpTSCall1Ans11->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            v_stock_acco_no = lpTSCall1Ans11->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_external_no = lpTSCall1Ans11->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
            strcpy(v_exch_crncy_type, lpTSCall1Ans11->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
            v_comm_date = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_DATE_INT);
            v_comm_id = lpTSCall1Ans11->GetInt64(LDBIZ_COMM_ID_INT64);
            v_comm_batch_no = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
            v_comm_executor = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
            v_order_time = lpTSCall1Ans11->GetInt32(LDBIZ_ORDER_TIME_INT);
            v_stock_type = lpTSCall1Ans11->GetInt32(LDBIZ_STOCK_TYPE_INT);
            v_net_price_flag = lpTSCall1Ans11->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
            v_bond_accr_intrst = lpTSCall1Ans11->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
            v_bond_rate_type = lpTSCall1Ans11->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
            v_par_value = lpTSCall1Ans11->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
            v_impawn_ratio = lpTSCall1Ans11->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
            v_order_frozen_amt = lpTSCall1Ans11->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
            v_order_frozen_qty = lpTSCall1Ans11->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
            strcpy(v_order_status, lpTSCall1Ans11->GetString(LDBIZ_ORDER_STATUS_STR));
            v_order_batch_no = lpTSCall1Ans11->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
            v_wtdraw_qty = lpTSCall1Ans11->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
            v_strike_amt = lpTSCall1Ans11->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
            v_strike_qty = lpTSCall1Ans11->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
            v_strike_bond_accr_intrst = lpTSCall1Ans11->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
            strcpy(v_order_oper_way, lpTSCall1Ans11->GetString(LDBIZ_ORDER_OPER_WAY_STR));
            strcpy(v_old_order_status, lpTSCall1Ans11->GetString(LDBIZ_OLD_ORDER_STATUS_STR));
            v_row_id = lpTSCall1Ans11->GetInt64(LDBIZ_ROW_ID_INT64);
            strcpy(v_combo_code, lpTSCall1Ans11->GetString(LDBIZ_COMBO_CODE_STR));
            v_combo_posi_id = lpTSCall1Ans11->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
            v_strategy_id = lpTSCall1Ans11->GetInt64(LDBIZ_STRATEGY_ID_INT64);
            v_update_times = lpTSCall1Ans11->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // set @操作员编号# = @业务操作员编号#;
            v_opor_no = v_busi_opor_no;

            // set @当笔成交价格# = 0;
            v_curr_strike_price = 0;

            // set @当笔成交金额# = 0;
            v_curr_strike_amt = 0;

            // set @当笔成交数量# = 0;
            v_curr_strike_qty = 0;

            // set @成交序号# = 0;
            v_strike_id = 0;

            // set @全部费用# = 0;
            v_all_fee = 0;

            // set @撤单状态# = "0";
            strcpy(v_wtdraw_status,"0");

            // [主动推送][secu.order][证券主推_订单_订单主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
            lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
            lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
            lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
            lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
            lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
            lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
            lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
            lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
            lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
            lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
            lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
            lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
            lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
            lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
            lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
            lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
            lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
            lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
            lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


            // if @订单回报状态# <> 《订单回报状态-已报》 then
            if (strcmp(v_order_rsp_status , "1")!=0)
            {

                // if  @订单批号# > 0 then
                if ( v_order_batch_no > 0)
                {

                    // set @成交序号# = 0;
                    v_strike_id = 0;
                    //调用过程[事务_交易证券_主推接口_获取汇总订单成交信息]
                    //组织事务请求
                    if(lpTSCall1Ans12)
                    {
                      lpTSCall1Ans12->FreeMsg();
                      lpTSCall1Ans12=NULL;
                    }
                    lpTSCall1Req12=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.21", 0);
                    lpTSCall1Req12->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req12->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req12->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req12->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req12->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req12->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req12->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req12->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req12->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpTSCall1Req12->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
                    lpTSCall1Req12->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
                    lpTSCall1Req12->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
                    lpTSCall1Req12->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req12, &lpTSCall1Ans12, 5000);
                    if(!lpTSCall1Ans12)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.21]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans12->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(strcmp(lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                    {
                        strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
                        iRet=-1;
                        goto END;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
                    v_sum_order_row_id = lpTSCall1Ans12->GetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64);
                    v_sum_order_opor_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT);
                    v_sum_order_co_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_CO_NO_INT);
                    v_sum_order_pd_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_PD_NO_INT);
                    v_sum_order_exch_group_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT);
                    v_sum_order_asset_acco_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT);
                    v_sum_order_pass_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT);
                    strcpy(v_sum_order_exch_crncy_type, lpTSCall1Ans12->GetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR));
                    v_sum_order_stock_code_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT);
                    v_sum_order_trade_code_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT);
                    v_sum_order_target_code_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT);
                    v_sum_order_external_no = lpTSCall1Ans12->GetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64);
                    v_sum_order_date = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_DATE_INT);
                    v_sum_order_batch_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT);
                    v_sum_order_dir = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_DIR_INT);
                    v_sum_order_price_type = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT);
                    v_sum_order_price = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT);
                    v_sum_order_qty = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT);
                    strcpy(v_order_sum_status, lpTSCall1Ans12->GetString(LDBIZ_ORDER_SUM_STATUS_STR));
                    v_sum_order_wtdraw_qty = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT);
                    v_sum_order_waste_qty = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT);
                    v_sum_order_strike_amt = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT);
                    v_sum_order_strike_qty = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT);
                    v_sum_order_strike_aver_price = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT);
                    v_sum_order_net_price_flag = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT);
                    v_sum_order_bond_accr_intrst = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT);
                    v_sum_order_bond_rate_type = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT);
                    v_sum_order_par_value = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT);
                    v_sum_order_impawn_ratio = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT);
                    strcpy(v_sum_order_oper_way, lpTSCall1Ans12->GetString(LDBIZ_SUM_ORDER_OPER_WAY_STR));
                    v_sum_order_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT);
                    v_sum_strike_row_id = lpTSCall1Ans12->GetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64);
                    v_sum_strike_opor_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT);
                    v_sum_strike_co_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT);
                    v_sum_strike_pd_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT);
                    v_sum_strike_exch_group_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT);
                    v_sum_strike_asset_acco_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT);
                    v_sum_strike_pass_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT);
                    strcpy(v_sum_strike_out_acco, lpTSCall1Ans12->GetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR));
                    v_sum_strike_stock_acco_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT);
                    v_sum_strike_stock_code_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT);
                    v_sum_strike_comm_id = lpTSCall1Ans12->GetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64);
                    v_sum_strike_report_date = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT);
                    strcpy(v_sum_strike_report_no, lpTSCall1Ans12->GetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR));
                    v_sum_strike_order_date = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT);
                    v_sum_strike_order_id = lpTSCall1Ans12->GetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64);
                    v_sum_strike_order_dir = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT);
                    v_sum_strike_order_price = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT);
                    v_sum_strike_order_qty = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT);
                    v_sum_strike_strike_qty = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT);
                    v_sum_strike_strike_amt = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT);
                    v_sum_strike_all_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT);
                    v_sum_strike_stamp_tax = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT);
                    v_sum_strike_trans_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT);
                    v_sum_strike_brkage_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT);
                    v_sum_strike_SEC_charges = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT);
                    v_sum_strike_other_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT);
                    v_sum_strike_trade_commis = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT);
                    v_sum_strike_other_commis = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT);
                    v_sum_trade_tax = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT);
                    v_sum_trade_cost_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT);
                    v_sum_trade_system_use_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT);
                    v_sum_stock_settle_fee = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT);
                    v_sum_strike_net_price_flag = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT);
                    v_sum_strike_bond_accr_intrst = lpTSCall1Ans12->GetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT);
                    v_sum_strike_bond_rate_type = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT);
                    strcpy(v_sum_strike_order_oper_way, lpTSCall1Ans12->GetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR));
                    v_sum_strike_exter_comm_flag = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT);
                    v_sum_strike_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT);
                    v_sum_strike_order_batch_no = lpTSCall1Ans12->GetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT);
                    v_sum_external_no = lpTSCall1Ans12->GetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64);


                    // [主动推送][secu.ordertotal][证券主推_订单_订单汇总主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.21", 0);
                    lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64,v_sum_order_row_id);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT,v_sum_order_opor_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_CO_NO_INT,v_sum_order_co_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PD_NO_INT,v_sum_order_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT,v_sum_order_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT,v_sum_order_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT,v_sum_order_pass_no);
                    lpPubMsg->SetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR,v_sum_order_exch_crncy_type);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT,v_sum_order_stock_code_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT,v_sum_order_trade_code_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT,v_sum_order_target_code_no);
                    lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64,v_sum_order_external_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DATE_INT,v_sum_order_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT,v_sum_order_batch_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DIR_INT,v_sum_order_dir);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT,v_sum_order_price_type);
                    lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT,v_sum_order_price);
                    lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT,v_sum_order_qty);
                    lpPubMsg->SetString(LDBIZ_ORDER_SUM_STATUS_STR,v_order_sum_status);
                    lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT,v_sum_order_wtdraw_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT,v_sum_order_waste_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT,v_sum_order_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT,v_sum_order_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT,v_sum_order_strike_aver_price);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT,v_sum_order_net_price_flag);
                    lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT,v_sum_order_bond_accr_intrst);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT,v_sum_order_bond_rate_type);
                    lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT,v_sum_order_par_value);
                    lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT,v_sum_order_impawn_ratio);
                    lpPubMsg->SetString(LDBIZ_SUM_ORDER_OPER_WAY_STR,v_sum_order_oper_way);
                    lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT,v_sum_order_update_times);
                    glpPubSub_Interface->PubTopics("secu.ordertotal", lpPubMsg);

                // end if;
                }


                // if @指令序号# > 0 then
                if (v_comm_id > 0)
                {
                    //调用过程[事务_交易证券_主推接口_获取指令混合信息]
                    //组织事务请求
                    if(lpTSCall1Ans13)
                    {
                      lpTSCall1Ans13->FreeMsg();
                      lpTSCall1Ans13=NULL;
                    }
                    lpTSCall1Req13=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
                    lpTSCall1Req13->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req13->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req13->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req13->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req13->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req13->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req13->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req13->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req13->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req13, &lpTSCall1Ans13, 5000);
                    if(!lpTSCall1Ans13)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans13->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(strcmp(lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                    {
                        strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));
                        iRet=-1;
                        goto END;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));
                    v_init_date = lpTSCall1Ans13->GetInt32(LDBIZ_INIT_DATE_INT);
                    v_co_no = lpTSCall1Ans13->GetInt32(LDBIZ_CO_NO_INT);
                    v_pd_no = lpTSCall1Ans13->GetInt32(LDBIZ_PD_NO_INT);
                    v_exch_group_no = lpTSCall1Ans13->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
                    v_asset_acco_no = lpTSCall1Ans13->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
                    v_pass_no = lpTSCall1Ans13->GetInt32(LDBIZ_PASS_NO_INT);
                    strcpy(v_out_acco, lpTSCall1Ans13->GetString(LDBIZ_OUT_ACCO_STR));
                    strcpy(v_exch_crncy_type, lpTSCall1Ans13->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
                    v_stock_acco_no = lpTSCall1Ans13->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
                    v_stock_code_no = lpTSCall1Ans13->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
                    v_stock_type = lpTSCall1Ans13->GetInt32(LDBIZ_STOCK_TYPE_INT);
                    v_comm_date = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_DATE_INT);
                    v_comm_time = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_TIME_INT);
                    v_comm_batch_no = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
                    v_comm_opor = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_OPOR_INT);
                    v_comm_executor = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
                    v_comm_dir = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_DIR_INT);
                    v_comm_limit_price = lpTSCall1Ans13->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
                    v_limit_actual_price = lpTSCall1Ans13->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
                    v_comm_qty = lpTSCall1Ans13->GetDouble(LDBIZ_COMM_QTY_FLOAT);
                    v_comm_amt = lpTSCall1Ans13->GetDouble(LDBIZ_COMM_AMT_FLOAT);
                    v_order_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
                    v_comm_cancel_qty = lpTSCall1Ans13->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
                    v_strike_amt = lpTSCall1Ans13->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
                    v_strike_qty = lpTSCall1Ans13->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
                    v_comm_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
                    v_comm_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
                    strcpy(v_strike_status, lpTSCall1Ans13->GetString(LDBIZ_STRIKE_STATUS_STR));
                    strcpy(v_comm_status, lpTSCall1Ans13->GetString(LDBIZ_COMM_STATUS_STR));
                    v_comm_begin_date = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
                    v_comm_end_date = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_END_DATE_INT);
                    v_comm_begin_time = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
                    v_comm_end_time = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_END_TIME_INT);
                    v_comm_comple_date = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
                    v_comm_comple_time = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
                    v_comm_appr_date = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
                    v_comm_appr_time = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
                    strcpy(v_comm_appr_status, lpTSCall1Ans13->GetString(LDBIZ_COMM_APPR_STATUS_STR));
                    v_comm_appr_oper = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
                    strcpy(v_comm_appr_remark, lpTSCall1Ans13->GetString(LDBIZ_COMM_APPR_REMARK_STR));
                    v_basket_id = lpTSCall1Ans13->GetInt64(LDBIZ_BASKET_ID_INT64);
                    v_net_price_flag = lpTSCall1Ans13->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
                    v_bond_accr_intrst = lpTSCall1Ans13->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
                    v_bond_rate_type = lpTSCall1Ans13->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
                    strcpy(v_comm_oper_way, lpTSCall1Ans13->GetString(LDBIZ_COMM_OPER_WAY_STR));
                    v_exter_comm_flag = lpTSCall1Ans13->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
                    v_comm_comple_flag = lpTSCall1Ans13->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
                    v_strategy_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
                    v_strategy_order_qty = lpTSCall1Ans13->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
                    strcpy(v_contra_no, lpTSCall1Ans13->GetString(LDBIZ_CONTRA_NO_STR));
                    strcpy(v_comm_remark_info, lpTSCall1Ans13->GetString(LDBIZ_COMM_REMARK_INFO_STR));
                    v_disp_opor = lpTSCall1Ans13->GetInt32(LDBIZ_DISP_OPOR_INT);
                    v_disp_status = lpTSCall1Ans13->GetInt32(LDBIZ_DISP_STATUS_INT);
                    v_read_flag = lpTSCall1Ans13->GetInt32(LDBIZ_READ_FLAG_INT);
                    v_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_UPDATE_TIMES_INT);
                    v_sum_comm_row_id = lpTSCall1Ans13->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
                    v_sum_comm_co_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
                    v_sum_comm_pd_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
                    v_sum_comm_exch_group_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
                    v_sum_comm_asset_acco_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
                    v_sum_comm_pass_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
                    strcpy(v_sum_comm_out_acco, lpTSCall1Ans13->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
                    strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans13->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
                    v_sum_comm_stock_code_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
                    v_sum_comm_date = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
                    v_sum_comm_time = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
                    v_sum_comm_batch_no = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
                    v_sum_comm_opor = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
                    v_sum_comm_executor = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
                    v_sum_comm_dir = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
                    v_sum_comm_limit_price = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
                    v_sum_comm_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
                    v_sum_comm_amt = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
                    v_sum_comm_order_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
                    v_sum_comm_cancel_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
                    v_sum_comm_await_cancel_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
                    v_sum_comm_strike_amt = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
                    v_sum_comm_strike_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
                    strcpy(v_sum_comm_strike_status, lpTSCall1Ans13->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
                    strcpy(v_comm_sum_status, lpTSCall1Ans13->GetString(LDBIZ_COMM_SUM_STATUS_STR));
                    v_sum_comm_begin_date = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
                    v_sum_comm_end_date = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
                    v_sum_comm_begin_time = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
                    v_sum_comm_end_time = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
                    v_sum_comm_comple_date = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
                    v_sum_comm_comple_time = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
                    v_sum_comm_max_comm_comple_date = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
                    v_sum_comm_max_comm_comple_time = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
                    v_sum_comm_appr_date = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
                    v_sum_comm_appr_time = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
                    v_sum_comm_appr_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
                    strcpy(v_comm_sum_approve_status, lpTSCall1Ans13->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
                    v_sum_comm_basket_id = lpTSCall1Ans13->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
                    v_sum_comm_net_price_flag = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
                    v_sum_comm_bond_accr_intrst = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
                    v_sum_comm_bond_rate_type = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
                    strcpy(v_sum_comm_oper_way, lpTSCall1Ans13->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
                    v_sum_comm_exter_comm_flag = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
                    v_sum_buy_order_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
                    v_sum_sell_order_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
                    v_sum_buy_comm_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
                    v_sum_sell_comm_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
                    v_sum_buy_strike_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
                    v_sum_sell_strike_qty = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
                    v_sum_buy_strike_amt = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
                    v_sum_sell_strike_amt = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
                    v_sum_buy_comm_amt = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
                    v_sum_sell_comm_amt = lpTSCall1Ans13->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
                    strcpy(v_sum_comm_remark_info, lpTSCall1Ans13->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
                    v_sum_comm_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
                    strcpy(v_acco_concat_info, lpTSCall1Ans13->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


                    // [主动推送][secu.comm][证券主推_指令_指令主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
                    lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
                    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
                    lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
                    lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
                    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
                    lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
                    lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
                    lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
                    lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
                    lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
                    lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
                    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
                    lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
                    lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
                    lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
                    lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
                    lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
                    lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
                    lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
                    lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
                    lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
                    lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
                    lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
                    lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
                    lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
                    lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
                    lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
                    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                    lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
                    lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
                    lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
                    lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
                    lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
                    lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
                    lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                    lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
                    lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
                    lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                    glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


                    // if @指令批号# > 0 then
                    if (v_comm_batch_no > 0)
                    {

                        // set @指令备注信息#= @汇总指令备注信息#;
                        strcpy(v_comm_remark_info,v_sum_comm_remark_info);

                        // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
                        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
                        lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
                        lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
                        lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
                        lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
                        lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
                        lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
                        lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
                        lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
                        lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
                        lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
                        lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
                        lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
                        lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
                        lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
                        lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
                        lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
                        lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
                        lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
                        lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
                        lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
                        lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
                        lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
                        lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
                        lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
                        lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
                        lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
                        lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
                        lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
                        lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                        lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                        lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
                        lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
                        glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

                    // end if;
                    }

                // end if;
                }

                //质押提交和质押转回，要推交易代码和标准券代码

                // if @订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》 then
                if (v_order_dir == 21 || v_order_dir == 22)
                {
                  //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
                  //组织事务请求
                  if(lpTSCall1Ans14)
                  {
                    lpTSCall1Ans14->FreeMsg();
                    lpTSCall1Ans14=NULL;
                  }
                  lpTSCall1Req14=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
                  lpTSCall1Req14->SetInt32(LDTAG_PRIORITY, iPriority);
                  lpTSCall1Req14->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                  lpTSCall1Req14->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                  lpTSCall1Req14->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                  lpTSCall1Req14->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                  lpTSCall1Req14->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                  lpTSCall1Req14->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                  lpTSCall1Req14->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                  lpTSCall1Req14->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpTSCall1Req14->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpTSCall1Req14->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                  lpTSCall1Req14->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpTSCall1Req14->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                  lpTSCall1Req14->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
                  lpTSCall1Req14->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                  lpTSCall1Req14->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
                  glpTSSubcallSerives->SubCall(lpTSCall1Req14, &lpTSCall1Ans14, 5000);
                  if(!lpTSCall1Ans14)  //  超时错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO));
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans14->GetString(LDTAG_ERRORINFO));
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(strcmp(lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                  {
                      strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
                      strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
                      iRet=-1;
                      goto END;
                  }
                  //获取输出参数值
                  strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
                  v_exgp_cash_id = lpTSCall1Ans14->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
                  v_exgp_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
                  v_exgp_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
                  v_exgp_comm_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
                  v_exgp_comm_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
                  v_exgp_comm_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
                  v_exgp_comm_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
                  v_exgp_trade_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
                  v_exgp_trade_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
                  v_exgp_trade_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
                  v_exgp_trade_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
                  v_exgp_strike_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
                  v_exgp_strike_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
                  v_exgp_cash_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
                  v_exgp_posi_id = lpTSCall1Ans14->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
                  v_exgp_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
                  v_exgp_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
                  v_exgp_comm_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
                  v_exgp_comm_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
                  v_exgp_comm_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
                  v_exgp_comm_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
                  v_exgp_trade_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
                  v_exgp_trade_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
                  v_exgp_trade_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
                  v_exgp_trade_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
                  v_exgp_strike_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
                  v_exgp_strike_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
                  v_exgp_strike_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
                  v_exgp_strike_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
                  v_exgp_realize_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
                  v_exgp_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
                  v_exgp_intrst_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
                  v_exgp_intrst_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
                  v_exgp_posi_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
                  v_asac_cash_id = lpTSCall1Ans14->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
                  v_asac_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
                  v_asac_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
                  v_asac_comm_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
                  v_asac_comm_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
                  v_asac_comm_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
                  v_asac_comm_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
                  v_asac_trade_frozen_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
                  v_asac_trade_unfroz_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
                  v_asac_trade_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
                  v_asac_trade_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
                  v_asac_strike_capt_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
                  v_asac_strike_releas_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
                  v_asac_cash_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
                  v_asac_posi_id = lpTSCall1Ans14->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
                  v_asac_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
                  v_asac_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
                  v_asac_comm_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
                  v_asac_comm_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
                  v_asac_comm_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
                  v_asac_comm_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
                  v_asac_trade_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
                  v_asac_trade_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
                  v_asac_trade_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
                  v_asac_trade_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
                  v_asac_strike_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
                  v_asac_strike_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
                  v_asac_strike_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
                  v_asac_strike_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
                  v_asac_realize_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
                  v_asac_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
                  v_asac_intrst_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
                  v_asac_intrst_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
                  v_asac_posi_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
                  v_exgp_target_posi_id = lpTSCall1Ans14->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
                  v_exgp_target_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
                  v_exgp_target_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
                  v_exgp_target_comm_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
                  v_exgp_target_comm_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
                  v_exgp_target_comm_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
                  v_exgp_target_comm_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
                  v_exgp_target_trade_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
                  v_exgp_target_trade_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
                  v_exgp_target_trade_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
                  v_exgp_target_trade_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
                  v_exgp_target_strike_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
                  v_exgp_target_strike_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
                  v_exgp_target_strike_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
                  v_exgp_target_strike_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
                  v_exgp_target_realize_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
                  v_exgp_target_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
                  v_exgp_target_intrst_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
                  v_exgp_target_intrst_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
                  v_exgp_target_posi_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
                  v_asac_target_posi_id = lpTSCall1Ans14->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
                  v_asac_target_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
                  v_asac_target_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
                  v_asac_target_comm_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
                  v_asac_target_comm_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
                  v_asac_target_comm_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
                  v_asac_target_comm_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
                  v_asac_target_trade_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
                  v_asac_target_trade_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
                  v_asac_target_trade_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
                  v_asac_target_trade_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
                  v_asac_target_strike_capt_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
                  v_asac_target_strike_releas_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
                  v_asac_target_strike_frozen_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
                  v_asac_target_strike_unfroz_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
                  v_asac_target_realize_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
                  v_asac_target_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
                  v_asac_target_intrst_cost_amt = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
                  v_asac_target_intrst_pandl = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
                  v_asac_target_posi_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
                  v_exgp_put_impawn_qty = lpTSCall1Ans14->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
                  v_asac_put_impawn_qty = lpTSCall1Ans14->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


                  // set @证券代码编号# = @交易代码编号#;
                  v_stock_code_no = v_trade_code_no;

                  // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
                  lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
                  lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
                  glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


                  // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
                  lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
                  lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
                  glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


                  // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
                  lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
                  lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
                  glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


                  // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
                  lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
                  lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
                  glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


                  // set @证券代码编号# = @标的代码编号#;
                  v_stock_code_no = v_target_code_no;

                  // set @交易组提交质押数量# = 0;
                  v_exgp_put_impawn_qty = 0;

                  // set @资产账户提交质押数量# = 0;
                  v_asac_put_impawn_qty = 0;

                  // set @交易组持仓序号# = @交易组标的持仓序号#;
                  v_exgp_posi_id = v_exgp_target_posi_id;

                  // set @交易组冻结数量# = @交易组标的冻结数量#;
                  v_exgp_frozen_qty = v_exgp_target_frozen_qty;

                  // set @交易组解冻数量# = @交易组标的解冻数量#;
                  v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

                  // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
                  v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

                  // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
                  v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

                  // set @交易组指令占用数量# = @交易组标的指令占用数量#;
                  v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

                  // set @交易组指令释放数量# = @交易组标的指令释放数量#;
                  v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

                  // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
                  v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

                  // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
                  v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

                  // set @交易组交易占用数量# = @交易组标的交易占用数量#;
                  v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

                  // set @交易组交易释放数量# = @交易组标的交易释放数量#;
                  v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

                  // set @交易组成交占用数量# = @交易组标的成交占用数量#;
                  v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

                  // set @交易组成交释放数量# = @交易组标的成交释放数量#;
                  v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

                  // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
                  v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

                  // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
                  v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

                  // set @交易组实现盈亏# = @交易组标的实现盈亏#;
                  v_exgp_realize_pandl = v_exgp_target_realize_pandl;

                  // set @交易组成本金额# = @交易组标的成本金额#;
                  v_exgp_cost_amt = v_exgp_target_cost_amt;

                  // set @交易组利息成本金额# = @交易组标的利息成本金额#;
                  v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

                  // set @交易组利息收益# = @交易组标的利息收益#;
                  v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

                  // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
                  v_exgp_posi_update_times = v_exgp_target_posi_update_times;

                  // set @资产账户持仓序号# = @资产账户标的持仓序号#;
                  v_asac_posi_id = v_asac_target_posi_id;

                  // set @资产账户冻结数量# = @资产账户标的冻结数量#;
                  v_asac_frozen_qty = v_asac_target_frozen_qty;

                  // set @资产账户解冻数量# = @资产账户标的解冻数量#;
                  v_asac_unfroz_qty = v_asac_target_unfroz_qty;

                  // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
                  v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

                  // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
                  v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

                  // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
                  v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

                  // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
                  v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

                  // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
                  v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

                  // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
                  v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

                  // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
                  v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

                  // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
                  v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

                  // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
                  v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

                  // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
                  v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

                  // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
                  v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

                  // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
                  v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

                  // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
                  v_asac_realize_pandl = v_asac_target_realize_pandl;

                  // set @资产账户成本金额# = @资产账户标的成本金额#;
                  v_asac_cost_amt = v_asac_target_cost_amt;

                  // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
                  v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

                  // set @资产账户利息收益# = @资产账户标的利息收益#;
                  v_asac_intrst_pandl = v_asac_target_intrst_pandl;

                  // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
                  v_asac_posi_update_times = v_asac_target_posi_update_times;

                  // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
                  lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
                  lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
                  glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


                  // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
                  lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
                  lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
                  glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


                }
                // else if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
                else if (v_order_dir == 3 || v_order_dir == 4)
                {

                  // set @证券代码编号# = @标的代码编号#;
                  v_stock_code_no = v_target_code_no;
                  //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
                  //组织事务请求
                  if(lpTSCall1Ans15)
                  {
                    lpTSCall1Ans15->FreeMsg();
                    lpTSCall1Ans15=NULL;
                  }
                  lpTSCall1Req15=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
                  lpTSCall1Req15->SetInt32(LDTAG_PRIORITY, iPriority);
                  lpTSCall1Req15->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                  lpTSCall1Req15->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                  lpTSCall1Req15->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                  lpTSCall1Req15->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                  lpTSCall1Req15->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                  lpTSCall1Req15->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                  lpTSCall1Req15->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                  lpTSCall1Req15->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpTSCall1Req15->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpTSCall1Req15->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                  lpTSCall1Req15->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpTSCall1Req15->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                  lpTSCall1Req15->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpTSCall1Req15->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                  glpTSSubcallSerives->SubCall(lpTSCall1Req15, &lpTSCall1Ans15, 5000);
                  if(!lpTSCall1Ans15)  //  超时错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO));
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans15->GetString(LDTAG_ERRORINFO));
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(strcmp(lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                  {
                      strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
                      strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
                      iRet=-1;
                      goto END;
                  }
                  //获取输出参数值
                  strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
                  v_exgp_cash_id = lpTSCall1Ans15->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
                  v_exgp_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
                  v_exgp_unfroz_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
                  v_exgp_comm_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
                  v_exgp_comm_unfroz_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
                  v_exgp_comm_capt_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
                  v_exgp_comm_releas_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
                  v_exgp_trade_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
                  v_exgp_trade_unfroz_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
                  v_exgp_trade_capt_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
                  v_exgp_trade_releas_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
                  v_exgp_strike_capt_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
                  v_exgp_strike_releas_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
                  v_exgp_cash_update_times = lpTSCall1Ans15->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
                  v_exgp_posi_id = lpTSCall1Ans15->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
                  v_exgp_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
                  v_exgp_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
                  v_exgp_comm_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
                  v_exgp_comm_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
                  v_exgp_comm_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
                  v_exgp_comm_releas_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
                  v_exgp_trade_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
                  v_exgp_trade_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
                  v_exgp_trade_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
                  v_exgp_trade_releas_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
                  v_exgp_strike_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
                  v_exgp_strike_releas_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
                  v_exgp_strike_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
                  v_exgp_strike_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
                  v_exgp_realize_pandl = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
                  v_exgp_cost_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
                  v_exgp_intrst_cost_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
                  v_exgp_intrst_pandl = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
                  v_exgp_posi_update_times = lpTSCall1Ans15->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
                  v_asac_cash_id = lpTSCall1Ans15->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
                  v_asac_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
                  v_asac_unfroz_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
                  v_asac_comm_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
                  v_asac_comm_unfroz_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
                  v_asac_comm_capt_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
                  v_asac_comm_releas_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
                  v_asac_trade_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
                  v_asac_trade_unfroz_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
                  v_asac_trade_capt_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
                  v_asac_trade_releas_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
                  v_asac_strike_capt_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
                  v_asac_strike_releas_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
                  v_asac_cash_update_times = lpTSCall1Ans15->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
                  v_asac_posi_id = lpTSCall1Ans15->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
                  v_asac_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
                  v_asac_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
                  v_asac_comm_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
                  v_asac_comm_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
                  v_asac_comm_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
                  v_asac_comm_releas_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
                  v_asac_trade_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
                  v_asac_trade_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
                  v_asac_trade_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
                  v_asac_trade_releas_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
                  v_asac_strike_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
                  v_asac_strike_releas_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
                  v_asac_strike_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
                  v_asac_strike_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
                  v_asac_realize_pandl = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
                  v_asac_cost_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
                  v_asac_intrst_cost_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
                  v_asac_intrst_pandl = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
                  v_asac_posi_update_times = lpTSCall1Ans15->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


                  // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
                  lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
                  lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
                  glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


                  // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
                  lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
                  lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
                  glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


                  // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
                  lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
                  lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
                  glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


                  // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
                  lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
                  lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
                  glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

                }
                // else
                else
                {

                  //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
                  //组织事务请求
                  if(lpTSCall1Ans16)
                  {
                    lpTSCall1Ans16->FreeMsg();
                    lpTSCall1Ans16=NULL;
                  }
                  lpTSCall1Req16=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
                  lpTSCall1Req16->SetInt32(LDTAG_PRIORITY, iPriority);
                  lpTSCall1Req16->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                  lpTSCall1Req16->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                  lpTSCall1Req16->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                  lpTSCall1Req16->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                  lpTSCall1Req16->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                  lpTSCall1Req16->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                  lpTSCall1Req16->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                  lpTSCall1Req16->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpTSCall1Req16->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpTSCall1Req16->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                  lpTSCall1Req16->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpTSCall1Req16->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                  lpTSCall1Req16->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpTSCall1Req16->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                  glpTSSubcallSerives->SubCall(lpTSCall1Req16, &lpTSCall1Ans16, 5000);
                  if(!lpTSCall1Ans16)  //  超时错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(lpTSCall1Ans16->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                  {
                      lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans16->GetInt32(LDTAG_ERRORNO));
                      lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans16->GetString(LDTAG_ERRORINFO));
                      iRet=-2;
                      goto ENDSYS;
                  }
                  else if(strcmp(lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                  {
                      strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
                      strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));
                      iRet=-1;
                      goto END;
                  }
                  //获取输出参数值
                  strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));
                  v_exgp_cash_id = lpTSCall1Ans16->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
                  v_exgp_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
                  v_exgp_unfroz_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
                  v_exgp_comm_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
                  v_exgp_comm_unfroz_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
                  v_exgp_comm_capt_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
                  v_exgp_comm_releas_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
                  v_exgp_trade_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
                  v_exgp_trade_unfroz_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
                  v_exgp_trade_capt_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
                  v_exgp_trade_releas_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
                  v_exgp_strike_capt_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
                  v_exgp_strike_releas_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
                  v_exgp_cash_update_times = lpTSCall1Ans16->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
                  v_exgp_posi_id = lpTSCall1Ans16->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
                  v_exgp_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
                  v_exgp_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
                  v_exgp_comm_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
                  v_exgp_comm_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
                  v_exgp_comm_capt_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
                  v_exgp_comm_releas_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
                  v_exgp_trade_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
                  v_exgp_trade_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
                  v_exgp_trade_capt_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
                  v_exgp_trade_releas_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
                  v_exgp_strike_capt_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
                  v_exgp_strike_releas_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
                  v_exgp_strike_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
                  v_exgp_strike_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
                  v_exgp_realize_pandl = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
                  v_exgp_cost_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
                  v_exgp_intrst_cost_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
                  v_exgp_intrst_pandl = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
                  v_exgp_posi_update_times = lpTSCall1Ans16->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
                  v_asac_cash_id = lpTSCall1Ans16->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
                  v_asac_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
                  v_asac_unfroz_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
                  v_asac_comm_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
                  v_asac_comm_unfroz_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
                  v_asac_comm_capt_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
                  v_asac_comm_releas_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
                  v_asac_trade_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
                  v_asac_trade_unfroz_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
                  v_asac_trade_capt_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
                  v_asac_trade_releas_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
                  v_asac_strike_capt_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
                  v_asac_strike_releas_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
                  v_asac_cash_update_times = lpTSCall1Ans16->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
                  v_asac_posi_id = lpTSCall1Ans16->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
                  v_asac_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
                  v_asac_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
                  v_asac_comm_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
                  v_asac_comm_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
                  v_asac_comm_capt_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
                  v_asac_comm_releas_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
                  v_asac_trade_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
                  v_asac_trade_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
                  v_asac_trade_capt_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
                  v_asac_trade_releas_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
                  v_asac_strike_capt_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
                  v_asac_strike_releas_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
                  v_asac_strike_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
                  v_asac_strike_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
                  v_asac_realize_pandl = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
                  v_asac_cost_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
                  v_asac_intrst_cost_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
                  v_asac_intrst_pandl = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
                  v_asac_posi_update_times = lpTSCall1Ans16->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


                  // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
                  lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
                  lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
                  glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


                  // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
                  lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
                  lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
                  lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
                  glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


                  // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
                  lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
                  lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
                  glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


                  // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
                  lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
                  lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
                  lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                  lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                  lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                  lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                  lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
                  lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
                  lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
                  glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

                // end if;
                }

           // end if;
           }

        //按成交回报进行错单修改
        }
        // else
        else
        {

            //终态和未报给券商的订单状态，都不允许成交

            // [检查报错返回][@订单状态#  =《订单状态-已撤》 or  @订单状态#  = 《订单状态-已成》 or @订单状态# = 《订单状态-部撤》 or @订单状态# = 《订单状态-废单》][771][@订单状态#]
            if (strcmp(v_order_status  ,"4")==0 ||  strcmp(v_order_status  , "6")==0 || strcmp(v_order_status , "7")==0 || strcmp(v_order_status , "8")==0)
            {
                strcpy(v_error_code, "tdsecuL.5.41.771");
                snprintf(v_error_info, sizeof(v_error_info), "%s%s","订单状态=",v_order_status);
                iRet = -1;
                goto END;
            }

           //对未报、待报、正报的订单 不拦截，填report_date、report_id的操作。Modify by wjp 20180928

            // if @订单状态# = 《订单状态-未报》 or  @订单状态# = 《订单状态-待报》 or  @订单状态# = 《订单状态-正报》 then
            if (strcmp(v_order_status , "1")==0 ||  strcmp(v_order_status , "a")==0 ||  strcmp(v_order_status , "b")==0)
            {

                // set @订单回报状态# = 《订单回报状态-已报》;
                strcpy(v_order_rsp_status,"1");

                // set @申报日期# = @初始化日期#;
                v_report_date = v_init_date;

                // set @申报编号# = concat("F_", @订单序号#);
                snprintf(v_report_no,sizeof(v_report_no),"%s%ld","F_",v_order_id);
                //调用过程[事务_交易证券_报盘_处理订单回报]
                //组织事务请求
                if(lpTSCall1Ans17)
                {
                  lpTSCall1Ans17->FreeMsg();
                  lpTSCall1Ans17=NULL;
                }
                lpTSCall1Req17=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.1", 0);
                lpTSCall1Req17->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req17->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req17->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req17->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req17->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req17->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req17->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req17->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req17->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                lpTSCall1Req17->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                lpTSCall1Req17->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
                lpTSCall1Req17->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                lpTSCall1Req17->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
                lpTSCall1Req17->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
                lpTSCall1Req17->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
                lpTSCall1Req17->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
                lpTSCall1Req17->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
                lpTSCall1Req17->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
                lpTSCall1Req17->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
                lpTSCall1Req17->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                lpTSCall1Req17->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
                lpTSCall1Req17->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                lpTSCall1Req17->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
                lpTSCall1Req17->SetString(LDBIZ_ORDER_RSP_STATUS_STR,v_order_rsp_status);
                lpTSCall1Req17->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
                glpTSSubcallSerives->SubCall(lpTSCall1Req17, &lpTSCall1Ans17, 5000);
                if(!lpTSCall1Ans17)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.1]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans17->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans17->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans17->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans17->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans17->GetString(LDBIZ_ERROR_INFO_STR));
                v_co_no = lpTSCall1Ans17->GetInt32(LDBIZ_CO_NO_INT);
                v_busi_opor_no = lpTSCall1Ans17->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
                v_pd_no = lpTSCall1Ans17->GetInt32(LDBIZ_PD_NO_INT);
                v_exch_group_no = lpTSCall1Ans17->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
                v_asset_acco_no = lpTSCall1Ans17->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
                v_stock_code_no = lpTSCall1Ans17->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
                v_stock_acco_no = lpTSCall1Ans17->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
                v_external_no = lpTSCall1Ans17->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
                strcpy(v_exch_crncy_type, lpTSCall1Ans17->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
                v_comm_date = lpTSCall1Ans17->GetInt32(LDBIZ_COMM_DATE_INT);
                v_comm_id = lpTSCall1Ans17->GetInt64(LDBIZ_COMM_ID_INT64);
                v_comm_batch_no = lpTSCall1Ans17->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
                v_comm_executor = lpTSCall1Ans17->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
                v_order_time = lpTSCall1Ans17->GetInt32(LDBIZ_ORDER_TIME_INT);
                v_stock_type = lpTSCall1Ans17->GetInt32(LDBIZ_STOCK_TYPE_INT);
                v_net_price_flag = lpTSCall1Ans17->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
                v_bond_accr_intrst = lpTSCall1Ans17->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
                v_bond_rate_type = lpTSCall1Ans17->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
                v_par_value = lpTSCall1Ans17->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
                v_impawn_ratio = lpTSCall1Ans17->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
                v_order_frozen_amt = lpTSCall1Ans17->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
                v_order_frozen_qty = lpTSCall1Ans17->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
                strcpy(v_order_status, lpTSCall1Ans17->GetString(LDBIZ_ORDER_STATUS_STR));
                v_order_batch_no = lpTSCall1Ans17->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
                v_wtdraw_qty = lpTSCall1Ans17->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
                v_strike_amt = lpTSCall1Ans17->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
                v_strike_qty = lpTSCall1Ans17->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
                v_strike_bond_accr_intrst = lpTSCall1Ans17->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
                strcpy(v_order_oper_way, lpTSCall1Ans17->GetString(LDBIZ_ORDER_OPER_WAY_STR));
                strcpy(v_old_order_status, lpTSCall1Ans17->GetString(LDBIZ_OLD_ORDER_STATUS_STR));
                v_row_id = lpTSCall1Ans17->GetInt64(LDBIZ_ROW_ID_INT64);
                strcpy(v_combo_code, lpTSCall1Ans17->GetString(LDBIZ_COMBO_CODE_STR));
                v_combo_posi_id = lpTSCall1Ans17->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
                v_strategy_id = lpTSCall1Ans17->GetInt64(LDBIZ_STRATEGY_ID_INT64);
                v_update_times = lpTSCall1Ans17->GetInt32(LDBIZ_UPDATE_TIMES_INT);

            // end if;
            }

            //获取成本，利息等
            //调用过程[事务_产品证券_交易接口_获取成交回报证券持仓成本]
            //组织事务请求
            if(lpTSCall1Ans18)
            {
              lpTSCall1Ans18->FreeMsg();
              lpTSCall1Ans18=NULL;
            }
            lpTSCall1Req18=glpFastMsgFactory->CreateFastMessage("pdsecuT.6.3", 0);
            lpTSCall1Req18->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req18->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req18->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req18->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req18->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req18->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req18->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req18->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req18->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpTSCall1Req18->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req18->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpTSCall1Req18->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req18->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpTSCall1Req18->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            glpTSSubcallSerives->SubCall(lpTSCall1Req18, &lpTSCall1Ans18, 5000);
            if(!lpTSCall1Ans18)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pdsecuT.6.3]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans18->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans18->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans18->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans18->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans18->GetString(LDBIZ_ERROR_INFO_STR));
            v_exgp_cost_amt = lpTSCall1Ans18->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
            v_exgp_intrst_cost_amt = lpTSCall1Ans18->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
            v_exgp_curr_qty = lpTSCall1Ans18->GetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT);
            v_asac_cost_amt = lpTSCall1Ans18->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
            v_asac_intrst_cost_amt = lpTSCall1Ans18->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
            v_asac_curr_qty = lpTSCall1Ans18->GetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT);


            // set @临时_成交编号# = @成交编号#;
            strcpy(v_tmp_strike_no,v_strike_no);

            // set @成交编号# = concat("P_", @临时_成交编号#);
            snprintf(v_strike_no,sizeof(v_strike_no),"%s%s","P_",v_tmp_strike_no);

            // set @成交价格# = @临时_成交价格#;
            v_strike_price = v_tmp_strike_price;

            // set @成交数量# = @临时_成交数量#;
            v_strike_qty = v_tmp_strike_qty;

            // set @成交金额# = @成交价格# * @成交数量#;
            v_strike_amt = v_strike_price * v_strike_qty;

            // if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
            if (v_order_dir == 3 || v_order_dir == 4)
            {

                // set @成交金额# = @票面面值# * @成交数量#;
                v_strike_amt = v_par_value * v_strike_qty;
            // end if;
            }


            // set @临时_成交金额# = @成交金额# ;
            v_tmp_strike_amt = v_strike_amt ;

            // set @成交处理方式# = 《成交处理方式-分笔》;
            v_strike_deal_type = 1;

            // set @回报序号# = 0;
            v_rsp_id = 0;

            // set @组合代码# = " ";
            strcpy(v_combo_code," ");
            //调用过程[事务_交易证券_报盘_处理成交回报]
            //组织事务请求
            if(lpTSCall1Ans19)
            {
              lpTSCall1Ans19->FreeMsg();
              lpTSCall1Ans19=NULL;
            }
            lpTSCall1Req19=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.21", 0);
            lpTSCall1Req19->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req19->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req19->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req19->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req19->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req19->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req19->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req19->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req19->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req19->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpTSCall1Req19->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpTSCall1Req19->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpTSCall1Req19->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
            lpTSCall1Req19->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
            lpTSCall1Req19->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
            lpTSCall1Req19->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpTSCall1Req19->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
            lpTSCall1Req19->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpTSCall1Req19->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
            lpTSCall1Req19->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
            lpTSCall1Req19->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
            lpTSCall1Req19->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpTSCall1Req19->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
            lpTSCall1Req19->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpTSCall1Req19->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpTSCall1Req19->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
            lpTSCall1Req19->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
            lpTSCall1Req19->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
            lpTSCall1Req19->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
            lpTSCall1Req19->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
            lpTSCall1Req19->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
            lpTSCall1Req19->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
            lpTSCall1Req19->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpTSCall1Req19->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpTSCall1Req19->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
            lpTSCall1Req19->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpTSCall1Req19->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpTSCall1Req19->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
            lpTSCall1Req19->SetInt64(LDBIZ_RSP_ID_INT64,v_rsp_id);
            lpTSCall1Req19->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req19->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
            lpTSCall1Req19->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
            lpTSCall1Req19->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
            lpTSCall1Req19->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpTSCall1Req19->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
            lpTSCall1Req19->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
            glpTSSubcallSerives->SubCall(lpTSCall1Req19, &lpTSCall1Ans19, 5000);
            if(!lpTSCall1Ans19)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.21]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans19->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans19->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans19->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans19->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans19->GetString(LDBIZ_ERROR_INFO_STR));
            v_strike_id = lpTSCall1Ans19->GetInt64(LDBIZ_STRIKE_ID_INT64);
            v_co_no = lpTSCall1Ans19->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans19->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpTSCall1Ans19->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpTSCall1Ans19->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_stock_acco_no = lpTSCall1Ans19->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_stock_code_no = lpTSCall1Ans19->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            strcpy(v_target_code, lpTSCall1Ans19->GetString(LDBIZ_TARGET_CODE_STR));
            v_order_date = lpTSCall1Ans19->GetInt32(LDBIZ_ORDER_DATE_INT);
            v_order_batch_no = lpTSCall1Ans19->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
            v_report_time = lpTSCall1Ans19->GetInt32(LDBIZ_REPORT_TIME_INT);
            v_comm_date = lpTSCall1Ans19->GetInt32(LDBIZ_COMM_DATE_INT);
            v_comm_id = lpTSCall1Ans19->GetInt64(LDBIZ_COMM_ID_INT64);
            v_comm_batch_no = lpTSCall1Ans19->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
            v_comm_executor = lpTSCall1Ans19->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
            v_external_no = lpTSCall1Ans19->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
            v_busi_opor_no = lpTSCall1Ans19->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
            strcpy(v_order_oper_way, lpTSCall1Ans19->GetString(LDBIZ_ORDER_OPER_WAY_STR));
            v_total_strike_amt = lpTSCall1Ans19->GetDouble(LDBIZ_TOTAL_STRIKE_AMT_FLOAT);
            v_total_strike_qty = lpTSCall1Ans19->GetDouble(LDBIZ_TOTAL_STRIKE_QTY_FLOAT);
            v_cost_calc_type = lpTSCall1Ans19->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
            v_order_frozen_amt = lpTSCall1Ans19->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
            v_order_frozen_qty = lpTSCall1Ans19->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
            v_strike_bond_accr_intrst = lpTSCall1Ans19->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
            v_wtdraw_qty = lpTSCall1Ans19->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
            strcpy(v_order_status, lpTSCall1Ans19->GetString(LDBIZ_ORDER_STATUS_STR));
            v_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_UPDATE_TIMES_INT);
            v_trade_occur_amt = lpTSCall1Ans19->GetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT);
            v_open_posi_date = lpTSCall1Ans19->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
            v_original_order_dir = lpTSCall1Ans19->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);


            // set @操作员编号# = @业务操作员编号#;
            v_opor_no = v_busi_opor_no;
            //计算上次成交金额和数量

            // set @成交金额# = @总成交金额# - @临时_成交金额#;
            v_strike_amt = v_total_strike_amt - v_tmp_strike_amt;

            // set @成交数量# = @总成交数量# - @临时_成交数量#;
            v_strike_qty = v_total_strike_qty - v_tmp_strike_qty;
            //处理成交回报后，再处理费用，以避免并发时导致的费用计算所获取的成交数量不一致
            //计算原费用

            // set @临时_全部费用# = 0;
            v_tmp_all_fee = 0;

            // set @临时_交易佣金# = 0;
            v_tmp_trade_commis = 0;

            // set @临时_印花税# = 0;
            v_tmp_stamp_tax = 0;

            // set @临时_过户费# = 0;
            v_tmp_trans_fee = 0;

            // set @临时_经手费# = 0;
            v_tmp_brkage_fee = 0;

            // set @临时_证管费# = 0;
            v_tmp_SEC_charges = 0;

            // set @临时_其他费用# = 0;
            v_tmp_other_fee = 0;

            // set @临时_其他佣金# = 0;
            v_tmp_other_commis = 0;

            // if @成交数量# > 0 then
            if (v_strike_qty > 0)
            {

                // set @成交价格# = @成交金额# / @成交数量#;
                v_strike_price = v_strike_amt / v_strike_qty;

                // if @订单操作方式# = 《订单操作方式-增强交易》 or @订单操作方式# = 《订单操作方式-增强交易平仓》 then
                if (strcmp(v_order_oper_way , "14")==0 || strcmp(v_order_oper_way , "51")==0)
                {
                    //调用过程[事务_交易证券_T0_获取机构级操作员费用设置标志]
                    //组织事务请求
                    if(lpTSCall1Ans20)
                    {
                      lpTSCall1Ans20->FreeMsg();
                      lpTSCall1Ans20=NULL;
                    }
                    lpTSCall1Req20=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.103", 0);
                    lpTSCall1Req20->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req20->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req20->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req20->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req20->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req20->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req20->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req20->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req20->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req20, &lpTSCall1Ans20, 5000);
                    if(!lpTSCall1Ans20)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.103]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans20->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans20->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans20->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(strcmp(lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                    {
                        strcpy(v_error_code, lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR));
                        strcpy(v_error_info, lpTSCall1Ans20->GetString(LDBIZ_ERROR_INFO_STR));
                        iRet=-1;
                        goto END;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans20->GetString(LDBIZ_ERROR_INFO_STR));
                    v_T0_opor_fee_set_flag = lpTSCall1Ans20->GetInt32(LDBIZ_T0_OPOR_FEE_SET_FLAG_INT);

                    //调用过程[事务_交易证券_T0_获取操作员阈值信息]
                    //组织事务请求
                    if(lpTSCall1Ans21)
                    {
                      lpTSCall1Ans21->FreeMsg();
                      lpTSCall1Ans21=NULL;
                    }
                    lpTSCall1Req21=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.98", 0);
                    lpTSCall1Req21->SetInt32(LDTAG_PRIORITY, iPriority);
                    lpTSCall1Req21->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                    lpTSCall1Req21->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                    lpTSCall1Req21->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                    lpTSCall1Req21->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                    lpTSCall1Req21->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                    lpTSCall1Req21->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                    lpTSCall1Req21->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                    lpTSCall1Req21->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
                    glpTSSubcallSerives->SubCall(lpTSCall1Req21, &lpTSCall1Ans21, 5000);
                    if(!lpTSCall1Ans21)  //  超时错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.98]subcall timed out!");
                        iRet=-2;
                        goto ENDSYS;
                    }
                    else if(lpTSCall1Ans21->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                    {
                        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans21->GetInt32(LDTAG_ERRORNO));
                        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans21->GetString(LDTAG_ERRORINFO));
                        iRet=-2;
                        goto ENDSYS;
                    }
                    //获取输出参数值
                    strcpy(v_error_code, lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans21->GetString(LDBIZ_ERROR_INFO_STR));
                    v_row_id = lpTSCall1Ans21->GetInt64(LDBIZ_ROW_ID_INT64);
                    v_curr_amt = lpTSCall1Ans21->GetDouble(LDBIZ_CURR_AMT_FLOAT);
                    v_frozen_amt = lpTSCall1Ans21->GetDouble(LDBIZ_FROZEN_AMT_FLOAT);
                    v_opor_warn_tshold = lpTSCall1Ans21->GetDouble(LDBIZ_OPOR_WARN_TSHOLD_FLOAT);
                    v_opor_stop_tshold = lpTSCall1Ans21->GetDouble(LDBIZ_OPOR_STOP_TSHOLD_FLOAT);
                    v_order_limit_time = lpTSCall1Ans21->GetInt32(LDBIZ_ORDER_LIMIT_TIME_INT);
                    v_per_secu_posi_ratio = lpTSCall1Ans21->GetDouble(LDBIZ_PER_SECU_POSI_RATIO_FLOAT);
                    v_posi_limit_time = lpTSCall1Ans21->GetInt32(LDBIZ_POSI_LIMIT_TIME_INT);
                    v_order_ctrl_qty = lpTSCall1Ans21->GetDouble(LDBIZ_ORDER_CTRL_QTY_FLOAT);
                    v_order_ctrl_amt = lpTSCall1Ans21->GetDouble(LDBIZ_ORDER_CTRL_AMT_FLOAT);
                    v_stock_warn_ratio = lpTSCall1Ans21->GetDouble(LDBIZ_STOCK_WARN_RATIO_FLOAT);
                    v_stock_stop_ratio = lpTSCall1Ans21->GetDouble(LDBIZ_STOCK_STOP_RATIO_FLOAT);
                    v_stock_warn_amt = lpTSCall1Ans21->GetDouble(LDBIZ_STOCK_WARN_AMT_FLOAT);
                    v_stock_stop_amt = lpTSCall1Ans21->GetDouble(LDBIZ_STOCK_STOP_AMT_FLOAT);
                    v_trig_oper_type = lpTSCall1Ans21->GetInt32(LDBIZ_TRIG_OPER_TYPE_INT);
                    v_open_close_permission = lpTSCall1Ans21->GetInt32(LDBIZ_OPEN_CLOSE_PERMISSION_INT);
                    v_risk_oper = lpTSCall1Ans21->GetInt32(LDBIZ_RISK_OPER_INT);
                    v_fee_calc_type = lpTSCall1Ans21->GetInt32(LDBIZ_FEE_CALC_TYPE_INT);
                    v_permit_margin_trade = lpTSCall1Ans21->GetInt32(LDBIZ_PERMIT_MARGIN_TRADE_INT);
                    v_buy_fee_ratio = lpTSCall1Ans21->GetDouble(LDBIZ_BUY_FEE_RATIO_FLOAT);
                    v_sell_fee_ratio = lpTSCall1Ans21->GetDouble(LDBIZ_SELL_FEE_RATIO_FLOAT);
                    v_buy_min_fee = lpTSCall1Ans21->GetDouble(LDBIZ_BUY_MIN_FEE_FLOAT);
                    v_sell_min_fee = lpTSCall1Ans21->GetDouble(LDBIZ_SELL_MIN_FEE_FLOAT);
                    strcpy(v_remark_info, lpTSCall1Ans21->GetString(LDBIZ_REMARK_INFO_STR));
                    v_update_times = lpTSCall1Ans21->GetInt32(LDBIZ_UPDATE_TIMES_INT);


                    // if @费用计算方式#  = 《费用计算方式-操作员》 and @T0操作员费用设置标志#=《T0操作员费用设置标志-设置》 then
                    if (v_fee_calc_type  == 2 && v_T0_opor_fee_set_flag==1)
                    {

                           // set @全部费用临时值#=0;
                           v_all_fee_for_tmp=0;
                          //调用过程[事务_交易证券_T0_操作员成交费用计算]
                          //组织事务请求
                          if(lpTSCall1Ans22)
                          {
                            lpTSCall1Ans22->FreeMsg();
                            lpTSCall1Ans22=NULL;
                          }
                          lpTSCall1Req22=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.100", 0);
                          lpTSCall1Req22->SetInt32(LDTAG_PRIORITY, iPriority);
                          lpTSCall1Req22->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                          lpTSCall1Req22->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                          lpTSCall1Req22->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                          lpTSCall1Req22->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                          lpTSCall1Req22->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                          lpTSCall1Req22->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                          lpTSCall1Req22->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                          lpTSCall1Req22->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                          lpTSCall1Req22->SetDouble(LDBIZ_BUY_MIN_FEE_FLOAT,v_buy_min_fee);
                          lpTSCall1Req22->SetDouble(LDBIZ_SELL_MIN_FEE_FLOAT,v_sell_min_fee);
                          lpTSCall1Req22->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                          lpTSCall1Req22->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
                          lpTSCall1Req22->SetDouble(LDBIZ_BUY_FEE_RATIO_FLOAT,v_buy_fee_ratio);
                          lpTSCall1Req22->SetDouble(LDBIZ_SELL_FEE_RATIO_FLOAT,v_sell_fee_ratio);
                          glpTSSubcallSerives->SubCall(lpTSCall1Req22, &lpTSCall1Ans22, 5000);
                          if(!lpTSCall1Ans22)  //  超时错误
                          {
                              lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                              lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.100]subcall timed out!");
                              iRet=-2;
                              goto ENDSYS;
                          }
                          else if(lpTSCall1Ans22->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                          {
                              lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans22->GetInt32(LDTAG_ERRORNO));
                              lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans22->GetString(LDTAG_ERRORINFO));
                              iRet=-2;
                              goto ENDSYS;
                          }
                          else if(strcmp(lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                          {
                              strcpy(v_error_code, lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR));
                              strcpy(v_error_info, lpTSCall1Ans22->GetString(LDBIZ_ERROR_INFO_STR));
                              iRet=-1;
                              goto END;
                          }
                          //获取输出参数值
                          strcpy(v_error_code, lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR));
                          strcpy(v_error_info, lpTSCall1Ans22->GetString(LDBIZ_ERROR_INFO_STR));
                          v_all_fee = lpTSCall1Ans22->GetDouble(LDBIZ_ALL_FEE_FLOAT);

            //T0 费用增加。Modify by wjp20181018

                          // set @全部费用临时值#=@全部费用#;
                          v_all_fee_for_tmp=v_all_fee;
                          //调用过程[事务_公共_公共接口_计算证券成交费用]
                          //组织事务请求
                          if(lpTSCall1Ans23)
                          {
                            lpTSCall1Ans23->FreeMsg();
                            lpTSCall1Ans23=NULL;
                          }
                          lpTSCall1Req23=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
                          lpTSCall1Req23->SetInt32(LDTAG_PRIORITY, iPriority);
                          lpTSCall1Req23->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                          lpTSCall1Req23->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                          lpTSCall1Req23->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                          lpTSCall1Req23->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                          lpTSCall1Req23->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                          lpTSCall1Req23->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                          lpTSCall1Req23->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                          lpTSCall1Req23->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                          lpTSCall1Req23->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                          lpTSCall1Req23->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                          lpTSCall1Req23->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                          lpTSCall1Req23->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                          lpTSCall1Req23->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                          lpTSCall1Req23->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                          lpTSCall1Req23->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
                          lpTSCall1Req23->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                          lpTSCall1Req23->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                          lpTSCall1Req23->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                          lpTSCall1Req23->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                          lpTSCall1Req23->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                          glpTSSubcallSerives->SubCall(lpTSCall1Req23, &lpTSCall1Ans23, 5000);
                          if(!lpTSCall1Ans23)  //  超时错误
                          {
                              lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                              lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
                              iRet=-2;
                              goto ENDSYS;
                          }
                          else if(lpTSCall1Ans23->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                          {
                              lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans23->GetInt32(LDTAG_ERRORNO));
                              lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans23->GetString(LDTAG_ERRORINFO));
                              iRet=-2;
                              goto ENDSYS;
                          }
                          else if(strcmp(lpTSCall1Ans23->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                          {
                              strcpy(v_error_code, lpTSCall1Ans23->GetString(LDBIZ_ERROR_CODE_STR));
                              strcpy(v_error_info, lpTSCall1Ans23->GetString(LDBIZ_ERROR_INFO_STR));
                              iRet=-1;
                              goto END;
                          }
                          //获取输出参数值
                          strcpy(v_error_code, lpTSCall1Ans23->GetString(LDBIZ_ERROR_CODE_STR));
                          strcpy(v_error_info, lpTSCall1Ans23->GetString(LDBIZ_ERROR_INFO_STR));
                          v_trade_commis = lpTSCall1Ans23->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
                          v_all_fee = lpTSCall1Ans23->GetDouble(LDBIZ_ALL_FEE_FLOAT);
                          v_stamp_tax = lpTSCall1Ans23->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
                          v_trans_fee = lpTSCall1Ans23->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
                          v_brkage_fee = lpTSCall1Ans23->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
                          v_SEC_charges = lpTSCall1Ans23->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
                          v_other_fee = lpTSCall1Ans23->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
                          v_other_commis = lpTSCall1Ans23->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
                          v_trade_tax = lpTSCall1Ans23->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
                          v_trade_cost_fee = lpTSCall1Ans23->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
                          v_trade_system_use_fee = lpTSCall1Ans23->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
                          v_stock_settle_fee = lpTSCall1Ans23->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);


                          // set @全部费用#=@全部费用#+@全部费用临时值#-@交易佣金#;
                          v_all_fee=v_all_fee+v_all_fee_for_tmp-v_trade_commis;

                          // set @交易佣金#=@全部费用临时值#;
                          v_trade_commis=v_all_fee_for_tmp;
                    }
                    // else
                    else
                    {

                          //调用过程[事务_公共_公共接口_计算证券成交费用]
                          //组织事务请求
                          if(lpTSCall1Ans24)
                          {
                            lpTSCall1Ans24->FreeMsg();
                            lpTSCall1Ans24=NULL;
                          }
                          lpTSCall1Req24=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
                          lpTSCall1Req24->SetInt32(LDTAG_PRIORITY, iPriority);
                          lpTSCall1Req24->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                          lpTSCall1Req24->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                          lpTSCall1Req24->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                          lpTSCall1Req24->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                          lpTSCall1Req24->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                          lpTSCall1Req24->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                          lpTSCall1Req24->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                          lpTSCall1Req24->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                          lpTSCall1Req24->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                          lpTSCall1Req24->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                          lpTSCall1Req24->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                          lpTSCall1Req24->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                          lpTSCall1Req24->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                          lpTSCall1Req24->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                          lpTSCall1Req24->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
                          lpTSCall1Req24->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                          lpTSCall1Req24->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                          lpTSCall1Req24->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                          lpTSCall1Req24->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                          lpTSCall1Req24->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                          glpTSSubcallSerives->SubCall(lpTSCall1Req24, &lpTSCall1Ans24, 5000);
                          if(!lpTSCall1Ans24)  //  超时错误
                          {
                              lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                              lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
                              iRet=-2;
                              goto ENDSYS;
                          }
                          else if(lpTSCall1Ans24->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                          {
                              lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans24->GetInt32(LDTAG_ERRORNO));
                              lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans24->GetString(LDTAG_ERRORINFO));
                              iRet=-2;
                              goto ENDSYS;
                          }
                          else if(strcmp(lpTSCall1Ans24->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                          {
                              strcpy(v_error_code, lpTSCall1Ans24->GetString(LDBIZ_ERROR_CODE_STR));
                              strcpy(v_error_info, lpTSCall1Ans24->GetString(LDBIZ_ERROR_INFO_STR));
                              iRet=-1;
                              goto END;
                          }
                          //获取输出参数值
                          strcpy(v_error_code, lpTSCall1Ans24->GetString(LDBIZ_ERROR_CODE_STR));
                          strcpy(v_error_info, lpTSCall1Ans24->GetString(LDBIZ_ERROR_INFO_STR));
                          v_trade_commis = lpTSCall1Ans24->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
                          v_all_fee = lpTSCall1Ans24->GetDouble(LDBIZ_ALL_FEE_FLOAT);
                          v_stamp_tax = lpTSCall1Ans24->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
                          v_trans_fee = lpTSCall1Ans24->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
                          v_brkage_fee = lpTSCall1Ans24->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
                          v_SEC_charges = lpTSCall1Ans24->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
                          v_other_fee = lpTSCall1Ans24->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
                          v_other_commis = lpTSCall1Ans24->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
                          v_trade_tax = lpTSCall1Ans24->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
                          v_trade_cost_fee = lpTSCall1Ans24->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
                          v_trade_system_use_fee = lpTSCall1Ans24->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
                          v_stock_settle_fee = lpTSCall1Ans24->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);

                    // end if;
                    }

                }
                // else
                else
                {

                     //调用过程[事务_公共_公共接口_计算证券成交费用]
                     //组织事务请求
                     if(lpTSCall1Ans25)
                     {
                       lpTSCall1Ans25->FreeMsg();
                       lpTSCall1Ans25=NULL;
                     }
                     lpTSCall1Req25=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
                     lpTSCall1Req25->SetInt32(LDTAG_PRIORITY, iPriority);
                     lpTSCall1Req25->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                     lpTSCall1Req25->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                     lpTSCall1Req25->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                     lpTSCall1Req25->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                     lpTSCall1Req25->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                     lpTSCall1Req25->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                     lpTSCall1Req25->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                     lpTSCall1Req25->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                     lpTSCall1Req25->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                     lpTSCall1Req25->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                     lpTSCall1Req25->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                     lpTSCall1Req25->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                     lpTSCall1Req25->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                     lpTSCall1Req25->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                     lpTSCall1Req25->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
                     lpTSCall1Req25->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                     lpTSCall1Req25->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                     lpTSCall1Req25->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                     lpTSCall1Req25->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                     lpTSCall1Req25->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                     glpTSSubcallSerives->SubCall(lpTSCall1Req25, &lpTSCall1Ans25, 5000);
                     if(!lpTSCall1Ans25)  //  超时错误
                     {
                         lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                         lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
                         iRet=-2;
                         goto ENDSYS;
                     }
                     else if(lpTSCall1Ans25->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                     {
                         lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans25->GetInt32(LDTAG_ERRORNO));
                         lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans25->GetString(LDTAG_ERRORINFO));
                         iRet=-2;
                         goto ENDSYS;
                     }
                     else if(strcmp(lpTSCall1Ans25->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                     {
                         strcpy(v_error_code, lpTSCall1Ans25->GetString(LDBIZ_ERROR_CODE_STR));
                         strcpy(v_error_info, lpTSCall1Ans25->GetString(LDBIZ_ERROR_INFO_STR));
                         iRet=-1;
                         goto END;
                     }
                     //获取输出参数值
                     strcpy(v_error_code, lpTSCall1Ans25->GetString(LDBIZ_ERROR_CODE_STR));
                     strcpy(v_error_info, lpTSCall1Ans25->GetString(LDBIZ_ERROR_INFO_STR));
                     v_trade_commis = lpTSCall1Ans25->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
                     v_all_fee = lpTSCall1Ans25->GetDouble(LDBIZ_ALL_FEE_FLOAT);
                     v_stamp_tax = lpTSCall1Ans25->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
                     v_trans_fee = lpTSCall1Ans25->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
                     v_brkage_fee = lpTSCall1Ans25->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
                     v_SEC_charges = lpTSCall1Ans25->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
                     v_other_fee = lpTSCall1Ans25->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
                     v_other_commis = lpTSCall1Ans25->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
                     v_trade_tax = lpTSCall1Ans25->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
                     v_trade_cost_fee = lpTSCall1Ans25->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
                     v_trade_system_use_fee = lpTSCall1Ans25->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
                     v_stock_settle_fee = lpTSCall1Ans25->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);

                // end if;
                }


                // set @临时_全部费用# = @全部费用#;
                v_tmp_all_fee = v_all_fee;

                // set @临时_交易佣金# = @交易佣金#;
                v_tmp_trade_commis = v_trade_commis;

                // set @临时_印花税# = @印花税#;
                v_tmp_stamp_tax = v_stamp_tax;

                // set @临时_过户费# = @过户费#;
                v_tmp_trans_fee = v_trans_fee;

                // set @临时_经手费# = @经手费#;
                v_tmp_brkage_fee = v_brkage_fee;

                // set @临时_证管费# = @证管费#;
                v_tmp_SEC_charges = v_SEC_charges;

                // set @临时_其他费用# = @其他费用#;
                v_tmp_other_fee = v_other_fee;

                // set @临时_其他佣金# = @其他佣金#;
                v_tmp_other_commis = v_other_commis;

                // set @临时_交易费# = @交易费#;
                v_tmp_trade_cost_fee = v_trade_cost_fee;

                // set @临时_交易系统使用费# = @交易系统使用费#;
                v_tmp_trade_system_use_fee = v_trade_system_use_fee;

                // set @临时_交易征费# = @交易征费#;
                v_tmp_trade_tax = v_trade_tax;

                // set @临时_股份交收费# = @股份交收费#;
                v_tmp_stock_settle_fee = v_stock_settle_fee;
            // end if;
            }

            //计算新费用

            // set @成交价格# = @总成交金额#/ @总成交数量#;
            v_strike_price = v_total_strike_amt/ v_total_strike_qty;

            // set @成交数量# = @总成交数量#;
            v_strike_qty = v_total_strike_qty;

            // if @订单操作方式# = 《订单操作方式-增强交易》 or @订单操作方式# = 《订单操作方式-增强交易平仓》 then
            if (strcmp(v_order_oper_way , "14")==0 || strcmp(v_order_oper_way , "51")==0)
            {
                //调用过程[事务_交易证券_T0_获取机构级操作员费用设置标志]
                //组织事务请求
                if(lpTSCall1Ans26)
                {
                  lpTSCall1Ans26->FreeMsg();
                  lpTSCall1Ans26=NULL;
                }
                lpTSCall1Req26=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.103", 0);
                lpTSCall1Req26->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req26->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req26->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req26->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req26->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req26->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req26->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req26->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req26->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
                glpTSSubcallSerives->SubCall(lpTSCall1Req26, &lpTSCall1Ans26, 5000);
                if(!lpTSCall1Ans26)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.103]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans26->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans26->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans26->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans26->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans26->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans26->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans26->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans26->GetString(LDBIZ_ERROR_INFO_STR));
                v_T0_opor_fee_set_flag = lpTSCall1Ans26->GetInt32(LDBIZ_T0_OPOR_FEE_SET_FLAG_INT);

                //调用过程[事务_交易证券_T0_获取操作员阈值信息]
                //组织事务请求
                if(lpTSCall1Ans27)
                {
                  lpTSCall1Ans27->FreeMsg();
                  lpTSCall1Ans27=NULL;
                }
                lpTSCall1Req27=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.98", 0);
                lpTSCall1Req27->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req27->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req27->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req27->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req27->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req27->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req27->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req27->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req27->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
                glpTSSubcallSerives->SubCall(lpTSCall1Req27, &lpTSCall1Ans27, 5000);
                if(!lpTSCall1Ans27)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.98]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans27->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans27->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans27->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans27->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans27->GetString(LDBIZ_ERROR_INFO_STR));
                v_row_id = lpTSCall1Ans27->GetInt64(LDBIZ_ROW_ID_INT64);
                v_curr_amt = lpTSCall1Ans27->GetDouble(LDBIZ_CURR_AMT_FLOAT);
                v_frozen_amt = lpTSCall1Ans27->GetDouble(LDBIZ_FROZEN_AMT_FLOAT);
                v_opor_warn_tshold = lpTSCall1Ans27->GetDouble(LDBIZ_OPOR_WARN_TSHOLD_FLOAT);
                v_opor_stop_tshold = lpTSCall1Ans27->GetDouble(LDBIZ_OPOR_STOP_TSHOLD_FLOAT);
                v_order_limit_time = lpTSCall1Ans27->GetInt32(LDBIZ_ORDER_LIMIT_TIME_INT);
                v_per_secu_posi_ratio = lpTSCall1Ans27->GetDouble(LDBIZ_PER_SECU_POSI_RATIO_FLOAT);
                v_posi_limit_time = lpTSCall1Ans27->GetInt32(LDBIZ_POSI_LIMIT_TIME_INT);
                v_order_ctrl_qty = lpTSCall1Ans27->GetDouble(LDBIZ_ORDER_CTRL_QTY_FLOAT);
                v_order_ctrl_amt = lpTSCall1Ans27->GetDouble(LDBIZ_ORDER_CTRL_AMT_FLOAT);
                v_stock_warn_ratio = lpTSCall1Ans27->GetDouble(LDBIZ_STOCK_WARN_RATIO_FLOAT);
                v_stock_stop_ratio = lpTSCall1Ans27->GetDouble(LDBIZ_STOCK_STOP_RATIO_FLOAT);
                v_stock_warn_amt = lpTSCall1Ans27->GetDouble(LDBIZ_STOCK_WARN_AMT_FLOAT);
                v_stock_stop_amt = lpTSCall1Ans27->GetDouble(LDBIZ_STOCK_STOP_AMT_FLOAT);
                v_trig_oper_type = lpTSCall1Ans27->GetInt32(LDBIZ_TRIG_OPER_TYPE_INT);
                v_open_close_permission = lpTSCall1Ans27->GetInt32(LDBIZ_OPEN_CLOSE_PERMISSION_INT);
                v_risk_oper = lpTSCall1Ans27->GetInt32(LDBIZ_RISK_OPER_INT);
                v_fee_calc_type = lpTSCall1Ans27->GetInt32(LDBIZ_FEE_CALC_TYPE_INT);
                v_permit_margin_trade = lpTSCall1Ans27->GetInt32(LDBIZ_PERMIT_MARGIN_TRADE_INT);
                v_buy_fee_ratio = lpTSCall1Ans27->GetDouble(LDBIZ_BUY_FEE_RATIO_FLOAT);
                v_sell_fee_ratio = lpTSCall1Ans27->GetDouble(LDBIZ_SELL_FEE_RATIO_FLOAT);
                v_buy_min_fee = lpTSCall1Ans27->GetDouble(LDBIZ_BUY_MIN_FEE_FLOAT);
                v_sell_min_fee = lpTSCall1Ans27->GetDouble(LDBIZ_SELL_MIN_FEE_FLOAT);
                strcpy(v_remark_info, lpTSCall1Ans27->GetString(LDBIZ_REMARK_INFO_STR));
                v_update_times = lpTSCall1Ans27->GetInt32(LDBIZ_UPDATE_TIMES_INT);


                // if @费用计算方式#  = 《费用计算方式-操作员》 then
                if (v_fee_calc_type  == 2)
                {

                       // set @全部费用临时值#=0;
                       v_all_fee_for_tmp=0;
                      //调用过程[事务_交易证券_T0_操作员成交费用计算]
                      //组织事务请求
                      if(lpTSCall1Ans28)
                      {
                        lpTSCall1Ans28->FreeMsg();
                        lpTSCall1Ans28=NULL;
                      }
                      lpTSCall1Req28=glpFastMsgFactory->CreateFastMessage("tdsecuT.6.100", 0);
                      lpTSCall1Req28->SetInt32(LDTAG_PRIORITY, iPriority);
                      lpTSCall1Req28->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                      lpTSCall1Req28->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                      lpTSCall1Req28->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                      lpTSCall1Req28->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                      lpTSCall1Req28->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                      lpTSCall1Req28->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                      lpTSCall1Req28->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                      lpTSCall1Req28->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                      lpTSCall1Req28->SetDouble(LDBIZ_BUY_MIN_FEE_FLOAT,v_buy_min_fee);
                      lpTSCall1Req28->SetDouble(LDBIZ_SELL_MIN_FEE_FLOAT,v_sell_min_fee);
                      lpTSCall1Req28->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                      lpTSCall1Req28->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
                      lpTSCall1Req28->SetDouble(LDBIZ_BUY_FEE_RATIO_FLOAT,v_buy_fee_ratio);
                      lpTSCall1Req28->SetDouble(LDBIZ_SELL_FEE_RATIO_FLOAT,v_sell_fee_ratio);
                      glpTSSubcallSerives->SubCall(lpTSCall1Req28, &lpTSCall1Ans28, 5000);
                      if(!lpTSCall1Ans28)  //  超时错误
                      {
                          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.6.100]subcall timed out!");
                          iRet=-2;
                          goto ENDSYS;
                      }
                      else if(lpTSCall1Ans28->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                      {
                          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans28->GetInt32(LDTAG_ERRORNO));
                          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans28->GetString(LDTAG_ERRORINFO));
                          iRet=-2;
                          goto ENDSYS;
                      }
                      else if(strcmp(lpTSCall1Ans28->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                      {
                          strcpy(v_error_code, lpTSCall1Ans28->GetString(LDBIZ_ERROR_CODE_STR));
                          strcpy(v_error_info, lpTSCall1Ans28->GetString(LDBIZ_ERROR_INFO_STR));
                          iRet=-1;
                          goto END;
                      }
                      //获取输出参数值
                      strcpy(v_error_code, lpTSCall1Ans28->GetString(LDBIZ_ERROR_CODE_STR));
                      strcpy(v_error_info, lpTSCall1Ans28->GetString(LDBIZ_ERROR_INFO_STR));
                      v_all_fee = lpTSCall1Ans28->GetDouble(LDBIZ_ALL_FEE_FLOAT);

            //T0 费用增加。Modify by wjp20181017

                       // set @全部费用临时值#=@全部费用#;
                       v_all_fee_for_tmp=v_all_fee;
                       //调用过程[事务_公共_公共接口_计算证券成交费用]
                       //组织事务请求
                       if(lpTSCall1Ans29)
                       {
                         lpTSCall1Ans29->FreeMsg();
                         lpTSCall1Ans29=NULL;
                       }
                       lpTSCall1Req29=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
                       lpTSCall1Req29->SetInt32(LDTAG_PRIORITY, iPriority);
                       lpTSCall1Req29->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                       lpTSCall1Req29->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                       lpTSCall1Req29->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                       lpTSCall1Req29->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                       lpTSCall1Req29->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                       lpTSCall1Req29->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                       lpTSCall1Req29->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                       lpTSCall1Req29->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                       lpTSCall1Req29->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                       lpTSCall1Req29->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                       lpTSCall1Req29->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                       lpTSCall1Req29->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                       lpTSCall1Req29->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                       lpTSCall1Req29->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                       lpTSCall1Req29->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
                       lpTSCall1Req29->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                       lpTSCall1Req29->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                       lpTSCall1Req29->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                       lpTSCall1Req29->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                       lpTSCall1Req29->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                       glpTSSubcallSerives->SubCall(lpTSCall1Req29, &lpTSCall1Ans29, 5000);
                       if(!lpTSCall1Ans29)  //  超时错误
                       {
                           lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                           lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
                           iRet=-2;
                           goto ENDSYS;
                       }
                       else if(lpTSCall1Ans29->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                       {
                           lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans29->GetInt32(LDTAG_ERRORNO));
                           lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans29->GetString(LDTAG_ERRORINFO));
                           iRet=-2;
                           goto ENDSYS;
                       }
                       else if(strcmp(lpTSCall1Ans29->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                       {
                           strcpy(v_error_code, lpTSCall1Ans29->GetString(LDBIZ_ERROR_CODE_STR));
                           strcpy(v_error_info, lpTSCall1Ans29->GetString(LDBIZ_ERROR_INFO_STR));
                           iRet=-1;
                           goto END;
                       }
                       //获取输出参数值
                       strcpy(v_error_code, lpTSCall1Ans29->GetString(LDBIZ_ERROR_CODE_STR));
                       strcpy(v_error_info, lpTSCall1Ans29->GetString(LDBIZ_ERROR_INFO_STR));
                       v_trade_commis = lpTSCall1Ans29->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
                       v_all_fee = lpTSCall1Ans29->GetDouble(LDBIZ_ALL_FEE_FLOAT);
                       v_stamp_tax = lpTSCall1Ans29->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
                       v_trans_fee = lpTSCall1Ans29->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
                       v_brkage_fee = lpTSCall1Ans29->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
                       v_SEC_charges = lpTSCall1Ans29->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
                       v_other_fee = lpTSCall1Ans29->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
                       v_other_commis = lpTSCall1Ans29->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
                       v_trade_tax = lpTSCall1Ans29->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
                       v_trade_cost_fee = lpTSCall1Ans29->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
                       v_trade_system_use_fee = lpTSCall1Ans29->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
                       v_stock_settle_fee = lpTSCall1Ans29->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);


                       // set @全部费用#=@全部费用#+@全部费用临时值#-@交易佣金#;
                       v_all_fee=v_all_fee+v_all_fee_for_tmp-v_trade_commis;

                       // set @交易佣金#=@全部费用临时值#;
                       v_trade_commis=v_all_fee_for_tmp;
                }
                // else
                else
                {

                      //调用过程[事务_公共_公共接口_计算证券成交费用]
                      //组织事务请求
                      if(lpTSCall1Ans30)
                      {
                        lpTSCall1Ans30->FreeMsg();
                        lpTSCall1Ans30=NULL;
                      }
                      lpTSCall1Req30=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
                      lpTSCall1Req30->SetInt32(LDTAG_PRIORITY, iPriority);
                      lpTSCall1Req30->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                      lpTSCall1Req30->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                      lpTSCall1Req30->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                      lpTSCall1Req30->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                      lpTSCall1Req30->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                      lpTSCall1Req30->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                      lpTSCall1Req30->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                      lpTSCall1Req30->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                      lpTSCall1Req30->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                      lpTSCall1Req30->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                      lpTSCall1Req30->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                      lpTSCall1Req30->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                      lpTSCall1Req30->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                      lpTSCall1Req30->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                      lpTSCall1Req30->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
                      lpTSCall1Req30->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                      lpTSCall1Req30->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                      lpTSCall1Req30->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                      lpTSCall1Req30->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                      lpTSCall1Req30->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                      glpTSSubcallSerives->SubCall(lpTSCall1Req30, &lpTSCall1Ans30, 5000);
                      if(!lpTSCall1Ans30)  //  超时错误
                      {
                          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
                          iRet=-2;
                          goto ENDSYS;
                      }
                      else if(lpTSCall1Ans30->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                      {
                          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans30->GetInt32(LDTAG_ERRORNO));
                          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans30->GetString(LDTAG_ERRORINFO));
                          iRet=-2;
                          goto ENDSYS;
                      }
                      else if(strcmp(lpTSCall1Ans30->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                      {
                          strcpy(v_error_code, lpTSCall1Ans30->GetString(LDBIZ_ERROR_CODE_STR));
                          strcpy(v_error_info, lpTSCall1Ans30->GetString(LDBIZ_ERROR_INFO_STR));
                          iRet=-1;
                          goto END;
                      }
                      //获取输出参数值
                      strcpy(v_error_code, lpTSCall1Ans30->GetString(LDBIZ_ERROR_CODE_STR));
                      strcpy(v_error_info, lpTSCall1Ans30->GetString(LDBIZ_ERROR_INFO_STR));
                      v_trade_commis = lpTSCall1Ans30->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
                      v_all_fee = lpTSCall1Ans30->GetDouble(LDBIZ_ALL_FEE_FLOAT);
                      v_stamp_tax = lpTSCall1Ans30->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
                      v_trans_fee = lpTSCall1Ans30->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
                      v_brkage_fee = lpTSCall1Ans30->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
                      v_SEC_charges = lpTSCall1Ans30->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
                      v_other_fee = lpTSCall1Ans30->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
                      v_other_commis = lpTSCall1Ans30->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
                      v_trade_tax = lpTSCall1Ans30->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
                      v_trade_cost_fee = lpTSCall1Ans30->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
                      v_trade_system_use_fee = lpTSCall1Ans30->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
                      v_stock_settle_fee = lpTSCall1Ans30->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);

                // end if;
                }

            }
            // else
            else
            {

                 //调用过程[事务_公共_公共接口_计算证券成交费用]
                 //组织事务请求
                 if(lpTSCall1Ans31)
                 {
                   lpTSCall1Ans31->FreeMsg();
                   lpTSCall1Ans31=NULL;
                 }
                 lpTSCall1Req31=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
                 lpTSCall1Req31->SetInt32(LDTAG_PRIORITY, iPriority);
                 lpTSCall1Req31->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                 lpTSCall1Req31->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                 lpTSCall1Req31->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                 lpTSCall1Req31->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                 lpTSCall1Req31->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                 lpTSCall1Req31->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                 lpTSCall1Req31->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                 lpTSCall1Req31->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                 lpTSCall1Req31->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                 lpTSCall1Req31->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
                 lpTSCall1Req31->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                 lpTSCall1Req31->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                 lpTSCall1Req31->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
                 lpTSCall1Req31->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                 lpTSCall1Req31->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
                 lpTSCall1Req31->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                 lpTSCall1Req31->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
                 lpTSCall1Req31->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                 lpTSCall1Req31->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                 lpTSCall1Req31->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                 glpTSSubcallSerives->SubCall(lpTSCall1Req31, &lpTSCall1Ans31, 5000);
                 if(!lpTSCall1Ans31)  //  超时错误
                 {
                     lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                     lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
                     iRet=-2;
                     goto ENDSYS;
                 }
                 else if(lpTSCall1Ans31->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                 {
                     lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans31->GetInt32(LDTAG_ERRORNO));
                     lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans31->GetString(LDTAG_ERRORINFO));
                     iRet=-2;
                     goto ENDSYS;
                 }
                 else if(strcmp(lpTSCall1Ans31->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                 {
                     strcpy(v_error_code, lpTSCall1Ans31->GetString(LDBIZ_ERROR_CODE_STR));
                     strcpy(v_error_info, lpTSCall1Ans31->GetString(LDBIZ_ERROR_INFO_STR));
                     iRet=-1;
                     goto END;
                 }
                 //获取输出参数值
                 strcpy(v_error_code, lpTSCall1Ans31->GetString(LDBIZ_ERROR_CODE_STR));
                 strcpy(v_error_info, lpTSCall1Ans31->GetString(LDBIZ_ERROR_INFO_STR));
                 v_trade_commis = lpTSCall1Ans31->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
                 v_all_fee = lpTSCall1Ans31->GetDouble(LDBIZ_ALL_FEE_FLOAT);
                 v_stamp_tax = lpTSCall1Ans31->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
                 v_trans_fee = lpTSCall1Ans31->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
                 v_brkage_fee = lpTSCall1Ans31->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
                 v_SEC_charges = lpTSCall1Ans31->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
                 v_other_fee = lpTSCall1Ans31->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
                 v_other_commis = lpTSCall1Ans31->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
                 v_trade_tax = lpTSCall1Ans31->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
                 v_trade_cost_fee = lpTSCall1Ans31->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
                 v_trade_system_use_fee = lpTSCall1Ans31->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
                 v_stock_settle_fee = lpTSCall1Ans31->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);

            // end if;
            }

            //计算费用差
            //第一笔或者非港股通业务，【临时_交易系统使用费】会为0，第一笔之后的港股通业务，【临时_交易系统使用费】会大于0

            // if @临时_交易系统使用费# > 0 then
            if (v_tmp_trade_system_use_fee > 0)
            {

                // set @全部费用# = @全部费用# - @临时_全部费用# + @临时_交易系统使用费#;
                v_all_fee = v_all_fee - v_tmp_all_fee + v_tmp_trade_system_use_fee;
                //第一笔取自【交易系统使用费】，其余取自【临时_交易系统使用费】

                // set @交易系统使用费# = @临时_交易系统使用费#;
                v_trade_system_use_fee = v_tmp_trade_system_use_fee;
            }
            // else
            else
            {


                // set @全部费用# = @全部费用# - @临时_全部费用#;
                v_all_fee = v_all_fee - v_tmp_all_fee;
            // end if;
            }

          //  set @全部费用// = @全部费用// - @临时_全部费用//;

            // set @交易佣金# = @交易佣金# - @临时_交易佣金#;
            v_trade_commis = v_trade_commis - v_tmp_trade_commis;

            // set @印花税# = @印花税# - @临时_印花税#;
            v_stamp_tax = v_stamp_tax - v_tmp_stamp_tax;

            // set @过户费# = @过户费# - @临时_过户费#;
            v_trans_fee = v_trans_fee - v_tmp_trans_fee;

            // set @经手费# = @经手费# - @临时_经手费#;
            v_brkage_fee = v_brkage_fee - v_tmp_brkage_fee;

            // set @证管费# = @证管费# - @临时_证管费#;
            v_SEC_charges = v_SEC_charges - v_tmp_SEC_charges;

            // set @其他费用# = @其他费用# - @临时_其他费用#;
            v_other_fee = v_other_fee - v_tmp_other_fee;

            // set @其他佣金# = @其他佣金# - @临时_其他佣金#;
            v_other_commis = v_other_commis - v_tmp_other_commis;

            // set @交易费# = @交易费# - @临时_交易费#;
            v_trade_cost_fee = v_trade_cost_fee - v_tmp_trade_cost_fee;

            // set @交易征费# = @交易征费# - @临时_交易征费#;
            v_trade_tax = v_trade_tax - v_tmp_trade_tax;

            // set @股份交收费# = @股份交收费# - @临时_股份交收费#;
            v_stock_settle_fee = v_stock_settle_fee - v_tmp_stock_settle_fee;
            //费用处理

            // set @成交价格# = @临时_成交价格#;
            v_strike_price = v_tmp_strike_price;

            // set @成交金额# = @临时_成交金额#;
            v_strike_amt = v_tmp_strike_amt;

            // set @成交数量# = @临时_成交数量#;
            v_strike_qty = v_tmp_strike_qty;
            //调用过程[事务_交易证券_报盘_处理成交回报费用]
            //组织事务请求
            if(lpTSCall1Ans32)
            {
              lpTSCall1Ans32->FreeMsg();
              lpTSCall1Ans32=NULL;
            }
            lpTSCall1Req32=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.23", 0);
            lpTSCall1Req32->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req32->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req32->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req32->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req32->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req32->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req32->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req32->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req32->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpTSCall1Req32->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req32->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpTSCall1Req32->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpTSCall1Req32->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpTSCall1Req32->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
            lpTSCall1Req32->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpTSCall1Req32->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpTSCall1Req32->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpTSCall1Req32->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
            lpTSCall1Req32->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpTSCall1Req32->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
            lpTSCall1Req32->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpTSCall1Req32->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
            lpTSCall1Req32->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
            lpTSCall1Req32->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req32->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpTSCall1Req32->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
            lpTSCall1Req32->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpTSCall1Req32->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            lpTSCall1Req32->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpTSCall1Req32->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
            lpTSCall1Req32->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpTSCall1Req32->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
            lpTSCall1Req32->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
            lpTSCall1Req32->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
            lpTSCall1Req32->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
            lpTSCall1Req32->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
            lpTSCall1Req32->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
            lpTSCall1Req32->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
            lpTSCall1Req32->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
            lpTSCall1Req32->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
            lpTSCall1Req32->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
            lpTSCall1Req32->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
            lpTSCall1Req32->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
            lpTSCall1Req32->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
            lpTSCall1Req32->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
            lpTSCall1Req32->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
            lpTSCall1Req32->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
            lpTSCall1Req32->SetString(LDBIZ_TARGET_CODE_STR,v_target_code);
            lpTSCall1Req32->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
            lpTSCall1Req32->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
            lpTSCall1Req32->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
            lpTSCall1Req32->SetInt32(LDBIZ_INTRST_DAYS_INT,v_intrst_days);
            lpTSCall1Req32->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
            lpTSCall1Req32->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
            lpTSCall1Req32->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
            lpTSCall1Req32->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
            lpTSCall1Req32->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
            lpTSCall1Req32->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
            lpTSCall1Req32->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
            lpTSCall1Req32->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
            lpTSCall1Req32->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
            lpTSCall1Req32->SetInt32(LDBIZ_COST_CALC_TYPE_INT,v_cost_calc_type);
            lpTSCall1Req32->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
            lpTSCall1Req32->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
            lpTSCall1Req32->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
            lpTSCall1Req32->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
            lpTSCall1Req32->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
            lpTSCall1Req32->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
            lpTSCall1Req32->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
            lpTSCall1Req32->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
            lpTSCall1Req32->SetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT,v_trade_occur_amt);
            lpTSCall1Req32->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpTSCall1Req32->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req32, &lpTSCall1Ans32, 5000);
            if(!lpTSCall1Ans32)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.23]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans32->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans32->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans32->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans32->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans32->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans32->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans32->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans32->GetString(LDBIZ_ERROR_INFO_STR));


            // set @操作员编号# =@业务操作员编号#;
            v_opor_no =v_busi_opor_no;

            // set @临时_更新次数# = @更新次数#;
            v_tmp_update_times = v_update_times;

            // set @更新次数# = 1;
            v_update_times = 1;

            // set @记录有效标志# =《记录有效标志-有效》;
            v_record_valid_flag =1;

            // [主动推送][secu.rptstrike][证券主推_报盘_成交主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.33", 0);
            lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
            lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
            lpPubMsg->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
            lpPubMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
            lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
            lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
            lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
            lpPubMsg->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
            lpPubMsg->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
            lpPubMsg->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
            lpPubMsg->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
            lpPubMsg->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
            lpPubMsg->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
            lpPubMsg->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
            lpPubMsg->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
            lpPubMsg->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
            lpPubMsg->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
            lpPubMsg->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
            lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
            lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
            lpPubMsg->SetInt32(LDBIZ_RECORD_VALID_FLAG_INT,v_record_valid_flag);
            lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
            lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.rptstrike", lpPubMsg);


            // set @成交金额# = @总成交金额#;
            v_strike_amt = v_total_strike_amt;

            // set @成交数量# = @总成交数量#;
            v_strike_qty = v_total_strike_qty;

            // set @更新次数# = @临时_更新次数#;
            v_update_times = v_tmp_update_times;

           // set @当笔成交价格# = @临时_成交价格#;
           v_curr_strike_price = v_tmp_strike_price;

           // set @当笔成交金额# = @临时_成交金额#;
           v_curr_strike_amt = v_tmp_strike_amt;

           // set @当笔成交数量# = @临时_成交数量#;
           v_curr_strike_qty = v_tmp_strike_qty;

           // set @撤单状态# = "0";
           strcpy(v_wtdraw_status,"0");

            // [主动推送][secu.order][证券主推_订单_订单主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
            lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
            lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
            lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
            lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
            lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
            lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
            lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
            lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
            lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
            lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
            lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
            lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
            lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
            lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
            lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
            lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
            lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
            lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
            lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
            lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
            lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
            lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
            lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
            lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


            // set @临时_订单批号# = @订单批号#;
            v_tmp_order_batch_no = v_order_batch_no;

            // if @订单操作方式# <> 《订单操作方式-多账户自由交易》 and @订单操作方式# <> 《订单操作方式-港股通多账户自由交易》   and  @订单操作方式# <> 《订单操作方式-分价单交易》 and  @订单操作方式# <> 《订单操作方式-期现对冲交易》 then
            if (strcmp(v_order_oper_way , "13")!=0 && strcmp(v_order_oper_way , "71")!=0   &&  strcmp(v_order_oper_way , "74")!=0 &&  strcmp(v_order_oper_way , "36")!=0)
            {

                // set @订单批号# = 0;
                v_order_batch_no = 0;
            // end if;
            }

            //调用过程[事务_交易证券_主推接口_获取汇总订单成交信息]
            //组织事务请求
            if(lpTSCall1Ans33)
            {
              lpTSCall1Ans33->FreeMsg();
              lpTSCall1Ans33=NULL;
            }
            lpTSCall1Req33=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.21", 0);
            lpTSCall1Req33->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req33->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req33->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req33->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req33->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req33->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req33->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req33->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req33->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req33->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpTSCall1Req33->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req33->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
            lpTSCall1Req33->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req33, &lpTSCall1Ans33, 5000);
            if(!lpTSCall1Ans33)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.21]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans33->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans33->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans33->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans33->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans33->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans33->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans33->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans33->GetString(LDBIZ_ERROR_INFO_STR));
            v_sum_order_row_id = lpTSCall1Ans33->GetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64);
            v_sum_order_opor_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT);
            v_sum_order_co_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_CO_NO_INT);
            v_sum_order_pd_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_PD_NO_INT);
            v_sum_order_exch_group_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT);
            v_sum_order_asset_acco_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT);
            v_sum_order_pass_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT);
            strcpy(v_sum_order_exch_crncy_type, lpTSCall1Ans33->GetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR));
            v_sum_order_stock_code_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT);
            v_sum_order_trade_code_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT);
            v_sum_order_target_code_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT);
            v_sum_order_external_no = lpTSCall1Ans33->GetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64);
            v_sum_order_date = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_DATE_INT);
            v_sum_order_batch_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT);
            v_sum_order_dir = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_DIR_INT);
            v_sum_order_price_type = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT);
            v_sum_order_price = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT);
            v_sum_order_qty = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT);
            strcpy(v_order_sum_status, lpTSCall1Ans33->GetString(LDBIZ_ORDER_SUM_STATUS_STR));
            v_sum_order_wtdraw_qty = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT);
            v_sum_order_waste_qty = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT);
            v_sum_order_strike_amt = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT);
            v_sum_order_strike_qty = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT);
            v_sum_order_strike_aver_price = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT);
            v_sum_order_net_price_flag = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT);
            v_sum_order_bond_accr_intrst = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT);
            v_sum_order_bond_rate_type = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT);
            v_sum_order_par_value = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT);
            v_sum_order_impawn_ratio = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT);
            strcpy(v_sum_order_oper_way, lpTSCall1Ans33->GetString(LDBIZ_SUM_ORDER_OPER_WAY_STR));
            v_sum_order_update_times = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT);
            v_sum_strike_row_id = lpTSCall1Ans33->GetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64);
            v_sum_strike_opor_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT);
            v_sum_strike_co_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT);
            v_sum_strike_pd_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT);
            v_sum_strike_exch_group_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT);
            v_sum_strike_asset_acco_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT);
            v_sum_strike_pass_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT);
            strcpy(v_sum_strike_out_acco, lpTSCall1Ans33->GetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR));
            v_sum_strike_stock_acco_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT);
            v_sum_strike_stock_code_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT);
            v_sum_strike_comm_id = lpTSCall1Ans33->GetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64);
            v_sum_strike_report_date = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT);
            strcpy(v_sum_strike_report_no, lpTSCall1Ans33->GetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR));
            v_sum_strike_order_date = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT);
            v_sum_strike_order_id = lpTSCall1Ans33->GetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64);
            v_sum_strike_order_dir = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT);
            v_sum_strike_order_price = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT);
            v_sum_strike_order_qty = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT);
            v_sum_strike_strike_qty = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT);
            v_sum_strike_strike_amt = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT);
            v_sum_strike_all_fee = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT);
            v_sum_strike_stamp_tax = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT);
            v_sum_strike_trans_fee = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT);
            v_sum_strike_brkage_fee = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT);
            v_sum_strike_SEC_charges = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT);
            v_sum_strike_other_fee = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT);
            v_sum_strike_trade_commis = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT);
            v_sum_strike_other_commis = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT);
            v_sum_trade_tax = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT);
            v_sum_trade_cost_fee = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT);
            v_sum_trade_system_use_fee = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT);
            v_sum_stock_settle_fee = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT);
            v_sum_strike_net_price_flag = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT);
            v_sum_strike_bond_accr_intrst = lpTSCall1Ans33->GetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT);
            v_sum_strike_bond_rate_type = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT);
            strcpy(v_sum_strike_order_oper_way, lpTSCall1Ans33->GetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR));
            v_sum_strike_exter_comm_flag = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT);
            v_sum_strike_update_times = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT);
            v_sum_strike_order_batch_no = lpTSCall1Ans33->GetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT);
            v_sum_external_no = lpTSCall1Ans33->GetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64);


            // if @订单批号# <> 0 then
            if (v_order_batch_no != 0)
            {

                // [主动推送][secu.ordertotal][证券主推_订单_订单汇总主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.21", 0);
                lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64,v_sum_order_row_id);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT,v_sum_order_opor_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_CO_NO_INT,v_sum_order_co_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PD_NO_INT,v_sum_order_pd_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT,v_sum_order_exch_group_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT,v_sum_order_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT,v_sum_order_pass_no);
                lpPubMsg->SetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR,v_sum_order_exch_crncy_type);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT,v_sum_order_stock_code_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT,v_sum_order_trade_code_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT,v_sum_order_target_code_no);
                lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64,v_sum_order_external_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DATE_INT,v_sum_order_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT,v_sum_order_batch_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DIR_INT,v_sum_order_dir);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT,v_sum_order_price_type);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT,v_sum_order_price);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT,v_sum_order_qty);
                lpPubMsg->SetString(LDBIZ_ORDER_SUM_STATUS_STR,v_order_sum_status);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT,v_sum_order_wtdraw_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT,v_sum_order_waste_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT,v_sum_order_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT,v_sum_order_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT,v_sum_order_strike_aver_price);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT,v_sum_order_net_price_flag);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT,v_sum_order_bond_accr_intrst);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT,v_sum_order_bond_rate_type);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT,v_sum_order_par_value);
                lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT,v_sum_order_impawn_ratio);
                lpPubMsg->SetString(LDBIZ_SUM_ORDER_OPER_WAY_STR,v_sum_order_oper_way);
                lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT,v_sum_order_update_times);
                glpPubSub_Interface->PubTopics("secu.ordertotal", lpPubMsg);

            // end if;
            }


            // set @订单批号# = @临时_订单批号#;
            v_order_batch_no = v_tmp_order_batch_no;

            // [主动推送][secu.rptstriketotal][证券主推_报盘_成交汇总主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.34", 0);
            lpPubMsg->SetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64,v_sum_strike_row_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT,v_sum_strike_opor_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT,v_sum_strike_co_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT,v_sum_strike_pd_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT,v_sum_strike_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT,v_sum_strike_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT,v_sum_strike_pass_no);
            lpPubMsg->SetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR,v_sum_strike_out_acco);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT,v_sum_strike_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT,v_sum_strike_stock_code_no);
            lpPubMsg->SetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64,v_sum_strike_comm_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT,v_sum_strike_report_date);
            lpPubMsg->SetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR,v_sum_strike_report_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT,v_sum_strike_order_date);
            lpPubMsg->SetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64,v_sum_strike_order_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT,v_sum_strike_order_batch_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT,v_sum_strike_order_dir);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT,v_sum_strike_order_price);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT,v_sum_strike_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT,v_sum_strike_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT,v_sum_strike_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT,v_sum_strike_all_fee);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT,v_sum_strike_stamp_tax);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT,v_sum_strike_trans_fee);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT,v_sum_strike_brkage_fee);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT,v_sum_strike_SEC_charges);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT,v_sum_strike_other_fee);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT,v_sum_strike_trade_commis);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT,v_sum_strike_other_commis);
            lpPubMsg->SetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT,v_sum_trade_tax);
            lpPubMsg->SetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT,v_sum_trade_cost_fee);
            lpPubMsg->SetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT,v_sum_trade_system_use_fee);
            lpPubMsg->SetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT,v_sum_stock_settle_fee);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT,v_sum_strike_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT,v_sum_strike_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT,v_sum_strike_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR,v_sum_strike_order_oper_way);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT,v_sum_strike_exter_comm_flag);
            lpPubMsg->SetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64,v_sum_external_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT,v_sum_strike_update_times);
            glpPubSub_Interface->PubTopics("secu.rptstriketotal", lpPubMsg);


            // if @指令序号# > 0 then
            if (v_comm_id > 0)
            {
                //调用过程[事务_交易证券_主推接口_获取指令混合信息]
                //组织事务请求
                if(lpTSCall1Ans34)
                {
                  lpTSCall1Ans34->FreeMsg();
                  lpTSCall1Ans34=NULL;
                }
                lpTSCall1Req34=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
                lpTSCall1Req34->SetInt32(LDTAG_PRIORITY, iPriority);
                lpTSCall1Req34->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
                lpTSCall1Req34->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
                lpTSCall1Req34->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
                lpTSCall1Req34->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
                lpTSCall1Req34->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
                lpTSCall1Req34->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
                lpTSCall1Req34->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
                lpTSCall1Req34->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
                glpTSSubcallSerives->SubCall(lpTSCall1Req34, &lpTSCall1Ans34, 5000);
                if(!lpTSCall1Ans34)  //  超时错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(lpTSCall1Ans34->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
                {
                    lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans34->GetInt32(LDTAG_ERRORNO));
                    lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans34->GetString(LDTAG_ERRORINFO));
                    iRet=-2;
                    goto ENDSYS;
                }
                else if(strcmp(lpTSCall1Ans34->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
                {
                    strcpy(v_error_code, lpTSCall1Ans34->GetString(LDBIZ_ERROR_CODE_STR));
                    strcpy(v_error_info, lpTSCall1Ans34->GetString(LDBIZ_ERROR_INFO_STR));
                    iRet=-1;
                    goto END;
                }
                //获取输出参数值
                strcpy(v_error_code, lpTSCall1Ans34->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans34->GetString(LDBIZ_ERROR_INFO_STR));
                v_init_date = lpTSCall1Ans34->GetInt32(LDBIZ_INIT_DATE_INT);
                v_co_no = lpTSCall1Ans34->GetInt32(LDBIZ_CO_NO_INT);
                v_pd_no = lpTSCall1Ans34->GetInt32(LDBIZ_PD_NO_INT);
                v_exch_group_no = lpTSCall1Ans34->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
                v_asset_acco_no = lpTSCall1Ans34->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
                v_pass_no = lpTSCall1Ans34->GetInt32(LDBIZ_PASS_NO_INT);
                strcpy(v_out_acco, lpTSCall1Ans34->GetString(LDBIZ_OUT_ACCO_STR));
                strcpy(v_exch_crncy_type, lpTSCall1Ans34->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
                v_stock_acco_no = lpTSCall1Ans34->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
                v_stock_code_no = lpTSCall1Ans34->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
                v_stock_type = lpTSCall1Ans34->GetInt32(LDBIZ_STOCK_TYPE_INT);
                v_comm_date = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_DATE_INT);
                v_comm_time = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_TIME_INT);
                v_comm_batch_no = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
                v_comm_opor = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_OPOR_INT);
                v_comm_executor = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
                v_comm_dir = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_DIR_INT);
                v_comm_limit_price = lpTSCall1Ans34->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
                v_limit_actual_price = lpTSCall1Ans34->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
                v_comm_qty = lpTSCall1Ans34->GetDouble(LDBIZ_COMM_QTY_FLOAT);
                v_comm_amt = lpTSCall1Ans34->GetDouble(LDBIZ_COMM_AMT_FLOAT);
                v_order_qty = lpTSCall1Ans34->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
                v_comm_cancel_qty = lpTSCall1Ans34->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
                v_strike_amt = lpTSCall1Ans34->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
                v_strike_qty = lpTSCall1Ans34->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
                v_comm_frozen_amt = lpTSCall1Ans34->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
                v_comm_frozen_qty = lpTSCall1Ans34->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
                strcpy(v_strike_status, lpTSCall1Ans34->GetString(LDBIZ_STRIKE_STATUS_STR));
                strcpy(v_comm_status, lpTSCall1Ans34->GetString(LDBIZ_COMM_STATUS_STR));
                v_comm_begin_date = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
                v_comm_end_date = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_END_DATE_INT);
                v_comm_begin_time = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
                v_comm_end_time = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_END_TIME_INT);
                v_comm_comple_date = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
                v_comm_comple_time = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
                v_comm_appr_date = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
                v_comm_appr_time = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
                strcpy(v_comm_appr_status, lpTSCall1Ans34->GetString(LDBIZ_COMM_APPR_STATUS_STR));
                v_comm_appr_oper = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
                strcpy(v_comm_appr_remark, lpTSCall1Ans34->GetString(LDBIZ_COMM_APPR_REMARK_STR));
                v_basket_id = lpTSCall1Ans34->GetInt64(LDBIZ_BASKET_ID_INT64);
                v_net_price_flag = lpTSCall1Ans34->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
                v_bond_accr_intrst = lpTSCall1Ans34->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
                v_bond_rate_type = lpTSCall1Ans34->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
                strcpy(v_comm_oper_way, lpTSCall1Ans34->GetString(LDBIZ_COMM_OPER_WAY_STR));
                v_exter_comm_flag = lpTSCall1Ans34->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
                v_comm_comple_flag = lpTSCall1Ans34->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
                v_strategy_capt_qty = lpTSCall1Ans34->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
                v_strategy_order_qty = lpTSCall1Ans34->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
                strcpy(v_contra_no, lpTSCall1Ans34->GetString(LDBIZ_CONTRA_NO_STR));
                strcpy(v_comm_remark_info, lpTSCall1Ans34->GetString(LDBIZ_COMM_REMARK_INFO_STR));
                v_disp_opor = lpTSCall1Ans34->GetInt32(LDBIZ_DISP_OPOR_INT);
                v_disp_status = lpTSCall1Ans34->GetInt32(LDBIZ_DISP_STATUS_INT);
                v_read_flag = lpTSCall1Ans34->GetInt32(LDBIZ_READ_FLAG_INT);
                v_update_times = lpTSCall1Ans34->GetInt32(LDBIZ_UPDATE_TIMES_INT);
                v_sum_comm_row_id = lpTSCall1Ans34->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
                v_sum_comm_co_no = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
                v_sum_comm_pd_no = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
                v_sum_comm_exch_group_no = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
                v_sum_comm_asset_acco_no = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
                v_sum_comm_pass_no = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
                strcpy(v_sum_comm_out_acco, lpTSCall1Ans34->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
                strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans34->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
                v_sum_comm_stock_code_no = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
                v_sum_comm_date = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
                v_sum_comm_time = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
                v_sum_comm_batch_no = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
                v_sum_comm_opor = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
                v_sum_comm_executor = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
                v_sum_comm_dir = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
                v_sum_comm_limit_price = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
                v_sum_comm_qty = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
                v_sum_comm_amt = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
                v_sum_comm_order_qty = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
                v_sum_comm_cancel_qty = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
                v_sum_comm_await_cancel_qty = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
                v_sum_comm_strike_amt = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
                v_sum_comm_strike_qty = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
                strcpy(v_sum_comm_strike_status, lpTSCall1Ans34->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
                strcpy(v_comm_sum_status, lpTSCall1Ans34->GetString(LDBIZ_COMM_SUM_STATUS_STR));
                v_sum_comm_begin_date = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
                v_sum_comm_end_date = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
                v_sum_comm_begin_time = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
                v_sum_comm_end_time = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
                v_sum_comm_comple_date = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
                v_sum_comm_comple_time = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
                v_sum_comm_max_comm_comple_date = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
                v_sum_comm_max_comm_comple_time = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
                v_sum_comm_appr_date = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
                v_sum_comm_appr_time = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
                v_sum_comm_appr_qty = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
                strcpy(v_comm_sum_approve_status, lpTSCall1Ans34->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
                v_sum_comm_basket_id = lpTSCall1Ans34->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
                v_sum_comm_net_price_flag = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
                v_sum_comm_bond_accr_intrst = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
                v_sum_comm_bond_rate_type = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
                strcpy(v_sum_comm_oper_way, lpTSCall1Ans34->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
                v_sum_comm_exter_comm_flag = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
                v_sum_buy_order_qty = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
                v_sum_sell_order_qty = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
                v_sum_buy_comm_qty = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
                v_sum_sell_comm_qty = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
                v_sum_buy_strike_qty = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
                v_sum_sell_strike_qty = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
                v_sum_buy_strike_amt = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
                v_sum_sell_strike_amt = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
                v_sum_buy_comm_amt = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
                v_sum_sell_comm_amt = lpTSCall1Ans34->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
                strcpy(v_sum_comm_remark_info, lpTSCall1Ans34->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
                v_sum_comm_update_times = lpTSCall1Ans34->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
                strcpy(v_acco_concat_info, lpTSCall1Ans34->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


                // [主动推送][secu.comm][证券主推_指令_指令主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
                lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
                lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
                lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
                lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
                lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
                lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
                lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
                lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
                lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
                lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
                lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
                lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
                lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
                lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
                lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
                lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
                lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
                lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
                lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
                lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
                lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
                lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
                lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
                lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
                lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
                lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
                lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
                lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
                lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
                lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
                lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
                lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
                lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
                lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
                lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
                lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
                lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
                lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
                lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
                lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
                lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
                lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
                lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
                lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
                lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
                lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
                lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
                lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
                glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


                // if @指令批号# > 0 then
                if (v_comm_batch_no > 0)
                {

                    // set @指令备注信息#= @汇总指令备注信息#;
                    strcpy(v_comm_remark_info,v_sum_comm_remark_info);

                    // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
                    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
                    lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
                    lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
                    lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
                    lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
                    lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
                    lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
                    lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
                    lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
                    lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
                    lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
                    lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
                    lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
                    lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
                    lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                    lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                    lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
                    lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
                    glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

                // end if;
                }

            // end if;
            }

            //质押提交和质押转回，要推交易代码和标准券代码

            // if @订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》 then
            if (v_order_dir == 21 || v_order_dir == 22)
            {
              //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
              //组织事务请求
              if(lpTSCall1Ans35)
              {
                lpTSCall1Ans35->FreeMsg();
                lpTSCall1Ans35=NULL;
              }
              lpTSCall1Req35=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
              lpTSCall1Req35->SetInt32(LDTAG_PRIORITY, iPriority);
              lpTSCall1Req35->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
              lpTSCall1Req35->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
              lpTSCall1Req35->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
              lpTSCall1Req35->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
              lpTSCall1Req35->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
              lpTSCall1Req35->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
              lpTSCall1Req35->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
              lpTSCall1Req35->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpTSCall1Req35->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpTSCall1Req35->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpTSCall1Req35->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpTSCall1Req35->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpTSCall1Req35->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
              lpTSCall1Req35->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpTSCall1Req35->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
              glpTSSubcallSerives->SubCall(lpTSCall1Req35, &lpTSCall1Ans35, 5000);
              if(!lpTSCall1Ans35)  //  超时错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(lpTSCall1Ans35->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans35->GetInt32(LDTAG_ERRORNO));
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans35->GetString(LDTAG_ERRORINFO));
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(strcmp(lpTSCall1Ans35->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
              {
                  strcpy(v_error_code, lpTSCall1Ans35->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans35->GetString(LDBIZ_ERROR_INFO_STR));
                  iRet=-1;
                  goto END;
              }
              //获取输出参数值
              strcpy(v_error_code, lpTSCall1Ans35->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans35->GetString(LDBIZ_ERROR_INFO_STR));
              v_exgp_cash_id = lpTSCall1Ans35->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
              v_exgp_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
              v_exgp_unfroz_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
              v_exgp_comm_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
              v_exgp_comm_unfroz_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
              v_exgp_comm_capt_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
              v_exgp_comm_releas_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
              v_exgp_trade_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
              v_exgp_trade_unfroz_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
              v_exgp_trade_capt_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
              v_exgp_trade_releas_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
              v_exgp_strike_capt_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
              v_exgp_strike_releas_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
              v_exgp_cash_update_times = lpTSCall1Ans35->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
              v_exgp_posi_id = lpTSCall1Ans35->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
              v_exgp_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
              v_exgp_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
              v_exgp_comm_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
              v_exgp_comm_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
              v_exgp_comm_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
              v_exgp_comm_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
              v_exgp_trade_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
              v_exgp_trade_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
              v_exgp_trade_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
              v_exgp_trade_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
              v_exgp_strike_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
              v_exgp_strike_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
              v_exgp_strike_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
              v_exgp_strike_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
              v_exgp_realize_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
              v_exgp_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
              v_exgp_intrst_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
              v_exgp_intrst_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
              v_exgp_posi_update_times = lpTSCall1Ans35->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
              v_asac_cash_id = lpTSCall1Ans35->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
              v_asac_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
              v_asac_unfroz_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
              v_asac_comm_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
              v_asac_comm_unfroz_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
              v_asac_comm_capt_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
              v_asac_comm_releas_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
              v_asac_trade_frozen_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
              v_asac_trade_unfroz_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
              v_asac_trade_capt_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
              v_asac_trade_releas_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
              v_asac_strike_capt_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
              v_asac_strike_releas_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
              v_asac_cash_update_times = lpTSCall1Ans35->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
              v_asac_posi_id = lpTSCall1Ans35->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
              v_asac_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
              v_asac_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
              v_asac_comm_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
              v_asac_comm_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
              v_asac_comm_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
              v_asac_comm_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
              v_asac_trade_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
              v_asac_trade_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
              v_asac_trade_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
              v_asac_trade_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
              v_asac_strike_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
              v_asac_strike_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
              v_asac_strike_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
              v_asac_strike_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
              v_asac_realize_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
              v_asac_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
              v_asac_intrst_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
              v_asac_intrst_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
              v_asac_posi_update_times = lpTSCall1Ans35->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
              v_exgp_target_posi_id = lpTSCall1Ans35->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
              v_exgp_target_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
              v_exgp_target_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
              v_exgp_target_comm_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
              v_exgp_target_comm_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
              v_exgp_target_comm_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
              v_exgp_target_comm_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
              v_exgp_target_trade_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
              v_exgp_target_trade_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
              v_exgp_target_trade_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
              v_exgp_target_trade_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
              v_exgp_target_strike_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
              v_exgp_target_strike_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
              v_exgp_target_strike_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
              v_exgp_target_strike_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
              v_exgp_target_realize_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
              v_exgp_target_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
              v_exgp_target_intrst_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
              v_exgp_target_intrst_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
              v_exgp_target_posi_update_times = lpTSCall1Ans35->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
              v_asac_target_posi_id = lpTSCall1Ans35->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
              v_asac_target_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
              v_asac_target_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
              v_asac_target_comm_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
              v_asac_target_comm_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
              v_asac_target_comm_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
              v_asac_target_comm_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
              v_asac_target_trade_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
              v_asac_target_trade_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
              v_asac_target_trade_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
              v_asac_target_trade_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
              v_asac_target_strike_capt_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
              v_asac_target_strike_releas_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
              v_asac_target_strike_frozen_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
              v_asac_target_strike_unfroz_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
              v_asac_target_realize_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
              v_asac_target_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
              v_asac_target_intrst_cost_amt = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
              v_asac_target_intrst_pandl = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
              v_asac_target_posi_update_times = lpTSCall1Ans35->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
              v_exgp_put_impawn_qty = lpTSCall1Ans35->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
              v_asac_put_impawn_qty = lpTSCall1Ans35->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


              // set @证券代码编号# = @交易代码编号#;
              v_stock_code_no = v_trade_code_no;

              // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
              lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
              glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


              // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


              // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
              lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
              glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


              // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


              // set @证券代码编号# = @标的代码编号#;
              v_stock_code_no = v_target_code_no;

              // set @交易组提交质押数量# = 0;
              v_exgp_put_impawn_qty = 0;

              // set @资产账户提交质押数量# = 0;
              v_asac_put_impawn_qty = 0;

              // set @交易组持仓序号# = @交易组标的持仓序号#;
              v_exgp_posi_id = v_exgp_target_posi_id;

              // set @交易组冻结数量# = @交易组标的冻结数量#;
              v_exgp_frozen_qty = v_exgp_target_frozen_qty;

              // set @交易组解冻数量# = @交易组标的解冻数量#;
              v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

              // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
              v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

              // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
              v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

              // set @交易组指令占用数量# = @交易组标的指令占用数量#;
              v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

              // set @交易组指令释放数量# = @交易组标的指令释放数量#;
              v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

              // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
              v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

              // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
              v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

              // set @交易组交易占用数量# = @交易组标的交易占用数量#;
              v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

              // set @交易组交易释放数量# = @交易组标的交易释放数量#;
              v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

              // set @交易组成交占用数量# = @交易组标的成交占用数量#;
              v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

              // set @交易组成交释放数量# = @交易组标的成交释放数量#;
              v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

              // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
              v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

              // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
              v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

              // set @交易组实现盈亏# = @交易组标的实现盈亏#;
              v_exgp_realize_pandl = v_exgp_target_realize_pandl;

              // set @交易组成本金额# = @交易组标的成本金额#;
              v_exgp_cost_amt = v_exgp_target_cost_amt;

              // set @交易组利息成本金额# = @交易组标的利息成本金额#;
              v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

              // set @交易组利息收益# = @交易组标的利息收益#;
              v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

              // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
              v_exgp_posi_update_times = v_exgp_target_posi_update_times;

              // set @资产账户持仓序号# = @资产账户标的持仓序号#;
              v_asac_posi_id = v_asac_target_posi_id;

              // set @资产账户冻结数量# = @资产账户标的冻结数量#;
              v_asac_frozen_qty = v_asac_target_frozen_qty;

              // set @资产账户解冻数量# = @资产账户标的解冻数量#;
              v_asac_unfroz_qty = v_asac_target_unfroz_qty;

              // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
              v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

              // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
              v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

              // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
              v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

              // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
              v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

              // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
              v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

              // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
              v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

              // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
              v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

              // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
              v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

              // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
              v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

              // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
              v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

              // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
              v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

              // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
              v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

              // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
              v_asac_realize_pandl = v_asac_target_realize_pandl;

              // set @资产账户成本金额# = @资产账户标的成本金额#;
              v_asac_cost_amt = v_asac_target_cost_amt;

              // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
              v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

              // set @资产账户利息收益# = @资产账户标的利息收益#;
              v_asac_intrst_pandl = v_asac_target_intrst_pandl;

              // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
              v_asac_posi_update_times = v_asac_target_posi_update_times;

              // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


              // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


            }
            // else if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
            else if (v_order_dir == 3 || v_order_dir == 4)
            {

              // set @证券代码编号# = @标的代码编号#;
              v_stock_code_no = v_target_code_no;
              //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
              //组织事务请求
              if(lpTSCall1Ans36)
              {
                lpTSCall1Ans36->FreeMsg();
                lpTSCall1Ans36=NULL;
              }
              lpTSCall1Req36=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
              lpTSCall1Req36->SetInt32(LDTAG_PRIORITY, iPriority);
              lpTSCall1Req36->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
              lpTSCall1Req36->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
              lpTSCall1Req36->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
              lpTSCall1Req36->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
              lpTSCall1Req36->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
              lpTSCall1Req36->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
              lpTSCall1Req36->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
              lpTSCall1Req36->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpTSCall1Req36->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpTSCall1Req36->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpTSCall1Req36->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpTSCall1Req36->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpTSCall1Req36->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpTSCall1Req36->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              glpTSSubcallSerives->SubCall(lpTSCall1Req36, &lpTSCall1Ans36, 5000);
              if(!lpTSCall1Ans36)  //  超时错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(lpTSCall1Ans36->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans36->GetInt32(LDTAG_ERRORNO));
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans36->GetString(LDTAG_ERRORINFO));
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(strcmp(lpTSCall1Ans36->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
              {
                  strcpy(v_error_code, lpTSCall1Ans36->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans36->GetString(LDBIZ_ERROR_INFO_STR));
                  iRet=-1;
                  goto END;
              }
              //获取输出参数值
              strcpy(v_error_code, lpTSCall1Ans36->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans36->GetString(LDBIZ_ERROR_INFO_STR));
              v_exgp_cash_id = lpTSCall1Ans36->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
              v_exgp_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
              v_exgp_unfroz_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
              v_exgp_comm_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
              v_exgp_comm_unfroz_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
              v_exgp_comm_capt_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
              v_exgp_comm_releas_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
              v_exgp_trade_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
              v_exgp_trade_unfroz_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
              v_exgp_trade_capt_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
              v_exgp_trade_releas_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
              v_exgp_strike_capt_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
              v_exgp_strike_releas_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
              v_exgp_cash_update_times = lpTSCall1Ans36->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
              v_exgp_posi_id = lpTSCall1Ans36->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
              v_exgp_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
              v_exgp_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
              v_exgp_comm_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
              v_exgp_comm_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
              v_exgp_comm_capt_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
              v_exgp_comm_releas_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
              v_exgp_trade_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
              v_exgp_trade_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
              v_exgp_trade_capt_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
              v_exgp_trade_releas_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
              v_exgp_strike_capt_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
              v_exgp_strike_releas_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
              v_exgp_strike_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
              v_exgp_strike_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
              v_exgp_realize_pandl = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
              v_exgp_cost_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
              v_exgp_intrst_cost_amt = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
              v_exgp_intrst_pandl = lpTSCall1Ans36->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
              v_exgp_posi_update_times = lpTSCall1Ans36->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
              v_asac_cash_id = lpTSCall1Ans36->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
              v_asac_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
              v_asac_unfroz_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
              v_asac_comm_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
              v_asac_comm_unfroz_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
              v_asac_comm_capt_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
              v_asac_comm_releas_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
              v_asac_trade_frozen_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
              v_asac_trade_unfroz_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
              v_asac_trade_capt_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
              v_asac_trade_releas_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
              v_asac_strike_capt_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
              v_asac_strike_releas_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
              v_asac_cash_update_times = lpTSCall1Ans36->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
              v_asac_posi_id = lpTSCall1Ans36->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
              v_asac_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
              v_asac_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
              v_asac_comm_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
              v_asac_comm_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
              v_asac_comm_capt_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
              v_asac_comm_releas_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
              v_asac_trade_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
              v_asac_trade_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
              v_asac_trade_capt_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
              v_asac_trade_releas_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
              v_asac_strike_capt_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
              v_asac_strike_releas_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
              v_asac_strike_frozen_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
              v_asac_strike_unfroz_qty = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
              v_asac_realize_pandl = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
              v_asac_cost_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
              v_asac_intrst_cost_amt = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
              v_asac_intrst_pandl = lpTSCall1Ans36->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
              v_asac_posi_update_times = lpTSCall1Ans36->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


              // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
              lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
              glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


              // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


              // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
              lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
              glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


              // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


              // set @回购成交序号# = @成交序号#;
              v_repo_strike_id = v_strike_id;
              //调用过程[事务_交易证券_主推接口_获取债券回购信息]
              //组织事务请求
              if(lpTSCall1Ans37)
              {
                lpTSCall1Ans37->FreeMsg();
                lpTSCall1Ans37=NULL;
              }
              lpTSCall1Req37=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.30", 0);
              lpTSCall1Req37->SetInt32(LDTAG_PRIORITY, iPriority);
              lpTSCall1Req37->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
              lpTSCall1Req37->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
              lpTSCall1Req37->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
              lpTSCall1Req37->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
              lpTSCall1Req37->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
              lpTSCall1Req37->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
              lpTSCall1Req37->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
              lpTSCall1Req37->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
              glpTSSubcallSerives->SubCall(lpTSCall1Req37, &lpTSCall1Ans37, 5000);
              if(!lpTSCall1Ans37)  //  超时错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.30]subcall timed out!");
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(lpTSCall1Ans37->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans37->GetInt32(LDTAG_ERRORNO));
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans37->GetString(LDTAG_ERRORINFO));
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(strcmp(lpTSCall1Ans37->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
              {
                  strcpy(v_error_code, lpTSCall1Ans37->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans37->GetString(LDBIZ_ERROR_INFO_STR));
                  iRet=-1;
                  goto END;
              }
              //获取输出参数值
              strcpy(v_error_code, lpTSCall1Ans37->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans37->GetString(LDBIZ_ERROR_INFO_STR));
              v_init_date = lpTSCall1Ans37->GetInt32(LDBIZ_INIT_DATE_INT);
              v_co_no = lpTSCall1Ans37->GetInt32(LDBIZ_CO_NO_INT);
              v_pd_no = lpTSCall1Ans37->GetInt32(LDBIZ_PD_NO_INT);
              v_exch_group_no = lpTSCall1Ans37->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
              v_asset_acco_no = lpTSCall1Ans37->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
              strcpy(v_crncy_type, lpTSCall1Ans37->GetString(LDBIZ_CRNCY_TYPE_STR));
              strcpy(v_exch_crncy_type, lpTSCall1Ans37->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
              v_exch_rate = lpTSCall1Ans37->GetDouble(LDBIZ_EXCH_RATE_FLOAT);
              v_exch_no = lpTSCall1Ans37->GetInt32(LDBIZ_EXCH_NO_INT);
              v_stock_acco_no = lpTSCall1Ans37->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
              v_stock_code_no = lpTSCall1Ans37->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
              v_target_code_no = lpTSCall1Ans37->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
              v_comm_id = lpTSCall1Ans37->GetInt64(LDBIZ_COMM_ID_INT64);
              v_order_dir = lpTSCall1Ans37->GetInt32(LDBIZ_ORDER_DIR_INT);
              v_repo_qty = lpTSCall1Ans37->GetDouble(LDBIZ_REPO_QTY_FLOAT);
              v_repo_amt = lpTSCall1Ans37->GetDouble(LDBIZ_REPO_AMT_FLOAT);
              v_repo_rate = lpTSCall1Ans37->GetDouble(LDBIZ_REPO_RATE_FLOAT);
              v_repo_trade_date = lpTSCall1Ans37->GetInt32(LDBIZ_REPO_TRADE_DATE_INT);
              v_repo_order_id = lpTSCall1Ans37->GetInt64(LDBIZ_REPO_ORDER_ID_INT64);
              v_repo_days = lpTSCall1Ans37->GetInt32(LDBIZ_REPO_DAYS_INT);
              v_repo_cale_days = lpTSCall1Ans37->GetInt32(LDBIZ_REPO_CALE_DAYS_INT);
              v_repo_back_date = lpTSCall1Ans37->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
              v_repo_back_amt = lpTSCall1Ans37->GetDouble(LDBIZ_REPO_BACK_AMT_FLOAT);
              v_repo_back_intrst = lpTSCall1Ans37->GetDouble(LDBIZ_REPO_BACK_INTRST_FLOAT);
              v_repo_back_trade_date = lpTSCall1Ans37->GetInt32(LDBIZ_REPO_BACK_TRADE_DATE_INT);
              strcpy(v_repo_status, lpTSCall1Ans37->GetString(LDBIZ_REPO_STATUS_STR));
              v_bond_repo_id = lpTSCall1Ans37->GetInt64(LDBIZ_BOND_REPO_ID_INT64);
              v_update_times = lpTSCall1Ans37->GetInt32(LDBIZ_UPDATE_TIMES_INT);


              // [主动推送][secu.exgpbondrepo][证券主推_持仓_交易组债券回购主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.82", 0);
              lpPubMsg->SetInt64(LDBIZ_BOND_REPO_ID_INT64,v_bond_repo_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_EXCH_RATE_FLOAT,v_exch_rate);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
              lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
              lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
              lpPubMsg->SetDouble(LDBIZ_REPO_QTY_FLOAT,v_repo_qty);
              lpPubMsg->SetDouble(LDBIZ_REPO_AMT_FLOAT,v_repo_amt);
              lpPubMsg->SetDouble(LDBIZ_REPO_RATE_FLOAT,v_repo_rate);
              lpPubMsg->SetInt32(LDBIZ_REPO_TRADE_DATE_INT,v_repo_trade_date);
              lpPubMsg->SetInt64(LDBIZ_REPO_ORDER_ID_INT64,v_repo_order_id);
              lpPubMsg->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
              lpPubMsg->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
              lpPubMsg->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
              lpPubMsg->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
              lpPubMsg->SetDouble(LDBIZ_REPO_BACK_AMT_FLOAT,v_repo_back_amt);
              lpPubMsg->SetDouble(LDBIZ_REPO_BACK_INTRST_FLOAT,v_repo_back_intrst);
              lpPubMsg->SetInt32(LDBIZ_REPO_BACK_TRADE_DATE_INT,v_repo_back_trade_date);
              lpPubMsg->SetString(LDBIZ_REPO_STATUS_STR,v_repo_status);
              lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
              glpPubSub_Interface->PubTopics("secu.exgpbondrepo", lpPubMsg);

            }
            // else
            else
            {

              //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
              //组织事务请求
              if(lpTSCall1Ans38)
              {
                lpTSCall1Ans38->FreeMsg();
                lpTSCall1Ans38=NULL;
              }
              lpTSCall1Req38=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
              lpTSCall1Req38->SetInt32(LDTAG_PRIORITY, iPriority);
              lpTSCall1Req38->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
              lpTSCall1Req38->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
              lpTSCall1Req38->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
              lpTSCall1Req38->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
              lpTSCall1Req38->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
              lpTSCall1Req38->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
              lpTSCall1Req38->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
              lpTSCall1Req38->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpTSCall1Req38->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpTSCall1Req38->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpTSCall1Req38->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpTSCall1Req38->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpTSCall1Req38->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpTSCall1Req38->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              glpTSSubcallSerives->SubCall(lpTSCall1Req38, &lpTSCall1Ans38, 5000);
              if(!lpTSCall1Ans38)  //  超时错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(lpTSCall1Ans38->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
              {
                  lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans38->GetInt32(LDTAG_ERRORNO));
                  lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans38->GetString(LDTAG_ERRORINFO));
                  iRet=-2;
                  goto ENDSYS;
              }
              else if(strcmp(lpTSCall1Ans38->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
              {
                  strcpy(v_error_code, lpTSCall1Ans38->GetString(LDBIZ_ERROR_CODE_STR));
                  strcpy(v_error_info, lpTSCall1Ans38->GetString(LDBIZ_ERROR_INFO_STR));
                  iRet=-1;
                  goto END;
              }
              //获取输出参数值
              strcpy(v_error_code, lpTSCall1Ans38->GetString(LDBIZ_ERROR_CODE_STR));
              strcpy(v_error_info, lpTSCall1Ans38->GetString(LDBIZ_ERROR_INFO_STR));
              v_exgp_cash_id = lpTSCall1Ans38->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
              v_exgp_frozen_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
              v_exgp_unfroz_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
              v_exgp_comm_frozen_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
              v_exgp_comm_unfroz_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
              v_exgp_comm_capt_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
              v_exgp_comm_releas_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
              v_exgp_trade_frozen_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
              v_exgp_trade_unfroz_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
              v_exgp_trade_capt_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
              v_exgp_trade_releas_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
              v_exgp_strike_capt_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
              v_exgp_strike_releas_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
              v_exgp_cash_update_times = lpTSCall1Ans38->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
              v_exgp_posi_id = lpTSCall1Ans38->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
              v_exgp_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
              v_exgp_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
              v_exgp_comm_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
              v_exgp_comm_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
              v_exgp_comm_capt_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
              v_exgp_comm_releas_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
              v_exgp_trade_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
              v_exgp_trade_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
              v_exgp_trade_capt_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
              v_exgp_trade_releas_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
              v_exgp_strike_capt_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
              v_exgp_strike_releas_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
              v_exgp_strike_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
              v_exgp_strike_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
              v_exgp_realize_pandl = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
              v_exgp_cost_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
              v_exgp_intrst_cost_amt = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
              v_exgp_intrst_pandl = lpTSCall1Ans38->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
              v_exgp_posi_update_times = lpTSCall1Ans38->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
              v_asac_cash_id = lpTSCall1Ans38->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
              v_asac_frozen_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
              v_asac_unfroz_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
              v_asac_comm_frozen_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
              v_asac_comm_unfroz_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
              v_asac_comm_capt_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
              v_asac_comm_releas_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
              v_asac_trade_frozen_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
              v_asac_trade_unfroz_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
              v_asac_trade_capt_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
              v_asac_trade_releas_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
              v_asac_strike_capt_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
              v_asac_strike_releas_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
              v_asac_cash_update_times = lpTSCall1Ans38->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
              v_asac_posi_id = lpTSCall1Ans38->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
              v_asac_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
              v_asac_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
              v_asac_comm_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
              v_asac_comm_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
              v_asac_comm_capt_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
              v_asac_comm_releas_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
              v_asac_trade_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
              v_asac_trade_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
              v_asac_trade_capt_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
              v_asac_trade_releas_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
              v_asac_strike_capt_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
              v_asac_strike_releas_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
              v_asac_strike_frozen_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
              v_asac_strike_unfroz_qty = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
              v_asac_realize_pandl = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
              v_asac_cost_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
              v_asac_intrst_cost_amt = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
              v_asac_intrst_pandl = lpTSCall1Ans38->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
              v_asac_posi_update_times = lpTSCall1Ans38->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


              // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
              lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
              glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


              // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
              lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


              // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
              lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
              glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


              // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
              lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
              lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
              lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
              lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
              lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
              lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
              lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
              lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
              lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
              lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
              lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
              lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
              lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
              glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

            // end if;
            }

        // end if;
        }

    // end if;
    }

    //增强交易主推

    // if (@订单操作方式# = 《订单操作方式-增强交易》 or @订单操作方式# = 《订单操作方式-增强交易平仓》) then
    if ((strcmp(v_order_oper_way , "14")==0 || strcmp(v_order_oper_way , "51")==0))
    {

        // set @操作员编号# = @业务操作员编号#;
        v_opor_no = v_busi_opor_no;
        //券源
        //调用过程[事务_交易证券_主推接口_获取券源信息]
        //组织事务请求
        if(lpTSCall1Ans39)
        {
          lpTSCall1Ans39->FreeMsg();
          lpTSCall1Ans39=NULL;
        }
        lpTSCall1Req39=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.35", 0);
        lpTSCall1Req39->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req39->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req39->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req39->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req39->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req39->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req39->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req39->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req39->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        lpTSCall1Req39->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req39->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req39->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req39->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req39->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req39, &lpTSCall1Ans39, 5000);
        if(!lpTSCall1Ans39)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.35]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans39->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans39->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans39->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans39->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans39->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans39->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans39->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans39->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans39->GetInt64(LDBIZ_ROW_ID_INT64);
        v_co_no = lpTSCall1Ans39->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans39->GetInt32(LDBIZ_PD_NO_INT);
        strcpy(v_stock_code, lpTSCall1Ans39->GetString(LDBIZ_STOCK_CODE_STR));
        v_exch_no = lpTSCall1Ans39->GetInt32(LDBIZ_EXCH_NO_INT);
        v_source_stock_qty = lpTSCall1Ans39->GetDouble(LDBIZ_SOURCE_STOCK_QTY_FLOAT);
        v_single_limit_qty = lpTSCall1Ans39->GetDouble(LDBIZ_SINGLE_LIMIT_QTY_FLOAT);
        v_assigned_qty = lpTSCall1Ans39->GetDouble(LDBIZ_ASSIGNED_QTY_FLOAT);
        v_trade_releas_qty = lpTSCall1Ans39->GetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT);
        v_trade_capt_qty = lpTSCall1Ans39->GetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT);
        v_strike_releas_qty = lpTSCall1Ans39->GetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT);
        v_strike_capt_qty = lpTSCall1Ans39->GetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT);
        v_over_night_pandl = lpTSCall1Ans39->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans39->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_total_open_posi_fee = lpTSCall1Ans39->GetDouble(LDBIZ_TOTAL_OPEN_POSI_FEE_FLOAT);
        v_total_close_posi_fee = lpTSCall1Ans39->GetDouble(LDBIZ_TOTAL_CLOSE_POSI_FEE_FLOAT);
        v_out_order_releas_qty = lpTSCall1Ans39->GetDouble(LDBIZ_OUT_ORDER_RELEAS_QTY_FLOAT);
        v_out_order_capt_qty = lpTSCall1Ans39->GetDouble(LDBIZ_OUT_ORDER_CAPT_QTY_FLOAT);
        v_out_strike_releas_qty = lpTSCall1Ans39->GetDouble(LDBIZ_OUT_STRIKE_RELEAS_QTY_FLOAT);
        v_out_strike_capt_qty = lpTSCall1Ans39->GetDouble(LDBIZ_OUT_STRIKE_CAPT_QTY_FLOAT);
        strcpy(v_remark_info, lpTSCall1Ans39->GetString(LDBIZ_REMARK_INFO_STR));
        v_buy_avail_qty = lpTSCall1Ans39->GetDouble(LDBIZ_BUY_AVAIL_QTY_FLOAT);
        v_sell_avail_qty = lpTSCall1Ans39->GetDouble(LDBIZ_SELL_AVAIL_QTY_FLOAT);
        v_posi_qty = lpTSCall1Ans39->GetDouble(LDBIZ_POSI_QTY_FLOAT);
        v_today_trade_fee = lpTSCall1Ans39->GetDouble(LDBIZ_TODAY_TRADE_FEE_FLOAT);
        v_today_pandl = lpTSCall1Ans39->GetDouble(LDBIZ_TODAY_PANDL_FLOAT);
        v_diff_qty = lpTSCall1Ans39->GetDouble(LDBIZ_DIFF_QTY_FLOAT);
        v_over_night_trade_buy_qty = lpTSCall1Ans39->GetDouble(LDBIZ_OVER_NIGHT_TRADE_BUY_QTY_FLOAT);
        v_over_night_trade_sell_qty = lpTSCall1Ans39->GetDouble(LDBIZ_OVER_NIGHT_TRADE_SELL_QTY_FLOAT);
        v_over_night_strike_sell_qty = lpTSCall1Ans39->GetDouble(LDBIZ_OVER_NIGHT_STRIKE_SELL_QTY_FLOAT);
        v_over_night_sumtrd_sell_qty = lpTSCall1Ans39->GetDouble(LDBIZ_OVER_NIGHT_SUMTRD_SELL_QTY_FLOAT);
        v_over_night_sumstk_sell_qty = lpTSCall1Ans39->GetDouble(LDBIZ_OVER_NIGHT_SUMSTK_SELL_QTY_FLOAT);
        v_update_times = lpTSCall1Ans39->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0stocksource][证券主推_增强交易_券源变化主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.701", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetDouble(LDBIZ_SOURCE_STOCK_QTY_FLOAT,v_source_stock_qty);
        lpPubMsg->SetDouble(LDBIZ_SINGLE_LIMIT_QTY_FLOAT,v_single_limit_qty);
        lpPubMsg->SetDouble(LDBIZ_ASSIGNED_QTY_FLOAT,v_assigned_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT,v_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT,v_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT,v_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT,v_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
        lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_OPEN_POSI_FEE_FLOAT,v_total_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_CLOSE_POSI_FEE_FLOAT,v_total_close_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_OUT_ORDER_RELEAS_QTY_FLOAT,v_out_order_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_OUT_ORDER_CAPT_QTY_FLOAT,v_out_order_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_OUT_STRIKE_RELEAS_QTY_FLOAT,v_out_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_OUT_STRIKE_CAPT_QTY_FLOAT,v_out_strike_capt_qty);
        lpPubMsg->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
        lpPubMsg->SetDouble(LDBIZ_BUY_AVAIL_QTY_FLOAT,v_buy_avail_qty);
        lpPubMsg->SetDouble(LDBIZ_SELL_AVAIL_QTY_FLOAT,v_sell_avail_qty);
        lpPubMsg->SetDouble(LDBIZ_POSI_QTY_FLOAT,v_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_TODAY_TRADE_FEE_FLOAT,v_today_trade_fee);
        lpPubMsg->SetDouble(LDBIZ_TODAY_PANDL_FLOAT,v_today_pandl);
        lpPubMsg->SetDouble(LDBIZ_DIFF_QTY_FLOAT,v_diff_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_TRADE_BUY_QTY_FLOAT,v_over_night_trade_buy_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_TRADE_SELL_QTY_FLOAT,v_over_night_trade_sell_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_STRIKE_SELL_QTY_FLOAT,v_over_night_strike_sell_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_SUMTRD_SELL_QTY_FLOAT,v_over_night_sumtrd_sell_qty);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_SUMSTK_SELL_QTY_FLOAT,v_over_night_sumstk_sell_qty);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0stocksource", lpPubMsg);

        //账户汇总信息
        //调用过程[事务_交易证券_主推接口_获取账户汇总信息查询]
        //组织事务请求
        if(lpTSCall1Ans40)
        {
          lpTSCall1Ans40->FreeMsg();
          lpTSCall1Ans40=NULL;
        }
        lpTSCall1Req40=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.37", 0);
        lpTSCall1Req40->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req40->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req40->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req40->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req40->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req40->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req40->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req40->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req40->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req40, &lpTSCall1Ans40, 5000);
        if(!lpTSCall1Ans40)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.37]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans40->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans40->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans40->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans40->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans40->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans40->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans40->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans40->GetString(LDBIZ_ERROR_INFO_STR));
        v_trade_amt = lpTSCall1Ans40->GetDouble(LDBIZ_TRADE_AMT_FLOAT);
        v_trade_qty = lpTSCall1Ans40->GetDouble(LDBIZ_TRADE_QTY_FLOAT);
        v_realize_pandl = lpTSCall1Ans40->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
        v_yield_rate = lpTSCall1Ans40->GetDouble(LDBIZ_YIELD_RATE_FLOAT);
        v_all_fee = lpTSCall1Ans40->GetDouble(LDBIZ_ALL_FEE_FLOAT);
        v_over_night_pandl = lpTSCall1Ans40->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans40->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_update_times = lpTSCall1Ans40->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0accosum][证券主推_增强交易_t0账户汇总主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.703", 0);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetDouble(LDBIZ_TRADE_AMT_FLOAT,v_trade_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_QTY_FLOAT,v_trade_qty);
        lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_YIELD_RATE_FLOAT,v_yield_rate);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
        lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0accosum", lpPubMsg);

        //可用金额
        //调用过程[事务_交易证券_主推接口_获取t0操作员可用金额]
        //组织事务请求
        if(lpTSCall1Ans41)
        {
          lpTSCall1Ans41->FreeMsg();
          lpTSCall1Ans41=NULL;
        }
        lpTSCall1Req41=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.38", 0);
        lpTSCall1Req41->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req41->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req41->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req41->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req41->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req41->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req41->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req41->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req41->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req41->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
        glpTSSubcallSerives->SubCall(lpTSCall1Req41, &lpTSCall1Ans41, 5000);
        if(!lpTSCall1Ans41)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.38]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans41->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans41->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans41->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans41->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans41->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans41->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans41->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans41->GetString(LDBIZ_ERROR_INFO_STR));
        v_avail_amt = lpTSCall1Ans41->GetDouble(LDBIZ_AVAIL_AMT_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans41->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_update_times = lpTSCall1Ans41->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0availcapital][证券主推_增强交易_t0操作员可用金额主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.704", 0);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetDouble(LDBIZ_AVAIL_AMT_FLOAT,v_avail_amt);
        lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0availcapital", lpPubMsg);

        //持仓汇总
        //调用过程[事务_交易证券_主推接口_获取t0持仓汇总信息]
        //组织事务请求
        if(lpTSCall1Ans42)
        {
          lpTSCall1Ans42->FreeMsg();
          lpTSCall1Ans42=NULL;
        }
        lpTSCall1Req42=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.40", 0);
        lpTSCall1Req42->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req42->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req42->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req42->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req42->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req42->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req42->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req42->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req42->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req42->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req42->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req42->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req42, &lpTSCall1Ans42, 5000);
        if(!lpTSCall1Ans42)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.40]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans42->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans42->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans42->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans42->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans42->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans42->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans42->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans42->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans42->GetInt64(LDBIZ_ROW_ID_INT64);
        v_co_no = lpTSCall1Ans42->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans42->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_no = lpTSCall1Ans42->GetInt32(LDBIZ_EXCH_NO_INT);
        strcpy(v_stock_code, lpTSCall1Ans42->GetString(LDBIZ_STOCK_CODE_STR));
        v_total_long_curr_qty = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_LONG_CURR_QTY_FLOAT);
        v_total_short_curr_qty = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_SHORT_CURR_QTY_FLOAT);
        v_total_long_open_posi_value = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_LONG_OPEN_POSI_VALUE_FLOAT);
        v_total_short_open_posi_value = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_SHORT_OPEN_POSI_VALUE_FLOAT);
        v_total_long_open_posi_fee = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_LONG_OPEN_POSI_FEE_FLOAT);
        v_total_short_open_posi_fee = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_SHORT_OPEN_POSI_FEE_FLOAT);
        v_total_long_close_posi_value = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_LONG_CLOSE_POSI_VALUE_FLOAT);
        v_total_short_close_posi_value = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_SHORT_CLOSE_POSI_VALUE_FLOAT);
        v_total_long_close_posi_qty = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_LONG_CLOSE_POSI_QTY_FLOAT);
        v_total_short_close_posi_qty = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_SHORT_CLOSE_POSI_QTY_FLOAT);
        v_total_long_close_posi_fee = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_LONG_CLOSE_POSI_FEE_FLOAT);
        v_total_short_close_posi_fee = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_SHORT_CLOSE_POSI_FEE_FLOAT);
        v_total_realize_pandl = lpTSCall1Ans42->GetDouble(LDBIZ_TOTAL_REALIZE_PANDL_FLOAT);
        v_long_curr_qty = lpTSCall1Ans42->GetDouble(LDBIZ_LONG_CURR_QTY_FLOAT);
        v_short_curr_qty = lpTSCall1Ans42->GetDouble(LDBIZ_SHORT_CURR_QTY_FLOAT);
        v_long_open_posi_value = lpTSCall1Ans42->GetDouble(LDBIZ_LONG_OPEN_POSI_VALUE_FLOAT);
        v_short_open_posi_value = lpTSCall1Ans42->GetDouble(LDBIZ_SHORT_OPEN_POSI_VALUE_FLOAT);
        v_long_open_posi_fee = lpTSCall1Ans42->GetDouble(LDBIZ_LONG_OPEN_POSI_FEE_FLOAT);
        v_short_open_posi_fee = lpTSCall1Ans42->GetDouble(LDBIZ_SHORT_OPEN_POSI_FEE_FLOAT);
        v_long_close_posi_qty = lpTSCall1Ans42->GetDouble(LDBIZ_LONG_CLOSE_POSI_QTY_FLOAT);
        v_short_close_posi_qty = lpTSCall1Ans42->GetDouble(LDBIZ_SHORT_CLOSE_POSI_QTY_FLOAT);
        v_long_close_posi_value = lpTSCall1Ans42->GetDouble(LDBIZ_LONG_CLOSE_POSI_VALUE_FLOAT);
        v_short_close_posi_value = lpTSCall1Ans42->GetDouble(LDBIZ_SHORT_CLOSE_POSI_VALUE_FLOAT);
        v_long_close_posi_fee = lpTSCall1Ans42->GetDouble(LDBIZ_LONG_CLOSE_POSI_FEE_FLOAT);
        v_short_close_posi_fee = lpTSCall1Ans42->GetDouble(LDBIZ_SHORT_CLOSE_POSI_FEE_FLOAT);
        v_realize_pandl = lpTSCall1Ans42->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
        v_over_night_pandl = lpTSCall1Ans42->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
        v_open_posi_date = lpTSCall1Ans42->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
        v_open_posi_time = lpTSCall1Ans42->GetInt32(LDBIZ_OPEN_POSI_TIME_INT);
        v_posi_qty = lpTSCall1Ans42->GetDouble(LDBIZ_POSI_QTY_FLOAT);
        v_curr_qty = lpTSCall1Ans42->GetDouble(LDBIZ_CURR_QTY_FLOAT);
        v_open_posi_value = lpTSCall1Ans42->GetDouble(LDBIZ_OPEN_POSI_VALUE_FLOAT);
        v_open_posi_fee = lpTSCall1Ans42->GetDouble(LDBIZ_OPEN_POSI_FEE_FLOAT);
        v_cost_price = lpTSCall1Ans42->GetDouble(LDBIZ_COST_PRICE_FLOAT);
        v_update_times = lpTSCall1Ans42->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0posisum][证券主推_增强交易_t0持仓汇总主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.706", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_LONG_CURR_QTY_FLOAT,v_total_long_curr_qty);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_SHORT_CURR_QTY_FLOAT,v_total_short_curr_qty);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_LONG_OPEN_POSI_VALUE_FLOAT,v_total_long_open_posi_value);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_SHORT_OPEN_POSI_VALUE_FLOAT,v_total_short_open_posi_value);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_LONG_OPEN_POSI_FEE_FLOAT,v_total_long_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_SHORT_OPEN_POSI_FEE_FLOAT,v_total_short_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_LONG_CLOSE_POSI_VALUE_FLOAT,v_total_long_close_posi_value);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_SHORT_CLOSE_POSI_VALUE_FLOAT,v_total_short_close_posi_value);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_LONG_CLOSE_POSI_QTY_FLOAT,v_total_long_close_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_SHORT_CLOSE_POSI_QTY_FLOAT,v_total_short_close_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_LONG_CLOSE_POSI_FEE_FLOAT,v_total_long_close_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_SHORT_CLOSE_POSI_FEE_FLOAT,v_total_short_close_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_TOTAL_REALIZE_PANDL_FLOAT,v_total_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_LONG_CURR_QTY_FLOAT,v_long_curr_qty);
        lpPubMsg->SetDouble(LDBIZ_SHORT_CURR_QTY_FLOAT,v_short_curr_qty);
        lpPubMsg->SetDouble(LDBIZ_LONG_OPEN_POSI_VALUE_FLOAT,v_long_open_posi_value);
        lpPubMsg->SetDouble(LDBIZ_SHORT_OPEN_POSI_VALUE_FLOAT,v_short_open_posi_value);
        lpPubMsg->SetDouble(LDBIZ_LONG_OPEN_POSI_FEE_FLOAT,v_long_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_SHORT_OPEN_POSI_FEE_FLOAT,v_short_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_LONG_CLOSE_POSI_QTY_FLOAT,v_long_close_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_SHORT_CLOSE_POSI_QTY_FLOAT,v_short_close_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_LONG_CLOSE_POSI_VALUE_FLOAT,v_long_close_posi_value);
        lpPubMsg->SetDouble(LDBIZ_SHORT_CLOSE_POSI_VALUE_FLOAT,v_short_close_posi_value);
        lpPubMsg->SetDouble(LDBIZ_LONG_CLOSE_POSI_FEE_FLOAT,v_long_close_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_SHORT_CLOSE_POSI_FEE_FLOAT,v_short_close_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
        lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
        lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_TIME_INT,v_open_posi_time);
        lpPubMsg->SetDouble(LDBIZ_POSI_QTY_FLOAT,v_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_CURR_QTY_FLOAT,v_curr_qty);
        lpPubMsg->SetDouble(LDBIZ_OPEN_POSI_VALUE_FLOAT,v_open_posi_value);
        lpPubMsg->SetDouble(LDBIZ_OPEN_POSI_FEE_FLOAT,v_open_posi_fee);
        lpPubMsg->SetDouble(LDBIZ_COST_PRICE_FLOAT,v_cost_price);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0posisum", lpPubMsg);

        //调用过程[事务_交易证券_主推接口_获取操作员可用交易组资金信息]
        //组织事务请求
        if(lpTSCall1Ans43)
        {
          lpTSCall1Ans43->FreeMsg();
          lpTSCall1Ans43=NULL;
        }
        lpTSCall1Req43=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.46", 0);
        lpTSCall1Req43->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req43->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req43->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req43->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req43->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req43->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req43->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req43->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req43->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req43->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req43->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req43->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req43->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        lpTSCall1Req43->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req43, &lpTSCall1Ans43, 5000);
        if(!lpTSCall1Ans43)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.46]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans43->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans43->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans43->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans43->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans43->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans43->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans43->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans43->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans43->GetInt64(LDBIZ_ROW_ID_INT64);
        v_begin_amt = lpTSCall1Ans43->GetDouble(LDBIZ_BEGIN_AMT_FLOAT);
        v_curr_amt = lpTSCall1Ans43->GetDouble(LDBIZ_CURR_AMT_FLOAT);
        v_frozen_amt = lpTSCall1Ans43->GetDouble(LDBIZ_FROZEN_AMT_FLOAT);
        v_unfroz_amt = lpTSCall1Ans43->GetDouble(LDBIZ_UNFROZ_AMT_FLOAT);
        v_comm_frozen_amt = lpTSCall1Ans43->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
        v_comm_unfroz_amt = lpTSCall1Ans43->GetDouble(LDBIZ_COMM_UNFROZ_AMT_FLOAT);
        v_comm_capt_amt = lpTSCall1Ans43->GetDouble(LDBIZ_COMM_CAPT_AMT_FLOAT);
        v_comm_releas_amt = lpTSCall1Ans43->GetDouble(LDBIZ_COMM_RELEAS_AMT_FLOAT);
        v_trade_frozen_amt = lpTSCall1Ans43->GetDouble(LDBIZ_TRADE_FROZEN_AMT_FLOAT);
        v_trade_unfroz_amt = lpTSCall1Ans43->GetDouble(LDBIZ_TRADE_UNFROZ_AMT_FLOAT);
        v_trade_capt_amt = lpTSCall1Ans43->GetDouble(LDBIZ_TRADE_CAPT_AMT_FLOAT);
        v_trade_releas_amt = lpTSCall1Ans43->GetDouble(LDBIZ_TRADE_RELEAS_AMT_FLOAT);
        v_strike_capt_amt = lpTSCall1Ans43->GetDouble(LDBIZ_STRIKE_CAPT_AMT_FLOAT);
        v_strike_releas_amt = lpTSCall1Ans43->GetDouble(LDBIZ_STRIKE_RELEAS_AMT_FLOAT);
        v_update_times = lpTSCall1Ans43->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.t0oporallowexgrpcap][证券主推_增强交易_操作员可用交易组资金变化主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.710", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_BEGIN_AMT_FLOAT,v_begin_amt);
        lpPubMsg->SetDouble(LDBIZ_CURR_AMT_FLOAT,v_curr_amt);
        lpPubMsg->SetDouble(LDBIZ_FROZEN_AMT_FLOAT,v_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_UNFROZ_AMT_FLOAT,v_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_UNFROZ_AMT_FLOAT,v_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_CAPT_AMT_FLOAT,v_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_RELEAS_AMT_FLOAT,v_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_FROZEN_AMT_FLOAT,v_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_UNFROZ_AMT_FLOAT,v_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_CAPT_AMT_FLOAT,v_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_TRADE_RELEAS_AMT_FLOAT,v_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_CAPT_AMT_FLOAT,v_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_RELEAS_AMT_FLOAT,v_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.t0oporallowexgrpcap", lpPubMsg);

        //遍历推持仓明细
        //调用过程[事务_交易证券_主推接口_获取t0持仓明细信息]
        //组织事务请求
        if(lpTSCall1Ans44)
        {
          lpTSCall1Ans44->FreeMsg();
          lpTSCall1Ans44=NULL;
        }
        lpTSCall1Req44=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.36", 0);
        lpTSCall1Req44->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req44->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req44->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req44->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req44->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req44->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req44->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req44->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req44->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req44->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req44->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req44->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req44, &lpTSCall1Ans44, 5000);
        if(!lpTSCall1Ans44)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.36]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans44->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans44->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans44->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans44->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans44->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans44->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans44->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans44->GetString(LDBIZ_ERROR_INFO_STR));


        // [获取结果集][lpMainMsg]
        lpMainMsg=lpTSCall1Ans44->GetGroup(LDTAG_NO_RESULTSET);


        // [遍历结果集开始][lpMainMsg]
        iRecordCount = lpMainMsg->GetRecordCount();
        for (int i = 0; i < iRecordCount;i++) 
        {
            IRecord* lpRecord =lpMainMsg->GetRecord(i);
            if(lpRecord)
            {

                //获取记录字段值
                v_row_id = lpRecord->GetInt64(LDBIZ_ROW_ID_INT64);
                v_co_no = lpRecord->GetInt32(LDBIZ_CO_NO_INT);
                v_pd_no = lpRecord->GetInt32(LDBIZ_PD_NO_INT);
                v_exch_no = lpRecord->GetInt32(LDBIZ_EXCH_NO_INT);
                strcpy(v_stock_code, lpRecord->GetString(LDBIZ_STOCK_CODE_STR));
                v_lngsht_type = lpRecord->GetInt32(LDBIZ_LNGSHT_TYPE_INT);
                v_curr_qty = lpRecord->GetDouble(LDBIZ_CURR_QTY_FLOAT);
                v_open_posi_date = lpRecord->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
                v_open_posi_time = lpRecord->GetInt32(LDBIZ_OPEN_POSI_TIME_INT);
                v_open_posi_price = lpRecord->GetDouble(LDBIZ_OPEN_POSI_PRICE_FLOAT);
                v_open_posi_value = lpRecord->GetDouble(LDBIZ_OPEN_POSI_VALUE_FLOAT);
                v_open_posi_fee = lpRecord->GetDouble(LDBIZ_OPEN_POSI_FEE_FLOAT);
                v_close_posi_qty = lpRecord->GetDouble(LDBIZ_CLOSE_POSI_QTY_FLOAT);
                v_close_posi_market_value = lpRecord->GetDouble(LDBIZ_CLOSE_POSI_MARKET_VALUE_FLOAT);
                v_close_posi_fee = lpRecord->GetDouble(LDBIZ_CLOSE_POSI_FEE_FLOAT);
                strcpy(v_strike_no, lpRecord->GetString(LDBIZ_STRIKE_NO_STR));
                v_realize_pandl = lpRecord->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
                v_over_night_pandl = lpRecord->GetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT);
                strcpy(v_posi_status, lpRecord->GetString(LDBIZ_POSI_STATUS_STR));
                strcpy(v_remark_info, lpRecord->GetString(LDBIZ_REMARK_INFO_STR));
                v_update_times = lpRecord->GetInt32(LDBIZ_UPDATE_TIMES_INT);


            // [主动推送][secu.t0posidetail][证券主推_增强交易_t0持仓明细主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.702", 0);
            lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
            lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
            lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_LNGSHT_TYPE_INT,v_lngsht_type);
            lpPubMsg->SetDouble(LDBIZ_CURR_QTY_FLOAT,v_curr_qty);
            lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
            lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_TIME_INT,v_open_posi_time);
            lpPubMsg->SetDouble(LDBIZ_OPEN_POSI_PRICE_FLOAT,v_open_posi_price);
            lpPubMsg->SetDouble(LDBIZ_OPEN_POSI_VALUE_FLOAT,v_open_posi_value);
            lpPubMsg->SetDouble(LDBIZ_OPEN_POSI_FEE_FLOAT,v_open_posi_fee);
            lpPubMsg->SetDouble(LDBIZ_CLOSE_POSI_QTY_FLOAT,v_close_posi_qty);
            lpPubMsg->SetDouble(LDBIZ_CLOSE_POSI_MARKET_VALUE_FLOAT,v_close_posi_market_value);
            lpPubMsg->SetDouble(LDBIZ_CLOSE_POSI_FEE_FLOAT,v_close_posi_fee);
            lpPubMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
            lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
            lpPubMsg->SetDouble(LDBIZ_OVER_NIGHT_PANDL_FLOAT,v_over_night_pandl);
            lpPubMsg->SetString(LDBIZ_POSI_STATUS_STR,v_posi_status);
            lpPubMsg->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.t0posidetail", lpPubMsg);


        // [遍历结果集结束][lpMainMsg]
            }
        }

    // end if;
    }

    //组合交易主推(组合持仓表,组合收益表)

    // if @订单操作方式# = 《订单操作方式-组合买入》 or @订单操作方式# = 《订单操作方式-组合卖出》 or @订单操作方式# = 《订单操作方式-组合调仓》 then
    if (strcmp(v_order_oper_way , "26")==0 || strcmp(v_order_oper_way , "27")==0 || strcmp(v_order_oper_way , "28")==0)
    {
        //调用过程[事务_交易证券_主推接口_获取组合持仓]
        //组织事务请求
        if(lpTSCall1Ans45)
        {
          lpTSCall1Ans45->FreeMsg();
          lpTSCall1Ans45=NULL;
        }
        lpTSCall1Req45=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.43", 0);
        lpTSCall1Req45->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req45->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req45->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req45->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req45->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req45->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req45->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req45->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req45->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req45->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req45->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req45->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpTSCall1Req45->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req45->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
        lpTSCall1Req45->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        glpTSSubcallSerives->SubCall(lpTSCall1Req45, &lpTSCall1Ans45, 5000);
        if(!lpTSCall1Ans45)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.43]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans45->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans45->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans45->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans45->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans45->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans45->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans45->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans45->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans45->GetInt64(LDBIZ_ROW_ID_INT64);
        v_co_no = lpTSCall1Ans45->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans45->GetInt32(LDBIZ_PD_NO_INT);
        strcpy(v_stock_code, lpTSCall1Ans45->GetString(LDBIZ_STOCK_CODE_STR));
        v_exch_no = lpTSCall1Ans45->GetInt32(LDBIZ_EXCH_NO_INT);
        v_curr_qty = lpTSCall1Ans45->GetDouble(LDBIZ_CURR_QTY_FLOAT);
        v_posi_qty = lpTSCall1Ans45->GetDouble(LDBIZ_POSI_QTY_FLOAT);
        v_frozen_qty = lpTSCall1Ans45->GetDouble(LDBIZ_FROZEN_QTY_FLOAT);
        v_unfroz_qty = lpTSCall1Ans45->GetDouble(LDBIZ_UNFROZ_QTY_FLOAT);
        v_pre_settle_qty = lpTSCall1Ans45->GetDouble(LDBIZ_PRE_SETTLE_QTY_FLOAT);
        v_trade_frozen_qty = lpTSCall1Ans45->GetDouble(LDBIZ_TRADE_FROZEN_QTY_FLOAT);
        v_trade_unfroz_qty = lpTSCall1Ans45->GetDouble(LDBIZ_TRADE_UNFROZ_QTY_FLOAT);
        v_trade_capt_qty = lpTSCall1Ans45->GetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT);
        v_trade_releas_qty = lpTSCall1Ans45->GetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT);
        v_strike_capt_qty = lpTSCall1Ans45->GetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT);
        v_strike_releas_qty = lpTSCall1Ans45->GetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT);
        v_strike_frozen_qty = lpTSCall1Ans45->GetDouble(LDBIZ_STRIKE_FROZEN_QTY_FLOAT);
        v_strike_unfroz_qty = lpTSCall1Ans45->GetDouble(LDBIZ_STRIKE_UNFROZ_QTY_FLOAT);
        v_realize_pandl = lpTSCall1Ans45->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
        v_cost_amt = lpTSCall1Ans45->GetDouble(LDBIZ_COST_AMT_FLOAT);
        v_intrst_cost_amt = lpTSCall1Ans45->GetDouble(LDBIZ_INTRST_COST_AMT_FLOAT);
        v_intrst_pandl = lpTSCall1Ans45->GetDouble(LDBIZ_INTRST_PANDL_FLOAT);
        v_update_times = lpTSCall1Ans45->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.comboposi][证券主推_组合_组合持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.905", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpPubMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
        lpPubMsg->SetDouble(LDBIZ_POSI_QTY_FLOAT,v_posi_qty);
        lpPubMsg->SetDouble(LDBIZ_CURR_QTY_FLOAT,v_curr_qty);
        lpPubMsg->SetDouble(LDBIZ_FROZEN_QTY_FLOAT,v_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_UNFROZ_QTY_FLOAT,v_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_PRE_SETTLE_QTY_FLOAT,v_pre_settle_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_FROZEN_QTY_FLOAT,v_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_UNFROZ_QTY_FLOAT,v_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_CAPT_QTY_FLOAT,v_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_TRADE_RELEAS_QTY_FLOAT,v_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_CAPT_QTY_FLOAT,v_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_RELEAS_QTY_FLOAT,v_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_FROZEN_QTY_FLOAT,v_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_UNFROZ_QTY_FLOAT,v_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_COST_AMT_FLOAT,v_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_INTRST_COST_AMT_FLOAT,v_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_INTRST_PANDL_FLOAT,v_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.comboposi", lpPubMsg);

        //调用过程[事务_交易证券_主推接口_获取组合收益]
        //组织事务请求
        if(lpTSCall1Ans46)
        {
          lpTSCall1Ans46->FreeMsg();
          lpTSCall1Ans46=NULL;
        }
        lpTSCall1Req46=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.44", 0);
        lpTSCall1Req46->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req46->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req46->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req46->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req46->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req46->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req46->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req46->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req46->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req46->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req46->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req46->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req46->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        glpTSSubcallSerives->SubCall(lpTSCall1Req46, &lpTSCall1Ans46, 5000);
        if(!lpTSCall1Ans46)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.44]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans46->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans46->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans46->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans46->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans46->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans46->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans46->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans46->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans46->GetInt64(LDBIZ_ROW_ID_INT64);
        v_open_posi_date = lpTSCall1Ans46->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
        v_combo_copies = lpTSCall1Ans46->GetDouble(LDBIZ_COMBO_COPIES_FLOAT);
        strcpy(v_combo_status, lpTSCall1Ans46->GetString(LDBIZ_COMBO_STATUS_STR));
        v_combo_cost = lpTSCall1Ans46->GetDouble(LDBIZ_COMBO_COST_FLOAT);
        v_combo_market_value = lpTSCall1Ans46->GetDouble(LDBIZ_COMBO_MARKET_VALUE_FLOAT);
        v_realize_pandl = lpTSCall1Ans46->GetDouble(LDBIZ_REALIZE_PANDL_FLOAT);
        v_sum_realize_pandl = lpTSCall1Ans46->GetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT);
        v_update_times = lpTSCall1Ans46->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.comboincome][证券主推_组合_组合收益主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.906", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_OPEN_POSI_DATE_INT,v_open_posi_date);
        lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpPubMsg->SetDouble(LDBIZ_COMBO_COPIES_FLOAT,v_combo_copies);
        lpPubMsg->SetString(LDBIZ_COMBO_STATUS_STR,v_combo_status);
        lpPubMsg->SetDouble(LDBIZ_COMBO_COST_FLOAT,v_combo_cost);
        lpPubMsg->SetDouble(LDBIZ_COMBO_MARKET_VALUE_FLOAT,v_combo_market_value);
        lpPubMsg->SetDouble(LDBIZ_REALIZE_PANDL_FLOAT,v_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_SUM_REALIZE_PANDL_FLOAT,v_sum_realize_pandl);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.comboincome", lpPubMsg);

    // end if;
    }


END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans47)
        {
          lpTSCall1Ans47->FreeMsg();
          lpTSCall1Ans47=NULL;
        }
        lpTSCall1Req47=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req47->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req47->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req47->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req47->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req47->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req47->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req47->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req47->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req47->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req47->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req47, &lpTSCall1Ans47, 5000);
        if (lpTSCall1Ans47)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans47->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans47->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans47->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans47->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans47->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    if(lpTSCall1Ans3)
        lpTSCall1Ans3->FreeMsg();
    if(lpTSCall1Ans4)
        lpTSCall1Ans4->FreeMsg();
    if(lpTSCall1Ans5)
        lpTSCall1Ans5->FreeMsg();
    if(lpTSCall1Ans6)
        lpTSCall1Ans6->FreeMsg();
    if(lpTSCall1Ans7)
        lpTSCall1Ans7->FreeMsg();
    if(lpTSCall1Ans8)
        lpTSCall1Ans8->FreeMsg();
    if(lpTSCall1Ans9)
        lpTSCall1Ans9->FreeMsg();
    if(lpTSCall1Ans10)
        lpTSCall1Ans10->FreeMsg();
    if(lpTSCall1Ans11)
        lpTSCall1Ans11->FreeMsg();
    if(lpTSCall1Ans12)
        lpTSCall1Ans12->FreeMsg();
    if(lpTSCall1Ans13)
        lpTSCall1Ans13->FreeMsg();
    if(lpTSCall1Ans14)
        lpTSCall1Ans14->FreeMsg();
    if(lpTSCall1Ans15)
        lpTSCall1Ans15->FreeMsg();
    if(lpTSCall1Ans16)
        lpTSCall1Ans16->FreeMsg();
    if(lpTSCall1Ans17)
        lpTSCall1Ans17->FreeMsg();
    if(lpTSCall1Ans18)
        lpTSCall1Ans18->FreeMsg();
    if(lpTSCall1Ans19)
        lpTSCall1Ans19->FreeMsg();
    if(lpTSCall1Ans20)
        lpTSCall1Ans20->FreeMsg();
    if(lpTSCall1Ans21)
        lpTSCall1Ans21->FreeMsg();
    if(lpTSCall1Ans22)
        lpTSCall1Ans22->FreeMsg();
    if(lpTSCall1Ans23)
        lpTSCall1Ans23->FreeMsg();
    if(lpTSCall1Ans24)
        lpTSCall1Ans24->FreeMsg();
    if(lpTSCall1Ans25)
        lpTSCall1Ans25->FreeMsg();
    if(lpTSCall1Ans26)
        lpTSCall1Ans26->FreeMsg();
    if(lpTSCall1Ans27)
        lpTSCall1Ans27->FreeMsg();
    if(lpTSCall1Ans28)
        lpTSCall1Ans28->FreeMsg();
    if(lpTSCall1Ans29)
        lpTSCall1Ans29->FreeMsg();
    if(lpTSCall1Ans30)
        lpTSCall1Ans30->FreeMsg();
    if(lpTSCall1Ans31)
        lpTSCall1Ans31->FreeMsg();
    if(lpTSCall1Ans32)
        lpTSCall1Ans32->FreeMsg();
    if(lpTSCall1Ans33)
        lpTSCall1Ans33->FreeMsg();
    if(lpTSCall1Ans34)
        lpTSCall1Ans34->FreeMsg();
    if(lpTSCall1Ans35)
        lpTSCall1Ans35->FreeMsg();
    if(lpTSCall1Ans36)
        lpTSCall1Ans36->FreeMsg();
    if(lpTSCall1Ans37)
        lpTSCall1Ans37->FreeMsg();
    if(lpTSCall1Ans38)
        lpTSCall1Ans38->FreeMsg();
    if(lpTSCall1Ans39)
        lpTSCall1Ans39->FreeMsg();
    if(lpTSCall1Ans40)
        lpTSCall1Ans40->FreeMsg();
    if(lpTSCall1Ans41)
        lpTSCall1Ans41->FreeMsg();
    if(lpTSCall1Ans42)
        lpTSCall1Ans42->FreeMsg();
    if(lpTSCall1Ans43)
        lpTSCall1Ans43->FreeMsg();
    if(lpTSCall1Ans44)
        lpTSCall1Ans44->FreeMsg();
    if(lpTSCall1Ans45)
        lpTSCall1Ans45->FreeMsg();
    if(lpTSCall1Ans46)
        lpTSCall1Ans46->FreeMsg();
    if(lpTSCall1Ans47)
        lpTSCall1Ans47->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_导入成交补单
int LD_CALL_MODE fnFunc5(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    char v_stock_acco[17];
    char v_stock_code[7];
    int v_strike_date;
    int v_strike_time;
    char v_strike_no[65];
    int v_report_date;
    char v_report_no[33];
    int v_order_dir;
    double v_strike_price;
    double v_strike_qty;
    double v_strike_amt;
    char v_rsp_info[256];
    int v_strike_deal_type;
    int v_asset_acco_no;
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_init_date;
    char v_co_busi_config_str[65];
    double v_tmp_strike_qty;
    double v_tmp_strike_price;
    double v_tmp_strike_amt;
    char v_sys_config_str[65];
    char v_crncy_type[4];
    char v_exch_crncy_type[4];
    double v_buy_ref_rate;
    double v_sell_ref_rate;
    int v_stock_code_no;
    int v_stock_type;
    int v_capit_reback_days;
    int v_posi_reback_days;
    int v_trade_code_no;
    int v_target_code_no;
    int v_intrst_days;
    int v_net_price_flag;
    double v_bond_accr_intrst;
    int v_bond_rate_type;
    double v_par_value;
    double v_impawn_ratio;
    int v_repo_days;
    int v_repo_cale_days;
    int v_repo_back_date;
    int v_bond_qty_unit_set;
    int v_apply_date;
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    char v_original_stock_acco[17];
    int v_stock_acco_no;
    char v_original_stock_code[7];
    int v_asset_type;
    int64 v_comm_id;
    int v_order_date;
    int v_order_time;
    int64 v_order_id;
    int v_order_batch_no;
    double v_order_price;
    double v_order_qty;
    int v_original_order_dir;
    double v_order_frozen_amt;
    char v_order_status[3];
    int v_price_type;
    int v_busi_opor_no;
    char v_order_oper_way[3];
    int64 v_rsp_id;
    int v_exter_comm_flag;
    int64 v_external_no;
    char v_combo_code[33];
    int64 v_combo_posi_id;
    int64 v_strategy_id;
    char v_contra_no[33];
    int v_asset_acco_type;
    int v_exist_debt_flag;
    double v_exgp_cost_amt;
    double v_exgp_intrst_cost_amt;
    double v_exgp_curr_qty;
    double v_asac_cost_amt;
    double v_asac_intrst_cost_amt;
    double v_asac_curr_qty;
    double v_total_strike_amt;
    double v_total_strike_qty;
    int64 v_strike_id;
    int v_report_time;
    int v_comm_date;
    int v_comm_batch_no;
    int v_comm_executor;
    char v_target_code[7];
    double v_order_frozen_qty;
    double v_strike_bond_accr_intrst;
    double v_wtdraw_qty;
    int v_cost_calc_type;
    int v_update_times;
    double v_trade_occur_amt;
    int v_open_posi_date;
    double v_tmp_all_fee;
    double v_tmp_trade_commis;
    double v_tmp_stamp_tax;
    double v_tmp_trans_fee;
    double v_tmp_brkage_fee;
    double v_tmp_SEC_charges;
    double v_tmp_other_fee;
    double v_tmp_other_commis;
    double v_trade_commis;
    double v_all_fee;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    double v_tmp_trade_cost_fee;
    double v_tmp_trade_system_use_fee;
    double v_tmp_trade_tax;
    double v_tmp_stock_settle_fee;
    int v_tmp_update_times;
    int v_record_valid_flag;
    double v_curr_strike_price;
    double v_curr_strike_amt;
    double v_curr_strike_qty;
    char v_wtdraw_status[3];
    int v_tmp_order_batch_no;
    int64 v_sum_order_row_id;
    int v_sum_order_opor_no;
    int v_sum_order_co_no;
    int v_sum_order_pd_no;
    int v_sum_order_exch_group_no;
    int v_sum_order_asset_acco_no;
    int v_sum_order_pass_no;
    char v_sum_order_exch_crncy_type[4];
    int v_sum_order_stock_code_no;
    int v_sum_order_trade_code_no;
    int v_sum_order_target_code_no;
    int64 v_sum_order_external_no;
    int v_sum_order_date;
    int v_sum_order_batch_no;
    int v_sum_order_dir;
    int v_sum_order_price_type;
    double v_sum_order_price;
    double v_sum_order_qty;
    char v_order_sum_status[3];
    double v_sum_order_wtdraw_qty;
    double v_sum_order_waste_qty;
    double v_sum_order_strike_amt;
    double v_sum_order_strike_qty;
    double v_sum_order_strike_aver_price;
    int v_sum_order_net_price_flag;
    double v_sum_order_bond_accr_intrst;
    int v_sum_order_bond_rate_type;
    double v_sum_order_par_value;
    double v_sum_order_impawn_ratio;
    char v_sum_order_oper_way[3];
    int v_sum_order_update_times;
    int64 v_sum_strike_row_id;
    int v_sum_strike_opor_no;
    int v_sum_strike_co_no;
    int v_sum_strike_pd_no;
    int v_sum_strike_exch_group_no;
    int v_sum_strike_asset_acco_no;
    int v_sum_strike_pass_no;
    char v_sum_strike_out_acco[33];
    int v_sum_strike_stock_acco_no;
    int v_sum_strike_stock_code_no;
    int64 v_sum_strike_comm_id;
    int v_sum_strike_report_date;
    char v_sum_strike_report_no[33];
    int v_sum_strike_order_date;
    int64 v_sum_strike_order_id;
    int v_sum_strike_order_dir;
    double v_sum_strike_order_price;
    double v_sum_strike_order_qty;
    double v_sum_strike_strike_qty;
    double v_sum_strike_strike_amt;
    double v_sum_strike_all_fee;
    double v_sum_strike_stamp_tax;
    double v_sum_strike_trans_fee;
    double v_sum_strike_brkage_fee;
    double v_sum_strike_SEC_charges;
    double v_sum_strike_other_fee;
    double v_sum_strike_trade_commis;
    double v_sum_strike_other_commis;
    double v_sum_trade_tax;
    double v_sum_trade_cost_fee;
    double v_sum_trade_system_use_fee;
    double v_sum_stock_settle_fee;
    int v_sum_strike_net_price_flag;
    double v_sum_strike_bond_accr_intrst;
    int v_sum_strike_bond_rate_type;
    char v_sum_strike_order_oper_way[3];
    int v_sum_strike_exter_comm_flag;
    int v_sum_strike_update_times;
    int v_sum_strike_order_batch_no;
    int64 v_sum_external_no;
    int v_comm_time;
    int v_comm_opor;
    int v_comm_dir;
    double v_comm_limit_price;
    double v_limit_actual_price;
    double v_comm_qty;
    double v_comm_amt;
    double v_comm_cancel_qty;
    double v_comm_frozen_amt;
    double v_comm_frozen_qty;
    char v_strike_status[3];
    char v_comm_status[3];
    int v_comm_begin_date;
    int v_comm_end_date;
    int v_comm_begin_time;
    int v_comm_end_time;
    int v_comm_comple_date;
    int v_comm_comple_time;
    int v_comm_appr_date;
    int v_comm_appr_time;
    char v_comm_appr_status[3];
    int v_comm_appr_oper;
    char v_comm_appr_remark[256];
    int64 v_basket_id;
    char v_comm_oper_way[3];
    int v_comm_comple_flag;
    double v_strategy_capt_qty;
    double v_strategy_order_qty;
    char v_comm_remark_info[1025];
    int v_disp_opor;
    int v_disp_status;
    int v_read_flag;
    int64 v_sum_comm_row_id;
    int v_sum_comm_co_no;
    int v_sum_comm_pd_no;
    int v_sum_comm_exch_group_no;
    int v_sum_comm_asset_acco_no;
    int v_sum_comm_pass_no;
    char v_sum_comm_out_acco[33];
    char v_sum_comm_exch_crncy_type[4];
    int v_sum_comm_stock_code_no;
    int v_sum_comm_date;
    int v_sum_comm_time;
    int v_sum_comm_batch_no;
    int v_sum_comm_opor;
    int v_sum_comm_executor;
    int v_sum_comm_dir;
    double v_sum_comm_limit_price;
    double v_sum_comm_qty;
    double v_sum_comm_amt;
    double v_sum_comm_order_qty;
    double v_sum_comm_cancel_qty;
    double v_sum_comm_await_cancel_qty;
    double v_sum_comm_strike_amt;
    double v_sum_comm_strike_qty;
    char v_sum_comm_strike_status[3];
    char v_comm_sum_status[3];
    int v_sum_comm_begin_date;
    int v_sum_comm_end_date;
    int v_sum_comm_begin_time;
    int v_sum_comm_end_time;
    int v_sum_comm_comple_date;
    int v_sum_comm_comple_time;
    int v_sum_comm_max_comm_comple_date;
    int v_sum_comm_max_comm_comple_time;
    int v_sum_comm_appr_date;
    int v_sum_comm_appr_time;
    double v_sum_comm_appr_qty;
    char v_comm_sum_approve_status[3];
    int64 v_sum_comm_basket_id;
    int v_sum_comm_net_price_flag;
    double v_sum_comm_bond_accr_intrst;
    int v_sum_comm_bond_rate_type;
    char v_sum_comm_oper_way[3];
    int v_sum_comm_exter_comm_flag;
    double v_sum_buy_order_qty;
    double v_sum_sell_order_qty;
    double v_sum_buy_comm_qty;
    double v_sum_sell_comm_qty;
    double v_sum_buy_strike_qty;
    double v_sum_sell_strike_qty;
    double v_sum_buy_strike_amt;
    double v_sum_sell_strike_amt;
    double v_sum_buy_comm_amt;
    double v_sum_sell_comm_amt;
    char v_sum_comm_remark_info[256];
    int v_sum_comm_update_times;
    char v_acco_concat_info[4097];
    int64 v_exgp_cash_id;
    double v_exgp_frozen_amt;
    double v_exgp_unfroz_amt;
    double v_exgp_comm_frozen_amt;
    double v_exgp_comm_unfroz_amt;
    double v_exgp_comm_capt_amt;
    double v_exgp_comm_releas_amt;
    double v_exgp_trade_frozen_amt;
    double v_exgp_trade_unfroz_amt;
    double v_exgp_trade_capt_amt;
    double v_exgp_trade_releas_amt;
    double v_exgp_strike_capt_amt;
    double v_exgp_strike_releas_amt;
    int v_exgp_cash_update_times;
    int64 v_exgp_posi_id;
    double v_exgp_frozen_qty;
    double v_exgp_unfroz_qty;
    double v_exgp_comm_frozen_qty;
    double v_exgp_comm_unfroz_qty;
    double v_exgp_comm_capt_qty;
    double v_exgp_comm_releas_qty;
    double v_exgp_trade_frozen_qty;
    double v_exgp_trade_unfroz_qty;
    double v_exgp_trade_capt_qty;
    double v_exgp_trade_releas_qty;
    double v_exgp_strike_capt_qty;
    double v_exgp_strike_releas_qty;
    double v_exgp_strike_frozen_qty;
    double v_exgp_strike_unfroz_qty;
    double v_exgp_realize_pandl;
    double v_exgp_intrst_pandl;
    int v_exgp_posi_update_times;
    int64 v_asac_cash_id;
    double v_asac_frozen_amt;
    double v_asac_unfroz_amt;
    double v_asac_comm_frozen_amt;
    double v_asac_comm_unfroz_amt;
    double v_asac_comm_capt_amt;
    double v_asac_comm_releas_amt;
    double v_asac_trade_frozen_amt;
    double v_asac_trade_unfroz_amt;
    double v_asac_trade_capt_amt;
    double v_asac_trade_releas_amt;
    double v_asac_strike_capt_amt;
    double v_asac_strike_releas_amt;
    int v_asac_cash_update_times;
    int64 v_asac_posi_id;
    double v_asac_frozen_qty;
    double v_asac_unfroz_qty;
    double v_asac_comm_frozen_qty;
    double v_asac_comm_unfroz_qty;
    double v_asac_comm_capt_qty;
    double v_asac_comm_releas_qty;
    double v_asac_trade_frozen_qty;
    double v_asac_trade_unfroz_qty;
    double v_asac_trade_capt_qty;
    double v_asac_trade_releas_qty;
    double v_asac_strike_capt_qty;
    double v_asac_strike_releas_qty;
    double v_asac_strike_frozen_qty;
    double v_asac_strike_unfroz_qty;
    double v_asac_realize_pandl;
    double v_asac_intrst_pandl;
    int v_asac_posi_update_times;
    int64 v_exgp_target_posi_id;
    double v_exgp_target_frozen_qty;
    double v_exgp_target_unfroz_qty;
    double v_exgp_target_comm_frozen_qty;
    double v_exgp_target_comm_unfroz_qty;
    double v_exgp_target_comm_capt_qty;
    double v_exgp_target_comm_releas_qty;
    double v_exgp_target_trade_frozen_qty;
    double v_exgp_target_trade_unfroz_qty;
    double v_exgp_target_trade_capt_qty;
    double v_exgp_target_trade_releas_qty;
    double v_exgp_target_strike_capt_qty;
    double v_exgp_target_strike_releas_qty;
    double v_exgp_target_strike_frozen_qty;
    double v_exgp_target_strike_unfroz_qty;
    double v_exgp_target_realize_pandl;
    double v_exgp_target_cost_amt;
    double v_exgp_target_intrst_cost_amt;
    double v_exgp_target_intrst_pandl;
    int v_exgp_target_posi_update_times;
    int64 v_asac_target_posi_id;
    double v_asac_target_frozen_qty;
    double v_asac_target_unfroz_qty;
    double v_asac_target_comm_frozen_qty;
    double v_asac_target_comm_unfroz_qty;
    double v_asac_target_comm_capt_qty;
    double v_asac_target_comm_releas_qty;
    double v_asac_target_trade_frozen_qty;
    double v_asac_target_trade_unfroz_qty;
    double v_asac_target_trade_capt_qty;
    double v_asac_target_trade_releas_qty;
    double v_asac_target_strike_capt_qty;
    double v_asac_target_strike_releas_qty;
    double v_asac_target_strike_frozen_qty;
    double v_asac_target_strike_unfroz_qty;
    double v_asac_target_realize_pandl;
    double v_asac_target_cost_amt;
    double v_asac_target_intrst_cost_amt;
    double v_asac_target_intrst_pandl;
    int v_asac_target_posi_update_times;
    double v_exgp_put_impawn_qty;
    double v_asac_put_impawn_qty;
    int64 v_repo_strike_id;
    double v_exch_rate;
    double v_repo_qty;
    double v_repo_amt;
    double v_repo_rate;
    int v_repo_trade_date;
    int64 v_repo_order_id;
    double v_repo_back_amt;
    double v_repo_back_intrst;
    int v_repo_back_trade_date;
    char v_repo_status[3];
    int64 v_bond_repo_id;
    char v_log_error_code[33];
    char v_log_error_info[256];


IFastMessage* lpPubMsg = NULL;
int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    strcpy(v_stock_acco, " ");
    strcpy(v_stock_code, " ");
    v_strike_date=0;
    v_strike_time=0;
    strcpy(v_strike_no, " ");
    v_report_date=0;
    strcpy(v_report_no, " ");
    v_order_dir=0;
    v_strike_price=0;
    v_strike_qty=0;
    v_strike_amt=0;
    strcpy(v_rsp_info, " ");
    v_strike_deal_type=0;
    v_asset_acco_no=0;
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_init_date=0;
    strcpy(v_co_busi_config_str, " ");
    v_tmp_strike_qty=0;
    v_tmp_strike_price=0;
    v_tmp_strike_amt=0;
    strcpy(v_sys_config_str, " ");
    strcpy(v_crncy_type, "CNY");
    strcpy(v_exch_crncy_type, "CNY");
    v_buy_ref_rate=0;
    v_sell_ref_rate=0;
    v_stock_code_no=0;
    v_stock_type=0;
    v_capit_reback_days=0;
    v_posi_reback_days=0;
    v_trade_code_no=0;
    v_target_code_no=0;
    v_intrst_days=0;
    v_net_price_flag=0;
    v_bond_accr_intrst=0;
    v_bond_rate_type=0;
    v_par_value=0;
    v_impawn_ratio=0;
    v_repo_days=0;
    v_repo_cale_days=0;
    v_repo_back_date=0;
    v_bond_qty_unit_set=0;
    v_apply_date=0;
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    strcpy(v_original_stock_acco, " ");
    v_stock_acco_no=0;
    strcpy(v_original_stock_code, " ");
    v_asset_type=0;
    v_comm_id=0;
    v_order_date=0;
    v_order_time=0;
    v_order_id=0;
    v_order_batch_no=0;
    v_order_price=0;
    v_order_qty=0;
    v_original_order_dir=0;
    v_order_frozen_amt=0;
    strcpy(v_order_status, "0");
    v_price_type=0;
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    v_rsp_id=0;
    v_exter_comm_flag=0;
    v_external_no=0;
    strcpy(v_combo_code, " ");
    v_combo_posi_id=0;
    v_strategy_id=0;
    strcpy(v_contra_no, " ");
    v_asset_acco_type=0;
    v_exist_debt_flag=0;
    v_exgp_cost_amt=0;
    v_exgp_intrst_cost_amt=0;
    v_exgp_curr_qty=0;
    v_asac_cost_amt=0;
    v_asac_intrst_cost_amt=0;
    v_asac_curr_qty=0;
    v_total_strike_amt=0;
    v_total_strike_qty=0;
    v_strike_id=0;
    v_report_time=0;
    v_comm_date=0;
    v_comm_batch_no=0;
    v_comm_executor=0;
    strcpy(v_target_code, " ");
    v_order_frozen_qty=0;
    v_strike_bond_accr_intrst=0;
    v_wtdraw_qty=0;
    v_cost_calc_type=0;
    v_update_times=1;
    v_trade_occur_amt=0;
    v_open_posi_date=0;
    v_tmp_all_fee=0;
    v_tmp_trade_commis=0;
    v_tmp_stamp_tax=0;
    v_tmp_trans_fee=0;
    v_tmp_brkage_fee=0;
    v_tmp_SEC_charges=0;
    v_tmp_other_fee=0;
    v_tmp_other_commis=0;
    v_trade_commis=0;
    v_all_fee=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_tmp_trade_cost_fee=0;
    v_tmp_trade_system_use_fee=0;
    v_tmp_trade_tax=0;
    v_tmp_stock_settle_fee=0;
    v_tmp_update_times=1;
    v_record_valid_flag=0;
    v_curr_strike_price=0;
    v_curr_strike_amt=0;
    v_curr_strike_qty=0;
    strcpy(v_wtdraw_status, "0");
    v_tmp_order_batch_no=0;
    v_sum_order_row_id=0;
    v_sum_order_opor_no=0;
    v_sum_order_co_no=0;
    v_sum_order_pd_no=0;
    v_sum_order_exch_group_no=0;
    v_sum_order_asset_acco_no=0;
    v_sum_order_pass_no=0;
    strcpy(v_sum_order_exch_crncy_type, "CNY");
    v_sum_order_stock_code_no=0;
    v_sum_order_trade_code_no=0;
    v_sum_order_target_code_no=0;
    v_sum_order_external_no=0;
    v_sum_order_date=0;
    v_sum_order_batch_no=0;
    v_sum_order_dir=0;
    v_sum_order_price_type=0;
    v_sum_order_price=0;
    v_sum_order_qty=0;
    strcpy(v_order_sum_status, "0");
    v_sum_order_wtdraw_qty=0;
    v_sum_order_waste_qty=0;
    v_sum_order_strike_amt=0;
    v_sum_order_strike_qty=0;
    v_sum_order_strike_aver_price=0;
    v_sum_order_net_price_flag=0;
    v_sum_order_bond_accr_intrst=0;
    v_sum_order_bond_rate_type=0;
    v_sum_order_par_value=0;
    v_sum_order_impawn_ratio=0;
    strcpy(v_sum_order_oper_way, " ");
    v_sum_order_update_times=1;
    v_sum_strike_row_id=0;
    v_sum_strike_opor_no=0;
    v_sum_strike_co_no=0;
    v_sum_strike_pd_no=0;
    v_sum_strike_exch_group_no=0;
    v_sum_strike_asset_acco_no=0;
    v_sum_strike_pass_no=0;
    strcpy(v_sum_strike_out_acco, " ");
    v_sum_strike_stock_acco_no=0;
    v_sum_strike_stock_code_no=0;
    v_sum_strike_comm_id=0;
    v_sum_strike_report_date=0;
    strcpy(v_sum_strike_report_no, " ");
    v_sum_strike_order_date=0;
    v_sum_strike_order_id=0;
    v_sum_strike_order_dir=0;
    v_sum_strike_order_price=0;
    v_sum_strike_order_qty=0;
    v_sum_strike_strike_qty=0;
    v_sum_strike_strike_amt=0;
    v_sum_strike_all_fee=0;
    v_sum_strike_stamp_tax=0;
    v_sum_strike_trans_fee=0;
    v_sum_strike_brkage_fee=0;
    v_sum_strike_SEC_charges=0;
    v_sum_strike_other_fee=0;
    v_sum_strike_trade_commis=0;
    v_sum_strike_other_commis=0;
    v_sum_trade_tax=0;
    v_sum_trade_cost_fee=0;
    v_sum_trade_system_use_fee=0;
    v_sum_stock_settle_fee=0;
    v_sum_strike_net_price_flag=0;
    v_sum_strike_bond_accr_intrst=0;
    v_sum_strike_bond_rate_type=0;
    strcpy(v_sum_strike_order_oper_way, " ");
    v_sum_strike_exter_comm_flag=0;
    v_sum_strike_update_times=1;
    v_sum_strike_order_batch_no=0;
    v_sum_external_no=0;
    v_comm_time=0;
    v_comm_opor=0;
    v_comm_dir=0;
    v_comm_limit_price=0;
    v_limit_actual_price=0;
    v_comm_qty=0;
    v_comm_amt=0;
    v_comm_cancel_qty=0;
    v_comm_frozen_amt=0;
    v_comm_frozen_qty=0;
    strcpy(v_strike_status, "0");
    strcpy(v_comm_status, "0");
    v_comm_begin_date=0;
    v_comm_end_date=0;
    v_comm_begin_time=0;
    v_comm_end_time=0;
    v_comm_comple_date=0;
    v_comm_comple_time=0;
    v_comm_appr_date=0;
    v_comm_appr_time=0;
    strcpy(v_comm_appr_status, " ");
    v_comm_appr_oper=0;
    strcpy(v_comm_appr_remark, " ");
    v_basket_id=0;
    strcpy(v_comm_oper_way, " ");
    v_comm_comple_flag=0;
    v_strategy_capt_qty=0;
    v_strategy_order_qty=0;
    strcpy(v_comm_remark_info, " ");
    v_disp_opor=0;
    v_disp_status=0;
    v_read_flag=0;
    v_sum_comm_row_id=0;
    v_sum_comm_co_no=0;
    v_sum_comm_pd_no=0;
    v_sum_comm_exch_group_no=0;
    v_sum_comm_asset_acco_no=0;
    v_sum_comm_pass_no=0;
    strcpy(v_sum_comm_out_acco, " ");
    strcpy(v_sum_comm_exch_crncy_type, "CNY");
    v_sum_comm_stock_code_no=0;
    v_sum_comm_date=0;
    v_sum_comm_time=0;
    v_sum_comm_batch_no=0;
    v_sum_comm_opor=0;
    v_sum_comm_executor=0;
    v_sum_comm_dir=0;
    v_sum_comm_limit_price=0;
    v_sum_comm_qty=0;
    v_sum_comm_amt=0;
    v_sum_comm_order_qty=0;
    v_sum_comm_cancel_qty=0;
    v_sum_comm_await_cancel_qty=0;
    v_sum_comm_strike_amt=0;
    v_sum_comm_strike_qty=0;
    strcpy(v_sum_comm_strike_status, "0");
    strcpy(v_comm_sum_status, "0");
    v_sum_comm_begin_date=0;
    v_sum_comm_end_date=0;
    v_sum_comm_begin_time=0;
    v_sum_comm_end_time=0;
    v_sum_comm_comple_date=0;
    v_sum_comm_comple_time=0;
    v_sum_comm_max_comm_comple_date=0;
    v_sum_comm_max_comm_comple_time=0;
    v_sum_comm_appr_date=0;
    v_sum_comm_appr_time=0;
    v_sum_comm_appr_qty=0;
    strcpy(v_comm_sum_approve_status, "0");
    v_sum_comm_basket_id=0;
    v_sum_comm_net_price_flag=0;
    v_sum_comm_bond_accr_intrst=0;
    v_sum_comm_bond_rate_type=0;
    strcpy(v_sum_comm_oper_way, " ");
    v_sum_comm_exter_comm_flag=0;
    v_sum_buy_order_qty=0;
    v_sum_sell_order_qty=0;
    v_sum_buy_comm_qty=0;
    v_sum_sell_comm_qty=0;
    v_sum_buy_strike_qty=0;
    v_sum_sell_strike_qty=0;
    v_sum_buy_strike_amt=0;
    v_sum_sell_strike_amt=0;
    v_sum_buy_comm_amt=0;
    v_sum_sell_comm_amt=0;
    strcpy(v_sum_comm_remark_info, " ");
    v_sum_comm_update_times=1;
    strcpy(v_acco_concat_info, " ");
    v_exgp_cash_id=0;
    v_exgp_frozen_amt=0;
    v_exgp_unfroz_amt=0;
    v_exgp_comm_frozen_amt=0;
    v_exgp_comm_unfroz_amt=0;
    v_exgp_comm_capt_amt=0;
    v_exgp_comm_releas_amt=0;
    v_exgp_trade_frozen_amt=0;
    v_exgp_trade_unfroz_amt=0;
    v_exgp_trade_capt_amt=0;
    v_exgp_trade_releas_amt=0;
    v_exgp_strike_capt_amt=0;
    v_exgp_strike_releas_amt=0;
    v_exgp_cash_update_times=1;
    v_exgp_posi_id=0;
    v_exgp_frozen_qty=0;
    v_exgp_unfroz_qty=0;
    v_exgp_comm_frozen_qty=0;
    v_exgp_comm_unfroz_qty=0;
    v_exgp_comm_capt_qty=0;
    v_exgp_comm_releas_qty=0;
    v_exgp_trade_frozen_qty=0;
    v_exgp_trade_unfroz_qty=0;
    v_exgp_trade_capt_qty=0;
    v_exgp_trade_releas_qty=0;
    v_exgp_strike_capt_qty=0;
    v_exgp_strike_releas_qty=0;
    v_exgp_strike_frozen_qty=0;
    v_exgp_strike_unfroz_qty=0;
    v_exgp_realize_pandl=0;
    v_exgp_intrst_pandl=0;
    v_exgp_posi_update_times=1;
    v_asac_cash_id=0;
    v_asac_frozen_amt=0;
    v_asac_unfroz_amt=0;
    v_asac_comm_frozen_amt=0;
    v_asac_comm_unfroz_amt=0;
    v_asac_comm_capt_amt=0;
    v_asac_comm_releas_amt=0;
    v_asac_trade_frozen_amt=0;
    v_asac_trade_unfroz_amt=0;
    v_asac_trade_capt_amt=0;
    v_asac_trade_releas_amt=0;
    v_asac_strike_capt_amt=0;
    v_asac_strike_releas_amt=0;
    v_asac_cash_update_times=1;
    v_asac_posi_id=0;
    v_asac_frozen_qty=0;
    v_asac_unfroz_qty=0;
    v_asac_comm_frozen_qty=0;
    v_asac_comm_unfroz_qty=0;
    v_asac_comm_capt_qty=0;
    v_asac_comm_releas_qty=0;
    v_asac_trade_frozen_qty=0;
    v_asac_trade_unfroz_qty=0;
    v_asac_trade_capt_qty=0;
    v_asac_trade_releas_qty=0;
    v_asac_strike_capt_qty=0;
    v_asac_strike_releas_qty=0;
    v_asac_strike_frozen_qty=0;
    v_asac_strike_unfroz_qty=0;
    v_asac_realize_pandl=0;
    v_asac_intrst_pandl=0;
    v_asac_posi_update_times=1;
    v_exgp_target_posi_id=0;
    v_exgp_target_frozen_qty=0;
    v_exgp_target_unfroz_qty=0;
    v_exgp_target_comm_frozen_qty=0;
    v_exgp_target_comm_unfroz_qty=0;
    v_exgp_target_comm_capt_qty=0;
    v_exgp_target_comm_releas_qty=0;
    v_exgp_target_trade_frozen_qty=0;
    v_exgp_target_trade_unfroz_qty=0;
    v_exgp_target_trade_capt_qty=0;
    v_exgp_target_trade_releas_qty=0;
    v_exgp_target_strike_capt_qty=0;
    v_exgp_target_strike_releas_qty=0;
    v_exgp_target_strike_frozen_qty=0;
    v_exgp_target_strike_unfroz_qty=0;
    v_exgp_target_realize_pandl=0;
    v_exgp_target_cost_amt=0;
    v_exgp_target_intrst_cost_amt=0;
    v_exgp_target_intrst_pandl=0;
    v_exgp_target_posi_update_times=0;
    v_asac_target_posi_id=0;
    v_asac_target_frozen_qty=0;
    v_asac_target_unfroz_qty=0;
    v_asac_target_comm_frozen_qty=0;
    v_asac_target_comm_unfroz_qty=0;
    v_asac_target_comm_capt_qty=0;
    v_asac_target_comm_releas_qty=0;
    v_asac_target_trade_frozen_qty=0;
    v_asac_target_trade_unfroz_qty=0;
    v_asac_target_trade_capt_qty=0;
    v_asac_target_trade_releas_qty=0;
    v_asac_target_strike_capt_qty=0;
    v_asac_target_strike_releas_qty=0;
    v_asac_target_strike_frozen_qty=0;
    v_asac_target_strike_unfroz_qty=0;
    v_asac_target_realize_pandl=0;
    v_asac_target_cost_amt=0;
    v_asac_target_intrst_cost_amt=0;
    v_asac_target_intrst_pandl=0;
    v_asac_target_posi_update_times=0;
    v_exgp_put_impawn_qty=0;
    v_asac_put_impawn_qty=0;
    v_repo_strike_id=0;
    v_exch_rate=0;
    v_repo_qty=0;
    v_repo_amt=0;
    v_repo_rate=0;
    v_repo_trade_date=0;
    v_repo_order_id=0;
    v_repo_back_amt=0;
    v_repo_back_intrst=0;
    v_repo_back_trade_date=0;
    strcpy(v_repo_status, "0");
    v_bond_repo_id=0;
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_pass_no = lpInBizMsg->GetInt32(LDBIZ_PASS_NO_INT);
    strncpy(v_out_acco, lpInBizMsg->GetString(LDBIZ_OUT_ACCO_STR),32);
    v_out_acco[32] = '\0';
    v_exch_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_NO_INT);
    strncpy(v_stock_acco, lpInBizMsg->GetString(LDBIZ_STOCK_ACCO_STR),16);
    v_stock_acco[16] = '\0';
    strncpy(v_stock_code, lpInBizMsg->GetString(LDBIZ_STOCK_CODE_STR),6);
    v_stock_code[6] = '\0';
    v_strike_date = lpInBizMsg->GetInt32(LDBIZ_STRIKE_DATE_INT);
    v_strike_time = lpInBizMsg->GetInt32(LDBIZ_STRIKE_TIME_INT);
    strncpy(v_strike_no, lpInBizMsg->GetString(LDBIZ_STRIKE_NO_STR),64);
    v_strike_no[64] = '\0';
    v_report_date = lpInBizMsg->GetInt32(LDBIZ_REPORT_DATE_INT);
    strncpy(v_report_no, lpInBizMsg->GetString(LDBIZ_REPORT_NO_STR),32);
    v_report_no[32] = '\0';
    v_order_dir = lpInBizMsg->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_strike_price = lpInBizMsg->GetDouble(LDBIZ_STRIKE_PRICE_FLOAT);
    v_strike_qty = lpInBizMsg->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_amt = lpInBizMsg->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    strncpy(v_rsp_info, lpInBizMsg->GetString(LDBIZ_RSP_INFO_STR),255);
    v_rsp_info[255] = '\0';
    v_strike_deal_type = lpInBizMsg->GetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT);
    v_asset_acco_no = lpInBizMsg->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;
    IFastMessage* lpTSCall1Req3 = NULL;
    IFastMessage* lpTSCall1Ans3 = NULL;
    IFastMessage* lpTSCall1Req4 = NULL;
    IFastMessage* lpTSCall1Ans4 = NULL;
    IFastMessage* lpTSCall1Req5 = NULL;
    IFastMessage* lpTSCall1Ans5 = NULL;
    IFastMessage* lpTSCall1Req6 = NULL;
    IFastMessage* lpTSCall1Ans6 = NULL;
    IFastMessage* lpTSCall1Req7 = NULL;
    IFastMessage* lpTSCall1Ans7 = NULL;
    IFastMessage* lpTSCall1Req8 = NULL;
    IFastMessage* lpTSCall1Ans8 = NULL;
    IFastMessage* lpTSCall1Req9 = NULL;
    IFastMessage* lpTSCall1Ans9 = NULL;
    IFastMessage* lpTSCall1Req10 = NULL;
    IFastMessage* lpTSCall1Ans10 = NULL;
    IFastMessage* lpTSCall1Req11 = NULL;
    IFastMessage* lpTSCall1Ans11 = NULL;
    IFastMessage* lpTSCall1Req12 = NULL;
    IFastMessage* lpTSCall1Ans12 = NULL;
    IFastMessage* lpTSCall1Req13 = NULL;
    IFastMessage* lpTSCall1Ans13 = NULL;
    IFastMessage* lpTSCall1Req14 = NULL;
    IFastMessage* lpTSCall1Ans14 = NULL;
    IFastMessage* lpTSCall1Req15 = NULL;
    IFastMessage* lpTSCall1Ans15 = NULL;
    IFastMessage* lpTSCall1Req16 = NULL;
    IFastMessage* lpTSCall1Ans16 = NULL;

    //调用过程[事务_公共_公共接口_检查系统状态权限身份]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.1", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.1]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));


    // set @临时_成交数量# = @成交数量#;
    v_tmp_strike_qty = v_strike_qty;

    // set @临时_成交价格# = @成交价格#;
    v_tmp_strike_price = v_strike_price;

    // set @临时_成交金额# = @成交金额#;
    v_tmp_strike_amt = v_strike_amt;
    //质押操作不在这里处理成交

    // [检查报错返回][@订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》][754][@订单方向#]
    if (v_order_dir == 21 || v_order_dir == 22)
    {
        strcpy(v_error_code, "tdsecuL.5.51.754");
        snprintf(v_error_info, sizeof(v_error_info), "%s%d","订单方向=",v_order_dir);
        iRet = -1;
        goto END;
    }


    // if @成交处理方式# = 0 then
    if (v_strike_deal_type == 0)
    {

      // set @成交处理方式# = 《成交处理方式-分笔》;
      v_strike_deal_type = 1;
    // end if;
    }


    // if (@通道编号# = 0 or @外部账号# = " ") and @资产账户编号# <> 0 then
    if ((v_pass_no == 0 || strcmp(v_out_acco , " ")==0) && v_asset_acco_no != 0)
    {
        //调用过程[事务_产品_公共接口_资产账户编号获取外部账号]
        //组织事务请求
        if(lpTSCall1Ans1)
        {
          lpTSCall1Ans1->FreeMsg();
          lpTSCall1Ans1=NULL;
        }
        lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("prodT.6.6", 0);
        lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req1->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
        if(!lpTSCall1Ans1)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.6.6]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        v_pass_no = lpTSCall1Ans1->GetInt32(LDBIZ_PASS_NO_INT);
        strcpy(v_out_acco, lpTSCall1Ans1->GetString(LDBIZ_OUT_ACCO_STR));

    // end if;
    }

    //公共子系统检查，这里需要增加输出
    //调用过程[事务_公共_交易接口_检查成交回报业务控制]
    //组织事务请求
    if(lpTSCall1Ans2)
    {
      lpTSCall1Ans2->FreeMsg();
      lpTSCall1Ans2=NULL;
    }
    lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.25.32", 0);
    lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req2->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req2->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req2->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req2->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
    if(!lpTSCall1Ans2)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.32]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans2->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans2->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_sys_config_str, lpTSCall1Ans2->GetString(LDBIZ_SYS_CONFIG_STR_STR));
    strcpy(v_crncy_type, lpTSCall1Ans2->GetString(LDBIZ_CRNCY_TYPE_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans2->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_buy_ref_rate = lpTSCall1Ans2->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
    v_sell_ref_rate = lpTSCall1Ans2->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
    v_stock_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_capit_reback_days = lpTSCall1Ans2->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
    v_posi_reback_days = lpTSCall1Ans2->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);
    v_trade_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_intrst_days = lpTSCall1Ans2->GetInt32(LDBIZ_INTRST_DAYS_INT);
    v_net_price_flag = lpTSCall1Ans2->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_bond_accr_intrst = lpTSCall1Ans2->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans2->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_par_value = lpTSCall1Ans2->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans2->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_repo_days = lpTSCall1Ans2->GetInt32(LDBIZ_REPO_DAYS_INT);
    v_repo_cale_days = lpTSCall1Ans2->GetInt32(LDBIZ_REPO_CALE_DAYS_INT);
    v_repo_back_date = lpTSCall1Ans2->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
    v_bond_qty_unit_set = lpTSCall1Ans2->GetInt32(LDBIZ_BOND_QTY_UNIT_SET_INT);
    v_apply_date = lpTSCall1Ans2->GetInt32(LDBIZ_APPLY_DATE_INT);


    // [检查报错返回][@申购日期# = @成交日期#][753][@证券代码#]
    if (v_apply_date == v_strike_date)
    {
        strcpy(v_error_code, "tdsecuL.5.51.753");
        snprintf(v_error_info, sizeof(v_error_info), "%s%s","证券代码=",v_stock_code);
        iRet = -1;
        goto END;
    }

    //获取原订单信息，
    //调用过程[事务_交易证券_报盘_检查成交回报获取订单信息]
    //组织事务请求
    if(lpTSCall1Ans3)
    {
      lpTSCall1Ans3->FreeMsg();
      lpTSCall1Ans3=NULL;
    }
    lpTSCall1Req3=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.20", 0);
    lpTSCall1Req3->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req3->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req3->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req3->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req3->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req3->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req3->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req3->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req3->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req3->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req3->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpTSCall1Req3->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req3->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req3->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpTSCall1Req3->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpTSCall1Req3->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpTSCall1Req3->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpTSCall1Req3->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req3->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpTSCall1Req3->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpTSCall1Req3->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpTSCall1Req3->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
    lpTSCall1Req3->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    glpTSSubcallSerives->SubCall(lpTSCall1Req3, &lpTSCall1Ans3, 5000);
    if(!lpTSCall1Ans3)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.20]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans3->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
    v_co_no = lpTSCall1Ans3->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpTSCall1Ans3->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans3->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans3->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    strcpy(v_original_stock_acco, lpTSCall1Ans3->GetString(LDBIZ_ORIGINAL_STOCK_ACCO_STR));
    v_stock_acco_no = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_original_stock_code, lpTSCall1Ans3->GetString(LDBIZ_ORIGINAL_STOCK_CODE_STR));
    v_stock_code_no = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans3->GetInt32(LDBIZ_ASSET_TYPE_INT);
    v_comm_id = lpTSCall1Ans3->GetInt64(LDBIZ_COMM_ID_INT64);
    v_order_date = lpTSCall1Ans3->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_time = lpTSCall1Ans3->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_order_id = lpTSCall1Ans3->GetInt64(LDBIZ_ORDER_ID_INT64);
    v_order_batch_no = lpTSCall1Ans3->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    v_order_price = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    v_original_order_dir = lpTSCall1Ans3->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);
    v_order_frozen_amt = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans3->GetString(LDBIZ_ORDER_STATUS_STR));
    v_price_type = lpTSCall1Ans3->GetInt32(LDBIZ_PRICE_TYPE_INT);
    v_busi_opor_no = lpTSCall1Ans3->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strcpy(v_order_oper_way, lpTSCall1Ans3->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    v_rsp_id = lpTSCall1Ans3->GetInt64(LDBIZ_RSP_ID_INT64);
    v_exter_comm_flag = lpTSCall1Ans3->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_external_no = lpTSCall1Ans3->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
    strcpy(v_combo_code, lpTSCall1Ans3->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans3->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    v_strategy_id = lpTSCall1Ans3->GetInt64(LDBIZ_STRATEGY_ID_INT64);
    strcpy(v_contra_no, lpTSCall1Ans3->GetString(LDBIZ_CONTRA_NO_STR));
    v_asset_acco_type = lpTSCall1Ans3->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    v_exist_debt_flag = lpTSCall1Ans3->GetInt32(LDBIZ_EXIST_DEBT_FLAG_INT);

    //获取成本，利息等
    //调用过程[事务_产品证券_交易接口_获取成交回报证券持仓成本]
    //组织事务请求
    if(lpTSCall1Ans4)
    {
      lpTSCall1Ans4->FreeMsg();
      lpTSCall1Ans4=NULL;
    }
    lpTSCall1Req4=glpFastMsgFactory->CreateFastMessage("pdsecuT.6.3", 0);
    lpTSCall1Req4->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req4->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req4->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req4->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req4->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req4->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req4->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req4->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req4->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    glpTSSubcallSerives->SubCall(lpTSCall1Req4, &lpTSCall1Ans4, 5000);
    if(!lpTSCall1Ans4)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pdsecuT.6.3]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans4->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
    v_exgp_cost_amt = lpTSCall1Ans4->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
    v_exgp_intrst_cost_amt = lpTSCall1Ans4->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
    v_exgp_curr_qty = lpTSCall1Ans4->GetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT);
    v_asac_cost_amt = lpTSCall1Ans4->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
    v_asac_intrst_cost_amt = lpTSCall1Ans4->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
    v_asac_curr_qty = lpTSCall1Ans4->GetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT);

    //回购类操作和债券买卖的自己计算成交金额

    // if @订单方向# = 《订单方向-融券回购》 or @订单方向# = 《订单方向-融资回购》 then
    if (v_order_dir == 4 || v_order_dir == 3)
    {

      // set @成交金额# = @票面面值# * @成交数量#;
      v_strike_amt = v_par_value * v_strike_qty;

    }
    // elseif (@订单方向# = 《订单方向-买入》 or @订单方向# = 《订单方向-卖出》 ) and @证券类型# > 20 and @证券类型# < 50 then
    else if ((v_order_dir == 1 || v_order_dir == 2 ) && v_stock_type > 20 && v_stock_type < 50)
    {

      // set @成交金额# = @成交价格# * @成交数量#;
      v_strike_amt = v_strike_price * v_strike_qty;
    // end if;
    }

    //处理成交回报，不处理费用

    // if @成交处理方式# = 《成交处理方式-汇总》 then
    if (v_strike_deal_type == 2)
    {

        // set @总成交金额# = @成交金额#;
        v_total_strike_amt = v_strike_amt;

        // set @总成交数量# = @成交数量#;
        v_total_strike_qty = v_strike_qty;
        //调用过程[事务_交易证券_报盘_处理汇总成交回报]
        //组织事务请求
        if(lpTSCall1Ans5)
        {
          lpTSCall1Ans5->FreeMsg();
          lpTSCall1Ans5=NULL;
        }
        lpTSCall1Req5=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.22", 0);
        lpTSCall1Req5->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req5->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req5->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req5->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req5->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req5->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req5->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req5->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req5->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req5->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req5->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpTSCall1Req5->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req5->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
        lpTSCall1Req5->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpTSCall1Req5->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
        lpTSCall1Req5->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpTSCall1Req5->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpTSCall1Req5->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpTSCall1Req5->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
        lpTSCall1Req5->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
        lpTSCall1Req5->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
        lpTSCall1Req5->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req5->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req5->SetDouble(LDBIZ_TOTAL_STRIKE_QTY_FLOAT,v_total_strike_qty);
        lpTSCall1Req5->SetDouble(LDBIZ_TOTAL_STRIKE_AMT_FLOAT,v_total_strike_amt);
        lpTSCall1Req5->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        lpTSCall1Req5->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
        lpTSCall1Req5->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
        lpTSCall1Req5->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
        lpTSCall1Req5->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
        lpTSCall1Req5->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
        lpTSCall1Req5->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
        lpTSCall1Req5->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpTSCall1Req5->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpTSCall1Req5->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
        lpTSCall1Req5->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpTSCall1Req5->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpTSCall1Req5->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
        lpTSCall1Req5->SetInt64(LDBIZ_RSP_ID_INT64,v_rsp_id);
        lpTSCall1Req5->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req5->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
        lpTSCall1Req5->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
        lpTSCall1Req5->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
        lpTSCall1Req5->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpTSCall1Req5->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        lpTSCall1Req5->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req5, &lpTSCall1Ans5, 5000);
        if(!lpTSCall1Ans5)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.22]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans5->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
        v_strike_id = lpTSCall1Ans5->GetInt64(LDBIZ_STRIKE_ID_INT64);
        v_co_no = lpTSCall1Ans5->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans5->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans5->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_stock_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        v_order_date = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_DATE_INT);
        v_order_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
        v_report_time = lpTSCall1Ans5->GetInt32(LDBIZ_REPORT_TIME_INT);
        v_comm_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_id = lpTSCall1Ans5->GetInt64(LDBIZ_COMM_ID_INT64);
        v_comm_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_executor = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_busi_opor_no = lpTSCall1Ans5->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
        strcpy(v_order_oper_way, lpTSCall1Ans5->GetString(LDBIZ_ORDER_OPER_WAY_STR));
        strcpy(v_target_code, lpTSCall1Ans5->GetString(LDBIZ_TARGET_CODE_STR));
        v_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
        v_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
        v_order_frozen_amt = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
        v_order_frozen_qty = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
        v_strike_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
        v_wtdraw_qty = lpTSCall1Ans5->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
        v_cost_calc_type = lpTSCall1Ans5->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
        strcpy(v_order_status, lpTSCall1Ans5->GetString(LDBIZ_ORDER_STATUS_STR));
        v_update_times = lpTSCall1Ans5->GetInt32(LDBIZ_UPDATE_TIMES_INT);
        v_trade_occur_amt = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT);
        v_open_posi_date = lpTSCall1Ans5->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
        v_original_order_dir = lpTSCall1Ans5->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);


        // set @临时_成交金额# = @总成交金额# - @成交金额#;
        v_tmp_strike_amt = v_total_strike_amt - v_strike_amt;

        // set @临时_成交数量# = @总成交数量# - @成交数量#;
        v_tmp_strike_qty = v_total_strike_qty - v_strike_qty;

        // set @临时_成交价格# = @临时_成交金额# / @临时_成交数量#;
        v_tmp_strike_price = v_tmp_strike_amt / v_tmp_strike_qty;
    }
    // else
    else
    {

        //调用过程[事务_交易证券_报盘_处理成交回报]
        //组织事务请求
        if(lpTSCall1Ans6)
        {
          lpTSCall1Ans6->FreeMsg();
          lpTSCall1Ans6=NULL;
        }
        lpTSCall1Req6=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.21", 0);
        lpTSCall1Req6->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req6->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req6->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req6->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req6->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req6->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req6->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req6->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req6->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpTSCall1Req6->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req6->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
        lpTSCall1Req6->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpTSCall1Req6->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
        lpTSCall1Req6->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpTSCall1Req6->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpTSCall1Req6->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpTSCall1Req6->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
        lpTSCall1Req6->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
        lpTSCall1Req6->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
        lpTSCall1Req6->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req6->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req6->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpTSCall1Req6->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpTSCall1Req6->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        lpTSCall1Req6->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
        lpTSCall1Req6->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
        lpTSCall1Req6->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
        lpTSCall1Req6->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
        lpTSCall1Req6->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
        lpTSCall1Req6->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
        lpTSCall1Req6->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpTSCall1Req6->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpTSCall1Req6->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
        lpTSCall1Req6->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpTSCall1Req6->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpTSCall1Req6->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
        lpTSCall1Req6->SetInt64(LDBIZ_RSP_ID_INT64,v_rsp_id);
        lpTSCall1Req6->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req6->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
        lpTSCall1Req6->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
        lpTSCall1Req6->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
        lpTSCall1Req6->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpTSCall1Req6->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        lpTSCall1Req6->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req6, &lpTSCall1Ans6, 5000);
        if(!lpTSCall1Ans6)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.21]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans6->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
        v_strike_id = lpTSCall1Ans6->GetInt64(LDBIZ_STRIKE_ID_INT64);
        v_co_no = lpTSCall1Ans6->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans6->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans6->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_stock_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        strcpy(v_target_code, lpTSCall1Ans6->GetString(LDBIZ_TARGET_CODE_STR));
        v_order_date = lpTSCall1Ans6->GetInt32(LDBIZ_ORDER_DATE_INT);
        v_order_batch_no = lpTSCall1Ans6->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
        v_report_time = lpTSCall1Ans6->GetInt32(LDBIZ_REPORT_TIME_INT);
        v_comm_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_id = lpTSCall1Ans6->GetInt64(LDBIZ_COMM_ID_INT64);
        v_comm_batch_no = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_executor = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_external_no = lpTSCall1Ans6->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
        v_busi_opor_no = lpTSCall1Ans6->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
        strcpy(v_order_oper_way, lpTSCall1Ans6->GetString(LDBIZ_ORDER_OPER_WAY_STR));
        v_total_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_TOTAL_STRIKE_AMT_FLOAT);
        v_total_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_TOTAL_STRIKE_QTY_FLOAT);
        v_cost_calc_type = lpTSCall1Ans6->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
        v_order_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
        v_order_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
        v_strike_bond_accr_intrst = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
        v_wtdraw_qty = lpTSCall1Ans6->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
        strcpy(v_order_status, lpTSCall1Ans6->GetString(LDBIZ_ORDER_STATUS_STR));
        v_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_UPDATE_TIMES_INT);
        v_trade_occur_amt = lpTSCall1Ans6->GetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT);
        v_open_posi_date = lpTSCall1Ans6->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
        v_original_order_dir = lpTSCall1Ans6->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);


        // set @成交金额# = @总成交金额# - @临时_成交金额#;
        v_strike_amt = v_total_strike_amt - v_tmp_strike_amt;

        // set @成交数量# = @总成交数量# - @临时_成交数量#;
        v_strike_qty = v_total_strike_qty - v_tmp_strike_qty;
    // end if;
    }

    //处理成交回报后，再处理费用，以避免并发时导致的费用计算所获取的成交数量不一致
    //计算原费用

    // set @临时_全部费用# = 0;
    v_tmp_all_fee = 0;

    // set @临时_交易佣金# = 0;
    v_tmp_trade_commis = 0;

    // set @临时_印花税# = 0;
    v_tmp_stamp_tax = 0;

    // set @临时_过户费# = 0;
    v_tmp_trans_fee = 0;

    // set @临时_经手费# = 0;
    v_tmp_brkage_fee = 0;

    // set @临时_证管费# = 0;
    v_tmp_SEC_charges = 0;

    // set @临时_其他费用# = 0;
    v_tmp_other_fee = 0;

    // set @临时_其他佣金# = 0;
    v_tmp_other_commis = 0;

    // if @成交数量# > 0 then
    if (v_strike_qty > 0)
    {

        // set @成交价格# = @成交金额# / @成交数量#;
        v_strike_price = v_strike_amt / v_strike_qty;
        //调用过程[事务_公共_公共接口_计算证券成交费用]
        //组织事务请求
        if(lpTSCall1Ans7)
        {
          lpTSCall1Ans7->FreeMsg();
          lpTSCall1Ans7=NULL;
        }
        lpTSCall1Req7=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
        lpTSCall1Req7->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req7->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req7->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req7->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req7->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req7->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req7->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req7->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req7->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req7->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req7->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req7->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req7->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpTSCall1Req7->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req7->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpTSCall1Req7->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req7->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpTSCall1Req7->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
        lpTSCall1Req7->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpTSCall1Req7->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpTSCall1Req7->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        glpTSSubcallSerives->SubCall(lpTSCall1Req7, &lpTSCall1Ans7, 5000);
        if(!lpTSCall1Ans7)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans7->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
        v_trade_commis = lpTSCall1Ans7->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
        v_all_fee = lpTSCall1Ans7->GetDouble(LDBIZ_ALL_FEE_FLOAT);
        v_stamp_tax = lpTSCall1Ans7->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
        v_trans_fee = lpTSCall1Ans7->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
        v_brkage_fee = lpTSCall1Ans7->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
        v_SEC_charges = lpTSCall1Ans7->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
        v_other_fee = lpTSCall1Ans7->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
        v_other_commis = lpTSCall1Ans7->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
        v_trade_tax = lpTSCall1Ans7->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
        v_trade_cost_fee = lpTSCall1Ans7->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
        v_trade_system_use_fee = lpTSCall1Ans7->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
        v_stock_settle_fee = lpTSCall1Ans7->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);


        // set @临时_全部费用# = @全部费用#;
        v_tmp_all_fee = v_all_fee;

        // set @临时_交易佣金# = @交易佣金#;
        v_tmp_trade_commis = v_trade_commis;

        // set @临时_印花税# = @印花税#;
        v_tmp_stamp_tax = v_stamp_tax;

        // set @临时_过户费# = @过户费#;
        v_tmp_trans_fee = v_trans_fee;

        // set @临时_经手费# = @经手费#;
        v_tmp_brkage_fee = v_brkage_fee;

        // set @临时_证管费# = @证管费#;
        v_tmp_SEC_charges = v_SEC_charges;

        // set @临时_其他费用# = @其他费用#;
        v_tmp_other_fee = v_other_fee;

        // set @临时_其他佣金# = @其他佣金#;
        v_tmp_other_commis = v_other_commis;

        // set @临时_交易费# = @交易费#;
        v_tmp_trade_cost_fee = v_trade_cost_fee;

        // set @临时_交易系统使用费# = @交易系统使用费#;
        v_tmp_trade_system_use_fee = v_trade_system_use_fee;

        // set @临时_交易征费# = @交易征费#;
        v_tmp_trade_tax = v_trade_tax;

        // set @临时_股份交收费# = @股份交收费#;
        v_tmp_stock_settle_fee = v_stock_settle_fee;
    // end if;
    }

    //计算新费用

    // set @成交价格# = @总成交金额#/ @总成交数量#;
    v_strike_price = v_total_strike_amt/ v_total_strike_qty;

    // set @成交数量# = @总成交数量#;
    v_strike_qty = v_total_strike_qty;
    //调用过程[事务_公共_公共接口_计算证券成交费用]
    //组织事务请求
    if(lpTSCall1Ans8)
    {
      lpTSCall1Ans8->FreeMsg();
      lpTSCall1Ans8=NULL;
    }
    lpTSCall1Req8=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
    lpTSCall1Req8->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req8->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req8->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req8->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req8->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req8->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req8->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req8->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req8->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req8->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req8->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req8->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req8->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req8->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req8->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpTSCall1Req8->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpTSCall1Req8->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpTSCall1Req8->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpTSCall1Req8->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpTSCall1Req8->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpTSCall1Req8->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    glpTSSubcallSerives->SubCall(lpTSCall1Req8, &lpTSCall1Ans8, 5000);
    if(!lpTSCall1Ans8)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans8->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
    v_trade_commis = lpTSCall1Ans8->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
    v_all_fee = lpTSCall1Ans8->GetDouble(LDBIZ_ALL_FEE_FLOAT);
    v_stamp_tax = lpTSCall1Ans8->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
    v_trans_fee = lpTSCall1Ans8->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
    v_brkage_fee = lpTSCall1Ans8->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
    v_SEC_charges = lpTSCall1Ans8->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
    v_other_fee = lpTSCall1Ans8->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
    v_other_commis = lpTSCall1Ans8->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
    v_trade_tax = lpTSCall1Ans8->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
    v_trade_cost_fee = lpTSCall1Ans8->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
    v_trade_system_use_fee = lpTSCall1Ans8->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
    v_stock_settle_fee = lpTSCall1Ans8->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);

    //计算费用差
    //第一笔或者非港股通业务，【临时_交易系统使用费】会为0，第一笔之后的港股通业务，【临时_交易系统使用费】会大于0

    // if @临时_交易系统使用费# > 0 then
    if (v_tmp_trade_system_use_fee > 0)
    {

        // set @全部费用# = @全部费用# - @临时_全部费用# + @临时_交易系统使用费#;
        v_all_fee = v_all_fee - v_tmp_all_fee + v_tmp_trade_system_use_fee;
        //第一笔取自【交易系统使用费】，其余取自【临时_交易系统使用费】

        // set @交易系统使用费# = @临时_交易系统使用费#;
        v_trade_system_use_fee = v_tmp_trade_system_use_fee;
    }
    // else
    else
    {


        // set @全部费用# = @全部费用# - @临时_全部费用#;
        v_all_fee = v_all_fee - v_tmp_all_fee;
    // end if;
    }


    // set @交易佣金# = @交易佣金# - @临时_交易佣金#;
    v_trade_commis = v_trade_commis - v_tmp_trade_commis;

    // set @印花税# = @印花税# - @临时_印花税#;
    v_stamp_tax = v_stamp_tax - v_tmp_stamp_tax;

    // set @过户费# = @过户费# - @临时_过户费#;
    v_trans_fee = v_trans_fee - v_tmp_trans_fee;

    // set @经手费# = @经手费# - @临时_经手费#;
    v_brkage_fee = v_brkage_fee - v_tmp_brkage_fee;

    // set @证管费# = @证管费# - @临时_证管费#;
    v_SEC_charges = v_SEC_charges - v_tmp_SEC_charges;

    // set @其他费用# = @其他费用# - @临时_其他费用#;
    v_other_fee = v_other_fee - v_tmp_other_fee;

    // set @其他佣金# = @其他佣金# - @临时_其他佣金#;
    v_other_commis = v_other_commis - v_tmp_other_commis;

    // set @交易费# = @交易费# - @临时_交易费#;
    v_trade_cost_fee = v_trade_cost_fee - v_tmp_trade_cost_fee;

    // set @交易征费# = @交易征费# - @临时_交易征费#;
    v_trade_tax = v_trade_tax - v_tmp_trade_tax;

    // set @股份交收费# = @股份交收费# - @临时_股份交收费#;
    v_stock_settle_fee = v_stock_settle_fee - v_tmp_stock_settle_fee;
    //费用处理

    // set @成交价格# = @临时_成交价格#;
    v_strike_price = v_tmp_strike_price;

    // set @成交金额# = @临时_成交金额#;
    v_strike_amt = v_tmp_strike_amt;

    // set @成交数量# = @临时_成交数量#;
    v_strike_qty = v_tmp_strike_qty;
    //调用过程[事务_交易证券_报盘_处理成交回报费用]
    //组织事务请求
    if(lpTSCall1Ans9)
    {
      lpTSCall1Ans9->FreeMsg();
      lpTSCall1Ans9=NULL;
    }
    lpTSCall1Req9=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.23", 0);
    lpTSCall1Req9->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req9->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req9->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req9->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req9->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req9->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req9->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req9->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req9->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req9->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req9->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req9->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req9->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req9->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
    lpTSCall1Req9->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpTSCall1Req9->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req9->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req9->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
    lpTSCall1Req9->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpTSCall1Req9->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req9->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req9->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
    lpTSCall1Req9->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
    lpTSCall1Req9->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpTSCall1Req9->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpTSCall1Req9->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpTSCall1Req9->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req9->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpTSCall1Req9->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpTSCall1Req9->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpTSCall1Req9->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpTSCall1Req9->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpTSCall1Req9->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req9->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpTSCall1Req9->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpTSCall1Req9->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpTSCall1Req9->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
    lpTSCall1Req9->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
    lpTSCall1Req9->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
    lpTSCall1Req9->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
    lpTSCall1Req9->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
    lpTSCall1Req9->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
    lpTSCall1Req9->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
    lpTSCall1Req9->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
    lpTSCall1Req9->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
    lpTSCall1Req9->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
    lpTSCall1Req9->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
    lpTSCall1Req9->SetString(LDBIZ_TARGET_CODE_STR,v_target_code);
    lpTSCall1Req9->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpTSCall1Req9->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpTSCall1Req9->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpTSCall1Req9->SetInt32(LDBIZ_INTRST_DAYS_INT,v_intrst_days);
    lpTSCall1Req9->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpTSCall1Req9->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpTSCall1Req9->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
    lpTSCall1Req9->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
    lpTSCall1Req9->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
    lpTSCall1Req9->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
    lpTSCall1Req9->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
    lpTSCall1Req9->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
    lpTSCall1Req9->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpTSCall1Req9->SetInt32(LDBIZ_COST_CALC_TYPE_INT,v_cost_calc_type);
    lpTSCall1Req9->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
    lpTSCall1Req9->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
    lpTSCall1Req9->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
    lpTSCall1Req9->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
    lpTSCall1Req9->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
    lpTSCall1Req9->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
    lpTSCall1Req9->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
    lpTSCall1Req9->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
    lpTSCall1Req9->SetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT,v_trade_occur_amt);
    lpTSCall1Req9->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpTSCall1Req9->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
    glpTSSubcallSerives->SubCall(lpTSCall1Req9, &lpTSCall1Ans9, 5000);
    if(!lpTSCall1Ans9)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.23]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans9->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));


    // set @组合代码# = " ";
    strcpy(v_combo_code," ");

    // set @操作员编号# =@业务操作员编号#;
    v_opor_no =v_busi_opor_no;

    // set @临时_更新次数# = @更新次数#;
    v_tmp_update_times = v_update_times;

    // set @更新次数# = 1;
    v_update_times = 1;

    // set @记录有效标志# =《记录有效标志-有效》;
    v_record_valid_flag =1;

    // [主动推送][secu.rptstrike][证券主推_报盘_成交主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.33", 0);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpPubMsg->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpPubMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
    lpPubMsg->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
    lpPubMsg->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
    lpPubMsg->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
    lpPubMsg->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
    lpPubMsg->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
    lpPubMsg->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
    lpPubMsg->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
    lpPubMsg->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
    lpPubMsg->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
    lpPubMsg->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
    lpPubMsg->SetInt32(LDBIZ_RECORD_VALID_FLAG_INT,v_record_valid_flag);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.rptstrike", lpPubMsg);


    // set @成交金额# = @总成交金额#;
    v_strike_amt = v_total_strike_amt;

    // set @成交数量# = @总成交数量#;
    v_strike_qty = v_total_strike_qty;

    // set @更新次数# = @临时_更新次数#;
    v_update_times = v_tmp_update_times;

    // set @当笔成交价格# = @临时_成交价格#;
    v_curr_strike_price = v_tmp_strike_price;

    // set @当笔成交金额# = @临时_成交金额#;
    v_curr_strike_amt = v_tmp_strike_amt;

    // set @当笔成交数量# = @临时_成交数量#;
    v_curr_strike_qty = v_tmp_strike_qty;

    // set @撤单状态# = "0";
    strcpy(v_wtdraw_status,"0");

    // [主动推送][secu.order][证券主推_订单_订单主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
    lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
    lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


    // set @临时_订单批号# = @订单批号#;
    v_tmp_order_batch_no = v_order_batch_no;

    // if (@订单操作方式# <> 《订单操作方式-多账户自由交易》 and @订单操作方式# <> 《订单操作方式-港股通多账户自由交易》 and  @订单操作方式# <> 《订单操作方式-分价单交易》 and  @订单操作方式# <> 《订单操作方式-期现对冲交易》 and  @订单操作方式# <> 《订单操作方式-期现对冲指令交易》) then
    if ((strcmp(v_order_oper_way , "13")!=0 && strcmp(v_order_oper_way , "71")!=0 &&  strcmp(v_order_oper_way , "74")!=0 &&  strcmp(v_order_oper_way , "36")!=0 &&  strcmp(v_order_oper_way , "38")!=0))
    {

        // set @订单批号# = 0;
        v_order_batch_no = 0;
    // end if;
    }

    //调用过程[事务_交易证券_主推接口_获取汇总订单成交信息]
    //组织事务请求
    if(lpTSCall1Ans10)
    {
      lpTSCall1Ans10->FreeMsg();
      lpTSCall1Ans10=NULL;
    }
    lpTSCall1Req10=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.21", 0);
    lpTSCall1Req10->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req10->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req10->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req10->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req10->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req10->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req10->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req10->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req10->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req10->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpTSCall1Req10->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpTSCall1Req10->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpTSCall1Req10->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    glpTSSubcallSerives->SubCall(lpTSCall1Req10, &lpTSCall1Ans10, 5000);
    if(!lpTSCall1Ans10)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.21]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans10->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
    v_sum_order_row_id = lpTSCall1Ans10->GetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64);
    v_sum_order_opor_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT);
    v_sum_order_co_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_CO_NO_INT);
    v_sum_order_pd_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_PD_NO_INT);
    v_sum_order_exch_group_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT);
    v_sum_order_asset_acco_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT);
    v_sum_order_pass_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT);
    strcpy(v_sum_order_exch_crncy_type, lpTSCall1Ans10->GetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR));
    v_sum_order_stock_code_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT);
    v_sum_order_trade_code_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT);
    v_sum_order_target_code_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT);
    v_sum_order_external_no = lpTSCall1Ans10->GetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64);
    v_sum_order_date = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_DATE_INT);
    v_sum_order_batch_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT);
    v_sum_order_dir = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_DIR_INT);
    v_sum_order_price_type = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT);
    v_sum_order_price = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT);
    v_sum_order_qty = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT);
    strcpy(v_order_sum_status, lpTSCall1Ans10->GetString(LDBIZ_ORDER_SUM_STATUS_STR));
    v_sum_order_wtdraw_qty = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT);
    v_sum_order_waste_qty = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT);
    v_sum_order_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT);
    v_sum_order_strike_qty = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT);
    v_sum_order_strike_aver_price = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT);
    v_sum_order_net_price_flag = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT);
    v_sum_order_bond_accr_intrst = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT);
    v_sum_order_bond_rate_type = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT);
    v_sum_order_par_value = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT);
    v_sum_order_impawn_ratio = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT);
    strcpy(v_sum_order_oper_way, lpTSCall1Ans10->GetString(LDBIZ_SUM_ORDER_OPER_WAY_STR));
    v_sum_order_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT);
    v_sum_strike_row_id = lpTSCall1Ans10->GetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64);
    v_sum_strike_opor_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT);
    v_sum_strike_co_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT);
    v_sum_strike_pd_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT);
    v_sum_strike_exch_group_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT);
    v_sum_strike_asset_acco_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT);
    v_sum_strike_pass_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT);
    strcpy(v_sum_strike_out_acco, lpTSCall1Ans10->GetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR));
    v_sum_strike_stock_acco_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT);
    v_sum_strike_stock_code_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT);
    v_sum_strike_comm_id = lpTSCall1Ans10->GetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64);
    v_sum_strike_report_date = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT);
    strcpy(v_sum_strike_report_no, lpTSCall1Ans10->GetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR));
    v_sum_strike_order_date = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT);
    v_sum_strike_order_id = lpTSCall1Ans10->GetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64);
    v_sum_strike_order_dir = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT);
    v_sum_strike_order_price = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT);
    v_sum_strike_order_qty = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT);
    v_sum_strike_strike_qty = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT);
    v_sum_strike_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT);
    v_sum_strike_all_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT);
    v_sum_strike_stamp_tax = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT);
    v_sum_strike_trans_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT);
    v_sum_strike_brkage_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT);
    v_sum_strike_SEC_charges = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT);
    v_sum_strike_other_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT);
    v_sum_strike_trade_commis = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT);
    v_sum_strike_other_commis = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT);
    v_sum_trade_tax = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT);
    v_sum_trade_cost_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT);
    v_sum_trade_system_use_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT);
    v_sum_stock_settle_fee = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT);
    v_sum_strike_net_price_flag = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT);
    v_sum_strike_bond_accr_intrst = lpTSCall1Ans10->GetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT);
    v_sum_strike_bond_rate_type = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT);
    strcpy(v_sum_strike_order_oper_way, lpTSCall1Ans10->GetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR));
    v_sum_strike_exter_comm_flag = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT);
    v_sum_strike_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT);
    v_sum_strike_order_batch_no = lpTSCall1Ans10->GetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT);
    v_sum_external_no = lpTSCall1Ans10->GetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64);


    // if @订单批号# <> 0 then
    if (v_order_batch_no != 0)
    {

        // [主动推送][secu.ordertotal][证券主推_订单_订单汇总主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.21", 0);
        lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64,v_sum_order_row_id);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT,v_sum_order_opor_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_CO_NO_INT,v_sum_order_co_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PD_NO_INT,v_sum_order_pd_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT,v_sum_order_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT,v_sum_order_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT,v_sum_order_pass_no);
        lpPubMsg->SetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR,v_sum_order_exch_crncy_type);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT,v_sum_order_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT,v_sum_order_trade_code_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT,v_sum_order_target_code_no);
        lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64,v_sum_order_external_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DATE_INT,v_sum_order_date);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT,v_sum_order_batch_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DIR_INT,v_sum_order_dir);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT,v_sum_order_price_type);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT,v_sum_order_price);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT,v_sum_order_qty);
        lpPubMsg->SetString(LDBIZ_ORDER_SUM_STATUS_STR,v_order_sum_status);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT,v_sum_order_wtdraw_qty);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT,v_sum_order_waste_qty);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT,v_sum_order_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT,v_sum_order_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT,v_sum_order_strike_aver_price);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT,v_sum_order_net_price_flag);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT,v_sum_order_bond_accr_intrst);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT,v_sum_order_bond_rate_type);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT,v_sum_order_par_value);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT,v_sum_order_impawn_ratio);
        lpPubMsg->SetString(LDBIZ_SUM_ORDER_OPER_WAY_STR,v_sum_order_oper_way);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT,v_sum_order_update_times);
        glpPubSub_Interface->PubTopics("secu.ordertotal", lpPubMsg);

    // end if;
    }


    // set @订单批号# = @临时_订单批号#;
    v_order_batch_no = v_tmp_order_batch_no;

    // [主动推送][secu.rptstriketotal][证券主推_报盘_成交汇总主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.34", 0);
    lpPubMsg->SetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64,v_sum_strike_row_id);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT,v_sum_strike_opor_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT,v_sum_strike_co_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT,v_sum_strike_pd_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT,v_sum_strike_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT,v_sum_strike_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT,v_sum_strike_pass_no);
    lpPubMsg->SetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR,v_sum_strike_out_acco);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT,v_sum_strike_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT,v_sum_strike_stock_code_no);
    lpPubMsg->SetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64,v_sum_strike_comm_id);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT,v_sum_strike_report_date);
    lpPubMsg->SetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR,v_sum_strike_report_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT,v_sum_strike_order_date);
    lpPubMsg->SetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64,v_sum_strike_order_id);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT,v_sum_strike_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT,v_sum_strike_order_dir);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT,v_sum_strike_order_price);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT,v_sum_strike_order_qty);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT,v_sum_strike_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT,v_sum_strike_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT,v_sum_strike_all_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT,v_sum_strike_stamp_tax);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT,v_sum_strike_trans_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT,v_sum_strike_brkage_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT,v_sum_strike_SEC_charges);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT,v_sum_strike_other_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT,v_sum_strike_trade_commis);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT,v_sum_strike_other_commis);
    lpPubMsg->SetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT,v_sum_trade_tax);
    lpPubMsg->SetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT,v_sum_trade_cost_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT,v_sum_trade_system_use_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT,v_sum_stock_settle_fee);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT,v_sum_strike_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT,v_sum_strike_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT,v_sum_strike_bond_rate_type);
    lpPubMsg->SetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR,v_sum_strike_order_oper_way);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT,v_sum_strike_exter_comm_flag);
    lpPubMsg->SetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64,v_sum_external_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT,v_sum_strike_update_times);
    glpPubSub_Interface->PubTopics("secu.rptstriketotal", lpPubMsg);


    // if @指令序号# > 0 then
    if (v_comm_id > 0)
    {
        //调用过程[事务_交易证券_主推接口_获取指令混合信息]
        //组织事务请求
        if(lpTSCall1Ans11)
        {
          lpTSCall1Ans11->FreeMsg();
          lpTSCall1Ans11=NULL;
        }
        lpTSCall1Req11=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
        lpTSCall1Req11->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req11->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req11->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req11->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req11->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req11->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req11->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req11->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req11->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        glpTSSubcallSerives->SubCall(lpTSCall1Req11, &lpTSCall1Ans11, 5000);
        if(!lpTSCall1Ans11)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans11->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
        v_init_date = lpTSCall1Ans11->GetInt32(LDBIZ_INIT_DATE_INT);
        v_co_no = lpTSCall1Ans11->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans11->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans11->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans11->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_pass_no = lpTSCall1Ans11->GetInt32(LDBIZ_PASS_NO_INT);
        strcpy(v_out_acco, lpTSCall1Ans11->GetString(LDBIZ_OUT_ACCO_STR));
        strcpy(v_exch_crncy_type, lpTSCall1Ans11->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
        v_stock_acco_no = lpTSCall1Ans11->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans11->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        v_stock_type = lpTSCall1Ans11->GetInt32(LDBIZ_STOCK_TYPE_INT);
        v_comm_date = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_time = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_TIME_INT);
        v_comm_batch_no = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_opor = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_OPOR_INT);
        v_comm_executor = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_comm_dir = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_DIR_INT);
        v_comm_limit_price = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
        v_limit_actual_price = lpTSCall1Ans11->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
        v_comm_qty = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_QTY_FLOAT);
        v_comm_amt = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_AMT_FLOAT);
        v_order_qty = lpTSCall1Ans11->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
        v_comm_cancel_qty = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
        v_strike_amt = lpTSCall1Ans11->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
        v_strike_qty = lpTSCall1Ans11->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
        v_comm_frozen_amt = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
        v_comm_frozen_qty = lpTSCall1Ans11->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
        strcpy(v_strike_status, lpTSCall1Ans11->GetString(LDBIZ_STRIKE_STATUS_STR));
        strcpy(v_comm_status, lpTSCall1Ans11->GetString(LDBIZ_COMM_STATUS_STR));
        v_comm_begin_date = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
        v_comm_end_date = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_END_DATE_INT);
        v_comm_begin_time = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
        v_comm_end_time = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_END_TIME_INT);
        v_comm_comple_date = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
        v_comm_comple_time = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
        v_comm_appr_date = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
        v_comm_appr_time = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
        strcpy(v_comm_appr_status, lpTSCall1Ans11->GetString(LDBIZ_COMM_APPR_STATUS_STR));
        v_comm_appr_oper = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
        strcpy(v_comm_appr_remark, lpTSCall1Ans11->GetString(LDBIZ_COMM_APPR_REMARK_STR));
        v_basket_id = lpTSCall1Ans11->GetInt64(LDBIZ_BASKET_ID_INT64);
        v_net_price_flag = lpTSCall1Ans11->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
        v_bond_accr_intrst = lpTSCall1Ans11->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
        v_bond_rate_type = lpTSCall1Ans11->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
        strcpy(v_comm_oper_way, lpTSCall1Ans11->GetString(LDBIZ_COMM_OPER_WAY_STR));
        v_exter_comm_flag = lpTSCall1Ans11->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
        v_comm_comple_flag = lpTSCall1Ans11->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
        v_strategy_capt_qty = lpTSCall1Ans11->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
        v_strategy_order_qty = lpTSCall1Ans11->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
        strcpy(v_contra_no, lpTSCall1Ans11->GetString(LDBIZ_CONTRA_NO_STR));
        strcpy(v_comm_remark_info, lpTSCall1Ans11->GetString(LDBIZ_COMM_REMARK_INFO_STR));
        v_disp_opor = lpTSCall1Ans11->GetInt32(LDBIZ_DISP_OPOR_INT);
        v_disp_status = lpTSCall1Ans11->GetInt32(LDBIZ_DISP_STATUS_INT);
        v_read_flag = lpTSCall1Ans11->GetInt32(LDBIZ_READ_FLAG_INT);
        v_update_times = lpTSCall1Ans11->GetInt32(LDBIZ_UPDATE_TIMES_INT);
        v_sum_comm_row_id = lpTSCall1Ans11->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
        v_sum_comm_co_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
        v_sum_comm_pd_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
        v_sum_comm_exch_group_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
        v_sum_comm_asset_acco_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
        v_sum_comm_pass_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
        strcpy(v_sum_comm_out_acco, lpTSCall1Ans11->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
        strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans11->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
        v_sum_comm_stock_code_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
        v_sum_comm_date = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
        v_sum_comm_time = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
        v_sum_comm_batch_no = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
        v_sum_comm_opor = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
        v_sum_comm_executor = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
        v_sum_comm_dir = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
        v_sum_comm_limit_price = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
        v_sum_comm_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
        v_sum_comm_amt = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
        v_sum_comm_order_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
        v_sum_comm_cancel_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
        v_sum_comm_await_cancel_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
        v_sum_comm_strike_amt = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
        v_sum_comm_strike_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
        strcpy(v_sum_comm_strike_status, lpTSCall1Ans11->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
        strcpy(v_comm_sum_status, lpTSCall1Ans11->GetString(LDBIZ_COMM_SUM_STATUS_STR));
        v_sum_comm_begin_date = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
        v_sum_comm_end_date = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
        v_sum_comm_begin_time = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
        v_sum_comm_end_time = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
        v_sum_comm_comple_date = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
        v_sum_comm_comple_time = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
        v_sum_comm_max_comm_comple_date = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
        v_sum_comm_max_comm_comple_time = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
        v_sum_comm_appr_date = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
        v_sum_comm_appr_time = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
        v_sum_comm_appr_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
        strcpy(v_comm_sum_approve_status, lpTSCall1Ans11->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
        v_sum_comm_basket_id = lpTSCall1Ans11->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
        v_sum_comm_net_price_flag = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
        v_sum_comm_bond_accr_intrst = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
        v_sum_comm_bond_rate_type = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
        strcpy(v_sum_comm_oper_way, lpTSCall1Ans11->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
        v_sum_comm_exter_comm_flag = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
        v_sum_buy_order_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
        v_sum_sell_order_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
        v_sum_buy_comm_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
        v_sum_sell_comm_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
        v_sum_buy_strike_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
        v_sum_sell_strike_qty = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
        v_sum_buy_strike_amt = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
        v_sum_sell_strike_amt = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
        v_sum_buy_comm_amt = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
        v_sum_sell_comm_amt = lpTSCall1Ans11->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
        strcpy(v_sum_comm_remark_info, lpTSCall1Ans11->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
        v_sum_comm_update_times = lpTSCall1Ans11->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
        strcpy(v_acco_concat_info, lpTSCall1Ans11->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


        // [主动推送][secu.comm][证券主推_指令_指令主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
        lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
        lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
        lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
        lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
        lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
        lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
        lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
        lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
        lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
        lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
        lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
        lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
        lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
        lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
        lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
        lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
        lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
        lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
        lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
        lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


        // if @指令批号# > 0 then
        if (v_comm_batch_no > 0)
        {

            // set @指令备注信息#= @汇总指令备注信息#;
            strcpy(v_comm_remark_info,v_sum_comm_remark_info);

            // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
            lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
            lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
            lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
            lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
            lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
            lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
            lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
            glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

        // end if;
        }

    // end if;
    }

    //质押提交和质押转回，要推交易代码和标准券代码

    // if @订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》 then
    if (v_order_dir == 21 || v_order_dir == 22)
    {

      // set @证券代码编号# = @交易代码编号#;
      v_stock_code_no = v_trade_code_no;
      //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
      //组织事务请求
      if(lpTSCall1Ans12)
      {
        lpTSCall1Ans12->FreeMsg();
        lpTSCall1Ans12=NULL;
      }
      lpTSCall1Req12=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
      lpTSCall1Req12->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req12->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req12->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req12->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req12->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req12->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req12->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req12->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req12->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req12->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req12->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req12->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req12->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req12->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
      lpTSCall1Req12->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpTSCall1Req12->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
      glpTSSubcallSerives->SubCall(lpTSCall1Req12, &lpTSCall1Ans12, 5000);
      if(!lpTSCall1Ans12)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans12->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans12->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans12->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans12->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans12->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
      v_exgp_target_posi_id = lpTSCall1Ans12->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
      v_exgp_target_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
      v_exgp_target_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
      v_exgp_target_comm_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
      v_exgp_target_comm_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_target_comm_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
      v_exgp_target_comm_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
      v_exgp_target_trade_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_target_trade_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_target_trade_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
      v_exgp_target_trade_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_target_strike_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_target_strike_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_target_strike_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_target_strike_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_target_realize_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
      v_exgp_target_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
      v_exgp_target_intrst_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
      v_exgp_target_intrst_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
      v_exgp_target_posi_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
      v_asac_target_posi_id = lpTSCall1Ans12->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
      v_asac_target_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
      v_asac_target_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
      v_asac_target_comm_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
      v_asac_target_comm_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
      v_asac_target_comm_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
      v_asac_target_comm_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
      v_asac_target_trade_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
      v_asac_target_trade_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_target_trade_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
      v_asac_target_trade_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
      v_asac_target_strike_capt_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
      v_asac_target_strike_releas_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_target_strike_frozen_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_target_strike_unfroz_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_target_realize_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
      v_asac_target_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
      v_asac_target_intrst_cost_amt = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
      v_asac_target_intrst_pandl = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
      v_asac_target_posi_update_times = lpTSCall1Ans12->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
      v_exgp_put_impawn_qty = lpTSCall1Ans12->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
      v_asac_put_impawn_qty = lpTSCall1Ans12->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


      // set @证券代码编号# = @交易代码编号#;
      v_stock_code_no = v_trade_code_no;

      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


      // set @证券代码编号# = @标的代码编号#;
      v_stock_code_no = v_target_code_no;

      // set @交易组提交质押数量# = 0;
      v_exgp_put_impawn_qty = 0;

      // set @资产账户提交质押数量# = 0;
      v_asac_put_impawn_qty = 0;

      // set @证券代码编号# = @标的代码编号#;
      v_stock_code_no = v_target_code_no;

      // set @交易组持仓序号# = @交易组标的持仓序号#;
      v_exgp_posi_id = v_exgp_target_posi_id;

      // set @交易组冻结数量# = @交易组标的冻结数量#;
      v_exgp_frozen_qty = v_exgp_target_frozen_qty;

      // set @交易组解冻数量# = @交易组标的解冻数量#;
      v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

      // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
      v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

      // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
      v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

      // set @交易组指令占用数量# = @交易组标的指令占用数量#;
      v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

      // set @交易组指令释放数量# = @交易组标的指令释放数量#;
      v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

      // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
      v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

      // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
      v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

      // set @交易组交易占用数量# = @交易组标的交易占用数量#;
      v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

      // set @交易组交易释放数量# = @交易组标的交易释放数量#;
      v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

      // set @交易组成交占用数量# = @交易组标的成交占用数量#;
      v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

      // set @交易组成交释放数量# = @交易组标的成交释放数量#;
      v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

      // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
      v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

      // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
      v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

      // set @交易组实现盈亏# = @交易组标的实现盈亏#;
      v_exgp_realize_pandl = v_exgp_target_realize_pandl;

      // set @交易组成本金额# = @交易组标的成本金额#;
      v_exgp_cost_amt = v_exgp_target_cost_amt;

      // set @交易组利息成本金额# = @交易组标的利息成本金额#;
      v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

      // set @交易组利息收益# = @交易组标的利息收益#;
      v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

      // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
      v_exgp_posi_update_times = v_exgp_target_posi_update_times;

      // set @资产账户持仓序号# = @资产账户标的持仓序号#;
      v_asac_posi_id = v_asac_target_posi_id;

      // set @资产账户冻结数量# = @资产账户标的冻结数量#;
      v_asac_frozen_qty = v_asac_target_frozen_qty;

      // set @资产账户解冻数量# = @资产账户标的解冻数量#;
      v_asac_unfroz_qty = v_asac_target_unfroz_qty;

      // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
      v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

      // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
      v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

      // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
      v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

      // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
      v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

      // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
      v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

      // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
      v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

      // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
      v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

      // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
      v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

      // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
      v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

      // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
      v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

      // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
      v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

      // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
      v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

      // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
      v_asac_realize_pandl = v_asac_target_realize_pandl;

      // set @资产账户成本金额# = @资产账户标的成本金额#;
      v_asac_cost_amt = v_asac_target_cost_amt;

      // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
      v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

      // set @资产账户利息收益# = @资产账户标的利息收益#;
      v_asac_intrst_pandl = v_asac_target_intrst_pandl;

      // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
      v_asac_posi_update_times = v_asac_target_posi_update_times;

      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


    }
    // else if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
    else if (v_order_dir == 3 || v_order_dir == 4)
    {

      // set @证券代码编号# = @标的代码编号#;
      v_stock_code_no = v_target_code_no;
      //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
      //组织事务请求
      if(lpTSCall1Ans13)
      {
        lpTSCall1Ans13->FreeMsg();
        lpTSCall1Ans13=NULL;
      }
      lpTSCall1Req13=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
      lpTSCall1Req13->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req13->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req13->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req13->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req13->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req13->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req13->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req13->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req13->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req13->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req13->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req13->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req13->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req13->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpTSCall1Req13->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      glpTSSubcallSerives->SubCall(lpTSCall1Req13, &lpTSCall1Ans13, 5000);
      if(!lpTSCall1Ans13)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans13->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans13->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans13->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans13->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans13->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans13->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans13->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans13->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


      // set @回购成交序号# = @成交序号#;
      v_repo_strike_id = v_strike_id;
      //调用过程[事务_交易证券_主推接口_获取债券回购信息]
      //组织事务请求
      if(lpTSCall1Ans14)
      {
        lpTSCall1Ans14->FreeMsg();
        lpTSCall1Ans14=NULL;
      }
      lpTSCall1Req14=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.30", 0);
      lpTSCall1Req14->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req14->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req14->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req14->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req14->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req14->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req14->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req14->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req14->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
      glpTSSubcallSerives->SubCall(lpTSCall1Req14, &lpTSCall1Ans14, 5000);
      if(!lpTSCall1Ans14)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.30]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans14->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
      v_init_date = lpTSCall1Ans14->GetInt32(LDBIZ_INIT_DATE_INT);
      v_co_no = lpTSCall1Ans14->GetInt32(LDBIZ_CO_NO_INT);
      v_pd_no = lpTSCall1Ans14->GetInt32(LDBIZ_PD_NO_INT);
      v_exch_group_no = lpTSCall1Ans14->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
      v_asset_acco_no = lpTSCall1Ans14->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
      strcpy(v_crncy_type, lpTSCall1Ans14->GetString(LDBIZ_CRNCY_TYPE_STR));
      strcpy(v_exch_crncy_type, lpTSCall1Ans14->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
      v_exch_rate = lpTSCall1Ans14->GetDouble(LDBIZ_EXCH_RATE_FLOAT);
      v_exch_no = lpTSCall1Ans14->GetInt32(LDBIZ_EXCH_NO_INT);
      v_stock_acco_no = lpTSCall1Ans14->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
      v_stock_code_no = lpTSCall1Ans14->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
      v_target_code_no = lpTSCall1Ans14->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
      v_comm_id = lpTSCall1Ans14->GetInt64(LDBIZ_COMM_ID_INT64);
      v_order_dir = lpTSCall1Ans14->GetInt32(LDBIZ_ORDER_DIR_INT);
      v_repo_qty = lpTSCall1Ans14->GetDouble(LDBIZ_REPO_QTY_FLOAT);
      v_repo_amt = lpTSCall1Ans14->GetDouble(LDBIZ_REPO_AMT_FLOAT);
      v_repo_rate = lpTSCall1Ans14->GetDouble(LDBIZ_REPO_RATE_FLOAT);
      v_repo_trade_date = lpTSCall1Ans14->GetInt32(LDBIZ_REPO_TRADE_DATE_INT);
      v_repo_order_id = lpTSCall1Ans14->GetInt64(LDBIZ_REPO_ORDER_ID_INT64);
      v_repo_days = lpTSCall1Ans14->GetInt32(LDBIZ_REPO_DAYS_INT);
      v_repo_cale_days = lpTSCall1Ans14->GetInt32(LDBIZ_REPO_CALE_DAYS_INT);
      v_repo_back_date = lpTSCall1Ans14->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
      v_repo_back_amt = lpTSCall1Ans14->GetDouble(LDBIZ_REPO_BACK_AMT_FLOAT);
      v_repo_back_intrst = lpTSCall1Ans14->GetDouble(LDBIZ_REPO_BACK_INTRST_FLOAT);
      v_repo_back_trade_date = lpTSCall1Ans14->GetInt32(LDBIZ_REPO_BACK_TRADE_DATE_INT);
      strcpy(v_repo_status, lpTSCall1Ans14->GetString(LDBIZ_REPO_STATUS_STR));
      v_bond_repo_id = lpTSCall1Ans14->GetInt64(LDBIZ_BOND_REPO_ID_INT64);
      v_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_UPDATE_TIMES_INT);


      // [主动推送][secu.exgpbondrepo][证券主推_持仓_交易组债券回购主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.82", 0);
      lpPubMsg->SetInt64(LDBIZ_BOND_REPO_ID_INT64,v_bond_repo_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXCH_RATE_FLOAT,v_exch_rate);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
      lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
      lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
      lpPubMsg->SetDouble(LDBIZ_REPO_QTY_FLOAT,v_repo_qty);
      lpPubMsg->SetDouble(LDBIZ_REPO_AMT_FLOAT,v_repo_amt);
      lpPubMsg->SetDouble(LDBIZ_REPO_RATE_FLOAT,v_repo_rate);
      lpPubMsg->SetInt32(LDBIZ_REPO_TRADE_DATE_INT,v_repo_trade_date);
      lpPubMsg->SetInt64(LDBIZ_REPO_ORDER_ID_INT64,v_repo_order_id);
      lpPubMsg->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
      lpPubMsg->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
      lpPubMsg->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
      lpPubMsg->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
      lpPubMsg->SetDouble(LDBIZ_REPO_BACK_AMT_FLOAT,v_repo_back_amt);
      lpPubMsg->SetDouble(LDBIZ_REPO_BACK_INTRST_FLOAT,v_repo_back_intrst);
      lpPubMsg->SetInt32(LDBIZ_REPO_BACK_TRADE_DATE_INT,v_repo_back_trade_date);
      lpPubMsg->SetString(LDBIZ_REPO_STATUS_STR,v_repo_status);
      lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpbondrepo", lpPubMsg);

    }
    // else
    else
    {

      //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
      //组织事务请求
      if(lpTSCall1Ans15)
      {
        lpTSCall1Ans15->FreeMsg();
        lpTSCall1Ans15=NULL;
      }
      lpTSCall1Req15=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
      lpTSCall1Req15->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req15->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req15->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req15->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req15->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req15->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req15->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req15->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req15->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req15->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req15->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req15->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req15->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req15->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpTSCall1Req15->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      glpTSSubcallSerives->SubCall(lpTSCall1Req15, &lpTSCall1Ans15, 5000);
      if(!lpTSCall1Ans15)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans15->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans15->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans15->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans15->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans15->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans15->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans15->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans15->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans15->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans15->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans15->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

    // end if;
    }


END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans16)
        {
          lpTSCall1Ans16->FreeMsg();
          lpTSCall1Ans16=NULL;
        }
        lpTSCall1Req16=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req16->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req16->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req16->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req16->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req16->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req16->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req16->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req16->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req16->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req16->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req16, &lpTSCall1Ans16, 5000);
        if (lpTSCall1Ans16)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans16->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans16->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans16->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    if(lpTSCall1Ans3)
        lpTSCall1Ans3->FreeMsg();
    if(lpTSCall1Ans4)
        lpTSCall1Ans4->FreeMsg();
    if(lpTSCall1Ans5)
        lpTSCall1Ans5->FreeMsg();
    if(lpTSCall1Ans6)
        lpTSCall1Ans6->FreeMsg();
    if(lpTSCall1Ans7)
        lpTSCall1Ans7->FreeMsg();
    if(lpTSCall1Ans8)
        lpTSCall1Ans8->FreeMsg();
    if(lpTSCall1Ans9)
        lpTSCall1Ans9->FreeMsg();
    if(lpTSCall1Ans10)
        lpTSCall1Ans10->FreeMsg();
    if(lpTSCall1Ans11)
        lpTSCall1Ans11->FreeMsg();
    if(lpTSCall1Ans12)
        lpTSCall1Ans12->FreeMsg();
    if(lpTSCall1Ans13)
        lpTSCall1Ans13->FreeMsg();
    if(lpTSCall1Ans14)
        lpTSCall1Ans14->FreeMsg();
    if(lpTSCall1Ans15)
        lpTSCall1Ans15->FreeMsg();
    if(lpTSCall1Ans16)
        lpTSCall1Ans16->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_体外指令成交
int LD_CALL_MODE fnFunc6(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_group_no;
    int v_asset_acco_no;
    int64 v_comm_id;
    int v_exch_no;
    char v_stock_acco[17];
    char v_stock_code[7];
    int v_order_dir;
    double v_strike_price;
    double v_strike_qty;
    double v_strike_amt;
    double v_strike_fee;
    char v_remark_info[256];
    int v_comm_comple_flag;
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int64 v_strike_id;
    double v_comm_strike_qty;
    double v_comm_strike_amt;
    int v_co_no;
    double v_order_qty;
    int v_price_type;
    double v_order_price;
    int v_strike_date;
    int v_init_date;
    char v_sys_config_str[65];
    int v_pd_no;
    char v_co_busi_config_str[65];
    char v_exgp_busi_config_str[65];
    int v_stock_code_no;
    int v_stock_type;
    int v_asset_type;
    char v_crncy_type[4];
    char v_exch_crncy_type[4];
    double v_buy_ref_rate;
    double v_sell_ref_rate;
    double v_par_value;
    double v_impawn_ratio;
    int v_net_price_flag;
    int v_intrst_days;
    double v_bond_accr_intrst;
    int v_bond_rate_type;
    int v_trade_code_no;
    int v_target_code_no;
    int v_min_unit;
    double v_up_limit_price;
    double v_down_limit_price;
    double v_last_price;
    int v_repo_days;
    int v_repo_back_date;
    int v_capit_reback_days;
    int v_posi_reback_days;
    int v_bond_qty_unit_set;
    int v_apply_date;
    char v_busi_config_str[65];
    int v_repo_cale_days;
    char v_busi_ctrl_str[65];
    char v_asac_busi_config_str[65];
    char v_split_fee_typr_str[65];
    char v_busi_limit_str[2049];
    double v_nav_asset;
    int v_exter_comm_flag;
    double v_market_price_ratio;
    int v_market_price_type;
    int v_cost_calc_type;
    double v_order_market_price;
    int v_sys_type;
    char v_opor_no_str1[2049];
    char v_opor_no_str2[2049];
    char v_opor_no_str3[2049];
    double v_fina_limit_max;
    double v_loan_limit_max;
    int v_asset_acco_type;
    int v_sell_auto_back_debt;
    int v_stock_acco_no;
    double v_exgp_cost_amt;
    double v_exgp_intrst_cost_amt;
    double v_exgp_curr_qty;
    double v_asac_cost_amt;
    double v_asac_intrst_cost_amt;
    double v_asac_curr_qty;
    double v_trade_commis;
    double v_all_fee;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    int v_comm_batch_no;
    int v_report_date;
    int v_report_time;
    char v_report_no[33];
    int v_order_date;
    int64 v_order_id;
    char v_order_oper_way[3];
    int v_strike_time;
    char v_strike_no[65];
    int64 v_external_no;
    int v_busi_opor_no;
    int v_comm_opor;
    int v_order_time;
    int v_order_batch_no;
    char v_order_status[3];
    double v_wtdraw_qty;
    double v_strike_bond_accr_intrst;
    double v_order_frozen_amt;
    double v_order_frozen_qty;
    char v_rsp_info[256];
    int64 v_compli_trig_id;
    int v_record_valid_flag;
    char v_combo_code[33];
    int64 v_combo_posi_id;
    int64 v_strategy_id;
    char v_contra_no[33];
    int v_update_times;
    double v_curr_strike_price;
    double v_curr_strike_amt;
    double v_curr_strike_qty;
    int v_comm_date;
    int v_comm_time;
    int v_comm_executor;
    int v_comm_dir;
    double v_comm_limit_price;
    double v_limit_actual_price;
    double v_comm_qty;
    double v_comm_amt;
    double v_comm_cancel_qty;
    double v_comm_frozen_amt;
    double v_comm_frozen_qty;
    char v_strike_status[3];
    char v_comm_status[3];
    int v_comm_begin_date;
    int v_comm_end_date;
    int v_comm_begin_time;
    int v_comm_end_time;
    int v_comm_comple_date;
    int v_comm_comple_time;
    int v_comm_appr_date;
    int v_comm_appr_time;
    char v_comm_appr_status[3];
    int v_comm_appr_oper;
    char v_comm_appr_remark[256];
    int64 v_basket_id;
    char v_comm_oper_way[3];
    double v_strategy_capt_qty;
    double v_strategy_order_qty;
    char v_comm_remark_info[1025];
    int v_disp_opor;
    int v_disp_status;
    int v_read_flag;
    int64 v_sum_comm_row_id;
    int v_sum_comm_co_no;
    int v_sum_comm_pd_no;
    int v_sum_comm_exch_group_no;
    int v_sum_comm_asset_acco_no;
    int v_sum_comm_pass_no;
    char v_sum_comm_out_acco[33];
    char v_sum_comm_exch_crncy_type[4];
    int v_sum_comm_stock_code_no;
    int v_sum_comm_date;
    int v_sum_comm_time;
    int v_sum_comm_batch_no;
    int v_sum_comm_opor;
    int v_sum_comm_executor;
    int v_sum_comm_dir;
    double v_sum_comm_limit_price;
    double v_sum_comm_qty;
    double v_sum_comm_amt;
    double v_sum_comm_order_qty;
    double v_sum_comm_cancel_qty;
    double v_sum_comm_await_cancel_qty;
    double v_sum_comm_strike_amt;
    double v_sum_comm_strike_qty;
    char v_sum_comm_strike_status[3];
    char v_comm_sum_status[3];
    int v_sum_comm_begin_date;
    int v_sum_comm_end_date;
    int v_sum_comm_begin_time;
    int v_sum_comm_end_time;
    int v_sum_comm_comple_date;
    int v_sum_comm_comple_time;
    int v_sum_comm_max_comm_comple_date;
    int v_sum_comm_max_comm_comple_time;
    int v_sum_comm_appr_date;
    int v_sum_comm_appr_time;
    double v_sum_comm_appr_qty;
    char v_comm_sum_approve_status[3];
    int64 v_sum_comm_basket_id;
    int v_sum_comm_net_price_flag;
    double v_sum_comm_bond_accr_intrst;
    int v_sum_comm_bond_rate_type;
    char v_sum_comm_oper_way[3];
    int v_sum_comm_exter_comm_flag;
    double v_sum_buy_order_qty;
    double v_sum_sell_order_qty;
    double v_sum_buy_comm_qty;
    double v_sum_sell_comm_qty;
    double v_sum_buy_strike_qty;
    double v_sum_sell_strike_qty;
    double v_sum_buy_strike_amt;
    double v_sum_sell_strike_amt;
    double v_sum_buy_comm_amt;
    double v_sum_sell_comm_amt;
    char v_sum_comm_remark_info[256];
    int v_sum_comm_update_times;
    char v_acco_concat_info[4097];
    int64 v_exgp_cash_id;
    double v_exgp_frozen_amt;
    double v_exgp_unfroz_amt;
    double v_exgp_comm_frozen_amt;
    double v_exgp_comm_unfroz_amt;
    double v_exgp_comm_capt_amt;
    double v_exgp_comm_releas_amt;
    double v_exgp_trade_frozen_amt;
    double v_exgp_trade_unfroz_amt;
    double v_exgp_trade_capt_amt;
    double v_exgp_trade_releas_amt;
    double v_exgp_strike_capt_amt;
    double v_exgp_strike_releas_amt;
    int v_exgp_cash_update_times;
    int64 v_exgp_posi_id;
    double v_exgp_frozen_qty;
    double v_exgp_unfroz_qty;
    double v_exgp_comm_frozen_qty;
    double v_exgp_comm_unfroz_qty;
    double v_exgp_comm_capt_qty;
    double v_exgp_comm_releas_qty;
    double v_exgp_trade_frozen_qty;
    double v_exgp_trade_unfroz_qty;
    double v_exgp_trade_capt_qty;
    double v_exgp_trade_releas_qty;
    double v_exgp_strike_capt_qty;
    double v_exgp_strike_releas_qty;
    double v_exgp_strike_frozen_qty;
    double v_exgp_strike_unfroz_qty;
    double v_exgp_realize_pandl;
    double v_exgp_intrst_pandl;
    int v_exgp_posi_update_times;
    int64 v_asac_cash_id;
    double v_asac_frozen_amt;
    double v_asac_unfroz_amt;
    double v_asac_comm_frozen_amt;
    double v_asac_comm_unfroz_amt;
    double v_asac_comm_capt_amt;
    double v_asac_comm_releas_amt;
    double v_asac_trade_frozen_amt;
    double v_asac_trade_unfroz_amt;
    double v_asac_trade_capt_amt;
    double v_asac_trade_releas_amt;
    double v_asac_strike_capt_amt;
    double v_asac_strike_releas_amt;
    int v_asac_cash_update_times;
    int64 v_asac_posi_id;
    double v_asac_frozen_qty;
    double v_asac_unfroz_qty;
    double v_asac_comm_frozen_qty;
    double v_asac_comm_unfroz_qty;
    double v_asac_comm_capt_qty;
    double v_asac_comm_releas_qty;
    double v_asac_trade_frozen_qty;
    double v_asac_trade_unfroz_qty;
    double v_asac_trade_capt_qty;
    double v_asac_trade_releas_qty;
    double v_asac_strike_capt_qty;
    double v_asac_strike_releas_qty;
    double v_asac_strike_frozen_qty;
    double v_asac_strike_unfroz_qty;
    double v_asac_realize_pandl;
    double v_asac_intrst_pandl;
    int v_asac_posi_update_times;
    int64 v_exgp_target_posi_id;
    double v_exgp_target_frozen_qty;
    double v_exgp_target_unfroz_qty;
    double v_exgp_target_comm_frozen_qty;
    double v_exgp_target_comm_unfroz_qty;
    double v_exgp_target_comm_capt_qty;
    double v_exgp_target_comm_releas_qty;
    double v_exgp_target_trade_frozen_qty;
    double v_exgp_target_trade_unfroz_qty;
    double v_exgp_target_trade_capt_qty;
    double v_exgp_target_trade_releas_qty;
    double v_exgp_target_strike_capt_qty;
    double v_exgp_target_strike_releas_qty;
    double v_exgp_target_strike_frozen_qty;
    double v_exgp_target_strike_unfroz_qty;
    double v_exgp_target_realize_pandl;
    double v_exgp_target_cost_amt;
    double v_exgp_target_intrst_cost_amt;
    double v_exgp_target_intrst_pandl;
    int v_exgp_target_posi_update_times;
    int64 v_asac_target_posi_id;
    double v_asac_target_frozen_qty;
    double v_asac_target_unfroz_qty;
    double v_asac_target_comm_frozen_qty;
    double v_asac_target_comm_unfroz_qty;
    double v_asac_target_comm_capt_qty;
    double v_asac_target_comm_releas_qty;
    double v_asac_target_trade_frozen_qty;
    double v_asac_target_trade_unfroz_qty;
    double v_asac_target_trade_capt_qty;
    double v_asac_target_trade_releas_qty;
    double v_asac_target_strike_capt_qty;
    double v_asac_target_strike_releas_qty;
    double v_asac_target_strike_frozen_qty;
    double v_asac_target_strike_unfroz_qty;
    double v_asac_target_realize_pandl;
    double v_asac_target_cost_amt;
    double v_asac_target_intrst_cost_amt;
    double v_asac_target_intrst_pandl;
    int v_asac_target_posi_update_times;
    double v_exgp_put_impawn_qty;
    double v_asac_put_impawn_qty;
    int64 v_repo_strike_id;
    double v_exch_rate;
    double v_repo_qty;
    double v_repo_amt;
    double v_repo_rate;
    int v_repo_trade_date;
    int64 v_repo_order_id;
    double v_repo_back_amt;
    double v_repo_back_intrst;
    int v_repo_back_trade_date;
    char v_repo_status[3];
    int64 v_bond_repo_id;
    char v_log_error_code[33];
    char v_log_error_info[256];


IFastMessage* lpPubMsg = NULL;
int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_group_no=0;
    v_asset_acco_no=0;
    v_comm_id=0;
    v_exch_no=0;
    strcpy(v_stock_acco, " ");
    strcpy(v_stock_code, " ");
    v_order_dir=0;
    v_strike_price=0;
    v_strike_qty=0;
    v_strike_amt=0;
    v_strike_fee=0;
    strcpy(v_remark_info, " ");
    v_comm_comple_flag=0;
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_strike_id=0;
    v_comm_strike_qty=0;
    v_comm_strike_amt=0;
    v_co_no=0;
    v_order_qty=0;
    v_price_type=0;
    v_order_price=0;
    v_strike_date=0;
    v_init_date=0;
    strcpy(v_sys_config_str, " ");
    v_pd_no=0;
    strcpy(v_co_busi_config_str, " ");
    strcpy(v_exgp_busi_config_str, " ");
    v_stock_code_no=0;
    v_stock_type=0;
    v_asset_type=0;
    strcpy(v_crncy_type, "CNY");
    strcpy(v_exch_crncy_type, "CNY");
    v_buy_ref_rate=0;
    v_sell_ref_rate=0;
    v_par_value=0;
    v_impawn_ratio=0;
    v_net_price_flag=0;
    v_intrst_days=0;
    v_bond_accr_intrst=0;
    v_bond_rate_type=0;
    v_trade_code_no=0;
    v_target_code_no=0;
    v_min_unit=0;
    v_up_limit_price=0;
    v_down_limit_price=0;
    v_last_price=0;
    v_repo_days=0;
    v_repo_back_date=0;
    v_capit_reback_days=0;
    v_posi_reback_days=0;
    v_bond_qty_unit_set=0;
    v_apply_date=0;
    strcpy(v_busi_config_str, " ");
    v_repo_cale_days=0;
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_asac_busi_config_str, " ");
    strcpy(v_split_fee_typr_str, " ");
    strcpy(v_busi_limit_str, " ");
    v_nav_asset=0;
    v_exter_comm_flag=0;
    v_market_price_ratio=0;
    v_market_price_type=0;
    v_cost_calc_type=0;
    v_order_market_price=0;
    v_sys_type=0;
    strcpy(v_opor_no_str1, " ");
    strcpy(v_opor_no_str2, " ");
    strcpy(v_opor_no_str3, " ");
    v_fina_limit_max=0;
    v_loan_limit_max=0;
    v_asset_acco_type=0;
    v_sell_auto_back_debt=0;
    v_stock_acco_no=0;
    v_exgp_cost_amt=0;
    v_exgp_intrst_cost_amt=0;
    v_exgp_curr_qty=0;
    v_asac_cost_amt=0;
    v_asac_intrst_cost_amt=0;
    v_asac_curr_qty=0;
    v_trade_commis=0;
    v_all_fee=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_comm_batch_no=0;
    v_report_date=0;
    v_report_time=0;
    strcpy(v_report_no, " ");
    v_order_date=0;
    v_order_id=0;
    strcpy(v_order_oper_way, " ");
    v_strike_time=0;
    strcpy(v_strike_no, " ");
    v_external_no=0;
    v_busi_opor_no=0;
    v_comm_opor=0;
    v_order_time=0;
    v_order_batch_no=0;
    strcpy(v_order_status, "0");
    v_wtdraw_qty=0;
    v_strike_bond_accr_intrst=0;
    v_order_frozen_amt=0;
    v_order_frozen_qty=0;
    strcpy(v_rsp_info, " ");
    v_compli_trig_id=0;
    v_record_valid_flag=0;
    strcpy(v_combo_code, " ");
    v_combo_posi_id=0;
    v_strategy_id=0;
    strcpy(v_contra_no, " ");
    v_update_times=1;
    v_curr_strike_price=0;
    v_curr_strike_amt=0;
    v_curr_strike_qty=0;
    v_comm_date=0;
    v_comm_time=0;
    v_comm_executor=0;
    v_comm_dir=0;
    v_comm_limit_price=0;
    v_limit_actual_price=0;
    v_comm_qty=0;
    v_comm_amt=0;
    v_comm_cancel_qty=0;
    v_comm_frozen_amt=0;
    v_comm_frozen_qty=0;
    strcpy(v_strike_status, "0");
    strcpy(v_comm_status, "0");
    v_comm_begin_date=0;
    v_comm_end_date=0;
    v_comm_begin_time=0;
    v_comm_end_time=0;
    v_comm_comple_date=0;
    v_comm_comple_time=0;
    v_comm_appr_date=0;
    v_comm_appr_time=0;
    strcpy(v_comm_appr_status, " ");
    v_comm_appr_oper=0;
    strcpy(v_comm_appr_remark, " ");
    v_basket_id=0;
    strcpy(v_comm_oper_way, " ");
    v_strategy_capt_qty=0;
    v_strategy_order_qty=0;
    strcpy(v_comm_remark_info, " ");
    v_disp_opor=0;
    v_disp_status=0;
    v_read_flag=0;
    v_sum_comm_row_id=0;
    v_sum_comm_co_no=0;
    v_sum_comm_pd_no=0;
    v_sum_comm_exch_group_no=0;
    v_sum_comm_asset_acco_no=0;
    v_sum_comm_pass_no=0;
    strcpy(v_sum_comm_out_acco, " ");
    strcpy(v_sum_comm_exch_crncy_type, "CNY");
    v_sum_comm_stock_code_no=0;
    v_sum_comm_date=0;
    v_sum_comm_time=0;
    v_sum_comm_batch_no=0;
    v_sum_comm_opor=0;
    v_sum_comm_executor=0;
    v_sum_comm_dir=0;
    v_sum_comm_limit_price=0;
    v_sum_comm_qty=0;
    v_sum_comm_amt=0;
    v_sum_comm_order_qty=0;
    v_sum_comm_cancel_qty=0;
    v_sum_comm_await_cancel_qty=0;
    v_sum_comm_strike_amt=0;
    v_sum_comm_strike_qty=0;
    strcpy(v_sum_comm_strike_status, "0");
    strcpy(v_comm_sum_status, "0");
    v_sum_comm_begin_date=0;
    v_sum_comm_end_date=0;
    v_sum_comm_begin_time=0;
    v_sum_comm_end_time=0;
    v_sum_comm_comple_date=0;
    v_sum_comm_comple_time=0;
    v_sum_comm_max_comm_comple_date=0;
    v_sum_comm_max_comm_comple_time=0;
    v_sum_comm_appr_date=0;
    v_sum_comm_appr_time=0;
    v_sum_comm_appr_qty=0;
    strcpy(v_comm_sum_approve_status, "0");
    v_sum_comm_basket_id=0;
    v_sum_comm_net_price_flag=0;
    v_sum_comm_bond_accr_intrst=0;
    v_sum_comm_bond_rate_type=0;
    strcpy(v_sum_comm_oper_way, " ");
    v_sum_comm_exter_comm_flag=0;
    v_sum_buy_order_qty=0;
    v_sum_sell_order_qty=0;
    v_sum_buy_comm_qty=0;
    v_sum_sell_comm_qty=0;
    v_sum_buy_strike_qty=0;
    v_sum_sell_strike_qty=0;
    v_sum_buy_strike_amt=0;
    v_sum_sell_strike_amt=0;
    v_sum_buy_comm_amt=0;
    v_sum_sell_comm_amt=0;
    strcpy(v_sum_comm_remark_info, " ");
    v_sum_comm_update_times=1;
    strcpy(v_acco_concat_info, " ");
    v_exgp_cash_id=0;
    v_exgp_frozen_amt=0;
    v_exgp_unfroz_amt=0;
    v_exgp_comm_frozen_amt=0;
    v_exgp_comm_unfroz_amt=0;
    v_exgp_comm_capt_amt=0;
    v_exgp_comm_releas_amt=0;
    v_exgp_trade_frozen_amt=0;
    v_exgp_trade_unfroz_amt=0;
    v_exgp_trade_capt_amt=0;
    v_exgp_trade_releas_amt=0;
    v_exgp_strike_capt_amt=0;
    v_exgp_strike_releas_amt=0;
    v_exgp_cash_update_times=1;
    v_exgp_posi_id=0;
    v_exgp_frozen_qty=0;
    v_exgp_unfroz_qty=0;
    v_exgp_comm_frozen_qty=0;
    v_exgp_comm_unfroz_qty=0;
    v_exgp_comm_capt_qty=0;
    v_exgp_comm_releas_qty=0;
    v_exgp_trade_frozen_qty=0;
    v_exgp_trade_unfroz_qty=0;
    v_exgp_trade_capt_qty=0;
    v_exgp_trade_releas_qty=0;
    v_exgp_strike_capt_qty=0;
    v_exgp_strike_releas_qty=0;
    v_exgp_strike_frozen_qty=0;
    v_exgp_strike_unfroz_qty=0;
    v_exgp_realize_pandl=0;
    v_exgp_intrst_pandl=0;
    v_exgp_posi_update_times=1;
    v_asac_cash_id=0;
    v_asac_frozen_amt=0;
    v_asac_unfroz_amt=0;
    v_asac_comm_frozen_amt=0;
    v_asac_comm_unfroz_amt=0;
    v_asac_comm_capt_amt=0;
    v_asac_comm_releas_amt=0;
    v_asac_trade_frozen_amt=0;
    v_asac_trade_unfroz_amt=0;
    v_asac_trade_capt_amt=0;
    v_asac_trade_releas_amt=0;
    v_asac_strike_capt_amt=0;
    v_asac_strike_releas_amt=0;
    v_asac_cash_update_times=1;
    v_asac_posi_id=0;
    v_asac_frozen_qty=0;
    v_asac_unfroz_qty=0;
    v_asac_comm_frozen_qty=0;
    v_asac_comm_unfroz_qty=0;
    v_asac_comm_capt_qty=0;
    v_asac_comm_releas_qty=0;
    v_asac_trade_frozen_qty=0;
    v_asac_trade_unfroz_qty=0;
    v_asac_trade_capt_qty=0;
    v_asac_trade_releas_qty=0;
    v_asac_strike_capt_qty=0;
    v_asac_strike_releas_qty=0;
    v_asac_strike_frozen_qty=0;
    v_asac_strike_unfroz_qty=0;
    v_asac_realize_pandl=0;
    v_asac_intrst_pandl=0;
    v_asac_posi_update_times=1;
    v_exgp_target_posi_id=0;
    v_exgp_target_frozen_qty=0;
    v_exgp_target_unfroz_qty=0;
    v_exgp_target_comm_frozen_qty=0;
    v_exgp_target_comm_unfroz_qty=0;
    v_exgp_target_comm_capt_qty=0;
    v_exgp_target_comm_releas_qty=0;
    v_exgp_target_trade_frozen_qty=0;
    v_exgp_target_trade_unfroz_qty=0;
    v_exgp_target_trade_capt_qty=0;
    v_exgp_target_trade_releas_qty=0;
    v_exgp_target_strike_capt_qty=0;
    v_exgp_target_strike_releas_qty=0;
    v_exgp_target_strike_frozen_qty=0;
    v_exgp_target_strike_unfroz_qty=0;
    v_exgp_target_realize_pandl=0;
    v_exgp_target_cost_amt=0;
    v_exgp_target_intrst_cost_amt=0;
    v_exgp_target_intrst_pandl=0;
    v_exgp_target_posi_update_times=0;
    v_asac_target_posi_id=0;
    v_asac_target_frozen_qty=0;
    v_asac_target_unfroz_qty=0;
    v_asac_target_comm_frozen_qty=0;
    v_asac_target_comm_unfroz_qty=0;
    v_asac_target_comm_capt_qty=0;
    v_asac_target_comm_releas_qty=0;
    v_asac_target_trade_frozen_qty=0;
    v_asac_target_trade_unfroz_qty=0;
    v_asac_target_trade_capt_qty=0;
    v_asac_target_trade_releas_qty=0;
    v_asac_target_strike_capt_qty=0;
    v_asac_target_strike_releas_qty=0;
    v_asac_target_strike_frozen_qty=0;
    v_asac_target_strike_unfroz_qty=0;
    v_asac_target_realize_pandl=0;
    v_asac_target_cost_amt=0;
    v_asac_target_intrst_cost_amt=0;
    v_asac_target_intrst_pandl=0;
    v_asac_target_posi_update_times=0;
    v_exgp_put_impawn_qty=0;
    v_asac_put_impawn_qty=0;
    v_repo_strike_id=0;
    v_exch_rate=0;
    v_repo_qty=0;
    v_repo_amt=0;
    v_repo_rate=0;
    v_repo_trade_date=0;
    v_repo_order_id=0;
    v_repo_back_amt=0;
    v_repo_back_intrst=0;
    v_repo_back_trade_date=0;
    strcpy(v_repo_status, "0");
    v_bond_repo_id=0;
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_pass_no = lpInBizMsg->GetInt32(LDBIZ_PASS_NO_INT);
    strncpy(v_out_acco, lpInBizMsg->GetString(LDBIZ_OUT_ACCO_STR),32);
    v_out_acco[32] = '\0';
    v_exch_group_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpInBizMsg->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    v_comm_id = lpInBizMsg->GetInt64(LDBIZ_COMM_ID_INT64);
    v_exch_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_NO_INT);
    strncpy(v_stock_acco, lpInBizMsg->GetString(LDBIZ_STOCK_ACCO_STR),16);
    v_stock_acco[16] = '\0';
    strncpy(v_stock_code, lpInBizMsg->GetString(LDBIZ_STOCK_CODE_STR),6);
    v_stock_code[6] = '\0';
    v_order_dir = lpInBizMsg->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_strike_price = lpInBizMsg->GetDouble(LDBIZ_STRIKE_PRICE_FLOAT);
    v_strike_qty = lpInBizMsg->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_amt = lpInBizMsg->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    v_strike_fee = lpInBizMsg->GetDouble(LDBIZ_STRIKE_FEE_FLOAT);
    strncpy(v_remark_info, lpInBizMsg->GetString(LDBIZ_REMARK_INFO_STR),255);
    v_remark_info[255] = '\0';
    v_comm_comple_flag = lpInBizMsg->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;
    IFastMessage* lpTSCall1Req3 = NULL;
    IFastMessage* lpTSCall1Ans3 = NULL;
    IFastMessage* lpTSCall1Req4 = NULL;
    IFastMessage* lpTSCall1Ans4 = NULL;
    IFastMessage* lpTSCall1Req5 = NULL;
    IFastMessage* lpTSCall1Ans5 = NULL;
    IFastMessage* lpTSCall1Req6 = NULL;
    IFastMessage* lpTSCall1Ans6 = NULL;
    IFastMessage* lpTSCall1Req7 = NULL;
    IFastMessage* lpTSCall1Ans7 = NULL;
    IFastMessage* lpTSCall1Req8 = NULL;
    IFastMessage* lpTSCall1Ans8 = NULL;
    IFastMessage* lpTSCall1Req9 = NULL;
    IFastMessage* lpTSCall1Ans9 = NULL;
    IFastMessage* lpTSCall1Req10 = NULL;
    IFastMessage* lpTSCall1Ans10 = NULL;
    IFastMessage* lpTSCall1Req11 = NULL;
    IFastMessage* lpTSCall1Ans11 = NULL;


    // set @机构编号# = @操作员机构编号#;
    v_co_no = v_opor_co_no;

    // set @订单数量# = @成交数量#;
    v_order_qty = v_strike_qty;

    // set @价格类型# = 《价格类型-限价》;
    v_price_type = 1;

    // set @订单价格# = 0;
    v_order_price = 0;

    // set @成交日期# = 0;
    v_strike_date = 0;
    //公共子系统检查
    //调用过程[事务_公共_交易接口_检查系统状态权限身份交易业务]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.25.26", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req0->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req0->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req0->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req0->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpTSCall1Req0->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpTSCall1Req0->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.26]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_sys_config_str, lpTSCall1Ans0->GetString(LDBIZ_SYS_CONFIG_STR_STR));
    v_pd_no = lpTSCall1Ans0->GetInt32(LDBIZ_PD_NO_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
    strcpy(v_exgp_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR));
    v_stock_code_no = lpTSCall1Ans0->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans0->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans0->GetInt32(LDBIZ_ASSET_TYPE_INT);
    strcpy(v_crncy_type, lpTSCall1Ans0->GetString(LDBIZ_CRNCY_TYPE_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans0->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_buy_ref_rate = lpTSCall1Ans0->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
    v_sell_ref_rate = lpTSCall1Ans0->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
    v_par_value = lpTSCall1Ans0->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans0->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_net_price_flag = lpTSCall1Ans0->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_intrst_days = lpTSCall1Ans0->GetInt32(LDBIZ_INTRST_DAYS_INT);
    v_bond_accr_intrst = lpTSCall1Ans0->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans0->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_trade_code_no = lpTSCall1Ans0->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans0->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_min_unit = lpTSCall1Ans0->GetInt32(LDBIZ_MIN_UNIT_INT);
    v_up_limit_price = lpTSCall1Ans0->GetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT);
    v_down_limit_price = lpTSCall1Ans0->GetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT);
    v_last_price = lpTSCall1Ans0->GetDouble(LDBIZ_LAST_PRICE_FLOAT);
    v_repo_days = lpTSCall1Ans0->GetInt32(LDBIZ_REPO_DAYS_INT);
    v_repo_back_date = lpTSCall1Ans0->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
    v_capit_reback_days = lpTSCall1Ans0->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
    v_posi_reback_days = lpTSCall1Ans0->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);
    v_bond_qty_unit_set = lpTSCall1Ans0->GetInt32(LDBIZ_BOND_QTY_UNIT_SET_INT);
    v_apply_date = lpTSCall1Ans0->GetInt32(LDBIZ_APPLY_DATE_INT);


    // set @业务控制配置串# = @交易组业务控制配置串#;
    strcpy(v_busi_config_str,v_exgp_busi_config_str);

    // set @回购实际天数# = @计息天数#;
    v_repo_cale_days = v_intrst_days;

    // [检查报错返回][@订单方向# = 《订单方向-新股申购》 or @订单方向# = 《订单方向-配售申购》][753][@订单方向#]
    if (v_order_dir == 11 || v_order_dir == 23)
    {
        strcpy(v_error_code, "tdsecuL.5.52.753");
        snprintf(v_error_info, sizeof(v_error_info), "%s%d","订单方向=",v_order_dir);
        iRet = -1;
        goto END;
    }


    // [检查报错返回][(@成交数量# = 0 or @成交价格# = 0) and @指令完成标志# = 《指令完成标志-未完成》][755][@成交数量#, @成交价格#]
    if ((v_strike_qty == 0 || v_strike_price == 0) && v_comm_comple_flag == 1)
    {
        strcpy(v_error_code, "tdsecuL.5.52.755");
        snprintf(v_error_info, sizeof(v_error_info), "%s%018.2f%s%016.9f","成交数量=",v_strike_qty,"成交价格=",v_strike_price);
        iRet = -1;
        goto END;
    }


    // set @业务控制串# = "11111";
    strcpy(v_busi_ctrl_str,"11111");
    //调用过程[事务_产品_交易接口_检查交易产品账户信息]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("prodT.8.21", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req1->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req1->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req1->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req1->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req1->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpTSCall1Req1->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpTSCall1Req1->SetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT,v_up_limit_price);
    lpTSCall1Req1->SetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT,v_down_limit_price);
    lpTSCall1Req1->SetDouble(LDBIZ_LAST_PRICE_FLOAT,v_last_price);
    lpTSCall1Req1->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
    lpTSCall1Req1->SetString(LDBIZ_BUSI_CONFIG_STR_STR,v_busi_config_str);
    lpTSCall1Req1->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.8.21]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
    strcpy(v_exgp_busi_config_str, lpTSCall1Ans1->GetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR));
    strcpy(v_asac_busi_config_str, lpTSCall1Ans1->GetString(LDBIZ_ASAC_BUSI_CONFIG_STR_STR));
    strcpy(v_split_fee_typr_str, lpTSCall1Ans1->GetString(LDBIZ_SPLIT_FEE_TYPR_STR_STR));
    strcpy(v_busi_limit_str, lpTSCall1Ans1->GetString(LDBIZ_BUSI_LIMIT_STR_STR));
    v_pass_no = lpTSCall1Ans1->GetInt32(LDBIZ_PASS_NO_INT);
    strcpy(v_out_acco, lpTSCall1Ans1->GetString(LDBIZ_OUT_ACCO_STR));
    v_nav_asset = lpTSCall1Ans1->GetDouble(LDBIZ_NAV_ASSET_FLOAT);
    v_exter_comm_flag = lpTSCall1Ans1->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_market_price_ratio = lpTSCall1Ans1->GetDouble(LDBIZ_MARKET_PRICE_RATIO_FLOAT);
    v_market_price_type = lpTSCall1Ans1->GetInt32(LDBIZ_MARKET_PRICE_TYPE_INT);
    v_cost_calc_type = lpTSCall1Ans1->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
    v_order_market_price = lpTSCall1Ans1->GetDouble(LDBIZ_ORDER_MARKET_PRICE_FLOAT);
    v_sys_type = lpTSCall1Ans1->GetInt32(LDBIZ_SYS_TYPE_INT);
    strcpy(v_opor_no_str1, lpTSCall1Ans1->GetString(LDBIZ_OPOR_NO_STR1_STR));
    strcpy(v_opor_no_str2, lpTSCall1Ans1->GetString(LDBIZ_OPOR_NO_STR2_STR));
    strcpy(v_opor_no_str3, lpTSCall1Ans1->GetString(LDBIZ_OPOR_NO_STR3_STR));
    v_fina_limit_max = lpTSCall1Ans1->GetDouble(LDBIZ_FINA_LIMIT_MAX_FLOAT);
    v_loan_limit_max = lpTSCall1Ans1->GetDouble(LDBIZ_LOAN_LIMIT_MAX_FLOAT);
    v_asset_acco_type = lpTSCall1Ans1->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    v_sell_auto_back_debt = lpTSCall1Ans1->GetInt32(LDBIZ_SELL_AUTO_BACK_DEBT_INT);

    //获取股东代码
    //调用过程[事务_产品证券_交易接口_检查股东账户状态获取持仓成本]
    //组织事务请求
    if(lpTSCall1Ans2)
    {
      lpTSCall1Ans2->FreeMsg();
      lpTSCall1Ans2=NULL;
    }
    lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pdsecuT.6.4", 0);
    lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req2->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req2->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req2->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req2->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
    if(!lpTSCall1Ans2)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pdsecuT.6.4]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans2->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
    v_stock_acco_no = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_acco, lpTSCall1Ans2->GetString(LDBIZ_STOCK_ACCO_STR));
    v_exgp_cost_amt = lpTSCall1Ans2->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
    v_exgp_intrst_cost_amt = lpTSCall1Ans2->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
    v_exgp_curr_qty = lpTSCall1Ans2->GetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT);
    v_asac_cost_amt = lpTSCall1Ans2->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
    v_asac_intrst_cost_amt = lpTSCall1Ans2->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
    v_asac_curr_qty = lpTSCall1Ans2->GetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT);


    // if @成交费用# = 0 then
    if (v_strike_fee == 0)
    {
        //调用过程[事务_公共_公共接口_计算证券成交费用]
        //组织事务请求
        if(lpTSCall1Ans3)
        {
          lpTSCall1Ans3->FreeMsg();
          lpTSCall1Ans3=NULL;
        }
        lpTSCall1Req3=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
        lpTSCall1Req3->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req3->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req3->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req3->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req3->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req3->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req3->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req3->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req3->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req3->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req3->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req3->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req3->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpTSCall1Req3->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req3->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpTSCall1Req3->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req3->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpTSCall1Req3->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
        lpTSCall1Req3->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpTSCall1Req3->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpTSCall1Req3->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        glpTSSubcallSerives->SubCall(lpTSCall1Req3, &lpTSCall1Ans3, 5000);
        if(!lpTSCall1Ans3)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans3->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
        v_trade_commis = lpTSCall1Ans3->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
        v_all_fee = lpTSCall1Ans3->GetDouble(LDBIZ_ALL_FEE_FLOAT);
        v_stamp_tax = lpTSCall1Ans3->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
        v_trans_fee = lpTSCall1Ans3->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
        v_brkage_fee = lpTSCall1Ans3->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
        v_SEC_charges = lpTSCall1Ans3->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
        v_other_fee = lpTSCall1Ans3->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
        v_other_commis = lpTSCall1Ans3->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
        v_trade_tax = lpTSCall1Ans3->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
        v_trade_cost_fee = lpTSCall1Ans3->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
        v_trade_system_use_fee = lpTSCall1Ans3->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
        v_stock_settle_fee = lpTSCall1Ans3->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);

    }
    // else
    else
    {


        // set @全部费用# = @成交费用#;
        v_all_fee = v_strike_fee;
    // end if;
    }

    //调用过程[事务_交易证券_报盘_处理体外指令成交]
    //组织事务请求
    if(lpTSCall1Ans4)
    {
      lpTSCall1Ans4->FreeMsg();
      lpTSCall1Ans4=NULL;
    }
    lpTSCall1Req4=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.24", 0);
    lpTSCall1Req4->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req4->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req4->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req4->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req4->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req4->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req4->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req4->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req4->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req4->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req4->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req4->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req4->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
    lpTSCall1Req4->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpTSCall1Req4->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req4->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpTSCall1Req4->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpTSCall1Req4->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req4->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req4->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
    lpTSCall1Req4->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
    lpTSCall1Req4->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
    lpTSCall1Req4->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req4->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpTSCall1Req4->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpTSCall1Req4->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpTSCall1Req4->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpTSCall1Req4->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
    lpTSCall1Req4->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
    lpTSCall1Req4->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
    lpTSCall1Req4->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
    lpTSCall1Req4->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
    lpTSCall1Req4->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
    lpTSCall1Req4->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
    lpTSCall1Req4->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
    lpTSCall1Req4->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
    lpTSCall1Req4->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
    lpTSCall1Req4->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
    lpTSCall1Req4->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
    lpTSCall1Req4->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpTSCall1Req4->SetInt32(LDBIZ_INTRST_DAYS_INT,v_intrst_days);
    lpTSCall1Req4->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpTSCall1Req4->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpTSCall1Req4->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpTSCall1Req4->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpTSCall1Req4->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
    lpTSCall1Req4->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
    lpTSCall1Req4->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
    lpTSCall1Req4->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
    lpTSCall1Req4->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
    lpTSCall1Req4->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
    lpTSCall1Req4->SetInt32(LDBIZ_COST_CALC_TYPE_INT,v_cost_calc_type);
    lpTSCall1Req4->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
    lpTSCall1Req4->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
    lpTSCall1Req4->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
    lpTSCall1Req4->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
    lpTSCall1Req4->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
    lpTSCall1Req4->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
    lpTSCall1Req4->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
    lpTSCall1Req4->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
    lpTSCall1Req4->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
    glpTSSubcallSerives->SubCall(lpTSCall1Req4, &lpTSCall1Ans4, 5000);
    if(!lpTSCall1Ans4)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.24]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans4->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
    v_strike_id = lpTSCall1Ans4->GetInt64(LDBIZ_STRIKE_ID_INT64);
    v_comm_strike_qty = lpTSCall1Ans4->GetDouble(LDBIZ_COMM_STRIKE_QTY_FLOAT);
    v_comm_strike_amt = lpTSCall1Ans4->GetDouble(LDBIZ_COMM_STRIKE_AMT_FLOAT);
    v_comm_batch_no = lpTSCall1Ans4->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
    v_report_date = lpTSCall1Ans4->GetInt32(LDBIZ_REPORT_DATE_INT);
    v_report_time = lpTSCall1Ans4->GetInt32(LDBIZ_REPORT_TIME_INT);
    strcpy(v_report_no, lpTSCall1Ans4->GetString(LDBIZ_REPORT_NO_STR));
    v_order_date = lpTSCall1Ans4->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_id = lpTSCall1Ans4->GetInt64(LDBIZ_ORDER_ID_INT64);
    v_order_price = lpTSCall1Ans4->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans4->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    strcpy(v_order_oper_way, lpTSCall1Ans4->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    v_strike_date = lpTSCall1Ans4->GetInt32(LDBIZ_STRIKE_DATE_INT);
    v_strike_time = lpTSCall1Ans4->GetInt32(LDBIZ_STRIKE_TIME_INT);
    strcpy(v_strike_no, lpTSCall1Ans4->GetString(LDBIZ_STRIKE_NO_STR));
    v_external_no = lpTSCall1Ans4->GetInt64(LDBIZ_EXTERNAL_NO_INT64);

    //下完指令订单 ，增加订单主推给风控。Modify by wjp 20190428
    //调用过程[事务_交易证券_主推接口_获取订单信息]
    //组织事务请求
    if(lpTSCall1Ans5)
    {
      lpTSCall1Ans5->FreeMsg();
      lpTSCall1Ans5=NULL;
    }
    lpTSCall1Req5=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.45", 0);
    lpTSCall1Req5->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req5->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req5->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req5->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req5->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req5->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req5->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req5->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req5->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    glpTSSubcallSerives->SubCall(lpTSCall1Req5, &lpTSCall1Ans5, 5000);
    if(!lpTSCall1Ans5)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.45]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans5->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
    v_co_no = lpTSCall1Ans5->GetInt32(LDBIZ_CO_NO_INT);
    v_busi_opor_no = lpTSCall1Ans5->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    v_pd_no = lpTSCall1Ans5->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans5->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    v_pass_no = lpTSCall1Ans5->GetInt32(LDBIZ_PASS_NO_INT);
    strcpy(v_out_acco, lpTSCall1Ans5->GetString(LDBIZ_OUT_ACCO_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans5->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_exch_no = lpTSCall1Ans5->GetInt32(LDBIZ_EXCH_NO_INT);
    v_stock_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_acco, lpTSCall1Ans5->GetString(LDBIZ_STOCK_ACCO_STR));
    v_stock_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strcpy(v_stock_code, lpTSCall1Ans5->GetString(LDBIZ_STOCK_CODE_STR));
    v_trade_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans5->GetInt32(LDBIZ_ASSET_TYPE_INT);
    v_external_no = lpTSCall1Ans5->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
    v_comm_id = lpTSCall1Ans5->GetInt64(LDBIZ_COMM_ID_INT64);
    v_comm_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
    v_comm_opor = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_OPOR_INT);
    v_report_date = lpTSCall1Ans5->GetInt32(LDBIZ_REPORT_DATE_INT);
    v_report_time = lpTSCall1Ans5->GetInt32(LDBIZ_REPORT_TIME_INT);
    strcpy(v_report_no, lpTSCall1Ans5->GetString(LDBIZ_REPORT_NO_STR));
    v_order_date = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_time = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_order_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    v_order_dir = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_price_type = lpTSCall1Ans5->GetInt32(LDBIZ_PRICE_TYPE_INT);
    v_order_price = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans5->GetString(LDBIZ_ORDER_STATUS_STR));
    v_wtdraw_qty = lpTSCall1Ans5->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
    v_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    v_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_all_fee = lpTSCall1Ans5->GetDouble(LDBIZ_ALL_FEE_FLOAT);
    v_stamp_tax = lpTSCall1Ans5->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
    v_trans_fee = lpTSCall1Ans5->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
    v_brkage_fee = lpTSCall1Ans5->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
    v_SEC_charges = lpTSCall1Ans5->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
    v_other_fee = lpTSCall1Ans5->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
    v_trade_commis = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
    v_other_commis = lpTSCall1Ans5->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
    v_trade_tax = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
    v_trade_cost_fee = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
    v_trade_system_use_fee = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
    v_stock_settle_fee = lpTSCall1Ans5->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);
    v_net_price_flag = lpTSCall1Ans5->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_intrst_days = lpTSCall1Ans5->GetInt32(LDBIZ_INTRST_DAYS_INT);
    v_par_value = lpTSCall1Ans5->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans5->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_strike_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
    v_impawn_ratio = lpTSCall1Ans5->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_order_frozen_amt = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    v_order_frozen_qty = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
    strcpy(v_rsp_info, lpTSCall1Ans5->GetString(LDBIZ_RSP_INFO_STR));
    v_compli_trig_id = lpTSCall1Ans5->GetInt64(LDBIZ_COMPLI_TRIG_ID_INT64);
    strcpy(v_remark_info, lpTSCall1Ans5->GetString(LDBIZ_REMARK_INFO_STR));
    v_cost_calc_type = lpTSCall1Ans5->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
    strcpy(v_order_oper_way, lpTSCall1Ans5->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    v_exter_comm_flag = lpTSCall1Ans5->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_record_valid_flag = lpTSCall1Ans5->GetInt32(LDBIZ_RECORD_VALID_FLAG_INT);
    strcpy(v_combo_code, lpTSCall1Ans5->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans5->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    v_strategy_id = lpTSCall1Ans5->GetInt64(LDBIZ_STRATEGY_ID_INT64);
    v_asset_acco_type = lpTSCall1Ans5->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    strcpy(v_contra_no, lpTSCall1Ans5->GetString(LDBIZ_CONTRA_NO_STR));
    v_update_times = lpTSCall1Ans5->GetInt32(LDBIZ_UPDATE_TIMES_INT);


    // set @操作员编号# = @业务操作员编号#;
    v_opor_no = v_busi_opor_no;

    // set @当笔成交价格#=@成交价格#;
    v_curr_strike_price=v_strike_price;

    // set @当笔成交金额#=@成交金额#;
    v_curr_strike_amt=v_strike_amt;

    // set @当笔成交数量#=@成交数量#;
    v_curr_strike_qty=v_strike_qty;

    // [主动推送][secu.order][证券主推_订单_订单主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
    lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
    lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


    // set @组合代码# = " ";
    strcpy(v_combo_code," ");

    // set @订单批号# = 0;
    v_order_batch_no = 0;

    // set @更新次数# = 1;
    v_update_times = 1;

    // set @记录有效标志# =《记录有效标志-有效》;
    v_record_valid_flag =1;

    // set @成交债券计提利息# = 0;
    v_strike_bond_accr_intrst = 0;

    // [主动推送][secu.rptstrike][证券主推_报盘_成交主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.33", 0);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpPubMsg->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpPubMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
    lpPubMsg->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
    lpPubMsg->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
    lpPubMsg->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
    lpPubMsg->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
    lpPubMsg->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
    lpPubMsg->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
    lpPubMsg->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
    lpPubMsg->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
    lpPubMsg->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
    lpPubMsg->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
    lpPubMsg->SetInt32(LDBIZ_RECORD_VALID_FLAG_INT,v_record_valid_flag);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.rptstrike", lpPubMsg);


    // if @指令序号# > 0 then
    if (v_comm_id > 0)
    {
        //调用过程[事务_交易证券_主推接口_获取指令混合信息]
        //组织事务请求
        if(lpTSCall1Ans6)
        {
          lpTSCall1Ans6->FreeMsg();
          lpTSCall1Ans6=NULL;
        }
        lpTSCall1Req6=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
        lpTSCall1Req6->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req6->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req6->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req6->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req6->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req6->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req6->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        glpTSSubcallSerives->SubCall(lpTSCall1Req6, &lpTSCall1Ans6, 5000);
        if(!lpTSCall1Ans6)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans6->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
        v_init_date = lpTSCall1Ans6->GetInt32(LDBIZ_INIT_DATE_INT);
        v_co_no = lpTSCall1Ans6->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans6->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans6->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_pass_no = lpTSCall1Ans6->GetInt32(LDBIZ_PASS_NO_INT);
        strcpy(v_out_acco, lpTSCall1Ans6->GetString(LDBIZ_OUT_ACCO_STR));
        strcpy(v_exch_crncy_type, lpTSCall1Ans6->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
        v_stock_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        v_stock_type = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_TYPE_INT);
        v_comm_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_TIME_INT);
        v_comm_batch_no = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_opor = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_OPOR_INT);
        v_comm_executor = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_comm_dir = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_DIR_INT);
        v_comm_limit_price = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
        v_limit_actual_price = lpTSCall1Ans6->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
        v_comm_qty = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_QTY_FLOAT);
        v_comm_amt = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_AMT_FLOAT);
        v_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
        v_comm_cancel_qty = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
        v_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
        v_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
        v_comm_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
        v_comm_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
        strcpy(v_strike_status, lpTSCall1Ans6->GetString(LDBIZ_STRIKE_STATUS_STR));
        strcpy(v_comm_status, lpTSCall1Ans6->GetString(LDBIZ_COMM_STATUS_STR));
        v_comm_begin_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
        v_comm_end_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_END_DATE_INT);
        v_comm_begin_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
        v_comm_end_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_END_TIME_INT);
        v_comm_comple_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
        v_comm_comple_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
        v_comm_appr_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
        v_comm_appr_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
        strcpy(v_comm_appr_status, lpTSCall1Ans6->GetString(LDBIZ_COMM_APPR_STATUS_STR));
        v_comm_appr_oper = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
        strcpy(v_comm_appr_remark, lpTSCall1Ans6->GetString(LDBIZ_COMM_APPR_REMARK_STR));
        v_basket_id = lpTSCall1Ans6->GetInt64(LDBIZ_BASKET_ID_INT64);
        v_net_price_flag = lpTSCall1Ans6->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
        v_bond_accr_intrst = lpTSCall1Ans6->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
        v_bond_rate_type = lpTSCall1Ans6->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
        strcpy(v_comm_oper_way, lpTSCall1Ans6->GetString(LDBIZ_COMM_OPER_WAY_STR));
        v_exter_comm_flag = lpTSCall1Ans6->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
        v_comm_comple_flag = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
        v_strategy_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
        v_strategy_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
        strcpy(v_contra_no, lpTSCall1Ans6->GetString(LDBIZ_CONTRA_NO_STR));
        strcpy(v_comm_remark_info, lpTSCall1Ans6->GetString(LDBIZ_COMM_REMARK_INFO_STR));
        v_disp_opor = lpTSCall1Ans6->GetInt32(LDBIZ_DISP_OPOR_INT);
        v_disp_status = lpTSCall1Ans6->GetInt32(LDBIZ_DISP_STATUS_INT);
        v_read_flag = lpTSCall1Ans6->GetInt32(LDBIZ_READ_FLAG_INT);
        v_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_UPDATE_TIMES_INT);
        v_sum_comm_row_id = lpTSCall1Ans6->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
        v_sum_comm_co_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
        v_sum_comm_pd_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
        v_sum_comm_exch_group_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
        v_sum_comm_asset_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
        v_sum_comm_pass_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
        strcpy(v_sum_comm_out_acco, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
        strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
        v_sum_comm_stock_code_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
        v_sum_comm_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
        v_sum_comm_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
        v_sum_comm_batch_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
        v_sum_comm_opor = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
        v_sum_comm_executor = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
        v_sum_comm_dir = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
        v_sum_comm_limit_price = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
        v_sum_comm_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
        v_sum_comm_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
        v_sum_comm_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
        v_sum_comm_cancel_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
        v_sum_comm_await_cancel_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
        v_sum_comm_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
        v_sum_comm_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
        strcpy(v_sum_comm_strike_status, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
        strcpy(v_comm_sum_status, lpTSCall1Ans6->GetString(LDBIZ_COMM_SUM_STATUS_STR));
        v_sum_comm_begin_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
        v_sum_comm_end_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
        v_sum_comm_begin_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
        v_sum_comm_end_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
        v_sum_comm_comple_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
        v_sum_comm_comple_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
        v_sum_comm_max_comm_comple_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
        v_sum_comm_max_comm_comple_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
        v_sum_comm_appr_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
        v_sum_comm_appr_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
        v_sum_comm_appr_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
        strcpy(v_comm_sum_approve_status, lpTSCall1Ans6->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
        v_sum_comm_basket_id = lpTSCall1Ans6->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
        v_sum_comm_net_price_flag = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
        v_sum_comm_bond_accr_intrst = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
        v_sum_comm_bond_rate_type = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
        strcpy(v_sum_comm_oper_way, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
        v_sum_comm_exter_comm_flag = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
        v_sum_buy_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
        v_sum_sell_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
        v_sum_buy_comm_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
        v_sum_sell_comm_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
        v_sum_buy_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
        v_sum_sell_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
        v_sum_buy_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
        v_sum_sell_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
        v_sum_buy_comm_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
        v_sum_sell_comm_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
        strcpy(v_sum_comm_remark_info, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
        v_sum_comm_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
        strcpy(v_acco_concat_info, lpTSCall1Ans6->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


        // [主动推送][secu.comm][证券主推_指令_指令主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
        lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
        lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
        lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
        lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
        lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
        lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
        lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
        lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
        lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
        lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
        lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
        lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
        lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
        lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
        lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
        lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
        lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
        lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
        lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
        lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


        // if @指令批号# > 0 then
        if (v_comm_batch_no > 0)
        {

            // set @指令备注信息#= @汇总指令备注信息#;
            strcpy(v_comm_remark_info,v_sum_comm_remark_info);

            // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
            lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
            lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
            lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
            lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
            lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
            lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
            lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
            glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

        // end if;
        }

    // end if;
    }

    //质押提交和质押转回，要推交易代码和标准券代码

    // if @订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》 then
    if (v_order_dir == 21 || v_order_dir == 22)
    {
      //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
      //组织事务请求
      if(lpTSCall1Ans7)
      {
        lpTSCall1Ans7->FreeMsg();
        lpTSCall1Ans7=NULL;
      }
      lpTSCall1Req7=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
      lpTSCall1Req7->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req7->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req7->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req7->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req7->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req7->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req7->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req7->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req7->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req7->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req7->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req7->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req7->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req7->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
      lpTSCall1Req7->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpTSCall1Req7->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
      glpTSSubcallSerives->SubCall(lpTSCall1Req7, &lpTSCall1Ans7, 5000);
      if(!lpTSCall1Ans7)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans7->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
      v_exgp_target_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
      v_exgp_target_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
      v_exgp_target_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
      v_exgp_target_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
      v_exgp_target_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_target_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
      v_exgp_target_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
      v_exgp_target_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_target_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_target_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
      v_exgp_target_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_target_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_target_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_target_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_target_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_target_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
      v_exgp_target_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
      v_exgp_target_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
      v_exgp_target_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
      v_exgp_target_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
      v_asac_target_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
      v_asac_target_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
      v_asac_target_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
      v_asac_target_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
      v_asac_target_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
      v_asac_target_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
      v_asac_target_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
      v_asac_target_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
      v_asac_target_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_target_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
      v_asac_target_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
      v_asac_target_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
      v_asac_target_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_target_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_target_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_target_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
      v_asac_target_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
      v_asac_target_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
      v_asac_target_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
      v_asac_target_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
      v_exgp_put_impawn_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
      v_asac_put_impawn_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


      // set @证券代码编号# = @交易代码编号#;
      v_stock_code_no = v_trade_code_no;

      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


      // set @交易组提交质押数量# = 0;
      v_exgp_put_impawn_qty = 0;

      // set @资产账户提交质押数量# = 0;
      v_asac_put_impawn_qty = 0;

      // set @证券代码编号# = @标的代码编号#;
      v_stock_code_no = v_target_code_no;

      // set @交易组持仓序号# = @交易组标的持仓序号#;
      v_exgp_posi_id = v_exgp_target_posi_id;

      // set @交易组冻结数量# = @交易组标的冻结数量#;
      v_exgp_frozen_qty = v_exgp_target_frozen_qty;

      // set @交易组解冻数量# = @交易组标的解冻数量#;
      v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

      // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
      v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

      // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
      v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

      // set @交易组指令占用数量# = @交易组标的指令占用数量#;
      v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

      // set @交易组指令释放数量# = @交易组标的指令释放数量#;
      v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

      // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
      v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

      // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
      v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

      // set @交易组交易占用数量# = @交易组标的交易占用数量#;
      v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

      // set @交易组交易释放数量# = @交易组标的交易释放数量#;
      v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

      // set @交易组成交占用数量# = @交易组标的成交占用数量#;
      v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

      // set @交易组成交释放数量# = @交易组标的成交释放数量#;
      v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

      // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
      v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

      // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
      v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

      // set @交易组实现盈亏# = @交易组标的实现盈亏#;
      v_exgp_realize_pandl = v_exgp_target_realize_pandl;

      // set @交易组成本金额# = @交易组标的成本金额#;
      v_exgp_cost_amt = v_exgp_target_cost_amt;

      // set @交易组利息成本金额# = @交易组标的利息成本金额#;
      v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

      // set @交易组利息收益# = @交易组标的利息收益#;
      v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

      // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
      v_exgp_posi_update_times = v_exgp_target_posi_update_times;

      // set @资产账户持仓序号# = @资产账户标的持仓序号#;
      v_asac_posi_id = v_asac_target_posi_id;

      // set @资产账户冻结数量# = @资产账户标的冻结数量#;
      v_asac_frozen_qty = v_asac_target_frozen_qty;

      // set @资产账户解冻数量# = @资产账户标的解冻数量#;
      v_asac_unfroz_qty = v_asac_target_unfroz_qty;

      // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
      v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

      // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
      v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

      // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
      v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

      // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
      v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

      // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
      v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

      // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
      v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

      // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
      v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

      // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
      v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

      // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
      v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

      // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
      v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

      // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
      v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

      // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
      v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

      // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
      v_asac_realize_pandl = v_asac_target_realize_pandl;

      // set @资产账户成本金额# = @资产账户标的成本金额#;
      v_asac_cost_amt = v_asac_target_cost_amt;

      // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
      v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

      // set @资产账户利息收益# = @资产账户标的利息收益#;
      v_asac_intrst_pandl = v_asac_target_intrst_pandl;

      // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
      v_asac_posi_update_times = v_asac_target_posi_update_times;

      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


    }
    // else if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
    else if (v_order_dir == 3 || v_order_dir == 4)
    {

      // set @证券代码编号# = @标的代码编号#;
      v_stock_code_no = v_target_code_no;
      //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
      //组织事务请求
      if(lpTSCall1Ans8)
      {
        lpTSCall1Ans8->FreeMsg();
        lpTSCall1Ans8=NULL;
      }
      lpTSCall1Req8=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
      lpTSCall1Req8->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req8->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req8->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req8->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req8->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req8->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req8->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req8->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req8->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req8->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req8->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req8->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req8->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req8->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpTSCall1Req8->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      glpTSSubcallSerives->SubCall(lpTSCall1Req8, &lpTSCall1Ans8, 5000);
      if(!lpTSCall1Ans8)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans8->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans8->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans8->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans8->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans8->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


      // set @回购成交序号# = @成交序号#;
      v_repo_strike_id = v_strike_id;
      //调用过程[事务_交易证券_主推接口_获取债券回购信息]
      //组织事务请求
      if(lpTSCall1Ans9)
      {
        lpTSCall1Ans9->FreeMsg();
        lpTSCall1Ans9=NULL;
      }
      lpTSCall1Req9=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.30", 0);
      lpTSCall1Req9->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req9->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req9->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req9->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req9->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req9->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req9->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req9->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req9->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
      glpTSSubcallSerives->SubCall(lpTSCall1Req9, &lpTSCall1Ans9, 5000);
      if(!lpTSCall1Ans9)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.30]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans9->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
      v_init_date = lpTSCall1Ans9->GetInt32(LDBIZ_INIT_DATE_INT);
      v_co_no = lpTSCall1Ans9->GetInt32(LDBIZ_CO_NO_INT);
      v_pd_no = lpTSCall1Ans9->GetInt32(LDBIZ_PD_NO_INT);
      v_exch_group_no = lpTSCall1Ans9->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
      v_asset_acco_no = lpTSCall1Ans9->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
      strcpy(v_crncy_type, lpTSCall1Ans9->GetString(LDBIZ_CRNCY_TYPE_STR));
      strcpy(v_exch_crncy_type, lpTSCall1Ans9->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
      v_exch_rate = lpTSCall1Ans9->GetDouble(LDBIZ_EXCH_RATE_FLOAT);
      v_exch_no = lpTSCall1Ans9->GetInt32(LDBIZ_EXCH_NO_INT);
      v_stock_acco_no = lpTSCall1Ans9->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
      v_stock_code_no = lpTSCall1Ans9->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
      v_target_code_no = lpTSCall1Ans9->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
      v_comm_id = lpTSCall1Ans9->GetInt64(LDBIZ_COMM_ID_INT64);
      v_order_dir = lpTSCall1Ans9->GetInt32(LDBIZ_ORDER_DIR_INT);
      v_repo_qty = lpTSCall1Ans9->GetDouble(LDBIZ_REPO_QTY_FLOAT);
      v_repo_amt = lpTSCall1Ans9->GetDouble(LDBIZ_REPO_AMT_FLOAT);
      v_repo_rate = lpTSCall1Ans9->GetDouble(LDBIZ_REPO_RATE_FLOAT);
      v_repo_trade_date = lpTSCall1Ans9->GetInt32(LDBIZ_REPO_TRADE_DATE_INT);
      v_repo_order_id = lpTSCall1Ans9->GetInt64(LDBIZ_REPO_ORDER_ID_INT64);
      v_repo_days = lpTSCall1Ans9->GetInt32(LDBIZ_REPO_DAYS_INT);
      v_repo_cale_days = lpTSCall1Ans9->GetInt32(LDBIZ_REPO_CALE_DAYS_INT);
      v_repo_back_date = lpTSCall1Ans9->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
      v_repo_back_amt = lpTSCall1Ans9->GetDouble(LDBIZ_REPO_BACK_AMT_FLOAT);
      v_repo_back_intrst = lpTSCall1Ans9->GetDouble(LDBIZ_REPO_BACK_INTRST_FLOAT);
      v_repo_back_trade_date = lpTSCall1Ans9->GetInt32(LDBIZ_REPO_BACK_TRADE_DATE_INT);
      strcpy(v_repo_status, lpTSCall1Ans9->GetString(LDBIZ_REPO_STATUS_STR));
      v_bond_repo_id = lpTSCall1Ans9->GetInt64(LDBIZ_BOND_REPO_ID_INT64);
      v_update_times = lpTSCall1Ans9->GetInt32(LDBIZ_UPDATE_TIMES_INT);


      // [主动推送][secu.exgpbondrepo][证券主推_持仓_交易组债券回购主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.82", 0);
      lpPubMsg->SetInt64(LDBIZ_BOND_REPO_ID_INT64,v_bond_repo_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXCH_RATE_FLOAT,v_exch_rate);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
      lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
      lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
      lpPubMsg->SetDouble(LDBIZ_REPO_QTY_FLOAT,v_repo_qty);
      lpPubMsg->SetDouble(LDBIZ_REPO_AMT_FLOAT,v_repo_amt);
      lpPubMsg->SetDouble(LDBIZ_REPO_RATE_FLOAT,v_repo_rate);
      lpPubMsg->SetInt32(LDBIZ_REPO_TRADE_DATE_INT,v_repo_trade_date);
      lpPubMsg->SetInt64(LDBIZ_REPO_ORDER_ID_INT64,v_repo_order_id);
      lpPubMsg->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
      lpPubMsg->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
      lpPubMsg->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
      lpPubMsg->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
      lpPubMsg->SetDouble(LDBIZ_REPO_BACK_AMT_FLOAT,v_repo_back_amt);
      lpPubMsg->SetDouble(LDBIZ_REPO_BACK_INTRST_FLOAT,v_repo_back_intrst);
      lpPubMsg->SetInt32(LDBIZ_REPO_BACK_TRADE_DATE_INT,v_repo_back_trade_date);
      lpPubMsg->SetString(LDBIZ_REPO_STATUS_STR,v_repo_status);
      lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpbondrepo", lpPubMsg);

    }
    // else
    else
    {

      //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
      //组织事务请求
      if(lpTSCall1Ans10)
      {
        lpTSCall1Ans10->FreeMsg();
        lpTSCall1Ans10=NULL;
      }
      lpTSCall1Req10=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
      lpTSCall1Req10->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req10->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req10->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req10->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req10->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req10->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req10->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req10->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req10->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req10->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req10->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req10->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req10->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req10->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpTSCall1Req10->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      glpTSSubcallSerives->SubCall(lpTSCall1Req10, &lpTSCall1Ans10, 5000);
      if(!lpTSCall1Ans10)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans10->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans10->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans10->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans10->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans10->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

    // end if;
    }


END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans11)
        {
          lpTSCall1Ans11->FreeMsg();
          lpTSCall1Ans11=NULL;
        }
        lpTSCall1Req11=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req11->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req11->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req11->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req11->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req11->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req11->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req11->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req11->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req11->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req11->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req11, &lpTSCall1Ans11, 5000);
        if (lpTSCall1Ans11)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans11->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans11->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans11->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
    lpOutBizMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpOutBizMsg->SetDouble(LDBIZ_COMM_STRIKE_QTY_FLOAT,v_comm_strike_qty);
    lpOutBizMsg->SetDouble(LDBIZ_COMM_STRIKE_AMT_FLOAT,v_comm_strike_amt);
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    if(lpTSCall1Ans3)
        lpTSCall1Ans3->FreeMsg();
    if(lpTSCall1Ans4)
        lpTSCall1Ans4->FreeMsg();
    if(lpTSCall1Ans5)
        lpTSCall1Ans5->FreeMsg();
    if(lpTSCall1Ans6)
        lpTSCall1Ans6->FreeMsg();
    if(lpTSCall1Ans7)
        lpTSCall1Ans7->FreeMsg();
    if(lpTSCall1Ans8)
        lpTSCall1Ans8->FreeMsg();
    if(lpTSCall1Ans9)
        lpTSCall1Ans9->FreeMsg();
    if(lpTSCall1Ans10)
        lpTSCall1Ans10->FreeMsg();
    if(lpTSCall1Ans11)
        lpTSCall1Ans11->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_体外指令成交回溯
int LD_CALL_MODE fnFunc7(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int64 v_comm_id;
    int64 v_strike_id;
    char v_remark_info[256];
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    double v_comm_strike_qty;
    double v_comm_strike_amt;
    int v_init_date;
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    int v_asset_acco_no;
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    int v_stock_acco_no;
    char v_stock_code[7];
    int v_stock_code_no;
    int v_stock_type;
    int v_comm_batch_no;
    int v_strike_date;
    int v_strike_time;
    char v_strike_no[65];
    int v_report_date;
    char v_report_no[33];
    int v_order_date;
    int64 v_order_id;
    int v_order_dir;
    double v_order_price;
    double v_order_qty;
    double v_strike_qty;
    double v_strike_price;
    double v_strike_amt;
    double v_all_fee;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_trade_commis;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    int v_net_price_flag;
    int v_intrst_days;
    double v_par_value;
    double v_bond_accr_intrst;
    int v_bond_rate_type;
    double v_impawn_ratio;
    int v_trade_code_no;
    int v_target_code_no;
    char v_order_oper_way[3];
    int v_exter_comm_flag;
    int v_record_valid_flag;
    int v_busi_opor_no;
    int64 v_external_no;
    int v_price_type;
    char v_sys_config_str[65];
    char v_co_busi_config_str[65];
    char v_exgp_busi_config_str[65];
    int v_asset_type;
    char v_crncy_type[4];
    char v_exch_crncy_type[4];
    double v_buy_ref_rate;
    double v_sell_ref_rate;
    char v_target_code[7];
    int v_target_code_stock_type;
    int v_target_code_asset_type;
    char v_trade_code[7];
    int v_trade_code_stock_type;
    int v_trade_code_asset_type;
    int v_min_unit;
    double v_up_limit_price;
    double v_down_limit_price;
    double v_last_price;
    int v_capit_reback_days;
    int v_posi_reback_days;
    int v_apply_date;
    int v_subscription_trade_mark;
    int v_purchase_trade_mark;
    int v_rede_trade_mark;
    double v_first_minimum_amt;
    double v_minimum_purchase_amt;
    double v_minimum_subscription_amt;
    double v_minimum_rede_share;
    double v_minimum_holding_share;
    char v_trade_acco[33];
    char v_busi_config_str[65];
    char v_busi_ctrl_str[65];
    char v_asac_busi_config_str[65];
    char v_split_fee_typr_str[65];
    char v_busi_limit_str[2049];
    double v_nav_asset;
    double v_market_price_ratio;
    int v_market_price_type;
    int v_cost_calc_type;
    double v_order_market_price;
    int v_sys_type;
    char v_opor_no_str1[2049];
    char v_opor_no_str2[2049];
    char v_opor_no_str3[2049];
    double v_fina_limit_max;
    double v_loan_limit_max;
    int v_asset_acco_type;
    int v_sell_auto_back_debt;
    char v_stock_acco[17];
    double v_exgp_cost_amt;
    double v_exgp_intrst_cost_amt;
    double v_exgp_curr_qty;
    double v_asac_cost_amt;
    double v_asac_intrst_cost_amt;
    double v_asac_curr_qty;
    int64 v_repo_strike_id;
    int v_repo_days;
    int v_repo_cale_days;
    int v_repo_back_date;
    int v_comm_opor;
    int v_report_time;
    int v_order_time;
    int v_order_batch_no;
    char v_order_status[3];
    double v_wtdraw_qty;
    double v_strike_bond_accr_intrst;
    double v_order_frozen_amt;
    double v_order_frozen_qty;
    char v_rsp_info[256];
    int64 v_compli_trig_id;
    char v_combo_code[33];
    int64 v_combo_posi_id;
    int64 v_strategy_id;
    char v_contra_no[33];
    int v_update_times;
    double v_curr_strike_price;
    double v_curr_strike_amt;
    double v_curr_strike_qty;
    int v_comm_date;
    int v_comm_time;
    int v_comm_executor;
    int v_comm_dir;
    double v_comm_limit_price;
    double v_limit_actual_price;
    double v_comm_qty;
    double v_comm_amt;
    double v_comm_cancel_qty;
    double v_comm_frozen_amt;
    double v_comm_frozen_qty;
    char v_strike_status[3];
    char v_comm_status[3];
    int v_comm_begin_date;
    int v_comm_end_date;
    int v_comm_begin_time;
    int v_comm_end_time;
    int v_comm_comple_date;
    int v_comm_comple_time;
    int v_comm_appr_date;
    int v_comm_appr_time;
    char v_comm_appr_status[3];
    int v_comm_appr_oper;
    char v_comm_appr_remark[256];
    int64 v_basket_id;
    char v_comm_oper_way[3];
    int v_comm_comple_flag;
    double v_strategy_capt_qty;
    double v_strategy_order_qty;
    char v_comm_remark_info[1025];
    int v_disp_opor;
    int v_disp_status;
    int v_read_flag;
    int64 v_sum_comm_row_id;
    int v_sum_comm_co_no;
    int v_sum_comm_pd_no;
    int v_sum_comm_exch_group_no;
    int v_sum_comm_asset_acco_no;
    int v_sum_comm_pass_no;
    char v_sum_comm_out_acco[33];
    char v_sum_comm_exch_crncy_type[4];
    int v_sum_comm_stock_code_no;
    int v_sum_comm_date;
    int v_sum_comm_time;
    int v_sum_comm_batch_no;
    int v_sum_comm_opor;
    int v_sum_comm_executor;
    int v_sum_comm_dir;
    double v_sum_comm_limit_price;
    double v_sum_comm_qty;
    double v_sum_comm_amt;
    double v_sum_comm_order_qty;
    double v_sum_comm_cancel_qty;
    double v_sum_comm_await_cancel_qty;
    double v_sum_comm_strike_amt;
    double v_sum_comm_strike_qty;
    char v_sum_comm_strike_status[3];
    char v_comm_sum_status[3];
    int v_sum_comm_begin_date;
    int v_sum_comm_end_date;
    int v_sum_comm_begin_time;
    int v_sum_comm_end_time;
    int v_sum_comm_comple_date;
    int v_sum_comm_comple_time;
    int v_sum_comm_max_comm_comple_date;
    int v_sum_comm_max_comm_comple_time;
    int v_sum_comm_appr_date;
    int v_sum_comm_appr_time;
    double v_sum_comm_appr_qty;
    char v_comm_sum_approve_status[3];
    int64 v_sum_comm_basket_id;
    int v_sum_comm_net_price_flag;
    double v_sum_comm_bond_accr_intrst;
    int v_sum_comm_bond_rate_type;
    char v_sum_comm_oper_way[3];
    int v_sum_comm_exter_comm_flag;
    double v_sum_buy_order_qty;
    double v_sum_sell_order_qty;
    double v_sum_buy_comm_qty;
    double v_sum_sell_comm_qty;
    double v_sum_buy_strike_qty;
    double v_sum_sell_strike_qty;
    double v_sum_buy_strike_amt;
    double v_sum_sell_strike_amt;
    double v_sum_buy_comm_amt;
    double v_sum_sell_comm_amt;
    char v_sum_comm_remark_info[256];
    int v_sum_comm_update_times;
    char v_acco_concat_info[4097];
    int64 v_exgp_cash_id;
    double v_exgp_frozen_amt;
    double v_exgp_unfroz_amt;
    double v_exgp_comm_frozen_amt;
    double v_exgp_comm_unfroz_amt;
    double v_exgp_comm_capt_amt;
    double v_exgp_comm_releas_amt;
    double v_exgp_trade_frozen_amt;
    double v_exgp_trade_unfroz_amt;
    double v_exgp_trade_capt_amt;
    double v_exgp_trade_releas_amt;
    double v_exgp_strike_capt_amt;
    double v_exgp_strike_releas_amt;
    int v_exgp_cash_update_times;
    int64 v_exgp_posi_id;
    double v_exgp_frozen_qty;
    double v_exgp_unfroz_qty;
    double v_exgp_comm_frozen_qty;
    double v_exgp_comm_unfroz_qty;
    double v_exgp_comm_capt_qty;
    double v_exgp_comm_releas_qty;
    double v_exgp_trade_frozen_qty;
    double v_exgp_trade_unfroz_qty;
    double v_exgp_trade_capt_qty;
    double v_exgp_trade_releas_qty;
    double v_exgp_strike_capt_qty;
    double v_exgp_strike_releas_qty;
    double v_exgp_strike_frozen_qty;
    double v_exgp_strike_unfroz_qty;
    double v_exgp_realize_pandl;
    double v_exgp_intrst_pandl;
    int v_exgp_posi_update_times;
    int64 v_asac_cash_id;
    double v_asac_frozen_amt;
    double v_asac_unfroz_amt;
    double v_asac_comm_frozen_amt;
    double v_asac_comm_unfroz_amt;
    double v_asac_comm_capt_amt;
    double v_asac_comm_releas_amt;
    double v_asac_trade_frozen_amt;
    double v_asac_trade_unfroz_amt;
    double v_asac_trade_capt_amt;
    double v_asac_trade_releas_amt;
    double v_asac_strike_capt_amt;
    double v_asac_strike_releas_amt;
    int v_asac_cash_update_times;
    int64 v_asac_posi_id;
    double v_asac_frozen_qty;
    double v_asac_unfroz_qty;
    double v_asac_comm_frozen_qty;
    double v_asac_comm_unfroz_qty;
    double v_asac_comm_capt_qty;
    double v_asac_comm_releas_qty;
    double v_asac_trade_frozen_qty;
    double v_asac_trade_unfroz_qty;
    double v_asac_trade_capt_qty;
    double v_asac_trade_releas_qty;
    double v_asac_strike_capt_qty;
    double v_asac_strike_releas_qty;
    double v_asac_strike_frozen_qty;
    double v_asac_strike_unfroz_qty;
    double v_asac_realize_pandl;
    double v_asac_intrst_pandl;
    int v_asac_posi_update_times;
    int64 v_exgp_target_posi_id;
    double v_exgp_target_frozen_qty;
    double v_exgp_target_unfroz_qty;
    double v_exgp_target_comm_frozen_qty;
    double v_exgp_target_comm_unfroz_qty;
    double v_exgp_target_comm_capt_qty;
    double v_exgp_target_comm_releas_qty;
    double v_exgp_target_trade_frozen_qty;
    double v_exgp_target_trade_unfroz_qty;
    double v_exgp_target_trade_capt_qty;
    double v_exgp_target_trade_releas_qty;
    double v_exgp_target_strike_capt_qty;
    double v_exgp_target_strike_releas_qty;
    double v_exgp_target_strike_frozen_qty;
    double v_exgp_target_strike_unfroz_qty;
    double v_exgp_target_realize_pandl;
    double v_exgp_target_cost_amt;
    double v_exgp_target_intrst_cost_amt;
    double v_exgp_target_intrst_pandl;
    int v_exgp_target_posi_update_times;
    int64 v_asac_target_posi_id;
    double v_asac_target_frozen_qty;
    double v_asac_target_unfroz_qty;
    double v_asac_target_comm_frozen_qty;
    double v_asac_target_comm_unfroz_qty;
    double v_asac_target_comm_capt_qty;
    double v_asac_target_comm_releas_qty;
    double v_asac_target_trade_frozen_qty;
    double v_asac_target_trade_unfroz_qty;
    double v_asac_target_trade_capt_qty;
    double v_asac_target_trade_releas_qty;
    double v_asac_target_strike_capt_qty;
    double v_asac_target_strike_releas_qty;
    double v_asac_target_strike_frozen_qty;
    double v_asac_target_strike_unfroz_qty;
    double v_asac_target_realize_pandl;
    double v_asac_target_cost_amt;
    double v_asac_target_intrst_cost_amt;
    double v_asac_target_intrst_pandl;
    int v_asac_target_posi_update_times;
    double v_exgp_put_impawn_qty;
    double v_asac_put_impawn_qty;
    double v_exch_rate;
    double v_repo_qty;
    double v_repo_amt;
    double v_repo_rate;
    int v_repo_trade_date;
    int64 v_repo_order_id;
    double v_repo_back_amt;
    double v_repo_back_intrst;
    int v_repo_back_trade_date;
    char v_repo_status[3];
    int64 v_bond_repo_id;
    char v_log_error_code[33];
    char v_log_error_info[256];


IFastMessage* lpPubMsg = NULL;
int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_comm_id=0;
    v_strike_id=0;
    strcpy(v_remark_info, " ");
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_comm_strike_qty=0;
    v_comm_strike_amt=0;
    v_init_date=0;
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    v_asset_acco_no=0;
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    v_stock_acco_no=0;
    strcpy(v_stock_code, " ");
    v_stock_code_no=0;
    v_stock_type=0;
    v_comm_batch_no=0;
    v_strike_date=0;
    v_strike_time=0;
    strcpy(v_strike_no, " ");
    v_report_date=0;
    strcpy(v_report_no, " ");
    v_order_date=0;
    v_order_id=0;
    v_order_dir=0;
    v_order_price=0;
    v_order_qty=0;
    v_strike_qty=0;
    v_strike_price=0;
    v_strike_amt=0;
    v_all_fee=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_trade_commis=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_net_price_flag=0;
    v_intrst_days=0;
    v_par_value=0;
    v_bond_accr_intrst=0;
    v_bond_rate_type=0;
    v_impawn_ratio=0;
    v_trade_code_no=0;
    v_target_code_no=0;
    strcpy(v_order_oper_way, " ");
    v_exter_comm_flag=0;
    v_record_valid_flag=0;
    v_busi_opor_no=0;
    v_external_no=0;
    v_price_type=0;
    strcpy(v_sys_config_str, " ");
    strcpy(v_co_busi_config_str, " ");
    strcpy(v_exgp_busi_config_str, " ");
    v_asset_type=0;
    strcpy(v_crncy_type, "CNY");
    strcpy(v_exch_crncy_type, "CNY");
    v_buy_ref_rate=0;
    v_sell_ref_rate=0;
    strcpy(v_target_code, " ");
    v_target_code_stock_type=0;
    v_target_code_asset_type=0;
    strcpy(v_trade_code, " ");
    v_trade_code_stock_type=0;
    v_trade_code_asset_type=0;
    v_min_unit=0;
    v_up_limit_price=0;
    v_down_limit_price=0;
    v_last_price=0;
    v_capit_reback_days=0;
    v_posi_reback_days=0;
    v_apply_date=0;
    v_subscription_trade_mark=0;
    v_purchase_trade_mark=0;
    v_rede_trade_mark=0;
    v_first_minimum_amt=0;
    v_minimum_purchase_amt=0;
    v_minimum_subscription_amt=0;
    v_minimum_rede_share=0;
    v_minimum_holding_share=0;
    strcpy(v_trade_acco, " ");
    strcpy(v_busi_config_str, " ");
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_asac_busi_config_str, " ");
    strcpy(v_split_fee_typr_str, " ");
    strcpy(v_busi_limit_str, " ");
    v_nav_asset=0;
    v_market_price_ratio=0;
    v_market_price_type=0;
    v_cost_calc_type=0;
    v_order_market_price=0;
    v_sys_type=0;
    strcpy(v_opor_no_str1, " ");
    strcpy(v_opor_no_str2, " ");
    strcpy(v_opor_no_str3, " ");
    v_fina_limit_max=0;
    v_loan_limit_max=0;
    v_asset_acco_type=0;
    v_sell_auto_back_debt=0;
    strcpy(v_stock_acco, " ");
    v_exgp_cost_amt=0;
    v_exgp_intrst_cost_amt=0;
    v_exgp_curr_qty=0;
    v_asac_cost_amt=0;
    v_asac_intrst_cost_amt=0;
    v_asac_curr_qty=0;
    v_repo_strike_id=0;
    v_repo_days=0;
    v_repo_cale_days=0;
    v_repo_back_date=0;
    v_comm_opor=0;
    v_report_time=0;
    v_order_time=0;
    v_order_batch_no=0;
    strcpy(v_order_status, "0");
    v_wtdraw_qty=0;
    v_strike_bond_accr_intrst=0;
    v_order_frozen_amt=0;
    v_order_frozen_qty=0;
    strcpy(v_rsp_info, " ");
    v_compli_trig_id=0;
    strcpy(v_combo_code, " ");
    v_combo_posi_id=0;
    v_strategy_id=0;
    strcpy(v_contra_no, " ");
    v_update_times=1;
    v_curr_strike_price=0;
    v_curr_strike_amt=0;
    v_curr_strike_qty=0;
    v_comm_date=0;
    v_comm_time=0;
    v_comm_executor=0;
    v_comm_dir=0;
    v_comm_limit_price=0;
    v_limit_actual_price=0;
    v_comm_qty=0;
    v_comm_amt=0;
    v_comm_cancel_qty=0;
    v_comm_frozen_amt=0;
    v_comm_frozen_qty=0;
    strcpy(v_strike_status, "0");
    strcpy(v_comm_status, "0");
    v_comm_begin_date=0;
    v_comm_end_date=0;
    v_comm_begin_time=0;
    v_comm_end_time=0;
    v_comm_comple_date=0;
    v_comm_comple_time=0;
    v_comm_appr_date=0;
    v_comm_appr_time=0;
    strcpy(v_comm_appr_status, " ");
    v_comm_appr_oper=0;
    strcpy(v_comm_appr_remark, " ");
    v_basket_id=0;
    strcpy(v_comm_oper_way, " ");
    v_comm_comple_flag=0;
    v_strategy_capt_qty=0;
    v_strategy_order_qty=0;
    strcpy(v_comm_remark_info, " ");
    v_disp_opor=0;
    v_disp_status=0;
    v_read_flag=0;
    v_sum_comm_row_id=0;
    v_sum_comm_co_no=0;
    v_sum_comm_pd_no=0;
    v_sum_comm_exch_group_no=0;
    v_sum_comm_asset_acco_no=0;
    v_sum_comm_pass_no=0;
    strcpy(v_sum_comm_out_acco, " ");
    strcpy(v_sum_comm_exch_crncy_type, "CNY");
    v_sum_comm_stock_code_no=0;
    v_sum_comm_date=0;
    v_sum_comm_time=0;
    v_sum_comm_batch_no=0;
    v_sum_comm_opor=0;
    v_sum_comm_executor=0;
    v_sum_comm_dir=0;
    v_sum_comm_limit_price=0;
    v_sum_comm_qty=0;
    v_sum_comm_amt=0;
    v_sum_comm_order_qty=0;
    v_sum_comm_cancel_qty=0;
    v_sum_comm_await_cancel_qty=0;
    v_sum_comm_strike_amt=0;
    v_sum_comm_strike_qty=0;
    strcpy(v_sum_comm_strike_status, "0");
    strcpy(v_comm_sum_status, "0");
    v_sum_comm_begin_date=0;
    v_sum_comm_end_date=0;
    v_sum_comm_begin_time=0;
    v_sum_comm_end_time=0;
    v_sum_comm_comple_date=0;
    v_sum_comm_comple_time=0;
    v_sum_comm_max_comm_comple_date=0;
    v_sum_comm_max_comm_comple_time=0;
    v_sum_comm_appr_date=0;
    v_sum_comm_appr_time=0;
    v_sum_comm_appr_qty=0;
    strcpy(v_comm_sum_approve_status, "0");
    v_sum_comm_basket_id=0;
    v_sum_comm_net_price_flag=0;
    v_sum_comm_bond_accr_intrst=0;
    v_sum_comm_bond_rate_type=0;
    strcpy(v_sum_comm_oper_way, " ");
    v_sum_comm_exter_comm_flag=0;
    v_sum_buy_order_qty=0;
    v_sum_sell_order_qty=0;
    v_sum_buy_comm_qty=0;
    v_sum_sell_comm_qty=0;
    v_sum_buy_strike_qty=0;
    v_sum_sell_strike_qty=0;
    v_sum_buy_strike_amt=0;
    v_sum_sell_strike_amt=0;
    v_sum_buy_comm_amt=0;
    v_sum_sell_comm_amt=0;
    strcpy(v_sum_comm_remark_info, " ");
    v_sum_comm_update_times=1;
    strcpy(v_acco_concat_info, " ");
    v_exgp_cash_id=0;
    v_exgp_frozen_amt=0;
    v_exgp_unfroz_amt=0;
    v_exgp_comm_frozen_amt=0;
    v_exgp_comm_unfroz_amt=0;
    v_exgp_comm_capt_amt=0;
    v_exgp_comm_releas_amt=0;
    v_exgp_trade_frozen_amt=0;
    v_exgp_trade_unfroz_amt=0;
    v_exgp_trade_capt_amt=0;
    v_exgp_trade_releas_amt=0;
    v_exgp_strike_capt_amt=0;
    v_exgp_strike_releas_amt=0;
    v_exgp_cash_update_times=1;
    v_exgp_posi_id=0;
    v_exgp_frozen_qty=0;
    v_exgp_unfroz_qty=0;
    v_exgp_comm_frozen_qty=0;
    v_exgp_comm_unfroz_qty=0;
    v_exgp_comm_capt_qty=0;
    v_exgp_comm_releas_qty=0;
    v_exgp_trade_frozen_qty=0;
    v_exgp_trade_unfroz_qty=0;
    v_exgp_trade_capt_qty=0;
    v_exgp_trade_releas_qty=0;
    v_exgp_strike_capt_qty=0;
    v_exgp_strike_releas_qty=0;
    v_exgp_strike_frozen_qty=0;
    v_exgp_strike_unfroz_qty=0;
    v_exgp_realize_pandl=0;
    v_exgp_intrst_pandl=0;
    v_exgp_posi_update_times=1;
    v_asac_cash_id=0;
    v_asac_frozen_amt=0;
    v_asac_unfroz_amt=0;
    v_asac_comm_frozen_amt=0;
    v_asac_comm_unfroz_amt=0;
    v_asac_comm_capt_amt=0;
    v_asac_comm_releas_amt=0;
    v_asac_trade_frozen_amt=0;
    v_asac_trade_unfroz_amt=0;
    v_asac_trade_capt_amt=0;
    v_asac_trade_releas_amt=0;
    v_asac_strike_capt_amt=0;
    v_asac_strike_releas_amt=0;
    v_asac_cash_update_times=1;
    v_asac_posi_id=0;
    v_asac_frozen_qty=0;
    v_asac_unfroz_qty=0;
    v_asac_comm_frozen_qty=0;
    v_asac_comm_unfroz_qty=0;
    v_asac_comm_capt_qty=0;
    v_asac_comm_releas_qty=0;
    v_asac_trade_frozen_qty=0;
    v_asac_trade_unfroz_qty=0;
    v_asac_trade_capt_qty=0;
    v_asac_trade_releas_qty=0;
    v_asac_strike_capt_qty=0;
    v_asac_strike_releas_qty=0;
    v_asac_strike_frozen_qty=0;
    v_asac_strike_unfroz_qty=0;
    v_asac_realize_pandl=0;
    v_asac_intrst_pandl=0;
    v_asac_posi_update_times=1;
    v_exgp_target_posi_id=0;
    v_exgp_target_frozen_qty=0;
    v_exgp_target_unfroz_qty=0;
    v_exgp_target_comm_frozen_qty=0;
    v_exgp_target_comm_unfroz_qty=0;
    v_exgp_target_comm_capt_qty=0;
    v_exgp_target_comm_releas_qty=0;
    v_exgp_target_trade_frozen_qty=0;
    v_exgp_target_trade_unfroz_qty=0;
    v_exgp_target_trade_capt_qty=0;
    v_exgp_target_trade_releas_qty=0;
    v_exgp_target_strike_capt_qty=0;
    v_exgp_target_strike_releas_qty=0;
    v_exgp_target_strike_frozen_qty=0;
    v_exgp_target_strike_unfroz_qty=0;
    v_exgp_target_realize_pandl=0;
    v_exgp_target_cost_amt=0;
    v_exgp_target_intrst_cost_amt=0;
    v_exgp_target_intrst_pandl=0;
    v_exgp_target_posi_update_times=0;
    v_asac_target_posi_id=0;
    v_asac_target_frozen_qty=0;
    v_asac_target_unfroz_qty=0;
    v_asac_target_comm_frozen_qty=0;
    v_asac_target_comm_unfroz_qty=0;
    v_asac_target_comm_capt_qty=0;
    v_asac_target_comm_releas_qty=0;
    v_asac_target_trade_frozen_qty=0;
    v_asac_target_trade_unfroz_qty=0;
    v_asac_target_trade_capt_qty=0;
    v_asac_target_trade_releas_qty=0;
    v_asac_target_strike_capt_qty=0;
    v_asac_target_strike_releas_qty=0;
    v_asac_target_strike_frozen_qty=0;
    v_asac_target_strike_unfroz_qty=0;
    v_asac_target_realize_pandl=0;
    v_asac_target_cost_amt=0;
    v_asac_target_intrst_cost_amt=0;
    v_asac_target_intrst_pandl=0;
    v_asac_target_posi_update_times=0;
    v_exgp_put_impawn_qty=0;
    v_asac_put_impawn_qty=0;
    v_exch_rate=0;
    v_repo_qty=0;
    v_repo_amt=0;
    v_repo_rate=0;
    v_repo_trade_date=0;
    v_repo_order_id=0;
    v_repo_back_amt=0;
    v_repo_back_intrst=0;
    v_repo_back_trade_date=0;
    strcpy(v_repo_status, "0");
    v_bond_repo_id=0;
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_comm_id = lpInBizMsg->GetInt64(LDBIZ_COMM_ID_INT64);
    v_strike_id = lpInBizMsg->GetInt64(LDBIZ_STRIKE_ID_INT64);
    strncpy(v_remark_info, lpInBizMsg->GetString(LDBIZ_REMARK_INFO_STR),255);
    v_remark_info[255] = '\0';

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;
    IFastMessage* lpTSCall1Req3 = NULL;
    IFastMessage* lpTSCall1Ans3 = NULL;
    IFastMessage* lpTSCall1Req4 = NULL;
    IFastMessage* lpTSCall1Ans4 = NULL;
    IFastMessage* lpTSCall1Req5 = NULL;
    IFastMessage* lpTSCall1Ans5 = NULL;
    IFastMessage* lpTSCall1Req6 = NULL;
    IFastMessage* lpTSCall1Ans6 = NULL;
    IFastMessage* lpTSCall1Req7 = NULL;
    IFastMessage* lpTSCall1Ans7 = NULL;
    IFastMessage* lpTSCall1Req8 = NULL;
    IFastMessage* lpTSCall1Ans8 = NULL;
    IFastMessage* lpTSCall1Req9 = NULL;
    IFastMessage* lpTSCall1Ans9 = NULL;
    IFastMessage* lpTSCall1Req10 = NULL;
    IFastMessage* lpTSCall1Ans10 = NULL;
    IFastMessage* lpTSCall1Req11 = NULL;
    IFastMessage* lpTSCall1Ans11 = NULL;

    //调用过程[事务_交易证券_报盘_回溯取体外指令成交]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.25", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpTSCall1Req0->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.25]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    v_co_no = lpTSCall1Ans0->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpTSCall1Ans0->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans0->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans0->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    v_pass_no = lpTSCall1Ans0->GetInt32(LDBIZ_PASS_NO_INT);
    strcpy(v_out_acco, lpTSCall1Ans0->GetString(LDBIZ_OUT_ACCO_STR));
    v_exch_no = lpTSCall1Ans0->GetInt32(LDBIZ_EXCH_NO_INT);
    v_stock_acco_no = lpTSCall1Ans0->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_code, lpTSCall1Ans0->GetString(LDBIZ_STOCK_CODE_STR));
    v_stock_code_no = lpTSCall1Ans0->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans0->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_comm_batch_no = lpTSCall1Ans0->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
    v_strike_date = lpTSCall1Ans0->GetInt32(LDBIZ_STRIKE_DATE_INT);
    v_strike_time = lpTSCall1Ans0->GetInt32(LDBIZ_STRIKE_TIME_INT);
    strcpy(v_strike_no, lpTSCall1Ans0->GetString(LDBIZ_STRIKE_NO_STR));
    v_report_date = lpTSCall1Ans0->GetInt32(LDBIZ_REPORT_DATE_INT);
    strcpy(v_report_no, lpTSCall1Ans0->GetString(LDBIZ_REPORT_NO_STR));
    v_order_date = lpTSCall1Ans0->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_id = lpTSCall1Ans0->GetInt64(LDBIZ_ORDER_ID_INT64);
    v_order_dir = lpTSCall1Ans0->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_order_price = lpTSCall1Ans0->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans0->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    v_strike_qty = lpTSCall1Ans0->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_price = lpTSCall1Ans0->GetDouble(LDBIZ_STRIKE_PRICE_FLOAT);
    v_strike_amt = lpTSCall1Ans0->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    v_all_fee = lpTSCall1Ans0->GetDouble(LDBIZ_ALL_FEE_FLOAT);
    v_stamp_tax = lpTSCall1Ans0->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
    v_trans_fee = lpTSCall1Ans0->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
    v_brkage_fee = lpTSCall1Ans0->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
    v_SEC_charges = lpTSCall1Ans0->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
    v_other_fee = lpTSCall1Ans0->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
    v_trade_commis = lpTSCall1Ans0->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
    v_other_commis = lpTSCall1Ans0->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
    v_trade_tax = lpTSCall1Ans0->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
    v_trade_cost_fee = lpTSCall1Ans0->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
    v_trade_system_use_fee = lpTSCall1Ans0->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
    v_stock_settle_fee = lpTSCall1Ans0->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);
    v_net_price_flag = lpTSCall1Ans0->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_intrst_days = lpTSCall1Ans0->GetInt32(LDBIZ_INTRST_DAYS_INT);
    v_par_value = lpTSCall1Ans0->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_bond_accr_intrst = lpTSCall1Ans0->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans0->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_impawn_ratio = lpTSCall1Ans0->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_trade_code_no = lpTSCall1Ans0->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans0->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    strcpy(v_order_oper_way, lpTSCall1Ans0->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    v_exter_comm_flag = lpTSCall1Ans0->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_record_valid_flag = lpTSCall1Ans0->GetInt32(LDBIZ_RECORD_VALID_FLAG_INT);
    v_busi_opor_no = lpTSCall1Ans0->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    v_external_no = lpTSCall1Ans0->GetInt64(LDBIZ_EXTERNAL_NO_INT64);


    // [检查报错返回][@记录有效标志# = 《记录有效标志-无效》][761][@记录有效标志#]
    if (v_record_valid_flag == 2)
    {
        strcpy(v_error_code, "tdsecuL.5.53.761");
        snprintf(v_error_info, sizeof(v_error_info), "%s%d","记录有效标志=",v_record_valid_flag);
        iRet = -1;
        goto END;
    }


    // set @价格类型# = 《价格类型-限价》;
    v_price_type = 1;
    //公共子系统检查
    //调用过程[事务_公共_交易接口_检查交易市场状态权限身份]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("pubT.25.22", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req1->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req1->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req1->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req1->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpTSCall1Req1->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpTSCall1Req1->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.22]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans1->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_sys_config_str, lpTSCall1Ans1->GetString(LDBIZ_SYS_CONFIG_STR_STR));
    v_pd_no = lpTSCall1Ans1->GetInt32(LDBIZ_PD_NO_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans1->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
    strcpy(v_exgp_busi_config_str, lpTSCall1Ans1->GetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR));
    v_stock_code_no = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans1->GetInt32(LDBIZ_ASSET_TYPE_INT);
    strcpy(v_crncy_type, lpTSCall1Ans1->GetString(LDBIZ_CRNCY_TYPE_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans1->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_buy_ref_rate = lpTSCall1Ans1->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
    v_sell_ref_rate = lpTSCall1Ans1->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
    v_par_value = lpTSCall1Ans1->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans1->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_net_price_flag = lpTSCall1Ans1->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_intrst_days = lpTSCall1Ans1->GetInt32(LDBIZ_INTRST_DAYS_INT);
    v_bond_rate_type = lpTSCall1Ans1->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_bond_accr_intrst = lpTSCall1Ans1->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_target_code_no = lpTSCall1Ans1->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    strcpy(v_target_code, lpTSCall1Ans1->GetString(LDBIZ_TARGET_CODE_STR));
    v_target_code_stock_type = lpTSCall1Ans1->GetInt32(LDBIZ_TARGET_CODE_STOCK_TYPE_INT);
    v_target_code_asset_type = lpTSCall1Ans1->GetInt32(LDBIZ_TARGET_CODE_ASSET_TYPE_INT);
    v_trade_code_no = lpTSCall1Ans1->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    strcpy(v_trade_code, lpTSCall1Ans1->GetString(LDBIZ_TRADE_CODE_STR));
    v_trade_code_stock_type = lpTSCall1Ans1->GetInt32(LDBIZ_TRADE_CODE_STOCK_TYPE_INT);
    v_trade_code_asset_type = lpTSCall1Ans1->GetInt32(LDBIZ_TRADE_CODE_ASSET_TYPE_INT);
    v_min_unit = lpTSCall1Ans1->GetInt32(LDBIZ_MIN_UNIT_INT);
    v_up_limit_price = lpTSCall1Ans1->GetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT);
    v_down_limit_price = lpTSCall1Ans1->GetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT);
    v_last_price = lpTSCall1Ans1->GetDouble(LDBIZ_LAST_PRICE_FLOAT);
    v_capit_reback_days = lpTSCall1Ans1->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
    v_posi_reback_days = lpTSCall1Ans1->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);
    v_apply_date = lpTSCall1Ans1->GetInt32(LDBIZ_APPLY_DATE_INT);
    v_subscription_trade_mark = lpTSCall1Ans1->GetInt32(LDBIZ_SUBSCRIPTION_TRADE_MARK_INT);
    v_purchase_trade_mark = lpTSCall1Ans1->GetInt32(LDBIZ_PURCHASE_TRADE_MARK_INT);
    v_rede_trade_mark = lpTSCall1Ans1->GetInt32(LDBIZ_REDE_TRADE_MARK_INT);
    v_first_minimum_amt = lpTSCall1Ans1->GetDouble(LDBIZ_FIRST_MINIMUM_AMT_FLOAT);
    v_minimum_purchase_amt = lpTSCall1Ans1->GetDouble(LDBIZ_MINIMUM_PURCHASE_AMT_FLOAT);
    v_minimum_subscription_amt = lpTSCall1Ans1->GetDouble(LDBIZ_MINIMUM_SUBSCRIPTION_AMT_FLOAT);
    v_minimum_rede_share = lpTSCall1Ans1->GetDouble(LDBIZ_MINIMUM_REDE_SHARE_FLOAT);
    v_minimum_holding_share = lpTSCall1Ans1->GetDouble(LDBIZ_MINIMUM_HOLDING_SHARE_FLOAT);
    strcpy(v_trade_acco, lpTSCall1Ans1->GetString(LDBIZ_TRADE_ACCO_STR));


    // set @业务控制配置串# = @交易组业务控制配置串#;
    strcpy(v_busi_config_str,v_exgp_busi_config_str);

    // set @业务控制串# = "11111";
    strcpy(v_busi_ctrl_str,"11111");
    //调用过程[事务_产品_交易接口_检查交易产品账户信息]
    //组织事务请求
    if(lpTSCall1Ans2)
    {
      lpTSCall1Ans2->FreeMsg();
      lpTSCall1Ans2=NULL;
    }
    lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("prodT.8.21", 0);
    lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req2->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req2->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req2->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req2->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req2->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req2->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpTSCall1Req2->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpTSCall1Req2->SetDouble(LDBIZ_UP_LIMIT_PRICE_FLOAT,v_up_limit_price);
    lpTSCall1Req2->SetDouble(LDBIZ_DOWN_LIMIT_PRICE_FLOAT,v_down_limit_price);
    lpTSCall1Req2->SetDouble(LDBIZ_LAST_PRICE_FLOAT,v_last_price);
    lpTSCall1Req2->SetString(LDBIZ_CO_BUSI_CONFIG_STR_STR,v_co_busi_config_str);
    lpTSCall1Req2->SetString(LDBIZ_BUSI_CONFIG_STR_STR,v_busi_config_str);
    lpTSCall1Req2->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
    glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
    if(!lpTSCall1Ans2)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.8.21]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans2->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
    strcpy(v_exgp_busi_config_str, lpTSCall1Ans2->GetString(LDBIZ_EXGP_BUSI_CONFIG_STR_STR));
    strcpy(v_asac_busi_config_str, lpTSCall1Ans2->GetString(LDBIZ_ASAC_BUSI_CONFIG_STR_STR));
    strcpy(v_split_fee_typr_str, lpTSCall1Ans2->GetString(LDBIZ_SPLIT_FEE_TYPR_STR_STR));
    strcpy(v_busi_limit_str, lpTSCall1Ans2->GetString(LDBIZ_BUSI_LIMIT_STR_STR));
    v_pass_no = lpTSCall1Ans2->GetInt32(LDBIZ_PASS_NO_INT);
    strcpy(v_out_acco, lpTSCall1Ans2->GetString(LDBIZ_OUT_ACCO_STR));
    v_nav_asset = lpTSCall1Ans2->GetDouble(LDBIZ_NAV_ASSET_FLOAT);
    v_exter_comm_flag = lpTSCall1Ans2->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_market_price_ratio = lpTSCall1Ans2->GetDouble(LDBIZ_MARKET_PRICE_RATIO_FLOAT);
    v_market_price_type = lpTSCall1Ans2->GetInt32(LDBIZ_MARKET_PRICE_TYPE_INT);
    v_cost_calc_type = lpTSCall1Ans2->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
    v_order_market_price = lpTSCall1Ans2->GetDouble(LDBIZ_ORDER_MARKET_PRICE_FLOAT);
    v_sys_type = lpTSCall1Ans2->GetInt32(LDBIZ_SYS_TYPE_INT);
    strcpy(v_opor_no_str1, lpTSCall1Ans2->GetString(LDBIZ_OPOR_NO_STR1_STR));
    strcpy(v_opor_no_str2, lpTSCall1Ans2->GetString(LDBIZ_OPOR_NO_STR2_STR));
    strcpy(v_opor_no_str3, lpTSCall1Ans2->GetString(LDBIZ_OPOR_NO_STR3_STR));
    v_fina_limit_max = lpTSCall1Ans2->GetDouble(LDBIZ_FINA_LIMIT_MAX_FLOAT);
    v_loan_limit_max = lpTSCall1Ans2->GetDouble(LDBIZ_LOAN_LIMIT_MAX_FLOAT);
    v_asset_acco_type = lpTSCall1Ans2->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    v_sell_auto_back_debt = lpTSCall1Ans2->GetInt32(LDBIZ_SELL_AUTO_BACK_DEBT_INT);

    //获取股东代码
    //调用过程[事务_产品证券_交易接口_检查股东账户状态获取持仓成本]
    //组织事务请求
    if(lpTSCall1Ans3)
    {
      lpTSCall1Ans3->FreeMsg();
      lpTSCall1Ans3=NULL;
    }
    lpTSCall1Req3=glpFastMsgFactory->CreateFastMessage("pdsecuT.6.4", 0);
    lpTSCall1Req3->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req3->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req3->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req3->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req3->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req3->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req3->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req3->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req3->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req3->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req3->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req3->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    glpTSSubcallSerives->SubCall(lpTSCall1Req3, &lpTSCall1Ans3, 5000);
    if(!lpTSCall1Ans3)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pdsecuT.6.4]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans3->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
    v_stock_acco_no = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_acco, lpTSCall1Ans3->GetString(LDBIZ_STOCK_ACCO_STR));
    v_exgp_cost_amt = lpTSCall1Ans3->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
    v_exgp_intrst_cost_amt = lpTSCall1Ans3->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
    v_exgp_curr_qty = lpTSCall1Ans3->GetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT);
    v_asac_cost_amt = lpTSCall1Ans3->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
    v_asac_intrst_cost_amt = lpTSCall1Ans3->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
    v_asac_curr_qty = lpTSCall1Ans3->GetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT);


    // set @回购成交序号# = @成交序号#;
    v_repo_strike_id = v_strike_id;

    // set @回购天数# = 0;
    v_repo_days = 0;

    // set @回购实际天数# = 0;
    v_repo_cale_days = 0;

    // set @回购到期日期# = 0;
    v_repo_back_date = 0;
    //调用过程[事务_交易证券_报盘_体外指令成交回溯]
    //组织事务请求
    if(lpTSCall1Ans4)
    {
      lpTSCall1Ans4->FreeMsg();
      lpTSCall1Ans4=NULL;
    }
    lpTSCall1Req4=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.26", 0);
    lpTSCall1Req4->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req4->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req4->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req4->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req4->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req4->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req4->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req4->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req4->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req4->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req4->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req4->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req4->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
    lpTSCall1Req4->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpTSCall1Req4->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpTSCall1Req4->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req4->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpTSCall1Req4->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpTSCall1Req4->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req4->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req4->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
    lpTSCall1Req4->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
    lpTSCall1Req4->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
    lpTSCall1Req4->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req4->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpTSCall1Req4->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpTSCall1Req4->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req4->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpTSCall1Req4->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpTSCall1Req4->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpTSCall1Req4->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req4->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpTSCall1Req4->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpTSCall1Req4->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpTSCall1Req4->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpTSCall1Req4->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpTSCall1Req4->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpTSCall1Req4->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpTSCall1Req4->SetInt32(LDBIZ_INTRST_DAYS_INT,v_intrst_days);
    lpTSCall1Req4->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpTSCall1Req4->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpTSCall1Req4->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpTSCall1Req4->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpTSCall1Req4->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
    lpTSCall1Req4->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
    lpTSCall1Req4->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
    lpTSCall1Req4->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
    lpTSCall1Req4->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
    lpTSCall1Req4->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
    lpTSCall1Req4->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
    lpTSCall1Req4->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpTSCall1Req4->SetInt32(LDBIZ_COST_CALC_TYPE_INT,v_cost_calc_type);
    lpTSCall1Req4->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
    lpTSCall1Req4->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
    lpTSCall1Req4->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
    lpTSCall1Req4->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
    lpTSCall1Req4->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
    lpTSCall1Req4->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
    lpTSCall1Req4->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
    lpTSCall1Req4->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
    lpTSCall1Req4->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
    glpTSSubcallSerives->SubCall(lpTSCall1Req4, &lpTSCall1Ans4, 5000);
    if(!lpTSCall1Ans4)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.26]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans4->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
    v_comm_strike_qty = lpTSCall1Ans4->GetDouble(LDBIZ_COMM_STRIKE_QTY_FLOAT);
    v_comm_strike_amt = lpTSCall1Ans4->GetDouble(LDBIZ_COMM_STRIKE_AMT_FLOAT);

    //下完指令订单 ，增加订单主推给风控。Modify by wjp 20190428
    //调用过程[事务_交易证券_主推接口_获取订单信息]
    //组织事务请求
    if(lpTSCall1Ans5)
    {
      lpTSCall1Ans5->FreeMsg();
      lpTSCall1Ans5=NULL;
    }
    lpTSCall1Req5=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.45", 0);
    lpTSCall1Req5->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req5->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req5->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req5->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req5->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req5->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req5->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req5->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req5->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    glpTSSubcallSerives->SubCall(lpTSCall1Req5, &lpTSCall1Ans5, 5000);
    if(!lpTSCall1Ans5)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.45]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans5->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
    v_co_no = lpTSCall1Ans5->GetInt32(LDBIZ_CO_NO_INT);
    v_busi_opor_no = lpTSCall1Ans5->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    v_pd_no = lpTSCall1Ans5->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans5->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    v_pass_no = lpTSCall1Ans5->GetInt32(LDBIZ_PASS_NO_INT);
    strcpy(v_out_acco, lpTSCall1Ans5->GetString(LDBIZ_OUT_ACCO_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans5->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_exch_no = lpTSCall1Ans5->GetInt32(LDBIZ_EXCH_NO_INT);
    v_stock_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_acco, lpTSCall1Ans5->GetString(LDBIZ_STOCK_ACCO_STR));
    v_stock_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strcpy(v_stock_code, lpTSCall1Ans5->GetString(LDBIZ_STOCK_CODE_STR));
    v_trade_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans5->GetInt32(LDBIZ_ASSET_TYPE_INT);
    v_external_no = lpTSCall1Ans5->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
    v_comm_id = lpTSCall1Ans5->GetInt64(LDBIZ_COMM_ID_INT64);
    v_comm_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
    v_comm_opor = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_OPOR_INT);
    v_report_date = lpTSCall1Ans5->GetInt32(LDBIZ_REPORT_DATE_INT);
    v_report_time = lpTSCall1Ans5->GetInt32(LDBIZ_REPORT_TIME_INT);
    strcpy(v_report_no, lpTSCall1Ans5->GetString(LDBIZ_REPORT_NO_STR));
    v_order_date = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_time = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_order_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    v_order_dir = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_price_type = lpTSCall1Ans5->GetInt32(LDBIZ_PRICE_TYPE_INT);
    v_order_price = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans5->GetString(LDBIZ_ORDER_STATUS_STR));
    v_wtdraw_qty = lpTSCall1Ans5->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
    v_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    v_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_all_fee = lpTSCall1Ans5->GetDouble(LDBIZ_ALL_FEE_FLOAT);
    v_stamp_tax = lpTSCall1Ans5->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
    v_trans_fee = lpTSCall1Ans5->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
    v_brkage_fee = lpTSCall1Ans5->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
    v_SEC_charges = lpTSCall1Ans5->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
    v_other_fee = lpTSCall1Ans5->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
    v_trade_commis = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
    v_other_commis = lpTSCall1Ans5->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
    v_trade_tax = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
    v_trade_cost_fee = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
    v_trade_system_use_fee = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
    v_stock_settle_fee = lpTSCall1Ans5->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);
    v_net_price_flag = lpTSCall1Ans5->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_intrst_days = lpTSCall1Ans5->GetInt32(LDBIZ_INTRST_DAYS_INT);
    v_par_value = lpTSCall1Ans5->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans5->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_strike_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
    v_impawn_ratio = lpTSCall1Ans5->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_order_frozen_amt = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    v_order_frozen_qty = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
    strcpy(v_rsp_info, lpTSCall1Ans5->GetString(LDBIZ_RSP_INFO_STR));
    v_compli_trig_id = lpTSCall1Ans5->GetInt64(LDBIZ_COMPLI_TRIG_ID_INT64);
    strcpy(v_remark_info, lpTSCall1Ans5->GetString(LDBIZ_REMARK_INFO_STR));
    v_cost_calc_type = lpTSCall1Ans5->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
    strcpy(v_order_oper_way, lpTSCall1Ans5->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    v_exter_comm_flag = lpTSCall1Ans5->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_record_valid_flag = lpTSCall1Ans5->GetInt32(LDBIZ_RECORD_VALID_FLAG_INT);
    strcpy(v_combo_code, lpTSCall1Ans5->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans5->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    v_strategy_id = lpTSCall1Ans5->GetInt64(LDBIZ_STRATEGY_ID_INT64);
    v_asset_acco_type = lpTSCall1Ans5->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    strcpy(v_contra_no, lpTSCall1Ans5->GetString(LDBIZ_CONTRA_NO_STR));
    v_update_times = lpTSCall1Ans5->GetInt32(LDBIZ_UPDATE_TIMES_INT);


    // set @操作员编号# = @业务操作员编号#;
    v_opor_no = v_busi_opor_no;

    // set @当笔成交价格#=0;
    v_curr_strike_price=0;

    // set @当笔成交金额#=0;
    v_curr_strike_amt=0;

    // set @当笔成交数量#=0;
    v_curr_strike_qty=0;

    // [主动推送][secu.order][证券主推_订单_订单主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
    lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
    lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


    // set @组合代码# = " ";
    strcpy(v_combo_code," ");

    // set @成交债券计提利息# = 0;
    v_strike_bond_accr_intrst = 0;

    // set @订单批号# = 0;
    v_order_batch_no = 0;

    // set @更新次数# = 1;
    v_update_times = 1;

    // set @记录有效标志# = 《记录有效标志-无效》;
    v_record_valid_flag = 2;

    // [主动推送][secu.rptstrike][证券主推_报盘_成交主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.33", 0);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpPubMsg->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpPubMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
    lpPubMsg->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
    lpPubMsg->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
    lpPubMsg->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
    lpPubMsg->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
    lpPubMsg->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
    lpPubMsg->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
    lpPubMsg->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
    lpPubMsg->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
    lpPubMsg->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
    lpPubMsg->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
    lpPubMsg->SetInt32(LDBIZ_RECORD_VALID_FLAG_INT,v_record_valid_flag);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.rptstrike", lpPubMsg);


    // if @指令序号# > 0 then
    if (v_comm_id > 0)
    {
        //调用过程[事务_交易证券_主推接口_获取指令混合信息]
        //组织事务请求
        if(lpTSCall1Ans6)
        {
          lpTSCall1Ans6->FreeMsg();
          lpTSCall1Ans6=NULL;
        }
        lpTSCall1Req6=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
        lpTSCall1Req6->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req6->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req6->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req6->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req6->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req6->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req6->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        glpTSSubcallSerives->SubCall(lpTSCall1Req6, &lpTSCall1Ans6, 5000);
        if(!lpTSCall1Ans6)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans6->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
        v_init_date = lpTSCall1Ans6->GetInt32(LDBIZ_INIT_DATE_INT);
        v_co_no = lpTSCall1Ans6->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans6->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans6->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_pass_no = lpTSCall1Ans6->GetInt32(LDBIZ_PASS_NO_INT);
        strcpy(v_out_acco, lpTSCall1Ans6->GetString(LDBIZ_OUT_ACCO_STR));
        strcpy(v_exch_crncy_type, lpTSCall1Ans6->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
        v_stock_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        v_stock_type = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_TYPE_INT);
        v_comm_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_TIME_INT);
        v_comm_batch_no = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_opor = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_OPOR_INT);
        v_comm_executor = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_comm_dir = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_DIR_INT);
        v_comm_limit_price = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
        v_limit_actual_price = lpTSCall1Ans6->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
        v_comm_qty = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_QTY_FLOAT);
        v_comm_amt = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_AMT_FLOAT);
        v_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
        v_comm_cancel_qty = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
        v_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
        v_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
        v_comm_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
        v_comm_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
        strcpy(v_strike_status, lpTSCall1Ans6->GetString(LDBIZ_STRIKE_STATUS_STR));
        strcpy(v_comm_status, lpTSCall1Ans6->GetString(LDBIZ_COMM_STATUS_STR));
        v_comm_begin_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
        v_comm_end_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_END_DATE_INT);
        v_comm_begin_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
        v_comm_end_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_END_TIME_INT);
        v_comm_comple_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
        v_comm_comple_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
        v_comm_appr_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
        v_comm_appr_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
        strcpy(v_comm_appr_status, lpTSCall1Ans6->GetString(LDBIZ_COMM_APPR_STATUS_STR));
        v_comm_appr_oper = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
        strcpy(v_comm_appr_remark, lpTSCall1Ans6->GetString(LDBIZ_COMM_APPR_REMARK_STR));
        v_basket_id = lpTSCall1Ans6->GetInt64(LDBIZ_BASKET_ID_INT64);
        v_net_price_flag = lpTSCall1Ans6->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
        v_bond_accr_intrst = lpTSCall1Ans6->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
        v_bond_rate_type = lpTSCall1Ans6->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
        strcpy(v_comm_oper_way, lpTSCall1Ans6->GetString(LDBIZ_COMM_OPER_WAY_STR));
        v_exter_comm_flag = lpTSCall1Ans6->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
        v_comm_comple_flag = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
        v_strategy_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
        v_strategy_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
        strcpy(v_contra_no, lpTSCall1Ans6->GetString(LDBIZ_CONTRA_NO_STR));
        strcpy(v_comm_remark_info, lpTSCall1Ans6->GetString(LDBIZ_COMM_REMARK_INFO_STR));
        v_disp_opor = lpTSCall1Ans6->GetInt32(LDBIZ_DISP_OPOR_INT);
        v_disp_status = lpTSCall1Ans6->GetInt32(LDBIZ_DISP_STATUS_INT);
        v_read_flag = lpTSCall1Ans6->GetInt32(LDBIZ_READ_FLAG_INT);
        v_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_UPDATE_TIMES_INT);
        v_sum_comm_row_id = lpTSCall1Ans6->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
        v_sum_comm_co_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
        v_sum_comm_pd_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
        v_sum_comm_exch_group_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
        v_sum_comm_asset_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
        v_sum_comm_pass_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
        strcpy(v_sum_comm_out_acco, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
        strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
        v_sum_comm_stock_code_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
        v_sum_comm_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
        v_sum_comm_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
        v_sum_comm_batch_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
        v_sum_comm_opor = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
        v_sum_comm_executor = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
        v_sum_comm_dir = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
        v_sum_comm_limit_price = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
        v_sum_comm_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
        v_sum_comm_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
        v_sum_comm_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
        v_sum_comm_cancel_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
        v_sum_comm_await_cancel_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
        v_sum_comm_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
        v_sum_comm_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
        strcpy(v_sum_comm_strike_status, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
        strcpy(v_comm_sum_status, lpTSCall1Ans6->GetString(LDBIZ_COMM_SUM_STATUS_STR));
        v_sum_comm_begin_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
        v_sum_comm_end_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
        v_sum_comm_begin_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
        v_sum_comm_end_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
        v_sum_comm_comple_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
        v_sum_comm_comple_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
        v_sum_comm_max_comm_comple_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
        v_sum_comm_max_comm_comple_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
        v_sum_comm_appr_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
        v_sum_comm_appr_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
        v_sum_comm_appr_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
        strcpy(v_comm_sum_approve_status, lpTSCall1Ans6->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
        v_sum_comm_basket_id = lpTSCall1Ans6->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
        v_sum_comm_net_price_flag = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
        v_sum_comm_bond_accr_intrst = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
        v_sum_comm_bond_rate_type = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
        strcpy(v_sum_comm_oper_way, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
        v_sum_comm_exter_comm_flag = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
        v_sum_buy_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
        v_sum_sell_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
        v_sum_buy_comm_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
        v_sum_sell_comm_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
        v_sum_buy_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
        v_sum_sell_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
        v_sum_buy_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
        v_sum_sell_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
        v_sum_buy_comm_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
        v_sum_sell_comm_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
        strcpy(v_sum_comm_remark_info, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
        v_sum_comm_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
        strcpy(v_acco_concat_info, lpTSCall1Ans6->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


        // [主动推送][secu.comm][证券主推_指令_指令主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
        lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
        lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
        lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
        lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
        lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
        lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
        lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
        lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
        lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
        lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
        lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
        lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
        lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
        lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
        lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
        lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
        lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
        lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
        lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
        lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


        // if @指令批号# > 0 then
        if (v_comm_batch_no > 0)
        {

            // set @指令备注信息#= @汇总指令备注信息#;
            strcpy(v_comm_remark_info,v_sum_comm_remark_info);

            // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
            lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
            lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
            lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
            lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
            lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
            lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
            lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
            glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

        // end if;
        }

    // end if;
    }

    //质押提交和质押转回，要推交易代码和标准券代码

    // if @订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》 then
    if (v_order_dir == 21 || v_order_dir == 22)
    {
      //调用过程[事务_交易证券_主推接口_获取资金和质押持仓信息]
      //组织事务请求
      if(lpTSCall1Ans7)
      {
        lpTSCall1Ans7->FreeMsg();
        lpTSCall1Ans7=NULL;
      }
      lpTSCall1Req7=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.28", 0);
      lpTSCall1Req7->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req7->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req7->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req7->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req7->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req7->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req7->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req7->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req7->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req7->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req7->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req7->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req7->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req7->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
      lpTSCall1Req7->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpTSCall1Req7->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
      glpTSSubcallSerives->SubCall(lpTSCall1Req7, &lpTSCall1Ans7, 5000);
      if(!lpTSCall1Ans7)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.28]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans7->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);
      v_exgp_target_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_TARGET_POSI_ID_INT64);
      v_exgp_target_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_FROZEN_QTY_FLOAT);
      v_exgp_target_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_UNFROZ_QTY_FLOAT);
      v_exgp_target_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COMM_FROZEN_QTY_FLOAT);
      v_exgp_target_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_target_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COMM_CAPT_QTY_FLOAT);
      v_exgp_target_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COMM_RELEAS_QTY_FLOAT);
      v_exgp_target_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_target_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_target_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_TRADE_CAPT_QTY_FLOAT);
      v_exgp_target_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_target_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_target_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_target_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_target_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_target_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_REALIZE_PANDL_FLOAT);
      v_exgp_target_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_COST_AMT_FLOAT);
      v_exgp_target_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_INTRST_COST_AMT_FLOAT);
      v_exgp_target_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TARGET_INTRST_PANDL_FLOAT);
      v_exgp_target_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_TARGET_POSI_UPDATE_TIMES_INT);
      v_asac_target_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_TARGET_POSI_ID_INT64);
      v_asac_target_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_FROZEN_QTY_FLOAT);
      v_asac_target_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_UNFROZ_QTY_FLOAT);
      v_asac_target_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COMM_FROZEN_QTY_FLOAT);
      v_asac_target_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COMM_UNFROZ_QTY_FLOAT);
      v_asac_target_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COMM_CAPT_QTY_FLOAT);
      v_asac_target_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COMM_RELEAS_QTY_FLOAT);
      v_asac_target_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_TRADE_FROZEN_QTY_FLOAT);
      v_asac_target_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_target_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_TRADE_CAPT_QTY_FLOAT);
      v_asac_target_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_TRADE_RELEAS_QTY_FLOAT);
      v_asac_target_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_CAPT_QTY_FLOAT);
      v_asac_target_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_target_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_target_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_target_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_REALIZE_PANDL_FLOAT);
      v_asac_target_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_COST_AMT_FLOAT);
      v_asac_target_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_INTRST_COST_AMT_FLOAT);
      v_asac_target_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TARGET_INTRST_PANDL_FLOAT);
      v_asac_target_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_TARGET_POSI_UPDATE_TIMES_INT);
      v_exgp_put_impawn_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT);
      v_asac_put_impawn_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT);


      // set @证券代码编号# = @交易代码编号#;
      v_stock_code_no = v_trade_code_no;

      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


      // set @交易组提交质押数量# = 0;
      v_exgp_put_impawn_qty = 0;

      // set @资产账户提交质押数量# = 0;
      v_asac_put_impawn_qty = 0;

      // set @证券代码编号# = @标的代码编号#;
      v_stock_code_no = v_target_code_no;

      // set @交易组持仓序号# = @交易组标的持仓序号#;
      v_exgp_posi_id = v_exgp_target_posi_id;

      // set @交易组冻结数量# = @交易组标的冻结数量#;
      v_exgp_frozen_qty = v_exgp_target_frozen_qty;

      // set @交易组解冻数量# = @交易组标的解冻数量#;
      v_exgp_unfroz_qty = v_exgp_target_unfroz_qty;

      // set @交易组指令冻结数量# = @交易组标的指令冻结数量#;
      v_exgp_comm_frozen_qty = v_exgp_target_comm_frozen_qty;

      // set @交易组指令解冻数量# = @交易组标的指令解冻数量#;
      v_exgp_comm_unfroz_qty = v_exgp_target_comm_unfroz_qty;

      // set @交易组指令占用数量# = @交易组标的指令占用数量#;
      v_exgp_comm_capt_qty = v_exgp_target_comm_capt_qty;

      // set @交易组指令释放数量# = @交易组标的指令释放数量#;
      v_exgp_comm_releas_qty = v_exgp_target_comm_releas_qty;

      // set @交易组交易冻结数量# = @交易组标的交易冻结数量#;
      v_exgp_trade_frozen_qty = v_exgp_target_trade_frozen_qty;

      // set @交易组交易解冻数量# = @交易组标的交易解冻数量#;
      v_exgp_trade_unfroz_qty = v_exgp_target_trade_unfroz_qty;

      // set @交易组交易占用数量# = @交易组标的交易占用数量#;
      v_exgp_trade_capt_qty = v_exgp_target_trade_capt_qty;

      // set @交易组交易释放数量# = @交易组标的交易释放数量#;
      v_exgp_trade_releas_qty = v_exgp_target_trade_releas_qty;

      // set @交易组成交占用数量# = @交易组标的成交占用数量#;
      v_exgp_strike_capt_qty = v_exgp_target_strike_capt_qty;

      // set @交易组成交释放数量# = @交易组标的成交释放数量#;
      v_exgp_strike_releas_qty = v_exgp_target_strike_releas_qty;

      // set @交易组成交冻结数量# = @交易组标的成交冻结数量#;
      v_exgp_strike_frozen_qty = v_exgp_target_strike_frozen_qty;

      // set @交易组成交解冻数量# = @交易组标的成交解冻数量#;
      v_exgp_strike_unfroz_qty = v_exgp_target_strike_unfroz_qty;

      // set @交易组实现盈亏# = @交易组标的实现盈亏#;
      v_exgp_realize_pandl = v_exgp_target_realize_pandl;

      // set @交易组成本金额# = @交易组标的成本金额#;
      v_exgp_cost_amt = v_exgp_target_cost_amt;

      // set @交易组利息成本金额# = @交易组标的利息成本金额#;
      v_exgp_intrst_cost_amt = v_exgp_target_intrst_cost_amt;

      // set @交易组利息收益# = @交易组标的利息收益#;
      v_exgp_intrst_pandl = v_exgp_target_intrst_pandl;

      // set @交易组持仓更新次数# = @交易组标的持仓更新次数#;
      v_exgp_posi_update_times = v_exgp_target_posi_update_times;

      // set @资产账户持仓序号# = @资产账户标的持仓序号#;
      v_asac_posi_id = v_asac_target_posi_id;

      // set @资产账户冻结数量# = @资产账户标的冻结数量#;
      v_asac_frozen_qty = v_asac_target_frozen_qty;

      // set @资产账户解冻数量# = @资产账户标的解冻数量#;
      v_asac_unfroz_qty = v_asac_target_unfroz_qty;

      // set @资产账户指令冻结数量# = @资产账户标的指令冻结数量#;
      v_asac_comm_frozen_qty = v_asac_target_comm_frozen_qty;

      // set @资产账户指令解冻数量# = @资产账户标的指令解冻数量#;
      v_asac_comm_unfroz_qty = v_asac_target_comm_unfroz_qty;

      // set @资产账户指令占用数量# = @资产账户标的指令占用数量#;
      v_asac_comm_capt_qty = v_asac_target_comm_capt_qty;

      // set @资产账户指令释放数量# = @资产账户标的指令释放数量#;
      v_asac_comm_releas_qty = v_asac_target_comm_releas_qty;

      // set @资产账户交易冻结数量# = @资产账户标的交易冻结数量#;
      v_asac_trade_frozen_qty = v_asac_target_trade_frozen_qty;

      // set @资产账户交易解冻数量# = @资产账户标的交易解冻数量#;
      v_asac_trade_unfroz_qty = v_asac_target_trade_unfroz_qty;

      // set @资产账户交易占用数量# = @资产账户标的交易占用数量#;
      v_asac_trade_capt_qty = v_asac_target_trade_capt_qty;

      // set @资产账户交易释放数量# = @资产账户标的交易释放数量#;
      v_asac_trade_releas_qty = v_asac_target_trade_releas_qty;

      // set @资产账户成交占用数量# = @资产账户标的成交占用数量#;
      v_asac_strike_capt_qty = v_asac_target_strike_capt_qty;

      // set @资产账户成交释放数量# = @资产账户标的成交释放数量#;
      v_asac_strike_releas_qty = v_asac_target_strike_releas_qty;

      // set @资产账户成交冻结数量# = @资产账户标的成交冻结数量#;
      v_asac_strike_frozen_qty = v_asac_target_strike_frozen_qty;

      // set @资产账户成交解冻数量# = @资产账户标的成交解冻数量#;
      v_asac_strike_unfroz_qty = v_asac_target_strike_unfroz_qty;

      // set @资产账户实现盈亏# = @资产账户标的实现盈亏#;
      v_asac_realize_pandl = v_asac_target_realize_pandl;

      // set @资产账户成本金额# = @资产账户标的成本金额#;
      v_asac_cost_amt = v_asac_target_cost_amt;

      // set @资产账户利息成本金额# = @资产账户标的利息成本金额#;
      v_asac_intrst_cost_amt = v_asac_target_intrst_cost_amt;

      // set @资产账户利息收益# = @资产账户标的利息收益#;
      v_asac_intrst_pandl = v_asac_target_intrst_pandl;

      // set @资产账户持仓更新次数# = @资产账户标的持仓更新次数#;
      v_asac_posi_update_times = v_asac_target_posi_update_times;

      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


    }
    // else if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
    else if (v_order_dir == 3 || v_order_dir == 4)
    {

      // set @证券代码编号# = @标的代码编号#;
      v_stock_code_no = v_target_code_no;
      //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
      //组织事务请求
      if(lpTSCall1Ans8)
      {
        lpTSCall1Ans8->FreeMsg();
        lpTSCall1Ans8=NULL;
      }
      lpTSCall1Req8=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
      lpTSCall1Req8->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req8->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req8->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req8->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req8->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req8->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req8->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req8->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req8->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req8->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req8->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req8->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req8->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req8->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpTSCall1Req8->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      glpTSSubcallSerives->SubCall(lpTSCall1Req8, &lpTSCall1Ans8, 5000);
      if(!lpTSCall1Ans8)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans8->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans8->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans8->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans8->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans8->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans8->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);


      // set @回购成交序号# = @成交序号#;
      v_repo_strike_id = v_strike_id;
      //调用过程[事务_交易证券_主推接口_获取债券回购信息]
      //组织事务请求
      if(lpTSCall1Ans9)
      {
        lpTSCall1Ans9->FreeMsg();
        lpTSCall1Ans9=NULL;
      }
      lpTSCall1Req9=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.30", 0);
      lpTSCall1Req9->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req9->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req9->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req9->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req9->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req9->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req9->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req9->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req9->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
      glpTSSubcallSerives->SubCall(lpTSCall1Req9, &lpTSCall1Ans9, 5000);
      if(!lpTSCall1Ans9)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.30]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans9->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
      v_init_date = lpTSCall1Ans9->GetInt32(LDBIZ_INIT_DATE_INT);
      v_co_no = lpTSCall1Ans9->GetInt32(LDBIZ_CO_NO_INT);
      v_pd_no = lpTSCall1Ans9->GetInt32(LDBIZ_PD_NO_INT);
      v_exch_group_no = lpTSCall1Ans9->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
      v_asset_acco_no = lpTSCall1Ans9->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
      strcpy(v_crncy_type, lpTSCall1Ans9->GetString(LDBIZ_CRNCY_TYPE_STR));
      strcpy(v_exch_crncy_type, lpTSCall1Ans9->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
      v_exch_rate = lpTSCall1Ans9->GetDouble(LDBIZ_EXCH_RATE_FLOAT);
      v_exch_no = lpTSCall1Ans9->GetInt32(LDBIZ_EXCH_NO_INT);
      v_stock_acco_no = lpTSCall1Ans9->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
      v_stock_code_no = lpTSCall1Ans9->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
      v_target_code_no = lpTSCall1Ans9->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
      v_comm_id = lpTSCall1Ans9->GetInt64(LDBIZ_COMM_ID_INT64);
      v_order_dir = lpTSCall1Ans9->GetInt32(LDBIZ_ORDER_DIR_INT);
      v_repo_qty = lpTSCall1Ans9->GetDouble(LDBIZ_REPO_QTY_FLOAT);
      v_repo_amt = lpTSCall1Ans9->GetDouble(LDBIZ_REPO_AMT_FLOAT);
      v_repo_rate = lpTSCall1Ans9->GetDouble(LDBIZ_REPO_RATE_FLOAT);
      v_repo_trade_date = lpTSCall1Ans9->GetInt32(LDBIZ_REPO_TRADE_DATE_INT);
      v_repo_order_id = lpTSCall1Ans9->GetInt64(LDBIZ_REPO_ORDER_ID_INT64);
      v_repo_days = lpTSCall1Ans9->GetInt32(LDBIZ_REPO_DAYS_INT);
      v_repo_cale_days = lpTSCall1Ans9->GetInt32(LDBIZ_REPO_CALE_DAYS_INT);
      v_repo_back_date = lpTSCall1Ans9->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
      v_repo_back_amt = lpTSCall1Ans9->GetDouble(LDBIZ_REPO_BACK_AMT_FLOAT);
      v_repo_back_intrst = lpTSCall1Ans9->GetDouble(LDBIZ_REPO_BACK_INTRST_FLOAT);
      v_repo_back_trade_date = lpTSCall1Ans9->GetInt32(LDBIZ_REPO_BACK_TRADE_DATE_INT);
      strcpy(v_repo_status, lpTSCall1Ans9->GetString(LDBIZ_REPO_STATUS_STR));
      v_bond_repo_id = lpTSCall1Ans9->GetInt64(LDBIZ_BOND_REPO_ID_INT64);
      v_update_times = lpTSCall1Ans9->GetInt32(LDBIZ_UPDATE_TIMES_INT);


      // [主动推送][secu.exgpbondrepo][证券主推_持仓_交易组债券回购主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.82", 0);
      lpPubMsg->SetInt64(LDBIZ_BOND_REPO_ID_INT64,v_bond_repo_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXCH_RATE_FLOAT,v_exch_rate);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
      lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
      lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
      lpPubMsg->SetDouble(LDBIZ_REPO_QTY_FLOAT,v_repo_qty);
      lpPubMsg->SetDouble(LDBIZ_REPO_AMT_FLOAT,v_repo_amt);
      lpPubMsg->SetDouble(LDBIZ_REPO_RATE_FLOAT,v_repo_rate);
      lpPubMsg->SetInt32(LDBIZ_REPO_TRADE_DATE_INT,v_repo_trade_date);
      lpPubMsg->SetInt64(LDBIZ_REPO_ORDER_ID_INT64,v_repo_order_id);
      lpPubMsg->SetInt64(LDBIZ_REPO_STRIKE_ID_INT64,v_repo_strike_id);
      lpPubMsg->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
      lpPubMsg->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
      lpPubMsg->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
      lpPubMsg->SetDouble(LDBIZ_REPO_BACK_AMT_FLOAT,v_repo_back_amt);
      lpPubMsg->SetDouble(LDBIZ_REPO_BACK_INTRST_FLOAT,v_repo_back_intrst);
      lpPubMsg->SetInt32(LDBIZ_REPO_BACK_TRADE_DATE_INT,v_repo_back_trade_date);
      lpPubMsg->SetString(LDBIZ_REPO_STATUS_STR,v_repo_status);
      lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpbondrepo", lpPubMsg);

    }
    // else
    else
    {

      //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
      //组织事务请求
      if(lpTSCall1Ans10)
      {
        lpTSCall1Ans10->FreeMsg();
        lpTSCall1Ans10=NULL;
      }
      lpTSCall1Req10=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
      lpTSCall1Req10->SetInt32(LDTAG_PRIORITY, iPriority);
      lpTSCall1Req10->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
      lpTSCall1Req10->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
      lpTSCall1Req10->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
      lpTSCall1Req10->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
      lpTSCall1Req10->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
      lpTSCall1Req10->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
      lpTSCall1Req10->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
      lpTSCall1Req10->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpTSCall1Req10->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpTSCall1Req10->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpTSCall1Req10->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpTSCall1Req10->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpTSCall1Req10->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpTSCall1Req10->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      glpTSSubcallSerives->SubCall(lpTSCall1Req10, &lpTSCall1Ans10, 5000);
      if(!lpTSCall1Ans10)  //  超时错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
          iRet=-2;
          goto ENDSYS;
      }
      else if(lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
      {
          lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO));
          lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans10->GetString(LDTAG_ERRORINFO));
          iRet=-2;
          goto ENDSYS;
      }
      else if(strcmp(lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
      {
          strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
          strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
          iRet=-1;
          goto END;
      }
      //获取输出参数值
      strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
      strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
      v_exgp_cash_id = lpTSCall1Ans10->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
      v_exgp_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
      v_exgp_unfroz_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
      v_exgp_comm_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
      v_exgp_comm_unfroz_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
      v_exgp_comm_capt_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
      v_exgp_comm_releas_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
      v_exgp_trade_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
      v_exgp_trade_unfroz_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
      v_exgp_trade_capt_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
      v_exgp_trade_releas_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
      v_exgp_strike_capt_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
      v_exgp_strike_releas_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
      v_exgp_cash_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
      v_exgp_posi_id = lpTSCall1Ans10->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
      v_exgp_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
      v_exgp_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
      v_exgp_comm_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
      v_exgp_comm_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
      v_exgp_comm_capt_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
      v_exgp_comm_releas_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
      v_exgp_trade_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
      v_exgp_trade_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
      v_exgp_trade_capt_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
      v_exgp_trade_releas_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
      v_exgp_strike_capt_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
      v_exgp_strike_releas_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
      v_exgp_strike_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
      v_exgp_strike_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
      v_exgp_realize_pandl = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
      v_exgp_cost_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
      v_exgp_intrst_cost_amt = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
      v_exgp_intrst_pandl = lpTSCall1Ans10->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
      v_exgp_posi_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
      v_asac_cash_id = lpTSCall1Ans10->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
      v_asac_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
      v_asac_unfroz_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
      v_asac_comm_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
      v_asac_comm_unfroz_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
      v_asac_comm_capt_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
      v_asac_comm_releas_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
      v_asac_trade_frozen_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
      v_asac_trade_unfroz_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
      v_asac_trade_capt_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
      v_asac_trade_releas_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
      v_asac_strike_capt_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
      v_asac_strike_releas_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
      v_asac_cash_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
      v_asac_posi_id = lpTSCall1Ans10->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
      v_asac_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
      v_asac_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
      v_asac_comm_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
      v_asac_comm_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
      v_asac_comm_capt_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
      v_asac_comm_releas_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
      v_asac_trade_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
      v_asac_trade_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
      v_asac_trade_capt_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
      v_asac_trade_releas_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
      v_asac_strike_capt_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
      v_asac_strike_releas_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
      v_asac_strike_frozen_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
      v_asac_strike_unfroz_qty = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
      v_asac_realize_pandl = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
      v_asac_cost_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
      v_asac_intrst_cost_amt = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
      v_asac_intrst_pandl = lpTSCall1Ans10->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
      v_asac_posi_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


      // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


      // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
      lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


      // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
      lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
      glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


      // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
      lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
      lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
      lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
      lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
      lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
      lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
      lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
      lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
      lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
      lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
      lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
      lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
      lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
      glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

    // end if;
    }


END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans11)
        {
          lpTSCall1Ans11->FreeMsg();
          lpTSCall1Ans11=NULL;
        }
        lpTSCall1Req11=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req11->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req11->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req11->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req11->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req11->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req11->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req11->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req11->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req11->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req11->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req11, &lpTSCall1Ans11, 5000);
        if (lpTSCall1Ans11)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans11->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans11->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans11->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
    lpOutBizMsg->SetDouble(LDBIZ_COMM_STRIKE_QTY_FLOAT,v_comm_strike_qty);
    lpOutBizMsg->SetDouble(LDBIZ_COMM_STRIKE_AMT_FLOAT,v_comm_strike_amt);
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    if(lpTSCall1Ans3)
        lpTSCall1Ans3->FreeMsg();
    if(lpTSCall1Ans4)
        lpTSCall1Ans4->FreeMsg();
    if(lpTSCall1Ans5)
        lpTSCall1Ans5->FreeMsg();
    if(lpTSCall1Ans6)
        lpTSCall1Ans6->FreeMsg();
    if(lpTSCall1Ans7)
        lpTSCall1Ans7->FreeMsg();
    if(lpTSCall1Ans8)
        lpTSCall1Ans8->FreeMsg();
    if(lpTSCall1Ans9)
        lpTSCall1Ans9->FreeMsg();
    if(lpTSCall1Ans10)
        lpTSCall1Ans10->FreeMsg();
    if(lpTSCall1Ans11)
        lpTSCall1Ans11->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_查询订单回报
int LD_CALL_MODE fnFunc8(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    char v_exch_no_str[2049];
    char v_stock_acco[17];
    char v_stock_code[7];
    char v_order_dir_str[1025];
    char v_order_rsp_status_str[65];
    char v_deal_status_str[65];
    int64 v_row_id;
    int v_row_count;
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_init_date;
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    int v_report_date;
    int v_report_time;
    char v_report_no[33];
    int v_order_date;
    int64 v_order_id;
    int v_order_dir;
    double v_order_price;
    double v_order_qty;
    int v_price_type;
    char v_order_rsp_status[3];
    char v_rsp_info[256];
    char v_deal_status[3];
    int v_update_times;
    char v_busi_ctrl_str[65];
    char v_co_busi_config_str[65];
    char v_co_no_rights_str[2049];
    char v_pd_no_rights_str[2049];
    char v_exch_group_no_rights_str[2049];
    char v_log_error_code[33];
    char v_log_error_info[256];


int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    strcpy(v_exch_no_str, " ");
    strcpy(v_stock_acco, " ");
    strcpy(v_stock_code, " ");
    strcpy(v_order_dir_str, " ");
    strcpy(v_order_rsp_status_str, " ");
    strcpy(v_deal_status_str, " ");
    v_row_id=0;
    v_row_count=-1;
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_init_date=0;
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    v_report_date=0;
    v_report_time=0;
    strcpy(v_report_no, " ");
    v_order_date=0;
    v_order_id=0;
    v_order_dir=0;
    v_order_price=0;
    v_order_qty=0;
    v_price_type=0;
    strcpy(v_order_rsp_status, "0");
    strcpy(v_rsp_info, " ");
    strcpy(v_deal_status, "0");
    v_update_times=1;
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_co_busi_config_str, " ");
    strcpy(v_co_no_rights_str, " ");
    strcpy(v_pd_no_rights_str, " ");
    strcpy(v_exch_group_no_rights_str, " ");
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    strncpy(v_exch_no_str, lpInBizMsg->GetString(LDBIZ_EXCH_NO_STR_STR),2048);
    v_exch_no_str[2048] = '\0';
    strncpy(v_stock_acco, lpInBizMsg->GetString(LDBIZ_STOCK_ACCO_STR),16);
    v_stock_acco[16] = '\0';
    strncpy(v_stock_code, lpInBizMsg->GetString(LDBIZ_STOCK_CODE_STR),6);
    v_stock_code[6] = '\0';
    strncpy(v_order_dir_str, lpInBizMsg->GetString(LDBIZ_ORDER_DIR_STR_STR),1024);
    v_order_dir_str[1024] = '\0';
    strncpy(v_order_rsp_status_str, lpInBizMsg->GetString(LDBIZ_ORDER_RSP_STATUS_STR_STR),64);
    v_order_rsp_status_str[64] = '\0';
    strncpy(v_deal_status_str, lpInBizMsg->GetString(LDBIZ_DEAL_STATUS_STR_STR),64);
    v_deal_status_str[64] = '\0';
    v_row_id = lpInBizMsg->GetInt64(LDBIZ_ROW_ID_INT64);
    v_row_count = lpInBizMsg->GetInt32(LDBIZ_ROW_COUNT_INT);

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;

    //公共子系统检查

    // set @业务控制串# = "111";
    strcpy(v_busi_ctrl_str,"111");
    //调用过程[事务_公共_公共接口_检查系统状态查询权限身份获取操作员权限串]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.37", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_BUSI_CTRL_STR_STR,v_busi_ctrl_str);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.37]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
    strcpy(v_co_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_CO_NO_RIGHTS_STR_STR));
    strcpy(v_pd_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_PD_NO_RIGHTS_STR_STR));
    strcpy(v_exch_group_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR));

    //调用过程[事务_交易证券_报盘_查询订单回报]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.101", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_NO_STR_STR,v_exch_no_str);
    lpTSCall1Req1->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpTSCall1Req1->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_DIR_STR_STR,v_order_dir_str);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_RSP_STATUS_STR_STR,v_order_rsp_status_str);
    lpTSCall1Req1->SetString(LDBIZ_DEAL_STATUS_STR_STR,v_deal_status_str);
    lpTSCall1Req1->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
    lpTSCall1Req1->SetInt32(LDBIZ_ROW_COUNT_INT,v_row_count);
    lpTSCall1Req1->SetString(LDBIZ_CO_NO_RIGHTS_STR_STR,v_co_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_PD_NO_RIGHTS_STR_STR,v_pd_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR,v_exch_group_no_rights_str);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.101]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));


    lpOutBizMsg->FillWithAnotherMsg(lpTSCall1Ans1);
END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans2)
        {
          lpTSCall1Ans2->FreeMsg();
          lpTSCall1Ans2=NULL;
        }
        lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
        if (lpTSCall1Ans2)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans2->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans2->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans2->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_查询成交回报
int LD_CALL_MODE fnFunc9(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    char v_exch_no_str[2049];
    char v_stock_acco[17];
    char v_stock_code[7];
    char v_order_dir_str[1025];
    char v_deal_status_str[65];
    int64 v_row_id;
    int v_row_count;
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_init_date;
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    int v_strike_date;
    int v_strike_time;
    char v_strike_no[65];
    char v_report_no[33];
    int v_order_dir;
    double v_strike_price;
    double v_strike_qty;
    double v_strike_amt;
    int v_strike_deal_type;
    char v_rsp_info[256];
    char v_deal_status[3];
    int v_update_times;
    char v_busi_ctrl_str[65];
    char v_co_busi_config_str[65];
    char v_co_no_rights_str[2049];
    char v_pd_no_rights_str[2049];
    char v_exch_group_no_rights_str[2049];
    char v_log_error_code[33];
    char v_log_error_info[256];


int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    strcpy(v_exch_no_str, " ");
    strcpy(v_stock_acco, " ");
    strcpy(v_stock_code, " ");
    strcpy(v_order_dir_str, " ");
    strcpy(v_deal_status_str, " ");
    v_row_id=0;
    v_row_count=-1;
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_init_date=0;
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    v_strike_date=0;
    v_strike_time=0;
    strcpy(v_strike_no, " ");
    strcpy(v_report_no, " ");
    v_order_dir=0;
    v_strike_price=0;
    v_strike_qty=0;
    v_strike_amt=0;
    v_strike_deal_type=0;
    strcpy(v_rsp_info, " ");
    strcpy(v_deal_status, "0");
    v_update_times=1;
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_co_busi_config_str, " ");
    strcpy(v_co_no_rights_str, " ");
    strcpy(v_pd_no_rights_str, " ");
    strcpy(v_exch_group_no_rights_str, " ");
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    strncpy(v_exch_no_str, lpInBizMsg->GetString(LDBIZ_EXCH_NO_STR_STR),2048);
    v_exch_no_str[2048] = '\0';
    strncpy(v_stock_acco, lpInBizMsg->GetString(LDBIZ_STOCK_ACCO_STR),16);
    v_stock_acco[16] = '\0';
    strncpy(v_stock_code, lpInBizMsg->GetString(LDBIZ_STOCK_CODE_STR),6);
    v_stock_code[6] = '\0';
    strncpy(v_order_dir_str, lpInBizMsg->GetString(LDBIZ_ORDER_DIR_STR_STR),1024);
    v_order_dir_str[1024] = '\0';
    strncpy(v_deal_status_str, lpInBizMsg->GetString(LDBIZ_DEAL_STATUS_STR_STR),64);
    v_deal_status_str[64] = '\0';
    v_row_id = lpInBizMsg->GetInt64(LDBIZ_ROW_ID_INT64);
    v_row_count = lpInBizMsg->GetInt32(LDBIZ_ROW_COUNT_INT);

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;

    //公共子系统检查

    // set @业务控制串# = "111";
    strcpy(v_busi_ctrl_str,"111");
    //调用过程[事务_公共_公共接口_检查系统状态查询权限身份获取操作员权限串]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.37", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_BUSI_CTRL_STR_STR,v_busi_ctrl_str);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.37]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
    strcpy(v_co_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_CO_NO_RIGHTS_STR_STR));
    strcpy(v_pd_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_PD_NO_RIGHTS_STR_STR));
    strcpy(v_exch_group_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR));

    //调用过程[事务_交易证券_报盘_查询成交回报]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.121", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_NO_STR_STR,v_exch_no_str);
    lpTSCall1Req1->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpTSCall1Req1->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_DIR_STR_STR,v_order_dir_str);
    lpTSCall1Req1->SetString(LDBIZ_DEAL_STATUS_STR_STR,v_deal_status_str);
    lpTSCall1Req1->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
    lpTSCall1Req1->SetInt32(LDBIZ_ROW_COUNT_INT,v_row_count);
    lpTSCall1Req1->SetString(LDBIZ_CO_NO_RIGHTS_STR_STR,v_co_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_PD_NO_RIGHTS_STR_STR,v_pd_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR,v_exch_group_no_rights_str);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.121]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));


    lpOutBizMsg->FillWithAnotherMsg(lpTSCall1Ans1);
END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans2)
        {
          lpTSCall1Ans2->FreeMsg();
          lpTSCall1Ans2=NULL;
        }
        lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
        if (lpTSCall1Ans2)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans2->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans2->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans2->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_查询成交明细
int LD_CALL_MODE fnFunc10(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_busi_opor_no;
    char v_order_oper_way[3];
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    char v_exch_no_str[2049];
    int v_stock_code_no;
    char v_stock_type_str[2049];
    int64 v_comm_id;
    int v_comm_batch_no;
    int v_order_batch_no;
    char v_order_dir_str[1025];
    int v_exter_comm_flag;
    int v_record_valid_flag;
    int64 v_row_id;
    int v_row_count;
    int v_sort_type;
    char v_combo_code[33];
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_query_opor_no;
    int v_init_date;
    int v_asset_acco_no;
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    int v_stock_acco_no;
    char v_stock_code[7];
    int v_stock_type;
    int v_strike_date;
    int v_strike_time;
    char v_strike_no[65];
    int v_report_date;
    char v_report_no[33];
    int v_order_date;
    int v_order_time;
    int64 v_order_id;
    int v_order_dir;
    double v_order_price;
    double v_order_qty;
    double v_strike_qty;
    double v_strike_price;
    double v_strike_amt;
    double v_all_fee;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_trade_commis;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    double v_bond_accr_intrst;
    double v_strike_bond_accr_intrst;
    int v_net_price_flag;
    int v_update_times;
    int64 v_external_no;
    char v_busi_ctrl_str[65];
    char v_co_busi_config_str[65];
    char v_co_no_rights_str[2049];
    char v_pd_no_rights_str[2049];
    char v_exch_group_no_rights_str[2049];
    char v_log_error_code[33];
    char v_log_error_info[256];


int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    strcpy(v_exch_no_str, " ");
    v_stock_code_no=0;
    strcpy(v_stock_type_str, " ");
    v_comm_id=0;
    v_comm_batch_no=0;
    v_order_batch_no=0;
    strcpy(v_order_dir_str, " ");
    v_exter_comm_flag=0;
    v_record_valid_flag=0;
    v_row_id=0;
    v_row_count=-1;
    v_sort_type=1;
    strcpy(v_combo_code, " ");
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_query_opor_no=0;
    v_init_date=0;
    v_asset_acco_no=0;
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    v_stock_acco_no=0;
    strcpy(v_stock_code, " ");
    v_stock_type=0;
    v_strike_date=0;
    v_strike_time=0;
    strcpy(v_strike_no, " ");
    v_report_date=0;
    strcpy(v_report_no, " ");
    v_order_date=0;
    v_order_time=0;
    v_order_id=0;
    v_order_dir=0;
    v_order_price=0;
    v_order_qty=0;
    v_strike_qty=0;
    v_strike_price=0;
    v_strike_amt=0;
    v_all_fee=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_trade_commis=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_bond_accr_intrst=0;
    v_strike_bond_accr_intrst=0;
    v_net_price_flag=0;
    v_update_times=1;
    v_external_no=0;
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_co_busi_config_str, " ");
    strcpy(v_co_no_rights_str, " ");
    strcpy(v_pd_no_rights_str, " ");
    strcpy(v_exch_group_no_rights_str, " ");
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_busi_opor_no = lpInBizMsg->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strncpy(v_order_oper_way, lpInBizMsg->GetString(LDBIZ_ORDER_OPER_WAY_STR),2);
    v_order_oper_way[2] = '\0';
    v_co_no = lpInBizMsg->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpInBizMsg->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    strncpy(v_exch_no_str, lpInBizMsg->GetString(LDBIZ_EXCH_NO_STR_STR),2048);
    v_exch_no_str[2048] = '\0';
    v_stock_code_no = lpInBizMsg->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strncpy(v_stock_type_str, lpInBizMsg->GetString(LDBIZ_STOCK_TYPE_STR_STR),2048);
    v_stock_type_str[2048] = '\0';
    v_comm_id = lpInBizMsg->GetInt64(LDBIZ_COMM_ID_INT64);
    v_comm_batch_no = lpInBizMsg->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
    v_order_batch_no = lpInBizMsg->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    strncpy(v_order_dir_str, lpInBizMsg->GetString(LDBIZ_ORDER_DIR_STR_STR),1024);
    v_order_dir_str[1024] = '\0';
    v_exter_comm_flag = lpInBizMsg->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_record_valid_flag = lpInBizMsg->GetInt32(LDBIZ_RECORD_VALID_FLAG_INT);
    v_row_id = lpInBizMsg->GetInt64(LDBIZ_ROW_ID_INT64);
    v_row_count = lpInBizMsg->GetInt32(LDBIZ_ROW_COUNT_INT);
    v_sort_type = lpInBizMsg->GetInt32(LDBIZ_SORT_TYPE_INT);
    strncpy(v_combo_code, lpInBizMsg->GetString(LDBIZ_COMBO_CODE_STR),32);
    v_combo_code[32] = '\0';

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;

    //公共子系统检查

    // set @业务控制串# = "111";
    strcpy(v_busi_ctrl_str,"111");
    //调用过程[事务_公共_公共接口_检查系统状态查询权限身份获取操作员权限串]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.37", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_BUSI_CTRL_STR_STR,v_busi_ctrl_str);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.37]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
    strcpy(v_co_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_CO_NO_RIGHTS_STR_STR));
    strcpy(v_pd_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_PD_NO_RIGHTS_STR_STR));
    strcpy(v_exch_group_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR));

    //调用过程[事务_交易证券_报盘_查询成交明细]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.122", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpTSCall1Req1->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_NO_STR_STR,v_exch_no_str);
    lpTSCall1Req1->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req1->SetString(LDBIZ_STOCK_TYPE_STR_STR,v_stock_type_str);
    lpTSCall1Req1->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpTSCall1Req1->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpTSCall1Req1->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_DIR_STR_STR,v_order_dir_str);
    lpTSCall1Req1->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
    lpTSCall1Req1->SetInt32(LDBIZ_RECORD_VALID_FLAG_INT,v_record_valid_flag);
    lpTSCall1Req1->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
    lpTSCall1Req1->SetInt32(LDBIZ_ROW_COUNT_INT,v_row_count);
    lpTSCall1Req1->SetInt32(LDBIZ_SORT_TYPE_INT,v_sort_type);
    lpTSCall1Req1->SetString(LDBIZ_CO_NO_RIGHTS_STR_STR,v_co_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_PD_NO_RIGHTS_STR_STR,v_pd_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR,v_exch_group_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.122]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));


    lpOutBizMsg->FillWithAnotherMsg(lpTSCall1Ans1);
END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans2)
        {
          lpTSCall1Ans2->FreeMsg();
          lpTSCall1Ans2=NULL;
        }
        lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
        if (lpTSCall1Ans2)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans2->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans2->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans2->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_查询成交明细历史
int LD_CALL_MODE fnFunc11(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_begin_date;
    int v_end_date;
    int v_busi_opor_no;
    char v_order_oper_way[3];
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    char v_exch_no_str[2049];
    int v_stock_code_no;
    char v_stock_type_str[2049];
    int64 v_comm_id;
    int v_comm_batch_no;
    int v_order_batch_no;
    char v_order_dir_str[1025];
    int v_exter_comm_flag;
    int v_record_valid_flag;
    int64 v_row_id;
    int v_row_count;
    int v_sort_type;
    char v_combo_code[33];
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_query_opor_no;
    int v_init_date;
    int v_asset_acco_no;
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    int v_stock_acco_no;
    int v_stock_type;
    int v_strike_date;
    int v_strike_time;
    char v_strike_no[65];
    int v_report_date;
    char v_report_no[33];
    int v_order_date;
    int v_order_time;
    int64 v_order_id;
    int v_order_dir;
    double v_order_price;
    double v_order_qty;
    double v_strike_qty;
    double v_strike_price;
    double v_strike_amt;
    double v_all_fee;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_trade_commis;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    double v_bond_accr_intrst;
    int v_net_price_flag;
    double v_strike_bond_accr_intrst;
    int64 v_external_no;
    int v_update_times;
    char v_busi_ctrl_str[65];
    char v_co_busi_config_str[65];
    char v_co_no_rights_str[2049];
    char v_pd_no_rights_str[2049];
    char v_exch_group_no_rights_str[2049];
    char v_log_error_code[33];
    char v_log_error_info[256];


int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_begin_date=0;
    v_end_date=0;
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    strcpy(v_exch_no_str, " ");
    v_stock_code_no=0;
    strcpy(v_stock_type_str, " ");
    v_comm_id=0;
    v_comm_batch_no=0;
    v_order_batch_no=0;
    strcpy(v_order_dir_str, " ");
    v_exter_comm_flag=0;
    v_record_valid_flag=0;
    v_row_id=0;
    v_row_count=-1;
    v_sort_type=1;
    strcpy(v_combo_code, " ");
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_query_opor_no=0;
    v_init_date=0;
    v_asset_acco_no=0;
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    v_stock_acco_no=0;
    v_stock_type=0;
    v_strike_date=0;
    v_strike_time=0;
    strcpy(v_strike_no, " ");
    v_report_date=0;
    strcpy(v_report_no, " ");
    v_order_date=0;
    v_order_time=0;
    v_order_id=0;
    v_order_dir=0;
    v_order_price=0;
    v_order_qty=0;
    v_strike_qty=0;
    v_strike_price=0;
    v_strike_amt=0;
    v_all_fee=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_trade_commis=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_bond_accr_intrst=0;
    v_net_price_flag=0;
    v_strike_bond_accr_intrst=0;
    v_external_no=0;
    v_update_times=1;
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_co_busi_config_str, " ");
    strcpy(v_co_no_rights_str, " ");
    strcpy(v_pd_no_rights_str, " ");
    strcpy(v_exch_group_no_rights_str, " ");
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_begin_date = lpInBizMsg->GetInt32(LDBIZ_BEGIN_DATE_INT);
    v_end_date = lpInBizMsg->GetInt32(LDBIZ_END_DATE_INT);
    v_busi_opor_no = lpInBizMsg->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strncpy(v_order_oper_way, lpInBizMsg->GetString(LDBIZ_ORDER_OPER_WAY_STR),2);
    v_order_oper_way[2] = '\0';
    v_co_no = lpInBizMsg->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpInBizMsg->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    strncpy(v_exch_no_str, lpInBizMsg->GetString(LDBIZ_EXCH_NO_STR_STR),2048);
    v_exch_no_str[2048] = '\0';
    v_stock_code_no = lpInBizMsg->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strncpy(v_stock_type_str, lpInBizMsg->GetString(LDBIZ_STOCK_TYPE_STR_STR),2048);
    v_stock_type_str[2048] = '\0';
    v_comm_id = lpInBizMsg->GetInt64(LDBIZ_COMM_ID_INT64);
    v_comm_batch_no = lpInBizMsg->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
    v_order_batch_no = lpInBizMsg->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    strncpy(v_order_dir_str, lpInBizMsg->GetString(LDBIZ_ORDER_DIR_STR_STR),1024);
    v_order_dir_str[1024] = '\0';
    v_exter_comm_flag = lpInBizMsg->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_record_valid_flag = lpInBizMsg->GetInt32(LDBIZ_RECORD_VALID_FLAG_INT);
    v_row_id = lpInBizMsg->GetInt64(LDBIZ_ROW_ID_INT64);
    v_row_count = lpInBizMsg->GetInt32(LDBIZ_ROW_COUNT_INT);
    v_sort_type = lpInBizMsg->GetInt32(LDBIZ_SORT_TYPE_INT);
    strncpy(v_combo_code, lpInBizMsg->GetString(LDBIZ_COMBO_CODE_STR),32);
    v_combo_code[32] = '\0';

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;

    //公共子系统检查

    // set @业务控制串# = "111";
    strcpy(v_busi_ctrl_str,"111");
    //调用过程[事务_公共_公共接口_检查系统状态查询权限身份获取操作员权限串]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.37", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_BUSI_CTRL_STR_STR,v_busi_ctrl_str);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.37]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
    strcpy(v_co_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_CO_NO_RIGHTS_STR_STR));
    strcpy(v_pd_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_PD_NO_RIGHTS_STR_STR));
    strcpy(v_exch_group_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR));

    //调用过程[事务_交易证券_报盘_查询成交明细历史]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.123", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_BEGIN_DATE_INT,v_begin_date);
    lpTSCall1Req1->SetInt32(LDBIZ_END_DATE_INT,v_end_date);
    lpTSCall1Req1->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpTSCall1Req1->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_NO_STR_STR,v_exch_no_str);
    lpTSCall1Req1->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req1->SetString(LDBIZ_STOCK_TYPE_STR_STR,v_stock_type_str);
    lpTSCall1Req1->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpTSCall1Req1->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpTSCall1Req1->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_DIR_STR_STR,v_order_dir_str);
    lpTSCall1Req1->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
    lpTSCall1Req1->SetInt32(LDBIZ_RECORD_VALID_FLAG_INT,v_record_valid_flag);
    lpTSCall1Req1->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
    lpTSCall1Req1->SetInt32(LDBIZ_ROW_COUNT_INT,v_row_count);
    lpTSCall1Req1->SetInt32(LDBIZ_SORT_TYPE_INT,v_sort_type);
    lpTSCall1Req1->SetString(LDBIZ_CO_NO_RIGHTS_STR_STR,v_co_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_PD_NO_RIGHTS_STR_STR,v_pd_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR,v_exch_group_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.123]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));


    lpOutBizMsg->FillWithAnotherMsg(lpTSCall1Ans1);
END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans2)
        {
          lpTSCall1Ans2->FreeMsg();
          lpTSCall1Ans2=NULL;
        }
        lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
        if (lpTSCall1Ans2)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans2->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans2->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans2->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_查询成交汇总
int LD_CALL_MODE fnFunc12(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_busi_opor_no;
    char v_order_oper_way[3];
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    char v_exch_no_str[2049];
    int v_stock_code_no;
    char v_stock_type_str[2049];
    int64 v_comm_id;
    int v_order_batch_no;
    char v_order_dir_str[1025];
    int v_exter_comm_flag;
    int64 v_row_id;
    int v_row_count;
    int v_sort_type;
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_init_date;
    int v_asset_acco_no;
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    int v_stock_acco_no;
    int v_stock_type;
    int v_strike_date;
    int v_report_date;
    char v_report_no[33];
    int v_order_date;
    int v_order_time;
    int64 v_order_id;
    int v_order_dir;
    double v_order_price;
    double v_order_qty;
    double v_strike_qty;
    double v_strike_amt;
    double v_all_fee;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_trade_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    double v_other_commis;
    double v_bond_accr_intrst;
    int v_net_price_flag;
    double v_strike_bond_accr_intrst;
    int v_update_times;
    char v_busi_ctrl_str[65];
    char v_co_busi_config_str[65];
    char v_co_no_rights_str[2049];
    char v_pd_no_rights_str[2049];
    char v_exch_group_no_rights_str[2049];
    char v_log_error_code[33];
    char v_log_error_info[256];


int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    strcpy(v_exch_no_str, " ");
    v_stock_code_no=0;
    strcpy(v_stock_type_str, " ");
    v_comm_id=0;
    v_order_batch_no=0;
    strcpy(v_order_dir_str, " ");
    v_exter_comm_flag=0;
    v_row_id=0;
    v_row_count=-1;
    v_sort_type=1;
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_init_date=0;
    v_asset_acco_no=0;
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    v_stock_acco_no=0;
    v_stock_type=0;
    v_strike_date=0;
    v_report_date=0;
    strcpy(v_report_no, " ");
    v_order_date=0;
    v_order_time=0;
    v_order_id=0;
    v_order_dir=0;
    v_order_price=0;
    v_order_qty=0;
    v_strike_qty=0;
    v_strike_amt=0;
    v_all_fee=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_trade_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_other_commis=0;
    v_bond_accr_intrst=0;
    v_net_price_flag=0;
    v_strike_bond_accr_intrst=0;
    v_update_times=1;
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_co_busi_config_str, " ");
    strcpy(v_co_no_rights_str, " ");
    strcpy(v_pd_no_rights_str, " ");
    strcpy(v_exch_group_no_rights_str, " ");
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_busi_opor_no = lpInBizMsg->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strncpy(v_order_oper_way, lpInBizMsg->GetString(LDBIZ_ORDER_OPER_WAY_STR),2);
    v_order_oper_way[2] = '\0';
    v_co_no = lpInBizMsg->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpInBizMsg->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    strncpy(v_exch_no_str, lpInBizMsg->GetString(LDBIZ_EXCH_NO_STR_STR),2048);
    v_exch_no_str[2048] = '\0';
    v_stock_code_no = lpInBizMsg->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strncpy(v_stock_type_str, lpInBizMsg->GetString(LDBIZ_STOCK_TYPE_STR_STR),2048);
    v_stock_type_str[2048] = '\0';
    v_comm_id = lpInBizMsg->GetInt64(LDBIZ_COMM_ID_INT64);
    v_order_batch_no = lpInBizMsg->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    strncpy(v_order_dir_str, lpInBizMsg->GetString(LDBIZ_ORDER_DIR_STR_STR),1024);
    v_order_dir_str[1024] = '\0';
    v_exter_comm_flag = lpInBizMsg->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_row_id = lpInBizMsg->GetInt64(LDBIZ_ROW_ID_INT64);
    v_row_count = lpInBizMsg->GetInt32(LDBIZ_ROW_COUNT_INT);
    v_sort_type = lpInBizMsg->GetInt32(LDBIZ_SORT_TYPE_INT);

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;

    //公共子系统检查

    // set @业务控制串# = "111";
    strcpy(v_busi_ctrl_str,"111");
    //调用过程[事务_公共_公共接口_检查系统状态查询权限身份获取操作员权限串]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.37", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_BUSI_CTRL_STR_STR,v_busi_ctrl_str);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.37]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
    strcpy(v_co_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_CO_NO_RIGHTS_STR_STR));
    strcpy(v_pd_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_PD_NO_RIGHTS_STR_STR));
    strcpy(v_exch_group_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR));

    //调用过程[事务_交易证券_报盘_查询成交汇总]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.124", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpTSCall1Req1->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_NO_STR_STR,v_exch_no_str);
    lpTSCall1Req1->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req1->SetString(LDBIZ_STOCK_TYPE_STR_STR,v_stock_type_str);
    lpTSCall1Req1->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpTSCall1Req1->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_DIR_STR_STR,v_order_dir_str);
    lpTSCall1Req1->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
    lpTSCall1Req1->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
    lpTSCall1Req1->SetInt32(LDBIZ_ROW_COUNT_INT,v_row_count);
    lpTSCall1Req1->SetInt32(LDBIZ_SORT_TYPE_INT,v_sort_type);
    lpTSCall1Req1->SetString(LDBIZ_CO_NO_RIGHTS_STR_STR,v_co_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_PD_NO_RIGHTS_STR_STR,v_pd_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR,v_exch_group_no_rights_str);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.124]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));


    lpOutBizMsg->FillWithAnotherMsg(lpTSCall1Ans1);
END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans2)
        {
          lpTSCall1Ans2->FreeMsg();
          lpTSCall1Ans2=NULL;
        }
        lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
        if (lpTSCall1Ans2)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans2->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans2->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans2->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_查询成交汇总历史
int LD_CALL_MODE fnFunc13(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_begin_date;
    int v_end_date;
    int v_busi_opor_no;
    char v_order_oper_way[3];
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    char v_exch_no_str[2049];
    int v_stock_code_no;
    char v_stock_type_str[2049];
    int64 v_comm_id;
    int v_order_batch_no;
    char v_order_dir_str[1025];
    int v_exter_comm_flag;
    int64 v_row_id;
    int v_row_count;
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_init_date;
    int v_asset_acco_no;
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    int v_stock_acco_no;
    int v_stock_type;
    int v_strike_date;
    int v_report_date;
    char v_report_no[33];
    int v_order_date;
    int v_order_time;
    int64 v_order_id;
    int v_order_dir;
    double v_order_price;
    double v_order_qty;
    double v_strike_qty;
    double v_strike_amt;
    double v_all_fee;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_trade_commis;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    double v_bond_accr_intrst;
    int v_net_price_flag;
    double v_strike_bond_accr_intrst;
    int v_update_times;
    char v_busi_ctrl_str[65];
    char v_co_busi_config_str[65];
    char v_co_no_rights_str[2049];
    char v_pd_no_rights_str[2049];
    char v_exch_group_no_rights_str[2049];
    char v_log_error_code[33];
    char v_log_error_info[256];


int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_begin_date=0;
    v_end_date=0;
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    strcpy(v_exch_no_str, " ");
    v_stock_code_no=0;
    strcpy(v_stock_type_str, " ");
    v_comm_id=0;
    v_order_batch_no=0;
    strcpy(v_order_dir_str, " ");
    v_exter_comm_flag=0;
    v_row_id=0;
    v_row_count=-1;
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_init_date=0;
    v_asset_acco_no=0;
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    v_stock_acco_no=0;
    v_stock_type=0;
    v_strike_date=0;
    v_report_date=0;
    strcpy(v_report_no, " ");
    v_order_date=0;
    v_order_time=0;
    v_order_id=0;
    v_order_dir=0;
    v_order_price=0;
    v_order_qty=0;
    v_strike_qty=0;
    v_strike_amt=0;
    v_all_fee=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_trade_commis=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_bond_accr_intrst=0;
    v_net_price_flag=0;
    v_strike_bond_accr_intrst=0;
    v_update_times=1;
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_co_busi_config_str, " ");
    strcpy(v_co_no_rights_str, " ");
    strcpy(v_pd_no_rights_str, " ");
    strcpy(v_exch_group_no_rights_str, " ");
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_begin_date = lpInBizMsg->GetInt32(LDBIZ_BEGIN_DATE_INT);
    v_end_date = lpInBizMsg->GetInt32(LDBIZ_END_DATE_INT);
    v_busi_opor_no = lpInBizMsg->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strncpy(v_order_oper_way, lpInBizMsg->GetString(LDBIZ_ORDER_OPER_WAY_STR),2);
    v_order_oper_way[2] = '\0';
    v_co_no = lpInBizMsg->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpInBizMsg->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    strncpy(v_exch_no_str, lpInBizMsg->GetString(LDBIZ_EXCH_NO_STR_STR),2048);
    v_exch_no_str[2048] = '\0';
    v_stock_code_no = lpInBizMsg->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strncpy(v_stock_type_str, lpInBizMsg->GetString(LDBIZ_STOCK_TYPE_STR_STR),2048);
    v_stock_type_str[2048] = '\0';
    v_comm_id = lpInBizMsg->GetInt64(LDBIZ_COMM_ID_INT64);
    v_order_batch_no = lpInBizMsg->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    strncpy(v_order_dir_str, lpInBizMsg->GetString(LDBIZ_ORDER_DIR_STR_STR),1024);
    v_order_dir_str[1024] = '\0';
    v_exter_comm_flag = lpInBizMsg->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_row_id = lpInBizMsg->GetInt64(LDBIZ_ROW_ID_INT64);
    v_row_count = lpInBizMsg->GetInt32(LDBIZ_ROW_COUNT_INT);

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;

    //公共子系统检查

    // set @业务控制串# = "111";
    strcpy(v_busi_ctrl_str,"111");
    //调用过程[事务_公共_公共接口_检查系统状态查询权限身份获取操作员权限串]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.37", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_BUSI_CTRL_STR_STR,v_busi_ctrl_str);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.37]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
    strcpy(v_co_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_CO_NO_RIGHTS_STR_STR));
    strcpy(v_pd_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_PD_NO_RIGHTS_STR_STR));
    strcpy(v_exch_group_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR));

    //调用过程[事务_交易证券_报盘_查询成交汇总历史]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.125", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_BEGIN_DATE_INT,v_begin_date);
    lpTSCall1Req1->SetInt32(LDBIZ_END_DATE_INT,v_end_date);
    lpTSCall1Req1->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpTSCall1Req1->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_NO_STR_STR,v_exch_no_str);
    lpTSCall1Req1->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req1->SetString(LDBIZ_STOCK_TYPE_STR_STR,v_stock_type_str);
    lpTSCall1Req1->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpTSCall1Req1->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_DIR_STR_STR,v_order_dir_str);
    lpTSCall1Req1->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
    lpTSCall1Req1->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
    lpTSCall1Req1->SetInt32(LDBIZ_ROW_COUNT_INT,v_row_count);
    lpTSCall1Req1->SetString(LDBIZ_CO_NO_RIGHTS_STR_STR,v_co_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_PD_NO_RIGHTS_STR_STR,v_pd_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR,v_exch_group_no_rights_str);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.125]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));


    lpOutBizMsg->FillWithAnotherMsg(lpTSCall1Ans1);
END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans2)
        {
          lpTSCall1Ans2->FreeMsg();
          lpTSCall1Ans2=NULL;
        }
        lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
        if (lpTSCall1Ans2)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans2->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans2->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans2->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_查询体外交易差额记录
int LD_CALL_MODE fnFunc14(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    char v_exch_no_str[2049];
    int v_stock_code_no;
    char v_order_dir_str[1025];
    int64 v_row_id;
    int v_row_count;
    int v_sort_type;
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_init_date;
    int v_asset_acco_no;
    char v_out_acco[33];
    char v_stock_acco[17];
    int v_exch_no;
    char v_stock_code[7];
    int v_order_date;
    int64 v_order_id;
    int v_strike_date;
    int64 v_strike_id;
    int v_order_dir;
    double v_occur_amt;
    double v_occur_qty;
    double v_amt_diff;
    double v_diff_qty;
    double v_deal_amt_diff;
    double v_deal_diff_qty;
    char v_deal_status[3];
    int v_update_times;
    char v_busi_ctrl_str[65];
    char v_co_busi_config_str[65];
    char v_co_no_rights_str[2049];
    char v_pd_no_rights_str[2049];
    char v_exch_group_no_rights_str[2049];
    char v_log_error_code[33];
    char v_log_error_info[256];


int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    strcpy(v_exch_no_str, " ");
    v_stock_code_no=0;
    strcpy(v_order_dir_str, " ");
    v_row_id=0;
    v_row_count=-1;
    v_sort_type=1;
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_init_date=0;
    v_asset_acco_no=0;
    strcpy(v_out_acco, " ");
    strcpy(v_stock_acco, " ");
    v_exch_no=0;
    strcpy(v_stock_code, " ");
    v_order_date=0;
    v_order_id=0;
    v_strike_date=0;
    v_strike_id=0;
    v_order_dir=0;
    v_occur_amt=0;
    v_occur_qty=0;
    v_amt_diff=0;
    v_diff_qty=0;
    v_deal_amt_diff=0;
    v_deal_diff_qty=0;
    strcpy(v_deal_status, "0");
    v_update_times=1;
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_co_busi_config_str, " ");
    strcpy(v_co_no_rights_str, " ");
    strcpy(v_pd_no_rights_str, " ");
    strcpy(v_exch_group_no_rights_str, " ");
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_co_no = lpInBizMsg->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpInBizMsg->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    strncpy(v_exch_no_str, lpInBizMsg->GetString(LDBIZ_EXCH_NO_STR_STR),2048);
    v_exch_no_str[2048] = '\0';
    v_stock_code_no = lpInBizMsg->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strncpy(v_order_dir_str, lpInBizMsg->GetString(LDBIZ_ORDER_DIR_STR_STR),1024);
    v_order_dir_str[1024] = '\0';
    v_row_id = lpInBizMsg->GetInt64(LDBIZ_ROW_ID_INT64);
    v_row_count = lpInBizMsg->GetInt32(LDBIZ_ROW_COUNT_INT);
    v_sort_type = lpInBizMsg->GetInt32(LDBIZ_SORT_TYPE_INT);

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;

    //公共子系统检查

    // set @业务控制串# = "111";
    strcpy(v_busi_ctrl_str,"111");
    //调用过程[事务_公共_公共接口_检查系统状态查询权限身份获取操作员权限串]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.37", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_BUSI_CTRL_STR_STR,v_busi_ctrl_str);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.37]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
    strcpy(v_co_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_CO_NO_RIGHTS_STR_STR));
    strcpy(v_pd_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_PD_NO_RIGHTS_STR_STR));
    strcpy(v_exch_group_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR));

    //调用过程[事务_交易证券_报盘_查询体外交易差额记录]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.126", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_NO_STR_STR,v_exch_no_str);
    lpTSCall1Req1->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_DIR_STR_STR,v_order_dir_str);
    lpTSCall1Req1->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
    lpTSCall1Req1->SetInt32(LDBIZ_ROW_COUNT_INT,v_row_count);
    lpTSCall1Req1->SetInt32(LDBIZ_SORT_TYPE_INT,v_sort_type);
    lpTSCall1Req1->SetString(LDBIZ_CO_NO_RIGHTS_STR_STR,v_co_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_PD_NO_RIGHTS_STR_STR,v_pd_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR,v_exch_group_no_rights_str);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.126]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));


    lpOutBizMsg->FillWithAnotherMsg(lpTSCall1Ans1);
END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans2)
        {
          lpTSCall1Ans2->FreeMsg();
          lpTSCall1Ans2=NULL;
        }
        lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
        if (lpTSCall1Ans2)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans2->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans2->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans2->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_查询历史体外交易差额记录
int LD_CALL_MODE fnFunc15(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_begin_date;
    int v_end_date;
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    char v_exch_no_str[2049];
    int v_stock_code_no;
    char v_order_dir_str[1025];
    int64 v_row_id;
    int v_row_count;
    int v_sort_type;
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_init_date;
    int v_asset_acco_no;
    char v_out_acco[33];
    char v_stock_acco[17];
    int v_exch_no;
    char v_stock_code[7];
    int v_order_date;
    int64 v_order_id;
    int v_strike_date;
    int64 v_strike_id;
    int v_order_dir;
    double v_occur_amt;
    double v_occur_qty;
    double v_amt_diff;
    double v_diff_qty;
    double v_deal_amt_diff;
    double v_deal_diff_qty;
    char v_deal_status[3];
    int v_update_times;
    char v_busi_ctrl_str[65];
    char v_co_busi_config_str[65];
    char v_co_no_rights_str[2049];
    char v_pd_no_rights_str[2049];
    char v_exch_group_no_rights_str[2049];
    char v_log_error_code[33];
    char v_log_error_info[256];


int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_begin_date=0;
    v_end_date=0;
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    strcpy(v_exch_no_str, " ");
    v_stock_code_no=0;
    strcpy(v_order_dir_str, " ");
    v_row_id=0;
    v_row_count=-1;
    v_sort_type=1;
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_init_date=0;
    v_asset_acco_no=0;
    strcpy(v_out_acco, " ");
    strcpy(v_stock_acco, " ");
    v_exch_no=0;
    strcpy(v_stock_code, " ");
    v_order_date=0;
    v_order_id=0;
    v_strike_date=0;
    v_strike_id=0;
    v_order_dir=0;
    v_occur_amt=0;
    v_occur_qty=0;
    v_amt_diff=0;
    v_diff_qty=0;
    v_deal_amt_diff=0;
    v_deal_diff_qty=0;
    strcpy(v_deal_status, "0");
    v_update_times=1;
    strcpy(v_busi_ctrl_str, " ");
    strcpy(v_co_busi_config_str, " ");
    strcpy(v_co_no_rights_str, " ");
    strcpy(v_pd_no_rights_str, " ");
    strcpy(v_exch_group_no_rights_str, " ");
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_begin_date = lpInBizMsg->GetInt32(LDBIZ_BEGIN_DATE_INT);
    v_end_date = lpInBizMsg->GetInt32(LDBIZ_END_DATE_INT);
    v_co_no = lpInBizMsg->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpInBizMsg->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    strncpy(v_exch_no_str, lpInBizMsg->GetString(LDBIZ_EXCH_NO_STR_STR),2048);
    v_exch_no_str[2048] = '\0';
    v_stock_code_no = lpInBizMsg->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strncpy(v_order_dir_str, lpInBizMsg->GetString(LDBIZ_ORDER_DIR_STR_STR),1024);
    v_order_dir_str[1024] = '\0';
    v_row_id = lpInBizMsg->GetInt64(LDBIZ_ROW_ID_INT64);
    v_row_count = lpInBizMsg->GetInt32(LDBIZ_ROW_COUNT_INT);
    v_sort_type = lpInBizMsg->GetInt32(LDBIZ_SORT_TYPE_INT);

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;

    //公共子系统检查

    // set @业务控制串# = "111";
    strcpy(v_busi_ctrl_str,"111");
    //调用过程[事务_公共_公共接口_检查系统状态查询权限身份获取操作员权限串]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.37", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_BUSI_CTRL_STR_STR,v_busi_ctrl_str);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.37]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));
    strcpy(v_co_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_CO_NO_RIGHTS_STR_STR));
    strcpy(v_pd_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_PD_NO_RIGHTS_STR_STR));
    strcpy(v_exch_group_no_rights_str, lpTSCall1Ans0->GetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR));

    //调用过程[事务_交易证券_报盘_查询历史体外交易差额记录]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.127", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_BEGIN_DATE_INT,v_begin_date);
    lpTSCall1Req1->SetInt32(LDBIZ_END_DATE_INT,v_end_date);
    lpTSCall1Req1->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_NO_STR_STR,v_exch_no_str);
    lpTSCall1Req1->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req1->SetString(LDBIZ_ORDER_DIR_STR_STR,v_order_dir_str);
    lpTSCall1Req1->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
    lpTSCall1Req1->SetInt32(LDBIZ_ROW_COUNT_INT,v_row_count);
    lpTSCall1Req1->SetInt32(LDBIZ_SORT_TYPE_INT,v_sort_type);
    lpTSCall1Req1->SetString(LDBIZ_CO_NO_RIGHTS_STR_STR,v_co_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_PD_NO_RIGHTS_STR_STR,v_pd_no_rights_str);
    lpTSCall1Req1->SetString(LDBIZ_EXCH_GROUP_NO_RIGHTS_STR_STR,v_exch_group_no_rights_str);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.127]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));


    lpOutBizMsg->FillWithAnotherMsg(lpTSCall1Ans1);
END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans2)
        {
          lpTSCall1Ans2->FreeMsg();
          lpTSCall1Ans2=NULL;
        }
        lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req2->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
        if (lpTSCall1Ans2)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans2->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans2->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans2->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_导入成交表
int LD_CALL_MODE fnFunc16(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    char v_stock_acco[17];
    char v_stock_code[7];
    int v_strike_date;
    int v_strike_time;
    char v_strike_no[65];
    int v_report_date;
    char v_report_no[33];
    int v_order_dir;
    double v_strike_price;
    double v_strike_qty;
    double v_strike_amt;
    char v_rsp_info[256];
    int v_strike_deal_type;
    int v_asset_acco_no;
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_init_date;
    char v_co_busi_config_str[65];
    double v_tmp_strike_qty;
    double v_tmp_strike_price;
    double v_tmp_strike_amt;
    char v_sys_config_str[65];
    char v_crncy_type[4];
    char v_exch_crncy_type[4];
    double v_buy_ref_rate;
    double v_sell_ref_rate;
    int v_stock_code_no;
    int v_stock_type;
    int v_capit_reback_days;
    int v_posi_reback_days;
    int v_trade_code_no;
    int v_target_code_no;
    int v_intrst_days;
    int v_net_price_flag;
    double v_bond_accr_intrst;
    int v_bond_rate_type;
    double v_par_value;
    double v_impawn_ratio;
    int v_repo_days;
    int v_repo_cale_days;
    int v_repo_back_date;
    int v_bond_qty_unit_set;
    int v_apply_date;
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    int v_stock_acco_no;
    int v_asset_type;
    int64 v_comm_id;
    int v_order_date;
    int v_order_time;
    int64 v_order_id;
    int v_order_batch_no;
    double v_order_price;
    double v_order_qty;
    double v_order_frozen_amt;
    char v_order_status[3];
    int v_price_type;
    int v_busi_opor_no;
    char v_order_oper_way[3];
    int64 v_rsp_id;
    int v_exter_comm_flag;
    int64 v_external_no;
    char v_combo_code[33];
    int64 v_combo_posi_id;
    int64 v_strategy_id;
    char v_contra_no[33];
    int v_asset_acco_type;
    double v_exgp_cost_amt;
    double v_exgp_intrst_cost_amt;
    double v_exgp_curr_qty;
    double v_asac_cost_amt;
    double v_asac_intrst_cost_amt;
    double v_asac_curr_qty;
    int64 v_strike_id;
    char v_target_code[7];
    int v_report_time;
    int v_comm_date;
    int v_comm_batch_no;
    int v_comm_executor;
    double v_total_strike_amt;
    double v_total_strike_qty;
    int v_cost_calc_type;
    double v_order_frozen_qty;
    double v_strike_bond_accr_intrst;
    double v_wtdraw_qty;
    int v_update_times;
    double v_trade_occur_amt;
    int v_open_posi_date;
    int v_original_order_dir;
    double v_tmp_all_fee;
    double v_tmp_trade_commis;
    double v_tmp_stamp_tax;
    double v_tmp_trans_fee;
    double v_tmp_brkage_fee;
    double v_tmp_SEC_charges;
    double v_tmp_other_fee;
    double v_tmp_other_commis;
    double v_trade_commis;
    double v_all_fee;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    double v_tmp_trade_cost_fee;
    double v_tmp_trade_system_use_fee;
    double v_tmp_trade_tax;
    double v_tmp_stock_settle_fee;
    int v_tmp_update_times;
    int v_record_valid_flag;
    double v_curr_strike_price;
    double v_curr_strike_amt;
    double v_curr_strike_qty;
    char v_wtdraw_status[3];
    char v_log_error_code[33];
    char v_log_error_info[256];


IFastMessage* lpPubMsg = NULL;
int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    strcpy(v_stock_acco, " ");
    strcpy(v_stock_code, " ");
    v_strike_date=0;
    v_strike_time=0;
    strcpy(v_strike_no, " ");
    v_report_date=0;
    strcpy(v_report_no, " ");
    v_order_dir=0;
    v_strike_price=0;
    v_strike_qty=0;
    v_strike_amt=0;
    strcpy(v_rsp_info, " ");
    v_strike_deal_type=0;
    v_asset_acco_no=0;
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_init_date=0;
    strcpy(v_co_busi_config_str, " ");
    v_tmp_strike_qty=0;
    v_tmp_strike_price=0;
    v_tmp_strike_amt=0;
    strcpy(v_sys_config_str, " ");
    strcpy(v_crncy_type, "CNY");
    strcpy(v_exch_crncy_type, "CNY");
    v_buy_ref_rate=0;
    v_sell_ref_rate=0;
    v_stock_code_no=0;
    v_stock_type=0;
    v_capit_reback_days=0;
    v_posi_reback_days=0;
    v_trade_code_no=0;
    v_target_code_no=0;
    v_intrst_days=0;
    v_net_price_flag=0;
    v_bond_accr_intrst=0;
    v_bond_rate_type=0;
    v_par_value=0;
    v_impawn_ratio=0;
    v_repo_days=0;
    v_repo_cale_days=0;
    v_repo_back_date=0;
    v_bond_qty_unit_set=0;
    v_apply_date=0;
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    v_stock_acco_no=0;
    v_asset_type=0;
    v_comm_id=0;
    v_order_date=0;
    v_order_time=0;
    v_order_id=0;
    v_order_batch_no=0;
    v_order_price=0;
    v_order_qty=0;
    v_order_frozen_amt=0;
    strcpy(v_order_status, "0");
    v_price_type=0;
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    v_rsp_id=0;
    v_exter_comm_flag=0;
    v_external_no=0;
    strcpy(v_combo_code, " ");
    v_combo_posi_id=0;
    v_strategy_id=0;
    strcpy(v_contra_no, " ");
    v_asset_acco_type=0;
    v_exgp_cost_amt=0;
    v_exgp_intrst_cost_amt=0;
    v_exgp_curr_qty=0;
    v_asac_cost_amt=0;
    v_asac_intrst_cost_amt=0;
    v_asac_curr_qty=0;
    v_strike_id=0;
    strcpy(v_target_code, " ");
    v_report_time=0;
    v_comm_date=0;
    v_comm_batch_no=0;
    v_comm_executor=0;
    v_total_strike_amt=0;
    v_total_strike_qty=0;
    v_cost_calc_type=0;
    v_order_frozen_qty=0;
    v_strike_bond_accr_intrst=0;
    v_wtdraw_qty=0;
    v_update_times=1;
    v_trade_occur_amt=0;
    v_open_posi_date=0;
    v_original_order_dir=0;
    v_tmp_all_fee=0;
    v_tmp_trade_commis=0;
    v_tmp_stamp_tax=0;
    v_tmp_trans_fee=0;
    v_tmp_brkage_fee=0;
    v_tmp_SEC_charges=0;
    v_tmp_other_fee=0;
    v_tmp_other_commis=0;
    v_trade_commis=0;
    v_all_fee=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_tmp_trade_cost_fee=0;
    v_tmp_trade_system_use_fee=0;
    v_tmp_trade_tax=0;
    v_tmp_stock_settle_fee=0;
    v_tmp_update_times=1;
    v_record_valid_flag=0;
    v_curr_strike_price=0;
    v_curr_strike_amt=0;
    v_curr_strike_qty=0;
    strcpy(v_wtdraw_status, "0");
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_pass_no = lpInBizMsg->GetInt32(LDBIZ_PASS_NO_INT);
    strncpy(v_out_acco, lpInBizMsg->GetString(LDBIZ_OUT_ACCO_STR),32);
    v_out_acco[32] = '\0';
    v_exch_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_NO_INT);
    strncpy(v_stock_acco, lpInBizMsg->GetString(LDBIZ_STOCK_ACCO_STR),16);
    v_stock_acco[16] = '\0';
    strncpy(v_stock_code, lpInBizMsg->GetString(LDBIZ_STOCK_CODE_STR),6);
    v_stock_code[6] = '\0';
    v_strike_date = lpInBizMsg->GetInt32(LDBIZ_STRIKE_DATE_INT);
    v_strike_time = lpInBizMsg->GetInt32(LDBIZ_STRIKE_TIME_INT);
    strncpy(v_strike_no, lpInBizMsg->GetString(LDBIZ_STRIKE_NO_STR),64);
    v_strike_no[64] = '\0';
    v_report_date = lpInBizMsg->GetInt32(LDBIZ_REPORT_DATE_INT);
    strncpy(v_report_no, lpInBizMsg->GetString(LDBIZ_REPORT_NO_STR),32);
    v_report_no[32] = '\0';
    v_order_dir = lpInBizMsg->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_strike_price = lpInBizMsg->GetDouble(LDBIZ_STRIKE_PRICE_FLOAT);
    v_strike_qty = lpInBizMsg->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_amt = lpInBizMsg->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    strncpy(v_rsp_info, lpInBizMsg->GetString(LDBIZ_RSP_INFO_STR),255);
    v_rsp_info[255] = '\0';
    v_strike_deal_type = lpInBizMsg->GetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT);
    v_asset_acco_no = lpInBizMsg->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;
    IFastMessage* lpTSCall1Req3 = NULL;
    IFastMessage* lpTSCall1Ans3 = NULL;
    IFastMessage* lpTSCall1Req4 = NULL;
    IFastMessage* lpTSCall1Ans4 = NULL;
    IFastMessage* lpTSCall1Req5 = NULL;
    IFastMessage* lpTSCall1Ans5 = NULL;
    IFastMessage* lpTSCall1Req6 = NULL;
    IFastMessage* lpTSCall1Ans6 = NULL;
    IFastMessage* lpTSCall1Req7 = NULL;
    IFastMessage* lpTSCall1Ans7 = NULL;
    IFastMessage* lpTSCall1Req8 = NULL;
    IFastMessage* lpTSCall1Ans8 = NULL;
    IFastMessage* lpTSCall1Req9 = NULL;
    IFastMessage* lpTSCall1Ans9 = NULL;

    //调用过程[事务_公共_公共接口_检查系统状态权限身份]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.1", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.1]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));


    // set @临时_成交数量# = @成交数量#;
    v_tmp_strike_qty = v_strike_qty;

    // set @临时_成交价格# = @成交价格#;
    v_tmp_strike_price = v_strike_price;

    // set @临时_成交金额# = @成交金额#;
    v_tmp_strike_amt = v_strike_amt;
    //质押操作不在这里处理成交

    // [检查报错返回][@订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》][754][@订单方向#]
    if (v_order_dir == 21 || v_order_dir == 22)
    {
        strcpy(v_error_code, "tdsecuL.5.128.754");
        snprintf(v_error_info, sizeof(v_error_info), "%s%d","订单方向=",v_order_dir);
        iRet = -1;
        goto END;
    }


    // if @成交处理方式# = 0 then
    if (v_strike_deal_type == 0)
    {

      // set @成交处理方式# = 《成交处理方式-分笔》;
      v_strike_deal_type = 1;
    // end if;
    }


    // if (@通道编号# = 0 or @外部账号# = " ") and @资产账户编号# <> 0 then
    if ((v_pass_no == 0 || strcmp(v_out_acco , " ")==0) && v_asset_acco_no != 0)
    {
        //调用过程[事务_产品_公共接口_资产账户编号获取外部账号]
        //组织事务请求
        if(lpTSCall1Ans1)
        {
          lpTSCall1Ans1->FreeMsg();
          lpTSCall1Ans1=NULL;
        }
        lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("prodT.6.6", 0);
        lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req1->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
        if(!lpTSCall1Ans1)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.6.6]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        v_pass_no = lpTSCall1Ans1->GetInt32(LDBIZ_PASS_NO_INT);
        strcpy(v_out_acco, lpTSCall1Ans1->GetString(LDBIZ_OUT_ACCO_STR));

    // end if;
    }

    //公共子系统检查，这里需要增加输出
    //调用过程[事务_公共_交易接口_检查成交回报业务控制]
    //组织事务请求
    if(lpTSCall1Ans2)
    {
      lpTSCall1Ans2->FreeMsg();
      lpTSCall1Ans2=NULL;
    }
    lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.25.32", 0);
    lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req2->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req2->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req2->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req2->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
    if(!lpTSCall1Ans2)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.32]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans2->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans2->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_sys_config_str, lpTSCall1Ans2->GetString(LDBIZ_SYS_CONFIG_STR_STR));
    strcpy(v_crncy_type, lpTSCall1Ans2->GetString(LDBIZ_CRNCY_TYPE_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans2->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_buy_ref_rate = lpTSCall1Ans2->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
    v_sell_ref_rate = lpTSCall1Ans2->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
    v_stock_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_capit_reback_days = lpTSCall1Ans2->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
    v_posi_reback_days = lpTSCall1Ans2->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);
    v_trade_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_intrst_days = lpTSCall1Ans2->GetInt32(LDBIZ_INTRST_DAYS_INT);
    v_net_price_flag = lpTSCall1Ans2->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_bond_accr_intrst = lpTSCall1Ans2->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans2->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_par_value = lpTSCall1Ans2->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans2->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_repo_days = lpTSCall1Ans2->GetInt32(LDBIZ_REPO_DAYS_INT);
    v_repo_cale_days = lpTSCall1Ans2->GetInt32(LDBIZ_REPO_CALE_DAYS_INT);
    v_repo_back_date = lpTSCall1Ans2->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
    v_bond_qty_unit_set = lpTSCall1Ans2->GetInt32(LDBIZ_BOND_QTY_UNIT_SET_INT);
    v_apply_date = lpTSCall1Ans2->GetInt32(LDBIZ_APPLY_DATE_INT);


    // [检查报错返回][@申购日期# = @成交日期#][753][@证券代码#]
    if (v_apply_date == v_strike_date)
    {
        strcpy(v_error_code, "tdsecuL.5.128.753");
        snprintf(v_error_info, sizeof(v_error_info), "%s%s","证券代码=",v_stock_code);
        iRet = -1;
        goto END;
    }

    //获取原订单信息，
    //调用过程[事务_交易证券_报盘_导入成交获取订单信息]
    //组织事务请求
    if(lpTSCall1Ans3)
    {
      lpTSCall1Ans3->FreeMsg();
      lpTSCall1Ans3=NULL;
    }
    lpTSCall1Req3=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.130", 0);
    lpTSCall1Req3->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req3->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req3->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req3->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req3->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req3->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req3->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req3->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req3->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req3->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req3->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpTSCall1Req3->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req3->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req3->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpTSCall1Req3->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpTSCall1Req3->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpTSCall1Req3->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpTSCall1Req3->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req3->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpTSCall1Req3->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpTSCall1Req3->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpTSCall1Req3->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
    lpTSCall1Req3->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    glpTSSubcallSerives->SubCall(lpTSCall1Req3, &lpTSCall1Ans3, 5000);
    if(!lpTSCall1Ans3)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.130]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans3->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
    v_co_no = lpTSCall1Ans3->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpTSCall1Ans3->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans3->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans3->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    v_stock_acco_no = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    v_stock_code_no = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans3->GetInt32(LDBIZ_ASSET_TYPE_INT);
    v_comm_id = lpTSCall1Ans3->GetInt64(LDBIZ_COMM_ID_INT64);
    v_order_date = lpTSCall1Ans3->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_time = lpTSCall1Ans3->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_order_id = lpTSCall1Ans3->GetInt64(LDBIZ_ORDER_ID_INT64);
    v_order_batch_no = lpTSCall1Ans3->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    v_order_price = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    v_order_frozen_amt = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans3->GetString(LDBIZ_ORDER_STATUS_STR));
    v_price_type = lpTSCall1Ans3->GetInt32(LDBIZ_PRICE_TYPE_INT);
    v_busi_opor_no = lpTSCall1Ans3->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strcpy(v_order_oper_way, lpTSCall1Ans3->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    v_rsp_id = lpTSCall1Ans3->GetInt64(LDBIZ_RSP_ID_INT64);
    v_exter_comm_flag = lpTSCall1Ans3->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_external_no = lpTSCall1Ans3->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
    strcpy(v_combo_code, lpTSCall1Ans3->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans3->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    v_strategy_id = lpTSCall1Ans3->GetInt64(LDBIZ_STRATEGY_ID_INT64);
    strcpy(v_contra_no, lpTSCall1Ans3->GetString(LDBIZ_CONTRA_NO_STR));
    v_asset_acco_type = lpTSCall1Ans3->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);

    //获取成本，利息等
    //调用过程[事务_产品证券_交易接口_获取成交回报证券持仓成本]
    //组织事务请求
    if(lpTSCall1Ans4)
    {
      lpTSCall1Ans4->FreeMsg();
      lpTSCall1Ans4=NULL;
    }
    lpTSCall1Req4=glpFastMsgFactory->CreateFastMessage("pdsecuT.6.3", 0);
    lpTSCall1Req4->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req4->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req4->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req4->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req4->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req4->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req4->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req4->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req4->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    glpTSSubcallSerives->SubCall(lpTSCall1Req4, &lpTSCall1Ans4, 5000);
    if(!lpTSCall1Ans4)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pdsecuT.6.3]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans4->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
    v_exgp_cost_amt = lpTSCall1Ans4->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
    v_exgp_intrst_cost_amt = lpTSCall1Ans4->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
    v_exgp_curr_qty = lpTSCall1Ans4->GetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT);
    v_asac_cost_amt = lpTSCall1Ans4->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
    v_asac_intrst_cost_amt = lpTSCall1Ans4->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
    v_asac_curr_qty = lpTSCall1Ans4->GetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT);

    //回购类操作和债券买卖的自己计算成交金额

    // if @订单方向# = 《订单方向-融券回购》 or @订单方向# = 《订单方向-融资回购》 then
    if (v_order_dir == 4 || v_order_dir == 3)
    {

      // set @成交金额# = @票面面值# * @成交数量#;
      v_strike_amt = v_par_value * v_strike_qty;

    }
    // elseif (@订单方向# = 《订单方向-买入》 or @订单方向# = 《订单方向-卖出》 ) and @证券类型# > 20 and @证券类型# < 50 then
    else if ((v_order_dir == 1 || v_order_dir == 2 ) && v_stock_type > 20 && v_stock_type < 50)
    {

      // set @成交金额# = @成交价格# * @成交数量#;
      v_strike_amt = v_strike_price * v_strike_qty;
    // end if;
    }

    //处理成交回报，不处理费用

    // if @成交处理方式# = 《成交处理方式-分笔》 then
    if (v_strike_deal_type == 1)
    {
        //调用过程[事务_交易证券_报盘_导入成交回报]
        //组织事务请求
        if(lpTSCall1Ans5)
        {
          lpTSCall1Ans5->FreeMsg();
          lpTSCall1Ans5=NULL;
        }
        lpTSCall1Req5=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.128", 0);
        lpTSCall1Req5->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req5->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req5->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req5->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req5->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req5->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req5->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req5->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req5->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req5->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req5->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpTSCall1Req5->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req5->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
        lpTSCall1Req5->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpTSCall1Req5->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
        lpTSCall1Req5->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpTSCall1Req5->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpTSCall1Req5->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpTSCall1Req5->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
        lpTSCall1Req5->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
        lpTSCall1Req5->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
        lpTSCall1Req5->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req5->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req5->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpTSCall1Req5->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpTSCall1Req5->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        lpTSCall1Req5->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
        lpTSCall1Req5->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
        lpTSCall1Req5->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
        lpTSCall1Req5->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
        lpTSCall1Req5->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
        lpTSCall1Req5->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
        lpTSCall1Req5->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpTSCall1Req5->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpTSCall1Req5->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
        lpTSCall1Req5->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpTSCall1Req5->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpTSCall1Req5->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
        lpTSCall1Req5->SetInt64(LDBIZ_RSP_ID_INT64,v_rsp_id);
        lpTSCall1Req5->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req5->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
        lpTSCall1Req5->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
        lpTSCall1Req5->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
        lpTSCall1Req5->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpTSCall1Req5->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        lpTSCall1Req5->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req5, &lpTSCall1Ans5, 5000);
        if(!lpTSCall1Ans5)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.128]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans5->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
        v_strike_id = lpTSCall1Ans5->GetInt64(LDBIZ_STRIKE_ID_INT64);
        v_co_no = lpTSCall1Ans5->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans5->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans5->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_stock_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        strcpy(v_target_code, lpTSCall1Ans5->GetString(LDBIZ_TARGET_CODE_STR));
        v_order_date = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_DATE_INT);
        v_order_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
        v_report_time = lpTSCall1Ans5->GetInt32(LDBIZ_REPORT_TIME_INT);
        v_comm_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_id = lpTSCall1Ans5->GetInt64(LDBIZ_COMM_ID_INT64);
        v_comm_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_executor = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_external_no = lpTSCall1Ans5->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
        v_busi_opor_no = lpTSCall1Ans5->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
        strcpy(v_order_oper_way, lpTSCall1Ans5->GetString(LDBIZ_ORDER_OPER_WAY_STR));
        v_total_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_TOTAL_STRIKE_AMT_FLOAT);
        v_total_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_TOTAL_STRIKE_QTY_FLOAT);
        v_cost_calc_type = lpTSCall1Ans5->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
        v_order_frozen_amt = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
        v_order_frozen_qty = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
        v_strike_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
        v_wtdraw_qty = lpTSCall1Ans5->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
        strcpy(v_order_status, lpTSCall1Ans5->GetString(LDBIZ_ORDER_STATUS_STR));
        v_update_times = lpTSCall1Ans5->GetInt32(LDBIZ_UPDATE_TIMES_INT);
        v_trade_occur_amt = lpTSCall1Ans5->GetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT);
        v_open_posi_date = lpTSCall1Ans5->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
        v_original_order_dir = lpTSCall1Ans5->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);


        // set @成交金额# = @总成交金额# - @临时_成交金额#;
        v_strike_amt = v_total_strike_amt - v_tmp_strike_amt;

        // set @成交数量# = @总成交数量# - @临时_成交数量#;
        v_strike_qty = v_total_strike_qty - v_tmp_strike_qty;
    // end if;
    }

    //处理成交回报后，再处理费用，以避免并发时导致的费用计算所获取的成交数量不一致
    //计算原费用

    // set @临时_全部费用# = 0;
    v_tmp_all_fee = 0;

    // set @临时_交易佣金# = 0;
    v_tmp_trade_commis = 0;

    // set @临时_印花税# = 0;
    v_tmp_stamp_tax = 0;

    // set @临时_过户费# = 0;
    v_tmp_trans_fee = 0;

    // set @临时_经手费# = 0;
    v_tmp_brkage_fee = 0;

    // set @临时_证管费# = 0;
    v_tmp_SEC_charges = 0;

    // set @临时_其他费用# = 0;
    v_tmp_other_fee = 0;

    // set @临时_其他佣金# = 0;
    v_tmp_other_commis = 0;

    // if @成交数量# > 0 then
    if (v_strike_qty > 0)
    {

        // set @成交价格# = @成交金额# / @成交数量#;
        v_strike_price = v_strike_amt / v_strike_qty;
        //调用过程[事务_公共_公共接口_计算证券成交费用]
        //组织事务请求
        if(lpTSCall1Ans6)
        {
          lpTSCall1Ans6->FreeMsg();
          lpTSCall1Ans6=NULL;
        }
        lpTSCall1Req6=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
        lpTSCall1Req6->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req6->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req6->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req6->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req6->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req6->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req6->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req6->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req6->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req6->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req6->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpTSCall1Req6->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req6->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpTSCall1Req6->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req6->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpTSCall1Req6->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
        lpTSCall1Req6->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpTSCall1Req6->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpTSCall1Req6->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        glpTSSubcallSerives->SubCall(lpTSCall1Req6, &lpTSCall1Ans6, 5000);
        if(!lpTSCall1Ans6)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans6->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
        v_trade_commis = lpTSCall1Ans6->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
        v_all_fee = lpTSCall1Ans6->GetDouble(LDBIZ_ALL_FEE_FLOAT);
        v_stamp_tax = lpTSCall1Ans6->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
        v_trans_fee = lpTSCall1Ans6->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
        v_brkage_fee = lpTSCall1Ans6->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
        v_SEC_charges = lpTSCall1Ans6->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
        v_other_fee = lpTSCall1Ans6->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
        v_other_commis = lpTSCall1Ans6->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
        v_trade_tax = lpTSCall1Ans6->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
        v_trade_cost_fee = lpTSCall1Ans6->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
        v_trade_system_use_fee = lpTSCall1Ans6->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
        v_stock_settle_fee = lpTSCall1Ans6->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);


        // set @临时_全部费用# = @全部费用#;
        v_tmp_all_fee = v_all_fee;

        // set @临时_交易佣金# = @交易佣金#;
        v_tmp_trade_commis = v_trade_commis;

        // set @临时_印花税# = @印花税#;
        v_tmp_stamp_tax = v_stamp_tax;

        // set @临时_过户费# = @过户费#;
        v_tmp_trans_fee = v_trans_fee;

        // set @临时_经手费# = @经手费#;
        v_tmp_brkage_fee = v_brkage_fee;

        // set @临时_证管费# = @证管费#;
        v_tmp_SEC_charges = v_SEC_charges;

        // set @临时_其他费用# = @其他费用#;
        v_tmp_other_fee = v_other_fee;

        // set @临时_其他佣金# = @其他佣金#;
        v_tmp_other_commis = v_other_commis;

        // set @临时_交易费# = @交易费#;
        v_tmp_trade_cost_fee = v_trade_cost_fee;

        // set @临时_交易系统使用费# = @交易系统使用费#;
        v_tmp_trade_system_use_fee = v_trade_system_use_fee;

        // set @临时_交易征费# = @交易征费#;
        v_tmp_trade_tax = v_trade_tax;

        // set @临时_股份交收费# = @股份交收费#;
        v_tmp_stock_settle_fee = v_stock_settle_fee;
    // end if;
    }

    //计算新费用

    // set @成交价格# = @总成交金额#/ @总成交数量#;
    v_strike_price = v_total_strike_amt/ v_total_strike_qty;

    // set @成交数量# = @总成交数量#;
    v_strike_qty = v_total_strike_qty;
    //调用过程[事务_公共_公共接口_计算证券成交费用]
    //组织事务请求
    if(lpTSCall1Ans7)
    {
      lpTSCall1Ans7->FreeMsg();
      lpTSCall1Ans7=NULL;
    }
    lpTSCall1Req7=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
    lpTSCall1Req7->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req7->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req7->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req7->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req7->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req7->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req7->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req7->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req7->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req7->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req7->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req7->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req7->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req7->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req7->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpTSCall1Req7->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpTSCall1Req7->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpTSCall1Req7->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpTSCall1Req7->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpTSCall1Req7->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpTSCall1Req7->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    glpTSSubcallSerives->SubCall(lpTSCall1Req7, &lpTSCall1Ans7, 5000);
    if(!lpTSCall1Ans7)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans7->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
    v_trade_commis = lpTSCall1Ans7->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
    v_all_fee = lpTSCall1Ans7->GetDouble(LDBIZ_ALL_FEE_FLOAT);
    v_stamp_tax = lpTSCall1Ans7->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
    v_trans_fee = lpTSCall1Ans7->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
    v_brkage_fee = lpTSCall1Ans7->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
    v_SEC_charges = lpTSCall1Ans7->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
    v_other_fee = lpTSCall1Ans7->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
    v_other_commis = lpTSCall1Ans7->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
    v_trade_tax = lpTSCall1Ans7->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
    v_trade_cost_fee = lpTSCall1Ans7->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
    v_trade_system_use_fee = lpTSCall1Ans7->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
    v_stock_settle_fee = lpTSCall1Ans7->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);

    //计算费用差
    //第一笔或者非港股通业务，【临时_交易系统使用费】会为0，第一笔之后的港股通业务，【临时_交易系统使用费】会大于0

    // if @临时_交易系统使用费# > 0 then
    if (v_tmp_trade_system_use_fee > 0)
    {

        // set @全部费用# = @全部费用# - @临时_全部费用# + @临时_交易系统使用费#;
        v_all_fee = v_all_fee - v_tmp_all_fee + v_tmp_trade_system_use_fee;
        //第一笔取自【交易系统使用费】，其余取自【临时_交易系统使用费】

        // set @交易系统使用费# = @临时_交易系统使用费#;
        v_trade_system_use_fee = v_tmp_trade_system_use_fee;
    }
    // else
    else
    {


        // set @全部费用# = @全部费用# - @临时_全部费用#;
        v_all_fee = v_all_fee - v_tmp_all_fee;
    // end if;
    }


    // set @交易佣金# = @交易佣金# - @临时_交易佣金#;
    v_trade_commis = v_trade_commis - v_tmp_trade_commis;

    // set @印花税# = @印花税# - @临时_印花税#;
    v_stamp_tax = v_stamp_tax - v_tmp_stamp_tax;

    // set @过户费# = @过户费# - @临时_过户费#;
    v_trans_fee = v_trans_fee - v_tmp_trans_fee;

    // set @经手费# = @经手费# - @临时_经手费#;
    v_brkage_fee = v_brkage_fee - v_tmp_brkage_fee;

    // set @证管费# = @证管费# - @临时_证管费#;
    v_SEC_charges = v_SEC_charges - v_tmp_SEC_charges;

    // set @其他费用# = @其他费用# - @临时_其他费用#;
    v_other_fee = v_other_fee - v_tmp_other_fee;

    // set @其他佣金# = @其他佣金# - @临时_其他佣金#;
    v_other_commis = v_other_commis - v_tmp_other_commis;

    // set @交易费# = @交易费# - @临时_交易费#;
    v_trade_cost_fee = v_trade_cost_fee - v_tmp_trade_cost_fee;

    // set @交易征费# = @交易征费# - @临时_交易征费#;
    v_trade_tax = v_trade_tax - v_tmp_trade_tax;

    // set @股份交收费# = @股份交收费# - @临时_股份交收费#;
    v_stock_settle_fee = v_stock_settle_fee - v_tmp_stock_settle_fee;
    //费用处理

    // set @成交价格# = @临时_成交价格#;
    v_strike_price = v_tmp_strike_price;

    // set @成交金额# = @临时_成交金额#;
    v_strike_amt = v_tmp_strike_amt;

    // set @成交数量# = @临时_成交数量#;
    v_strike_qty = v_tmp_strike_qty;
    //调用过程[事务_交易证券_报盘_导入成交回报费用]
    //组织事务请求
    if(lpTSCall1Ans8)
    {
      lpTSCall1Ans8->FreeMsg();
      lpTSCall1Ans8=NULL;
    }
    lpTSCall1Req8=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.129", 0);
    lpTSCall1Req8->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req8->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req8->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req8->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req8->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req8->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req8->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req8->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req8->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req8->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req8->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req8->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req8->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req8->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
    lpTSCall1Req8->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpTSCall1Req8->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req8->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req8->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
    lpTSCall1Req8->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpTSCall1Req8->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req8->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req8->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
    lpTSCall1Req8->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
    lpTSCall1Req8->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpTSCall1Req8->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpTSCall1Req8->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpTSCall1Req8->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req8->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpTSCall1Req8->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpTSCall1Req8->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpTSCall1Req8->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpTSCall1Req8->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpTSCall1Req8->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req8->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpTSCall1Req8->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpTSCall1Req8->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpTSCall1Req8->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
    lpTSCall1Req8->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
    lpTSCall1Req8->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
    lpTSCall1Req8->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
    lpTSCall1Req8->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
    lpTSCall1Req8->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
    lpTSCall1Req8->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
    lpTSCall1Req8->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
    lpTSCall1Req8->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
    lpTSCall1Req8->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
    lpTSCall1Req8->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
    lpTSCall1Req8->SetString(LDBIZ_TARGET_CODE_STR,v_target_code);
    lpTSCall1Req8->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpTSCall1Req8->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpTSCall1Req8->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpTSCall1Req8->SetInt32(LDBIZ_INTRST_DAYS_INT,v_intrst_days);
    lpTSCall1Req8->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpTSCall1Req8->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpTSCall1Req8->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
    lpTSCall1Req8->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
    lpTSCall1Req8->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
    lpTSCall1Req8->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
    lpTSCall1Req8->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
    lpTSCall1Req8->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
    lpTSCall1Req8->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpTSCall1Req8->SetInt32(LDBIZ_COST_CALC_TYPE_INT,v_cost_calc_type);
    lpTSCall1Req8->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
    lpTSCall1Req8->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
    lpTSCall1Req8->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
    lpTSCall1Req8->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
    lpTSCall1Req8->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
    lpTSCall1Req8->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
    lpTSCall1Req8->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
    lpTSCall1Req8->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
    lpTSCall1Req8->SetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT,v_trade_occur_amt);
    lpTSCall1Req8->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpTSCall1Req8->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
    glpTSSubcallSerives->SubCall(lpTSCall1Req8, &lpTSCall1Ans8, 5000);
    if(!lpTSCall1Ans8)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.129]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans8->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));


    // set @组合代码# = " ";
    strcpy(v_combo_code," ");

    // set @操作员编号# =@业务操作员编号#;
    v_opor_no =v_busi_opor_no;

    // set @临时_更新次数# = @更新次数#;
    v_tmp_update_times = v_update_times;

    // set @更新次数# = 1;
    v_update_times = 1;

    // set @记录有效标志# =《记录有效标志-有效》;
    v_record_valid_flag =1;

    // [主动推送][secu.rptstrike][证券主推_报盘_成交主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.33", 0);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpPubMsg->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpPubMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
    lpPubMsg->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
    lpPubMsg->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
    lpPubMsg->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
    lpPubMsg->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
    lpPubMsg->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
    lpPubMsg->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
    lpPubMsg->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
    lpPubMsg->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
    lpPubMsg->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
    lpPubMsg->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
    lpPubMsg->SetInt32(LDBIZ_RECORD_VALID_FLAG_INT,v_record_valid_flag);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.rptstrike", lpPubMsg);


    // set @成交金额# = @总成交金额#;
    v_strike_amt = v_total_strike_amt;

    // set @成交数量# = @总成交数量#;
    v_strike_qty = v_total_strike_qty;

    // set @更新次数# = @临时_更新次数#;
    v_update_times = v_tmp_update_times;

    // set @当笔成交价格# = @临时_成交价格#;
    v_curr_strike_price = v_tmp_strike_price;

    // set @当笔成交金额# = @临时_成交金额#;
    v_curr_strike_amt = v_tmp_strike_amt;

    // set @当笔成交数量# = @临时_成交数量#;
    v_curr_strike_qty = v_tmp_strike_qty;

    // set @撤单状态# = "0";
    strcpy(v_wtdraw_status,"0");

    // [主动推送][secu.order][证券主推_订单_订单主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
    lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
    lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans9)
        {
          lpTSCall1Ans9->FreeMsg();
          lpTSCall1Ans9=NULL;
        }
        lpTSCall1Req9=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req9->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req9->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req9->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req9->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req9->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req9->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req9->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req9->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req9->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req9->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req9, &lpTSCall1Ans9, 5000);
        if (lpTSCall1Ans9)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans9->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans9->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans9->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    if(lpTSCall1Ans3)
        lpTSCall1Ans3->FreeMsg();
    if(lpTSCall1Ans4)
        lpTSCall1Ans4->FreeMsg();
    if(lpTSCall1Ans5)
        lpTSCall1Ans5->FreeMsg();
    if(lpTSCall1Ans6)
        lpTSCall1Ans6->FreeMsg();
    if(lpTSCall1Ans7)
        lpTSCall1Ans7->FreeMsg();
    if(lpTSCall1Ans8)
        lpTSCall1Ans8->FreeMsg();
    if(lpTSCall1Ans9)
        lpTSCall1Ans9->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_处理融资融券成交回报
int LD_CALL_MODE fnFunc17(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    char v_stock_acco[17];
    char v_stock_code[7];
    int v_report_date;
    char v_report_no[33];
    int v_strike_date;
    int v_strike_time;
    char v_strike_no[65];
    int v_order_dir;
    double v_strike_price;
    double v_strike_qty;
    double v_strike_amt;
    char v_rsp_info[256];
    int v_strike_deal_type;
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int64 v_order_id;
    int v_init_date;
    char v_co_busi_config_str[65];
    double v_tmp_strike_amt;
    double v_tmp_strike_qty;
    double v_tmp_strike_price;
    int v_mach_time;
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    int v_asset_acco_no;
    char v_original_stock_acco[17];
    int v_stock_acco_no;
    char v_original_stock_code[7];
    int v_stock_code_no;
    int v_stock_type;
    int v_asset_type;
    int64 v_comm_id;
    int v_order_date;
    int v_order_time;
    int v_order_batch_no;
    double v_order_price;
    double v_order_qty;
    int v_original_order_dir;
    double v_order_frozen_amt;
    char v_order_status[3];
    int v_price_type;
    int v_busi_opor_no;
    char v_order_oper_way[3];
    int64 v_rsp_id;
    int v_exter_comm_flag;
    int64 v_external_no;
    char v_combo_code[33];
    int64 v_combo_posi_id;
    int64 v_strategy_id;
    char v_contra_no[33];
    int v_asset_acco_type;
    int v_exist_debt_flag;
    char v_sys_config_str[65];
    char v_crncy_type[4];
    char v_exch_crncy_type[4];
    double v_buy_ref_rate;
    double v_sell_ref_rate;
    int v_capit_reback_days;
    int v_posi_reback_days;
    int v_trade_code_no;
    int v_target_code_no;
    int v_intrst_days;
    int v_net_price_flag;
    double v_bond_accr_intrst;
    int v_bond_rate_type;
    double v_par_value;
    double v_impawn_ratio;
    int v_repo_days;
    int v_repo_cale_days;
    int v_repo_back_date;
    int v_bond_qty_unit_set;
    int v_apply_date;
    double v_exgp_cost_amt;
    double v_exgp_intrst_cost_amt;
    double v_exgp_curr_qty;
    double v_asac_cost_amt;
    double v_asac_intrst_cost_amt;
    double v_asac_curr_qty;
    double v_exgp_avail_amt;
    double v_asac_avail_amt;
    double v_asac_T_hk_buy_total_amt;
    double v_asac_T_hk_sell_total_amt;
    double v_asac_T1_hk_buy_total_amt;
    double v_asac_T1_hk_sell_total_amt;
    double v_exgp_T_hk_buy_total_amt;
    double v_exgp_T_hk_sell_total_amt;
    double v_exgp_T1_hk_buy_total_amt;
    double v_exgp_T1_hk_sell_total_amt;
    double v_exgp_avail_qty;
    double v_exgp_target_code_avail_qty;
    double v_exgp_trade_code_avail_qty;
    double v_asac_avail_qty;
    double v_asac_target_code_avail_qty;
    double v_asac_trade_code_avail_qty;
    double v_exgp_loan_sell_amt;
    double v_asac_loan_sell_amt;
    double v_exgp_debt_loan_sell_strike_qty;
    double v_exgp_debt_fina_buy_strike_amt;
    int v_record_count;
    int v_fina_return_type;
    int v_sell_auto_back_debt;
    double v_total_strike_amt;
    double v_total_strike_qty;
    int64 v_strike_id;
    int v_report_time;
    int v_comm_date;
    int v_comm_batch_no;
    int v_comm_executor;
    char v_target_code[7];
    double v_order_frozen_qty;
    double v_strike_bond_accr_intrst;
    double v_wtdraw_qty;
    int v_cost_calc_type;
    int v_update_times;
    double v_strike_occur_amt;
    double v_strike_occur_qty;
    double v_trade_occur_amt;
    double v_trade_occur_qty;
    int v_open_posi_date;
    char v_detail_posi_id_str[1025];
    char v_stock_code_no_str[4097];
    double v_curr_strike_amt;
    double v_curr_strike_qty;
    int v_tmp_update_times;
    double v_tmp_all_fee;
    double v_tmp_trade_commis;
    double v_tmp_stamp_tax;
    double v_tmp_trans_fee;
    double v_tmp_brkage_fee;
    double v_tmp_SEC_charges;
    double v_tmp_other_fee;
    double v_tmp_other_commis;
    double v_tmp_trade_cost_fee;
    double v_tmp_trade_system_use_fee;
    double v_tmp_trade_tax;
    double v_tmp_stock_settle_fee;
    double v_trade_commis;
    double v_all_fee;
    double v_stamp_tax;
    double v_trans_fee;
    double v_brkage_fee;
    double v_SEC_charges;
    double v_other_fee;
    double v_other_commis;
    double v_trade_tax;
    double v_trade_cost_fee;
    double v_trade_system_use_fee;
    double v_stock_settle_fee;
    int v_debt_type;
    char v_exgp_detail_posi_id_str[1025];
    char v_asac_detail_posi_id_str[1025];
    char v_asac_stock_code_no_str[4097];
    double v_curr_strike_price;
    int v_record_valid_flag;
    char v_wtdraw_status[3];
    int64 v_sum_order_row_id;
    int v_sum_order_opor_no;
    int v_sum_order_co_no;
    int v_sum_order_pd_no;
    int v_sum_order_exch_group_no;
    int v_sum_order_asset_acco_no;
    int v_sum_order_pass_no;
    char v_sum_order_exch_crncy_type[4];
    int v_sum_order_stock_code_no;
    int v_sum_order_trade_code_no;
    int v_sum_order_target_code_no;
    int64 v_sum_order_external_no;
    int v_sum_order_date;
    int v_sum_order_batch_no;
    int v_sum_order_dir;
    int v_sum_order_price_type;
    double v_sum_order_price;
    double v_sum_order_qty;
    char v_order_sum_status[3];
    double v_sum_order_wtdraw_qty;
    double v_sum_order_waste_qty;
    double v_sum_order_strike_amt;
    double v_sum_order_strike_qty;
    double v_sum_order_strike_aver_price;
    int v_sum_order_net_price_flag;
    double v_sum_order_bond_accr_intrst;
    int v_sum_order_bond_rate_type;
    double v_sum_order_par_value;
    double v_sum_order_impawn_ratio;
    char v_sum_order_oper_way[3];
    int v_sum_order_update_times;
    int64 v_sum_strike_row_id;
    int v_sum_strike_opor_no;
    int v_sum_strike_co_no;
    int v_sum_strike_pd_no;
    int v_sum_strike_exch_group_no;
    int v_sum_strike_asset_acco_no;
    int v_sum_strike_pass_no;
    char v_sum_strike_out_acco[33];
    int v_sum_strike_stock_acco_no;
    int v_sum_strike_stock_code_no;
    int64 v_sum_strike_comm_id;
    int v_sum_strike_report_date;
    char v_sum_strike_report_no[33];
    int v_sum_strike_order_date;
    int64 v_sum_strike_order_id;
    int v_sum_strike_order_dir;
    double v_sum_strike_order_price;
    double v_sum_strike_order_qty;
    double v_sum_strike_strike_qty;
    double v_sum_strike_strike_amt;
    double v_sum_strike_all_fee;
    double v_sum_strike_stamp_tax;
    double v_sum_strike_trans_fee;
    double v_sum_strike_brkage_fee;
    double v_sum_strike_SEC_charges;
    double v_sum_strike_other_fee;
    double v_sum_strike_trade_commis;
    double v_sum_strike_other_commis;
    double v_sum_trade_tax;
    double v_sum_trade_cost_fee;
    double v_sum_trade_system_use_fee;
    double v_sum_stock_settle_fee;
    int v_sum_strike_net_price_flag;
    double v_sum_strike_bond_accr_intrst;
    int v_sum_strike_bond_rate_type;
    char v_sum_strike_order_oper_way[3];
    int v_sum_strike_exter_comm_flag;
    int v_sum_strike_update_times;
    int v_sum_strike_order_batch_no;
    int64 v_sum_external_no;
    int v_comm_time;
    int v_comm_opor;
    int v_comm_dir;
    double v_comm_limit_price;
    double v_limit_actual_price;
    double v_comm_qty;
    double v_comm_amt;
    double v_comm_cancel_qty;
    double v_comm_frozen_amt;
    double v_comm_frozen_qty;
    char v_strike_status[3];
    char v_comm_status[3];
    int v_comm_begin_date;
    int v_comm_end_date;
    int v_comm_begin_time;
    int v_comm_end_time;
    int v_comm_comple_date;
    int v_comm_comple_time;
    int v_comm_appr_date;
    int v_comm_appr_time;
    char v_comm_appr_status[3];
    int v_comm_appr_oper;
    char v_comm_appr_remark[256];
    int64 v_basket_id;
    char v_comm_oper_way[3];
    int v_comm_comple_flag;
    double v_strategy_capt_qty;
    double v_strategy_order_qty;
    char v_comm_remark_info[1025];
    int v_disp_opor;
    int v_disp_status;
    int v_read_flag;
    int64 v_sum_comm_row_id;
    int v_sum_comm_co_no;
    int v_sum_comm_pd_no;
    int v_sum_comm_exch_group_no;
    int v_sum_comm_asset_acco_no;
    int v_sum_comm_pass_no;
    char v_sum_comm_out_acco[33];
    char v_sum_comm_exch_crncy_type[4];
    int v_sum_comm_stock_code_no;
    int v_sum_comm_date;
    int v_sum_comm_time;
    int v_sum_comm_batch_no;
    int v_sum_comm_opor;
    int v_sum_comm_executor;
    int v_sum_comm_dir;
    double v_sum_comm_limit_price;
    double v_sum_comm_qty;
    double v_sum_comm_amt;
    double v_sum_comm_order_qty;
    double v_sum_comm_cancel_qty;
    double v_sum_comm_await_cancel_qty;
    double v_sum_comm_strike_amt;
    double v_sum_comm_strike_qty;
    char v_sum_comm_strike_status[3];
    char v_comm_sum_status[3];
    int v_sum_comm_begin_date;
    int v_sum_comm_end_date;
    int v_sum_comm_begin_time;
    int v_sum_comm_end_time;
    int v_sum_comm_comple_date;
    int v_sum_comm_comple_time;
    int v_sum_comm_max_comm_comple_date;
    int v_sum_comm_max_comm_comple_time;
    int v_sum_comm_appr_date;
    int v_sum_comm_appr_time;
    double v_sum_comm_appr_qty;
    char v_comm_sum_approve_status[3];
    int64 v_sum_comm_basket_id;
    int v_sum_comm_net_price_flag;
    double v_sum_comm_bond_accr_intrst;
    int v_sum_comm_bond_rate_type;
    char v_sum_comm_oper_way[3];
    int v_sum_comm_exter_comm_flag;
    double v_sum_buy_order_qty;
    double v_sum_sell_order_qty;
    double v_sum_buy_comm_qty;
    double v_sum_sell_comm_qty;
    double v_sum_buy_strike_qty;
    double v_sum_sell_strike_qty;
    double v_sum_buy_strike_amt;
    double v_sum_sell_strike_amt;
    double v_sum_buy_comm_amt;
    double v_sum_sell_comm_amt;
    char v_sum_comm_remark_info[256];
    int v_sum_comm_update_times;
    char v_acco_concat_info[4097];
    double v_exgp_put_impawn_qty;
    double v_asac_put_impawn_qty;
    int64 v_exgp_cash_id;
    double v_exgp_frozen_amt;
    double v_exgp_unfroz_amt;
    double v_exgp_comm_frozen_amt;
    double v_exgp_comm_unfroz_amt;
    double v_exgp_comm_capt_amt;
    double v_exgp_comm_releas_amt;
    double v_exgp_trade_frozen_amt;
    double v_exgp_trade_unfroz_amt;
    double v_exgp_trade_capt_amt;
    double v_exgp_trade_releas_amt;
    double v_exgp_strike_capt_amt;
    double v_exgp_strike_releas_amt;
    int v_exgp_cash_update_times;
    int64 v_exgp_posi_id;
    double v_exgp_frozen_qty;
    double v_exgp_unfroz_qty;
    double v_exgp_comm_frozen_qty;
    double v_exgp_comm_unfroz_qty;
    double v_exgp_comm_capt_qty;
    double v_exgp_comm_releas_qty;
    double v_exgp_trade_frozen_qty;
    double v_exgp_trade_unfroz_qty;
    double v_exgp_trade_capt_qty;
    double v_exgp_trade_releas_qty;
    double v_exgp_strike_capt_qty;
    double v_exgp_strike_releas_qty;
    double v_exgp_strike_frozen_qty;
    double v_exgp_strike_unfroz_qty;
    double v_exgp_realize_pandl;
    double v_exgp_intrst_pandl;
    int v_exgp_posi_update_times;
    int64 v_asac_cash_id;
    double v_asac_frozen_amt;
    double v_asac_unfroz_amt;
    double v_asac_comm_frozen_amt;
    double v_asac_comm_unfroz_amt;
    double v_asac_comm_capt_amt;
    double v_asac_comm_releas_amt;
    double v_asac_trade_frozen_amt;
    double v_asac_trade_unfroz_amt;
    double v_asac_trade_capt_amt;
    double v_asac_trade_releas_amt;
    double v_asac_strike_capt_amt;
    double v_asac_strike_releas_amt;
    int v_asac_cash_update_times;
    int64 v_asac_posi_id;
    double v_asac_frozen_qty;
    double v_asac_unfroz_qty;
    double v_asac_comm_frozen_qty;
    double v_asac_comm_unfroz_qty;
    double v_asac_comm_capt_qty;
    double v_asac_comm_releas_qty;
    double v_asac_trade_frozen_qty;
    double v_asac_trade_unfroz_qty;
    double v_asac_trade_capt_qty;
    double v_asac_trade_releas_qty;
    double v_asac_strike_capt_qty;
    double v_asac_strike_releas_qty;
    double v_asac_strike_frozen_qty;
    double v_asac_strike_unfroz_qty;
    double v_asac_realize_pandl;
    double v_asac_intrst_pandl;
    int v_asac_posi_update_times;
    int64 v_row_id;
    int v_invest_type;
    double v_debt_fina_buy_strike_qty;
    double v_fina_return_strike_qty;
    double v_debt_loan_sell_strike_qty;
    double v_loan_return_strike_qty;
    double v_debt_fina_buy_order_qty;
    double v_fina_return_order_qty;
    double v_debt_loan_sell_order_qty;
    double v_loan_return_order_qty;
    double v_debt_fina_buy_comm_qty;
    double v_fina_return_comm_qty;
    double v_debt_loan_sell_comm_qty;
    double v_loan_return_comm_qty;
    double v_debt_fina_buy_strike_amt;
    double v_fina_return_strike_amt;
    double v_debt_loan_sell_strike_amt;
    double v_loan_return_strike_amt;
    double v_debt_fina_buy_order_amt;
    double v_fina_return_order_amt;
    double v_debt_loan_sell_order_amt;
    double v_loan_return_order_amt;
    double v_debt_fina_buy_comm_amt;
    double v_fina_return_comm_amt;
    double v_debt_loan_sell_comm_amt;
    double v_loan_return_comm_amt;
    double v_debt_strike_fee;
    double v_return_strike_fee;
    double v_debt_interest;
    double v_return_interest_amt;
    double v_strike_fee;
    int v_debt_order_no;
    double v_debt_amt;
    double v_debt_qty;
    double v_debt_fee;
    double v_intrst_base_amt;
    double v_debt_return_amt;
    double v_debt_return_qty;
    int v_debt_status;
    char v_remark_info[256];
    char v_log_error_code[33];
    char v_log_error_info[256];

    IGroup* lpMainMsg=NULL;
    int iRecordCount = 0;

IFastMessage* lpPubMsg = NULL;
int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    strcpy(v_stock_acco, " ");
    strcpy(v_stock_code, " ");
    v_report_date=0;
    strcpy(v_report_no, " ");
    v_strike_date=0;
    v_strike_time=0;
    strcpy(v_strike_no, " ");
    v_order_dir=0;
    v_strike_price=0;
    v_strike_qty=0;
    v_strike_amt=0;
    strcpy(v_rsp_info, " ");
    v_strike_deal_type=0;
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_order_id=0;
    v_init_date=0;
    strcpy(v_co_busi_config_str, " ");
    v_tmp_strike_amt=0;
    v_tmp_strike_qty=0;
    v_tmp_strike_price=0;
    v_mach_time=0;
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    v_asset_acco_no=0;
    strcpy(v_original_stock_acco, " ");
    v_stock_acco_no=0;
    strcpy(v_original_stock_code, " ");
    v_stock_code_no=0;
    v_stock_type=0;
    v_asset_type=0;
    v_comm_id=0;
    v_order_date=0;
    v_order_time=0;
    v_order_batch_no=0;
    v_order_price=0;
    v_order_qty=0;
    v_original_order_dir=0;
    v_order_frozen_amt=0;
    strcpy(v_order_status, "0");
    v_price_type=0;
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    v_rsp_id=0;
    v_exter_comm_flag=0;
    v_external_no=0;
    strcpy(v_combo_code, " ");
    v_combo_posi_id=0;
    v_strategy_id=0;
    strcpy(v_contra_no, " ");
    v_asset_acco_type=0;
    v_exist_debt_flag=0;
    strcpy(v_sys_config_str, " ");
    strcpy(v_crncy_type, "CNY");
    strcpy(v_exch_crncy_type, "CNY");
    v_buy_ref_rate=0;
    v_sell_ref_rate=0;
    v_capit_reback_days=0;
    v_posi_reback_days=0;
    v_trade_code_no=0;
    v_target_code_no=0;
    v_intrst_days=0;
    v_net_price_flag=0;
    v_bond_accr_intrst=0;
    v_bond_rate_type=0;
    v_par_value=0;
    v_impawn_ratio=0;
    v_repo_days=0;
    v_repo_cale_days=0;
    v_repo_back_date=0;
    v_bond_qty_unit_set=0;
    v_apply_date=0;
    v_exgp_cost_amt=0;
    v_exgp_intrst_cost_amt=0;
    v_exgp_curr_qty=0;
    v_asac_cost_amt=0;
    v_asac_intrst_cost_amt=0;
    v_asac_curr_qty=0;
    v_exgp_avail_amt=0;
    v_asac_avail_amt=0;
    v_asac_T_hk_buy_total_amt=0;
    v_asac_T_hk_sell_total_amt=0;
    v_asac_T1_hk_buy_total_amt=0;
    v_asac_T1_hk_sell_total_amt=0;
    v_exgp_T_hk_buy_total_amt=0;
    v_exgp_T_hk_sell_total_amt=0;
    v_exgp_T1_hk_buy_total_amt=0;
    v_exgp_T1_hk_sell_total_amt=0;
    v_exgp_avail_qty=0;
    v_exgp_target_code_avail_qty=0;
    v_exgp_trade_code_avail_qty=0;
    v_asac_avail_qty=0;
    v_asac_target_code_avail_qty=0;
    v_asac_trade_code_avail_qty=0;
    v_exgp_loan_sell_amt=0;
    v_asac_loan_sell_amt=0;
    v_exgp_debt_loan_sell_strike_qty=0;
    v_exgp_debt_fina_buy_strike_amt=0;
    v_record_count=0;
    v_fina_return_type=0;
    v_sell_auto_back_debt=0;
    v_total_strike_amt=0;
    v_total_strike_qty=0;
    v_strike_id=0;
    v_report_time=0;
    v_comm_date=0;
    v_comm_batch_no=0;
    v_comm_executor=0;
    strcpy(v_target_code, " ");
    v_order_frozen_qty=0;
    v_strike_bond_accr_intrst=0;
    v_wtdraw_qty=0;
    v_cost_calc_type=0;
    v_update_times=1;
    v_strike_occur_amt=0;
    v_strike_occur_qty=0;
    v_trade_occur_amt=0;
    v_trade_occur_qty=0;
    v_open_posi_date=0;
    strcpy(v_detail_posi_id_str, " ");
    strcpy(v_stock_code_no_str, " ");
    v_curr_strike_amt=0;
    v_curr_strike_qty=0;
    v_tmp_update_times=1;
    v_tmp_all_fee=0;
    v_tmp_trade_commis=0;
    v_tmp_stamp_tax=0;
    v_tmp_trans_fee=0;
    v_tmp_brkage_fee=0;
    v_tmp_SEC_charges=0;
    v_tmp_other_fee=0;
    v_tmp_other_commis=0;
    v_tmp_trade_cost_fee=0;
    v_tmp_trade_system_use_fee=0;
    v_tmp_trade_tax=0;
    v_tmp_stock_settle_fee=0;
    v_trade_commis=0;
    v_all_fee=0;
    v_stamp_tax=0;
    v_trans_fee=0;
    v_brkage_fee=0;
    v_SEC_charges=0;
    v_other_fee=0;
    v_other_commis=0;
    v_trade_tax=0;
    v_trade_cost_fee=0;
    v_trade_system_use_fee=0;
    v_stock_settle_fee=0;
    v_debt_type=0;
    strcpy(v_exgp_detail_posi_id_str, " ");
    strcpy(v_asac_detail_posi_id_str, " ");
    strcpy(v_asac_stock_code_no_str, " ");
    v_curr_strike_price=0;
    v_record_valid_flag=0;
    strcpy(v_wtdraw_status, "0");
    v_sum_order_row_id=0;
    v_sum_order_opor_no=0;
    v_sum_order_co_no=0;
    v_sum_order_pd_no=0;
    v_sum_order_exch_group_no=0;
    v_sum_order_asset_acco_no=0;
    v_sum_order_pass_no=0;
    strcpy(v_sum_order_exch_crncy_type, "CNY");
    v_sum_order_stock_code_no=0;
    v_sum_order_trade_code_no=0;
    v_sum_order_target_code_no=0;
    v_sum_order_external_no=0;
    v_sum_order_date=0;
    v_sum_order_batch_no=0;
    v_sum_order_dir=0;
    v_sum_order_price_type=0;
    v_sum_order_price=0;
    v_sum_order_qty=0;
    strcpy(v_order_sum_status, "0");
    v_sum_order_wtdraw_qty=0;
    v_sum_order_waste_qty=0;
    v_sum_order_strike_amt=0;
    v_sum_order_strike_qty=0;
    v_sum_order_strike_aver_price=0;
    v_sum_order_net_price_flag=0;
    v_sum_order_bond_accr_intrst=0;
    v_sum_order_bond_rate_type=0;
    v_sum_order_par_value=0;
    v_sum_order_impawn_ratio=0;
    strcpy(v_sum_order_oper_way, " ");
    v_sum_order_update_times=1;
    v_sum_strike_row_id=0;
    v_sum_strike_opor_no=0;
    v_sum_strike_co_no=0;
    v_sum_strike_pd_no=0;
    v_sum_strike_exch_group_no=0;
    v_sum_strike_asset_acco_no=0;
    v_sum_strike_pass_no=0;
    strcpy(v_sum_strike_out_acco, " ");
    v_sum_strike_stock_acco_no=0;
    v_sum_strike_stock_code_no=0;
    v_sum_strike_comm_id=0;
    v_sum_strike_report_date=0;
    strcpy(v_sum_strike_report_no, " ");
    v_sum_strike_order_date=0;
    v_sum_strike_order_id=0;
    v_sum_strike_order_dir=0;
    v_sum_strike_order_price=0;
    v_sum_strike_order_qty=0;
    v_sum_strike_strike_qty=0;
    v_sum_strike_strike_amt=0;
    v_sum_strike_all_fee=0;
    v_sum_strike_stamp_tax=0;
    v_sum_strike_trans_fee=0;
    v_sum_strike_brkage_fee=0;
    v_sum_strike_SEC_charges=0;
    v_sum_strike_other_fee=0;
    v_sum_strike_trade_commis=0;
    v_sum_strike_other_commis=0;
    v_sum_trade_tax=0;
    v_sum_trade_cost_fee=0;
    v_sum_trade_system_use_fee=0;
    v_sum_stock_settle_fee=0;
    v_sum_strike_net_price_flag=0;
    v_sum_strike_bond_accr_intrst=0;
    v_sum_strike_bond_rate_type=0;
    strcpy(v_sum_strike_order_oper_way, " ");
    v_sum_strike_exter_comm_flag=0;
    v_sum_strike_update_times=1;
    v_sum_strike_order_batch_no=0;
    v_sum_external_no=0;
    v_comm_time=0;
    v_comm_opor=0;
    v_comm_dir=0;
    v_comm_limit_price=0;
    v_limit_actual_price=0;
    v_comm_qty=0;
    v_comm_amt=0;
    v_comm_cancel_qty=0;
    v_comm_frozen_amt=0;
    v_comm_frozen_qty=0;
    strcpy(v_strike_status, "0");
    strcpy(v_comm_status, "0");
    v_comm_begin_date=0;
    v_comm_end_date=0;
    v_comm_begin_time=0;
    v_comm_end_time=0;
    v_comm_comple_date=0;
    v_comm_comple_time=0;
    v_comm_appr_date=0;
    v_comm_appr_time=0;
    strcpy(v_comm_appr_status, " ");
    v_comm_appr_oper=0;
    strcpy(v_comm_appr_remark, " ");
    v_basket_id=0;
    strcpy(v_comm_oper_way, " ");
    v_comm_comple_flag=0;
    v_strategy_capt_qty=0;
    v_strategy_order_qty=0;
    strcpy(v_comm_remark_info, " ");
    v_disp_opor=0;
    v_disp_status=0;
    v_read_flag=0;
    v_sum_comm_row_id=0;
    v_sum_comm_co_no=0;
    v_sum_comm_pd_no=0;
    v_sum_comm_exch_group_no=0;
    v_sum_comm_asset_acco_no=0;
    v_sum_comm_pass_no=0;
    strcpy(v_sum_comm_out_acco, " ");
    strcpy(v_sum_comm_exch_crncy_type, "CNY");
    v_sum_comm_stock_code_no=0;
    v_sum_comm_date=0;
    v_sum_comm_time=0;
    v_sum_comm_batch_no=0;
    v_sum_comm_opor=0;
    v_sum_comm_executor=0;
    v_sum_comm_dir=0;
    v_sum_comm_limit_price=0;
    v_sum_comm_qty=0;
    v_sum_comm_amt=0;
    v_sum_comm_order_qty=0;
    v_sum_comm_cancel_qty=0;
    v_sum_comm_await_cancel_qty=0;
    v_sum_comm_strike_amt=0;
    v_sum_comm_strike_qty=0;
    strcpy(v_sum_comm_strike_status, "0");
    strcpy(v_comm_sum_status, "0");
    v_sum_comm_begin_date=0;
    v_sum_comm_end_date=0;
    v_sum_comm_begin_time=0;
    v_sum_comm_end_time=0;
    v_sum_comm_comple_date=0;
    v_sum_comm_comple_time=0;
    v_sum_comm_max_comm_comple_date=0;
    v_sum_comm_max_comm_comple_time=0;
    v_sum_comm_appr_date=0;
    v_sum_comm_appr_time=0;
    v_sum_comm_appr_qty=0;
    strcpy(v_comm_sum_approve_status, "0");
    v_sum_comm_basket_id=0;
    v_sum_comm_net_price_flag=0;
    v_sum_comm_bond_accr_intrst=0;
    v_sum_comm_bond_rate_type=0;
    strcpy(v_sum_comm_oper_way, " ");
    v_sum_comm_exter_comm_flag=0;
    v_sum_buy_order_qty=0;
    v_sum_sell_order_qty=0;
    v_sum_buy_comm_qty=0;
    v_sum_sell_comm_qty=0;
    v_sum_buy_strike_qty=0;
    v_sum_sell_strike_qty=0;
    v_sum_buy_strike_amt=0;
    v_sum_sell_strike_amt=0;
    v_sum_buy_comm_amt=0;
    v_sum_sell_comm_amt=0;
    strcpy(v_sum_comm_remark_info, " ");
    v_sum_comm_update_times=1;
    strcpy(v_acco_concat_info, " ");
    v_exgp_put_impawn_qty=0;
    v_asac_put_impawn_qty=0;
    v_exgp_cash_id=0;
    v_exgp_frozen_amt=0;
    v_exgp_unfroz_amt=0;
    v_exgp_comm_frozen_amt=0;
    v_exgp_comm_unfroz_amt=0;
    v_exgp_comm_capt_amt=0;
    v_exgp_comm_releas_amt=0;
    v_exgp_trade_frozen_amt=0;
    v_exgp_trade_unfroz_amt=0;
    v_exgp_trade_capt_amt=0;
    v_exgp_trade_releas_amt=0;
    v_exgp_strike_capt_amt=0;
    v_exgp_strike_releas_amt=0;
    v_exgp_cash_update_times=1;
    v_exgp_posi_id=0;
    v_exgp_frozen_qty=0;
    v_exgp_unfroz_qty=0;
    v_exgp_comm_frozen_qty=0;
    v_exgp_comm_unfroz_qty=0;
    v_exgp_comm_capt_qty=0;
    v_exgp_comm_releas_qty=0;
    v_exgp_trade_frozen_qty=0;
    v_exgp_trade_unfroz_qty=0;
    v_exgp_trade_capt_qty=0;
    v_exgp_trade_releas_qty=0;
    v_exgp_strike_capt_qty=0;
    v_exgp_strike_releas_qty=0;
    v_exgp_strike_frozen_qty=0;
    v_exgp_strike_unfroz_qty=0;
    v_exgp_realize_pandl=0;
    v_exgp_intrst_pandl=0;
    v_exgp_posi_update_times=1;
    v_asac_cash_id=0;
    v_asac_frozen_amt=0;
    v_asac_unfroz_amt=0;
    v_asac_comm_frozen_amt=0;
    v_asac_comm_unfroz_amt=0;
    v_asac_comm_capt_amt=0;
    v_asac_comm_releas_amt=0;
    v_asac_trade_frozen_amt=0;
    v_asac_trade_unfroz_amt=0;
    v_asac_trade_capt_amt=0;
    v_asac_trade_releas_amt=0;
    v_asac_strike_capt_amt=0;
    v_asac_strike_releas_amt=0;
    v_asac_cash_update_times=1;
    v_asac_posi_id=0;
    v_asac_frozen_qty=0;
    v_asac_unfroz_qty=0;
    v_asac_comm_frozen_qty=0;
    v_asac_comm_unfroz_qty=0;
    v_asac_comm_capt_qty=0;
    v_asac_comm_releas_qty=0;
    v_asac_trade_frozen_qty=0;
    v_asac_trade_unfroz_qty=0;
    v_asac_trade_capt_qty=0;
    v_asac_trade_releas_qty=0;
    v_asac_strike_capt_qty=0;
    v_asac_strike_releas_qty=0;
    v_asac_strike_frozen_qty=0;
    v_asac_strike_unfroz_qty=0;
    v_asac_realize_pandl=0;
    v_asac_intrst_pandl=0;
    v_asac_posi_update_times=1;
    v_row_id=0;
    v_invest_type=0;
    v_debt_fina_buy_strike_qty=0;
    v_fina_return_strike_qty=0;
    v_debt_loan_sell_strike_qty=0;
    v_loan_return_strike_qty=0;
    v_debt_fina_buy_order_qty=0;
    v_fina_return_order_qty=0;
    v_debt_loan_sell_order_qty=0;
    v_loan_return_order_qty=0;
    v_debt_fina_buy_comm_qty=0;
    v_fina_return_comm_qty=0;
    v_debt_loan_sell_comm_qty=0;
    v_loan_return_comm_qty=0;
    v_debt_fina_buy_strike_amt=0;
    v_fina_return_strike_amt=0;
    v_debt_loan_sell_strike_amt=0;
    v_loan_return_strike_amt=0;
    v_debt_fina_buy_order_amt=0;
    v_fina_return_order_amt=0;
    v_debt_loan_sell_order_amt=0;
    v_loan_return_order_amt=0;
    v_debt_fina_buy_comm_amt=0;
    v_fina_return_comm_amt=0;
    v_debt_loan_sell_comm_amt=0;
    v_loan_return_comm_amt=0;
    v_debt_strike_fee=0;
    v_return_strike_fee=0;
    v_debt_interest=0;
    v_return_interest_amt=0;
    v_strike_fee=0;
    v_debt_order_no=0;
    v_debt_amt=0;
    v_debt_qty=0;
    v_debt_fee=0;
    v_intrst_base_amt=0;
    v_debt_return_amt=0;
    v_debt_return_qty=0;
    v_debt_status=0;
    strcpy(v_remark_info, " ");
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_pass_no = lpInBizMsg->GetInt32(LDBIZ_PASS_NO_INT);
    strncpy(v_out_acco, lpInBizMsg->GetString(LDBIZ_OUT_ACCO_STR),32);
    v_out_acco[32] = '\0';
    v_exch_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_NO_INT);
    strncpy(v_stock_acco, lpInBizMsg->GetString(LDBIZ_STOCK_ACCO_STR),16);
    v_stock_acco[16] = '\0';
    strncpy(v_stock_code, lpInBizMsg->GetString(LDBIZ_STOCK_CODE_STR),6);
    v_stock_code[6] = '\0';
    v_report_date = lpInBizMsg->GetInt32(LDBIZ_REPORT_DATE_INT);
    strncpy(v_report_no, lpInBizMsg->GetString(LDBIZ_REPORT_NO_STR),32);
    v_report_no[32] = '\0';
    v_strike_date = lpInBizMsg->GetInt32(LDBIZ_STRIKE_DATE_INT);
    v_strike_time = lpInBizMsg->GetInt32(LDBIZ_STRIKE_TIME_INT);
    strncpy(v_strike_no, lpInBizMsg->GetString(LDBIZ_STRIKE_NO_STR),64);
    v_strike_no[64] = '\0';
    v_order_dir = lpInBizMsg->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_strike_price = lpInBizMsg->GetDouble(LDBIZ_STRIKE_PRICE_FLOAT);
    v_strike_qty = lpInBizMsg->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_amt = lpInBizMsg->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    strncpy(v_rsp_info, lpInBizMsg->GetString(LDBIZ_RSP_INFO_STR),255);
    v_rsp_info[255] = '\0';
    v_strike_deal_type = lpInBizMsg->GetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT);

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;
    IFastMessage* lpTSCall1Req3 = NULL;
    IFastMessage* lpTSCall1Ans3 = NULL;
    IFastMessage* lpTSCall1Req4 = NULL;
    IFastMessage* lpTSCall1Ans4 = NULL;
    IFastMessage* lpTSCall1Req5 = NULL;
    IFastMessage* lpTSCall1Ans5 = NULL;
    IFastMessage* lpTSCall1Req6 = NULL;
    IFastMessage* lpTSCall1Ans6 = NULL;
    IFastMessage* lpTSCall1Req7 = NULL;
    IFastMessage* lpTSCall1Ans7 = NULL;
    IFastMessage* lpTSCall1Req8 = NULL;
    IFastMessage* lpTSCall1Ans8 = NULL;
    IFastMessage* lpTSCall1Req9 = NULL;
    IFastMessage* lpTSCall1Ans9 = NULL;
    IFastMessage* lpTSCall1Req10 = NULL;
    IFastMessage* lpTSCall1Ans10 = NULL;
    IFastMessage* lpTSCall1Req11 = NULL;
    IFastMessage* lpTSCall1Ans11 = NULL;
    IFastMessage* lpTSCall1Req12 = NULL;
    IFastMessage* lpTSCall1Ans12 = NULL;
    IFastMessage* lpTSCall1Req13 = NULL;
    IFastMessage* lpTSCall1Ans13 = NULL;
    IFastMessage* lpTSCall1Req14 = NULL;
    IFastMessage* lpTSCall1Ans14 = NULL;
    IFastMessage* lpTSCall1Req15 = NULL;
    IFastMessage* lpTSCall1Ans15 = NULL;
    IFastMessage* lpTSCall1Req16 = NULL;
    IFastMessage* lpTSCall1Ans16 = NULL;
    IFastMessage* lpTSCall1Req17 = NULL;
    IFastMessage* lpTSCall1Ans17 = NULL;
    IFastMessage* lpTSCall1Req18 = NULL;
    IFastMessage* lpTSCall1Ans18 = NULL;
    IFastMessage* lpTSCall1Req19 = NULL;
    IFastMessage* lpTSCall1Ans19 = NULL;
    IFastMessage* lpTSCall1Req20 = NULL;
    IFastMessage* lpTSCall1Ans20 = NULL;
    IFastMessage* lpTSCall1Req21 = NULL;
    IFastMessage* lpTSCall1Ans21 = NULL;
    IFastMessage* lpTSCall1Req22 = NULL;
    IFastMessage* lpTSCall1Ans22 = NULL;

    //调用过程[事务_公共_公共接口_检查系统状态权限身份]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.1", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.1]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));

    //为便于汇总模式与非汇总模式通用，临时_变量用于保存本次成交的金额数量，而变量值为总金额数量

    // set @临时_成交金额# = @成交金额#;
    v_tmp_strike_amt = v_strike_amt;

    // set @临时_成交数量# = @成交数量#;
    v_tmp_strike_qty = v_strike_qty;

    // set @临时_成交价格# = @成交价格#;
    v_tmp_strike_price = v_strike_price;
    //质押操作不在这里处理成交

    // [检查报错返回][@订单方向# = 《订单方向-质押提交》 or @订单方向# = 《订单方向-质押转回》][754][@订单方向#]
    if (v_order_dir == 21 || v_order_dir == 22)
    {
        strcpy(v_error_code, "tdsecuL.5.129.754");
        snprintf(v_error_info, sizeof(v_error_info), "%s%d","订单方向=",v_order_dir);
        iRet = -1;
        goto END;
    }

    //9:25前 的成交不处理。Modify by wjp 20181101
    //调用过程[事务_交易证券_报盘_获取机器时间]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.131", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.131]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
    v_mach_time = lpTSCall1Ans1->GetInt32(LDBIZ_MACH_TIME_INT);


    // if @成交处理方式# = 0 then
    if (v_strike_deal_type == 0)
    {

        // set @成交处理方式# = 《成交处理方式-分笔》;
        v_strike_deal_type = 1;
    // end if;
    }

    //获取原订单信息，

    // set @初始化日期# = @成交日期#;
    v_init_date = v_strike_date;
    //调用过程[事务_交易证券_报盘_检查成交回报获取订单信息]
    //组织事务请求
    if(lpTSCall1Ans2)
    {
      lpTSCall1Ans2->FreeMsg();
      lpTSCall1Ans2=NULL;
    }
    lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.20", 0);
    lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req2->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req2->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req2->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req2->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpTSCall1Req2->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req2->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req2->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpTSCall1Req2->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpTSCall1Req2->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpTSCall1Req2->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpTSCall1Req2->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req2->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpTSCall1Req2->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpTSCall1Req2->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpTSCall1Req2->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
    lpTSCall1Req2->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
    if(!lpTSCall1Ans2)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.20]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans2->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
    v_co_no = lpTSCall1Ans2->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpTSCall1Ans2->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans2->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans2->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    strcpy(v_original_stock_acco, lpTSCall1Ans2->GetString(LDBIZ_ORIGINAL_STOCK_ACCO_STR));
    v_stock_acco_no = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_original_stock_code, lpTSCall1Ans2->GetString(LDBIZ_ORIGINAL_STOCK_CODE_STR));
    v_stock_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans2->GetInt32(LDBIZ_ASSET_TYPE_INT);
    v_comm_id = lpTSCall1Ans2->GetInt64(LDBIZ_COMM_ID_INT64);
    v_order_date = lpTSCall1Ans2->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_time = lpTSCall1Ans2->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_order_id = lpTSCall1Ans2->GetInt64(LDBIZ_ORDER_ID_INT64);
    v_order_batch_no = lpTSCall1Ans2->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    v_order_price = lpTSCall1Ans2->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans2->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    v_original_order_dir = lpTSCall1Ans2->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);
    v_order_frozen_amt = lpTSCall1Ans2->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans2->GetString(LDBIZ_ORDER_STATUS_STR));
    v_price_type = lpTSCall1Ans2->GetInt32(LDBIZ_PRICE_TYPE_INT);
    v_busi_opor_no = lpTSCall1Ans2->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strcpy(v_order_oper_way, lpTSCall1Ans2->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    v_rsp_id = lpTSCall1Ans2->GetInt64(LDBIZ_RSP_ID_INT64);
    v_exter_comm_flag = lpTSCall1Ans2->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_external_no = lpTSCall1Ans2->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
    strcpy(v_combo_code, lpTSCall1Ans2->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans2->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    v_strategy_id = lpTSCall1Ans2->GetInt64(LDBIZ_STRATEGY_ID_INT64);
    strcpy(v_contra_no, lpTSCall1Ans2->GetString(LDBIZ_CONTRA_NO_STR));
    v_asset_acco_type = lpTSCall1Ans2->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    v_exist_debt_flag = lpTSCall1Ans2->GetInt32(LDBIZ_EXIST_DEBT_FLAG_INT);

    //取系统内部的订单方向，而不取报盘给的订单方向，做一层保护

    // set @订单方向# = @原订单方向#;
    v_order_dir = v_original_order_dir;

    // set @证券代码# = @原证券代码#;
    strcpy(v_stock_code,v_original_stock_code);

    // set @股东代码# = @原股东代码#;
    strcpy(v_stock_acco,v_original_stock_acco);
    //调用过程[事务_公共_交易接口_检查交易系统状态权限]
    //组织事务请求
    if(lpTSCall1Ans3)
    {
      lpTSCall1Ans3->FreeMsg();
      lpTSCall1Ans3=NULL;
    }
    lpTSCall1Req3=glpFastMsgFactory->CreateFastMessage("pubT.25.232", 0);
    lpTSCall1Req3->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req3->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req3->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req3->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req3->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req3->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req3->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req3, &lpTSCall1Ans3, 5000);
    if(!lpTSCall1Ans3)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.232]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans3->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
    strcpy(v_co_busi_config_str, lpTSCall1Ans3->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));

    //公共子系统检查，这里需要增加输出
    //调用过程[事务_公共_交易接口_检查成交回报业务控制]
    //组织事务请求
    if(lpTSCall1Ans4)
    {
      lpTSCall1Ans4->FreeMsg();
      lpTSCall1Ans4=NULL;
    }
    lpTSCall1Req4=glpFastMsgFactory->CreateFastMessage("pubT.25.32", 0);
    lpTSCall1Req4->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req4->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req4->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req4->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req4->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req4->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req4->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req4->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpTSCall1Req4->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req4, &lpTSCall1Ans4, 5000);
    if(!lpTSCall1Ans4)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.32]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans4->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans4->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_sys_config_str, lpTSCall1Ans4->GetString(LDBIZ_SYS_CONFIG_STR_STR));
    strcpy(v_crncy_type, lpTSCall1Ans4->GetString(LDBIZ_CRNCY_TYPE_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans4->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_buy_ref_rate = lpTSCall1Ans4->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
    v_sell_ref_rate = lpTSCall1Ans4->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
    v_stock_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_capit_reback_days = lpTSCall1Ans4->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
    v_posi_reback_days = lpTSCall1Ans4->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);
    v_trade_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_intrst_days = lpTSCall1Ans4->GetInt32(LDBIZ_INTRST_DAYS_INT);
    v_net_price_flag = lpTSCall1Ans4->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_bond_accr_intrst = lpTSCall1Ans4->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans4->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_par_value = lpTSCall1Ans4->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans4->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_repo_days = lpTSCall1Ans4->GetInt32(LDBIZ_REPO_DAYS_INT);
    v_repo_cale_days = lpTSCall1Ans4->GetInt32(LDBIZ_REPO_CALE_DAYS_INT);
    v_repo_back_date = lpTSCall1Ans4->GetInt32(LDBIZ_REPO_BACK_DATE_INT);
    v_bond_qty_unit_set = lpTSCall1Ans4->GetInt32(LDBIZ_BOND_QTY_UNIT_SET_INT);
    v_apply_date = lpTSCall1Ans4->GetInt32(LDBIZ_APPLY_DATE_INT);


    // [检查报错返回][@申购日期# = @成交日期#][753][@证券代码#]
    if (v_apply_date == v_strike_date)
    {
        strcpy(v_error_code, "tdsecuL.5.129.753");
        snprintf(v_error_info, sizeof(v_error_info), "%s%s","证券代码=",v_stock_code);
        iRet = -1;
        goto END;
    }

    //获取成本，利息等
    //调用过程[事务_产品证券_交易接口_获取成交回报证券持仓成本]
    //组织事务请求
    if(lpTSCall1Ans5)
    {
      lpTSCall1Ans5->FreeMsg();
      lpTSCall1Ans5=NULL;
    }
    lpTSCall1Req5=glpFastMsgFactory->CreateFastMessage("pdsecuT.6.3", 0);
    lpTSCall1Req5->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req5->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req5->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req5->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req5->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req5->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req5->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req5->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req5->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req5->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req5->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req5->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req5->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req5->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    glpTSSubcallSerives->SubCall(lpTSCall1Req5, &lpTSCall1Ans5, 5000);
    if(!lpTSCall1Ans5)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pdsecuT.6.3]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans5->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
    v_exgp_cost_amt = lpTSCall1Ans5->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
    v_exgp_intrst_cost_amt = lpTSCall1Ans5->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
    v_exgp_curr_qty = lpTSCall1Ans5->GetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT);
    v_asac_cost_amt = lpTSCall1Ans5->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
    v_asac_intrst_cost_amt = lpTSCall1Ans5->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
    v_asac_curr_qty = lpTSCall1Ans5->GetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT);


    // if @成交处理方式# = 0 then
    if (v_strike_deal_type == 0)
    {

      // set @成交处理方式# = 《成交处理方式-分笔》;
      v_strike_deal_type = 1;
    // end if;
    }

    //调用过程[事务_产品证券_交易接口_检查账户状态获取可用]
    //组织事务请求
    if(lpTSCall1Ans6)
    {
      lpTSCall1Ans6->FreeMsg();
      lpTSCall1Ans6=NULL;
    }
    lpTSCall1Req6=glpFastMsgFactory->CreateFastMessage("pdsecuT.6.1", 0);
    lpTSCall1Req6->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req6->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req6->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req6->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req6->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req6->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req6->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req6->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req6->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req6->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req6->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req6->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req6->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req6->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
    lpTSCall1Req6->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
    lpTSCall1Req6->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req6->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req6->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpTSCall1Req6->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
    glpTSSubcallSerives->SubCall(lpTSCall1Req6, &lpTSCall1Ans6, 5000);
    if(!lpTSCall1Ans6)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pdsecuT.6.1]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans6->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
    v_stock_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_acco, lpTSCall1Ans6->GetString(LDBIZ_STOCK_ACCO_STR));
    v_exgp_avail_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_AVAIL_AMT_FLOAT);
    v_asac_avail_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_AVAIL_AMT_FLOAT);
    v_asac_T_hk_buy_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_T_HK_BUY_TOTAL_AMT_FLOAT);
    v_asac_T_hk_sell_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_T_HK_SELL_TOTAL_AMT_FLOAT);
    v_asac_T1_hk_buy_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_T1_HK_BUY_TOTAL_AMT_FLOAT);
    v_asac_T1_hk_sell_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_T1_HK_SELL_TOTAL_AMT_FLOAT);
    v_exgp_T_hk_buy_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_T_HK_BUY_TOTAL_AMT_FLOAT);
    v_exgp_T_hk_sell_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_T_HK_SELL_TOTAL_AMT_FLOAT);
    v_exgp_T1_hk_buy_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_T1_HK_BUY_TOTAL_AMT_FLOAT);
    v_exgp_T1_hk_sell_total_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_T1_HK_SELL_TOTAL_AMT_FLOAT);
    v_exgp_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_AVAIL_QTY_FLOAT);
    v_exgp_target_code_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TARGET_CODE_AVAIL_QTY_FLOAT);
    v_exgp_trade_code_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_CODE_AVAIL_QTY_FLOAT);
    v_asac_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_AVAIL_QTY_FLOAT);
    v_asac_target_code_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TARGET_CODE_AVAIL_QTY_FLOAT);
    v_asac_trade_code_avail_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_CODE_AVAIL_QTY_FLOAT);
    v_exgp_loan_sell_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_LOAN_SELL_AMT_FLOAT);
    v_asac_loan_sell_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_LOAN_SELL_AMT_FLOAT);
    v_exgp_debt_loan_sell_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT);
    v_exgp_debt_fina_buy_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_DEBT_FINA_BUY_STRIKE_AMT_FLOAT);
    v_record_count = lpTSCall1Ans6->GetInt32(LDBIZ_RECORD_COUNT_INT);

    //增加债券张手转换
    //债券张手转换 (一手是十张，报的时候是张，回来是手，系统内都以张处理)
    //债券数量单位配置 bond_qty_unit_set 沪市(张)，深市(张) 1
    //债券数量单位配置 bond_qty_unt_set 沪市(手)，深市(手) 2
    //债券数量单位配置 bond_qty_unit_set 沪市(手)，深市(张) 3
    //债券数量单位配置 bond_qty_unit_set 沪市(张)，深市(手) 4

    // if (@订单方向# = 《订单方向-买入》 or @订单方向# = 《订单方向-卖出》) and @证券类型# > 20 and @证券类型# < 50 then
    if ((v_order_dir == 1 || v_order_dir == 2) && v_stock_type > 20 && v_stock_type < 50)
    {

      // if (@债券数量单位配置# = 2) or (@债券数量单位配置# = 3 and @市场编号# = 《市场编号-上海证券交易所》) or (@债券数量单位配置# = 4 and @市场编号# = 《市场编号-深圳证券交易所》) then
      if ((v_bond_qty_unit_set == 2) || (v_bond_qty_unit_set == 3 && v_exch_no == 1) || (v_bond_qty_unit_set == 4 && v_exch_no == 2))
      {
        //set @回报信息// = concat(@回报信息//,",原成交数量=",@成交数量//);

        // set @成交数量# = @成交数量# * 10;
        v_strike_qty = v_strike_qty * 10;
      // end if;
      }

    // end if;
    }

    //回购类操作和债券买卖的自己计算成交金额

    // if @订单方向# = 《订单方向-融资回购》 or @订单方向# = 《订单方向-融券回购》 then
    if (v_order_dir == 3 || v_order_dir == 4)
    {

      // set @成交金额# = @票面面值# * @成交数量#;
      v_strike_amt = v_par_value * v_strike_qty;

    }
    // elseif (@订单方向# = 《订单方向-买入》 or @订单方向# = 《订单方向-卖出》  or @订单方向# = 《订单方向-融资买入》  or @订单方向# = 《订单方向-融券卖出》  or  @订单方向# = 《订单方向-买券还券》  or @订单方向# = 《订单方向-卖券还款》) and ((@证券类型# > 20 and @证券类型# < 50) or @成交金额#<= 0) then
    else if ((v_order_dir == 1 || v_order_dir == 2  || v_order_dir == 5  || v_order_dir == 6  ||  v_order_dir == 8  || v_order_dir == 7) && ((v_stock_type > 20 && v_stock_type < 50) || v_strike_amt<= 0))
    {

      // set @成交金额# = @成交价格# * @成交数量#;
      v_strike_amt = v_strike_price * v_strike_qty;

    }
    // elseif @市场编号# = 《市场编号-沪港通证券交易所》 or @市场编号# = 《市场编号-深港通证券交易所》 then
    else if (v_exch_no == 3 || v_exch_no == 4)
    {
      //港股交易，为了解决报盘回来的成交金额可能为人民币，也可能为港币，故此修改

      // set @成交金额# = @成交价格# * @成交数量#;
      v_strike_amt = v_strike_price * v_strike_qty;
    // end if;
    }

    ////处理成交回报，不处理费用
    //调用过程[事务_产品_交易接口_获取融资融券卖券还款方式]
    //组织事务请求
    if(lpTSCall1Ans7)
    {
      lpTSCall1Ans7->FreeMsg();
      lpTSCall1Ans7=NULL;
    }
    lpTSCall1Req7=glpFastMsgFactory->CreateFastMessage("prodT.8.112", 0);
    lpTSCall1Req7->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req7->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req7->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req7->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req7->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req7->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req7->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req7->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req7->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req7->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req7->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req7->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    glpTSSubcallSerives->SubCall(lpTSCall1Req7, &lpTSCall1Ans7, 5000);
    if(!lpTSCall1Ans7)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[prodT.8.112]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans7->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
    v_fina_return_type = lpTSCall1Ans7->GetInt32(LDBIZ_FINA_RETURN_TYPE_INT);
    v_sell_auto_back_debt = lpTSCall1Ans7->GetInt32(LDBIZ_SELL_AUTO_BACK_DEBT_INT);


    // if @成交处理方式# = 《成交处理方式-汇总》 then
    if (v_strike_deal_type == 2)
    {

        // set @总成交金额# = @成交金额#;
        v_total_strike_amt = v_strike_amt;

        // set @总成交数量# = @成交数量#;
        v_total_strike_qty = v_strike_qty;
        //调用过程[事务_交易证券_报盘_处理融资融券汇总成交回报]
        //组织事务请求
        if(lpTSCall1Ans8)
        {
          lpTSCall1Ans8->FreeMsg();
          lpTSCall1Ans8=NULL;
        }
        lpTSCall1Req8=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.136", 0);
        lpTSCall1Req8->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req8->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req8->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req8->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req8->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req8->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req8->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req8->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req8->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req8->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req8->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpTSCall1Req8->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req8->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
        lpTSCall1Req8->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpTSCall1Req8->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
        lpTSCall1Req8->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpTSCall1Req8->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpTSCall1Req8->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpTSCall1Req8->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
        lpTSCall1Req8->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
        lpTSCall1Req8->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
        lpTSCall1Req8->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req8->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req8->SetDouble(LDBIZ_TOTAL_STRIKE_QTY_FLOAT,v_total_strike_qty);
        lpTSCall1Req8->SetDouble(LDBIZ_TOTAL_STRIKE_AMT_FLOAT,v_total_strike_amt);
        lpTSCall1Req8->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        lpTSCall1Req8->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
        lpTSCall1Req8->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
        lpTSCall1Req8->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
        lpTSCall1Req8->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
        lpTSCall1Req8->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
        lpTSCall1Req8->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
        lpTSCall1Req8->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpTSCall1Req8->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpTSCall1Req8->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
        lpTSCall1Req8->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpTSCall1Req8->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpTSCall1Req8->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
        lpTSCall1Req8->SetInt64(LDBIZ_RSP_ID_INT64,v_rsp_id);
        lpTSCall1Req8->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req8->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
        lpTSCall1Req8->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
        lpTSCall1Req8->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
        lpTSCall1Req8->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpTSCall1Req8->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        lpTSCall1Req8->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
        lpTSCall1Req8->SetInt32(LDBIZ_FINA_RETURN_TYPE_INT,v_fina_return_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req8, &lpTSCall1Ans8, 5000);
        if(!lpTSCall1Ans8)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.136]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans8->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
        v_strike_id = lpTSCall1Ans8->GetInt64(LDBIZ_STRIKE_ID_INT64);
        v_co_no = lpTSCall1Ans8->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans8->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans8->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans8->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_stock_acco_no = lpTSCall1Ans8->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans8->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        v_order_date = lpTSCall1Ans8->GetInt32(LDBIZ_ORDER_DATE_INT);
        v_order_batch_no = lpTSCall1Ans8->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
        v_report_time = lpTSCall1Ans8->GetInt32(LDBIZ_REPORT_TIME_INT);
        v_comm_date = lpTSCall1Ans8->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_id = lpTSCall1Ans8->GetInt64(LDBIZ_COMM_ID_INT64);
        v_comm_batch_no = lpTSCall1Ans8->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_executor = lpTSCall1Ans8->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_busi_opor_no = lpTSCall1Ans8->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
        strcpy(v_order_oper_way, lpTSCall1Ans8->GetString(LDBIZ_ORDER_OPER_WAY_STR));
        strcpy(v_target_code, lpTSCall1Ans8->GetString(LDBIZ_TARGET_CODE_STR));
        v_strike_amt = lpTSCall1Ans8->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
        v_strike_qty = lpTSCall1Ans8->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
        v_order_frozen_amt = lpTSCall1Ans8->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
        v_order_frozen_qty = lpTSCall1Ans8->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
        v_strike_bond_accr_intrst = lpTSCall1Ans8->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
        v_wtdraw_qty = lpTSCall1Ans8->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
        v_cost_calc_type = lpTSCall1Ans8->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
        strcpy(v_order_status, lpTSCall1Ans8->GetString(LDBIZ_ORDER_STATUS_STR));
        v_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_UPDATE_TIMES_INT);
        v_strike_occur_amt = lpTSCall1Ans8->GetDouble(LDBIZ_STRIKE_OCCUR_AMT_FLOAT);
        v_strike_occur_qty = lpTSCall1Ans8->GetDouble(LDBIZ_STRIKE_OCCUR_QTY_FLOAT);
        v_trade_occur_amt = lpTSCall1Ans8->GetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT);
        v_trade_occur_qty = lpTSCall1Ans8->GetDouble(LDBIZ_TRADE_OCCUR_QTY_FLOAT);
        v_open_posi_date = lpTSCall1Ans8->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
        v_original_order_dir = lpTSCall1Ans8->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);
        strcpy(v_detail_posi_id_str, lpTSCall1Ans8->GetString(LDBIZ_DETAIL_POSI_ID_STR_STR));
        strcpy(v_stock_code_no_str, lpTSCall1Ans8->GetString(LDBIZ_STOCK_CODE_NO_STR_STR));


        // set @临时_成交金额# = @总成交金额# - @成交金额#;
        v_tmp_strike_amt = v_total_strike_amt - v_strike_amt;

        // set @临时_成交数量# = @总成交数量# - @成交数量#;
        v_tmp_strike_qty = v_total_strike_qty - v_strike_qty;

        // set @当笔成交金额# = @临时_成交金额#;
        v_curr_strike_amt = v_tmp_strike_amt;

        // set @当笔成交数量# = @临时_成交数量#;
        v_curr_strike_qty = v_tmp_strike_qty;

        // set @临时_成交价格# = @临时_成交金额# / @临时_成交数量#;
        v_tmp_strike_price = v_tmp_strike_amt / v_tmp_strike_qty;
    }
    // else
    else
    {

        //调用过程[事务_交易证券_报盘_处理融资融券成交回报]
        //组织事务请求
        if(lpTSCall1Ans9)
        {
          lpTSCall1Ans9->FreeMsg();
          lpTSCall1Ans9=NULL;
        }
        lpTSCall1Req9=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.132", 0);
        lpTSCall1Req9->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req9->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req9->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req9->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req9->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req9->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req9->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req9->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req9->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req9->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req9->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpTSCall1Req9->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req9->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
        lpTSCall1Req9->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpTSCall1Req9->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
        lpTSCall1Req9->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpTSCall1Req9->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
        lpTSCall1Req9->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpTSCall1Req9->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
        lpTSCall1Req9->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
        lpTSCall1Req9->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
        lpTSCall1Req9->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req9->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req9->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpTSCall1Req9->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpTSCall1Req9->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
        lpTSCall1Req9->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
        lpTSCall1Req9->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
        lpTSCall1Req9->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
        lpTSCall1Req9->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
        lpTSCall1Req9->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
        lpTSCall1Req9->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
        lpTSCall1Req9->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpTSCall1Req9->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpTSCall1Req9->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
        lpTSCall1Req9->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpTSCall1Req9->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpTSCall1Req9->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
        lpTSCall1Req9->SetInt64(LDBIZ_RSP_ID_INT64,v_rsp_id);
        lpTSCall1Req9->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req9->SetString(LDBIZ_SYS_CONFIG_STR_STR,v_sys_config_str);
        lpTSCall1Req9->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
        lpTSCall1Req9->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
        lpTSCall1Req9->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpTSCall1Req9->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        lpTSCall1Req9->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
        lpTSCall1Req9->SetInt32(LDBIZ_FINA_RETURN_TYPE_INT,v_fina_return_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req9, &lpTSCall1Ans9, 5000);
        if(!lpTSCall1Ans9)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.132]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans9->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
        v_strike_id = lpTSCall1Ans9->GetInt64(LDBIZ_STRIKE_ID_INT64);
        v_co_no = lpTSCall1Ans9->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans9->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans9->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans9->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_stock_acco_no = lpTSCall1Ans9->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans9->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        strcpy(v_target_code, lpTSCall1Ans9->GetString(LDBIZ_TARGET_CODE_STR));
        v_order_date = lpTSCall1Ans9->GetInt32(LDBIZ_ORDER_DATE_INT);
        v_order_batch_no = lpTSCall1Ans9->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
        v_report_time = lpTSCall1Ans9->GetInt32(LDBIZ_REPORT_TIME_INT);
        v_comm_date = lpTSCall1Ans9->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_id = lpTSCall1Ans9->GetInt64(LDBIZ_COMM_ID_INT64);
        v_comm_batch_no = lpTSCall1Ans9->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_executor = lpTSCall1Ans9->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_external_no = lpTSCall1Ans9->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
        v_busi_opor_no = lpTSCall1Ans9->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
        strcpy(v_order_oper_way, lpTSCall1Ans9->GetString(LDBIZ_ORDER_OPER_WAY_STR));
        v_total_strike_amt = lpTSCall1Ans9->GetDouble(LDBIZ_TOTAL_STRIKE_AMT_FLOAT);
        v_total_strike_qty = lpTSCall1Ans9->GetDouble(LDBIZ_TOTAL_STRIKE_QTY_FLOAT);
        v_cost_calc_type = lpTSCall1Ans9->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
        v_order_frozen_amt = lpTSCall1Ans9->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
        v_order_frozen_qty = lpTSCall1Ans9->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
        v_strike_bond_accr_intrst = lpTSCall1Ans9->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
        v_wtdraw_qty = lpTSCall1Ans9->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
        strcpy(v_order_status, lpTSCall1Ans9->GetString(LDBIZ_ORDER_STATUS_STR));
        v_update_times = lpTSCall1Ans9->GetInt32(LDBIZ_UPDATE_TIMES_INT);
        v_strike_occur_amt = lpTSCall1Ans9->GetDouble(LDBIZ_STRIKE_OCCUR_AMT_FLOAT);
        v_strike_occur_qty = lpTSCall1Ans9->GetDouble(LDBIZ_STRIKE_OCCUR_QTY_FLOAT);
        v_trade_occur_amt = lpTSCall1Ans9->GetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT);
        v_trade_occur_qty = lpTSCall1Ans9->GetDouble(LDBIZ_TRADE_OCCUR_QTY_FLOAT);
        v_open_posi_date = lpTSCall1Ans9->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
        v_original_order_dir = lpTSCall1Ans9->GetInt32(LDBIZ_ORIGINAL_ORDER_DIR_INT);


        // set @当笔成交金额# = @临时_成交金额#;
        v_curr_strike_amt = v_tmp_strike_amt;

        // set @当笔成交数量# = @临时_成交数量#;
        v_curr_strike_qty = v_tmp_strike_qty;

        // set @成交金额# = @总成交金额# - @临时_成交金额#;
        v_strike_amt = v_total_strike_amt - v_tmp_strike_amt;

        // set @成交数量# = @总成交数量# - @临时_成交数量#;
        v_strike_qty = v_total_strike_qty - v_tmp_strike_qty;
    // end if;
    }

    //保证订单方向从订单表获取，防止成交回来的订单方向不正确，导致资金持仓处理有问题

    // set @订单方向# = @原订单方向#;
    v_order_dir = v_original_order_dir;

    // set @临时_更新次数# = @更新次数#;
    v_tmp_update_times = v_update_times;
    //处理成交回报后，再处理费用，以避免并发时导致的费用计算所获取的成交数量不一致
    //计算原费用

    // set @临时_全部费用# = 0;
    v_tmp_all_fee = 0;

    // set @临时_交易佣金# = 0;
    v_tmp_trade_commis = 0;

    // set @临时_印花税# = 0;
    v_tmp_stamp_tax = 0;

    // set @临时_过户费# = 0;
    v_tmp_trans_fee = 0;

    // set @临时_经手费# = 0;
    v_tmp_brkage_fee = 0;

    // set @临时_证管费# = 0;
    v_tmp_SEC_charges = 0;

    // set @临时_其他费用# = 0;
    v_tmp_other_fee = 0;

    // set @临时_其他佣金# = 0;
    v_tmp_other_commis = 0;

    // set @临时_交易费# = 0;
    v_tmp_trade_cost_fee = 0;

    // set @临时_交易系统使用费# = 0;
    v_tmp_trade_system_use_fee = 0;

    // set @临时_交易征费# = 0;
    v_tmp_trade_tax = 0;

    // set @临时_股份交收费# = 0;
    v_tmp_stock_settle_fee = 0;

    // if @成交数量# > 0 then
    if (v_strike_qty > 0)
    {

        // set @成交价格# = @成交金额# / @成交数量#;
        v_strike_price = v_strike_amt / v_strike_qty;
        //调用过程[事务_公共_公共接口_计算证券成交费用]
        //组织事务请求
        if(lpTSCall1Ans10)
        {
          lpTSCall1Ans10->FreeMsg();
          lpTSCall1Ans10=NULL;
        }
        lpTSCall1Req10=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
        lpTSCall1Req10->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req10->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req10->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req10->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req10->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req10->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req10->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req10->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req10->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req10->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req10->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req10->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req10->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpTSCall1Req10->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req10->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpTSCall1Req10->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req10->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpTSCall1Req10->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
        lpTSCall1Req10->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpTSCall1Req10->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpTSCall1Req10->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        glpTSSubcallSerives->SubCall(lpTSCall1Req10, &lpTSCall1Ans10, 5000);
        if(!lpTSCall1Ans10)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans10->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
        v_trade_commis = lpTSCall1Ans10->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
        v_all_fee = lpTSCall1Ans10->GetDouble(LDBIZ_ALL_FEE_FLOAT);
        v_stamp_tax = lpTSCall1Ans10->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
        v_trans_fee = lpTSCall1Ans10->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
        v_brkage_fee = lpTSCall1Ans10->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
        v_SEC_charges = lpTSCall1Ans10->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
        v_other_fee = lpTSCall1Ans10->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
        v_other_commis = lpTSCall1Ans10->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
        v_trade_tax = lpTSCall1Ans10->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
        v_trade_cost_fee = lpTSCall1Ans10->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
        v_trade_system_use_fee = lpTSCall1Ans10->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
        v_stock_settle_fee = lpTSCall1Ans10->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);


        // set @临时_全部费用# = @全部费用#;
        v_tmp_all_fee = v_all_fee;

        // set @临时_交易佣金# = @交易佣金#;
        v_tmp_trade_commis = v_trade_commis;

        // set @临时_印花税# = @印花税#;
        v_tmp_stamp_tax = v_stamp_tax;

        // set @临时_过户费# = @过户费#;
        v_tmp_trans_fee = v_trans_fee;

        // set @临时_经手费# = @经手费#;
        v_tmp_brkage_fee = v_brkage_fee;

        // set @临时_证管费# = @证管费#;
        v_tmp_SEC_charges = v_SEC_charges;

        // set @临时_其他费用# = @其他费用#;
        v_tmp_other_fee = v_other_fee;

        // set @临时_其他佣金# = @其他佣金#;
        v_tmp_other_commis = v_other_commis;

        // set @临时_交易费# = @交易费#;
        v_tmp_trade_cost_fee = v_trade_cost_fee;

        // set @临时_交易系统使用费# = @交易系统使用费#;
        v_tmp_trade_system_use_fee = v_trade_system_use_fee;

        // set @临时_交易征费# = @交易征费#;
        v_tmp_trade_tax = v_trade_tax;

        // set @临时_股份交收费# = @股份交收费#;
        v_tmp_stock_settle_fee = v_stock_settle_fee;
    // end if;
    }

    //计算新费用

    // set @成交价格# = @总成交金额#/ @总成交数量#;
    v_strike_price = v_total_strike_amt/ v_total_strike_qty;

    // set @成交数量# = @总成交数量#;
    v_strike_qty = v_total_strike_qty;
    //调用过程[事务_公共_公共接口_计算证券成交费用]
    //组织事务请求
    if(lpTSCall1Ans11)
    {
      lpTSCall1Ans11->FreeMsg();
      lpTSCall1Ans11=NULL;
    }
    lpTSCall1Req11=glpFastMsgFactory->CreateFastMessage("pubT.24.204", 0);
    lpTSCall1Req11->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req11->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req11->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req11->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req11->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req11->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req11->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req11->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req11->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req11->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req11->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req11->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req11->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpTSCall1Req11->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req11->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpTSCall1Req11->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpTSCall1Req11->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpTSCall1Req11->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpTSCall1Req11->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpTSCall1Req11->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpTSCall1Req11->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    glpTSSubcallSerives->SubCall(lpTSCall1Req11, &lpTSCall1Ans11, 5000);
    if(!lpTSCall1Ans11)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.204]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans11->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
    v_trade_commis = lpTSCall1Ans11->GetDouble(LDBIZ_TRADE_COMMIS_FLOAT);
    v_all_fee = lpTSCall1Ans11->GetDouble(LDBIZ_ALL_FEE_FLOAT);
    v_stamp_tax = lpTSCall1Ans11->GetDouble(LDBIZ_STAMP_TAX_FLOAT);
    v_trans_fee = lpTSCall1Ans11->GetDouble(LDBIZ_TRANS_FEE_FLOAT);
    v_brkage_fee = lpTSCall1Ans11->GetDouble(LDBIZ_BRKAGE_FEE_FLOAT);
    v_SEC_charges = lpTSCall1Ans11->GetDouble(LDBIZ_SEC_CHARGES_FLOAT);
    v_other_fee = lpTSCall1Ans11->GetDouble(LDBIZ_OTHER_FEE_FLOAT);
    v_other_commis = lpTSCall1Ans11->GetDouble(LDBIZ_OTHER_COMMIS_FLOAT);
    v_trade_tax = lpTSCall1Ans11->GetDouble(LDBIZ_TRADE_TAX_FLOAT);
    v_trade_cost_fee = lpTSCall1Ans11->GetDouble(LDBIZ_TRADE_COST_FEE_FLOAT);
    v_trade_system_use_fee = lpTSCall1Ans11->GetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT);
    v_stock_settle_fee = lpTSCall1Ans11->GetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT);

    //计算费用差
    //第一笔或者非港股通业务，【临时_交易系统使用费】会为0，第一笔之后的港股通业务，【临时_交易系统使用费】会大于0

    // if @临时_交易系统使用费# > 0 then
    if (v_tmp_trade_system_use_fee > 0)
    {

        // set @全部费用# = @全部费用# - @临时_全部费用# + @临时_交易系统使用费#;
        v_all_fee = v_all_fee - v_tmp_all_fee + v_tmp_trade_system_use_fee;
        //第一笔取自【交易系统使用费】，其余取自【临时_交易系统使用费】

        // set @交易系统使用费# = @临时_交易系统使用费#;
        v_trade_system_use_fee = v_tmp_trade_system_use_fee;
    }
    // else
    else
    {


        // set @全部费用# = @全部费用# - @临时_全部费用#;
        v_all_fee = v_all_fee - v_tmp_all_fee;
    // end if;
    }


    // set @交易佣金# = @交易佣金# - @临时_交易佣金#;
    v_trade_commis = v_trade_commis - v_tmp_trade_commis;

    // set @印花税# = @印花税# - @临时_印花税#;
    v_stamp_tax = v_stamp_tax - v_tmp_stamp_tax;

    // set @过户费# = @过户费# - @临时_过户费#;
    v_trans_fee = v_trans_fee - v_tmp_trans_fee;

    // set @经手费# = @经手费# - @临时_经手费#;
    v_brkage_fee = v_brkage_fee - v_tmp_brkage_fee;

    // set @证管费# = @证管费# - @临时_证管费#;
    v_SEC_charges = v_SEC_charges - v_tmp_SEC_charges;

    // set @其他费用# = @其他费用# - @临时_其他费用#;
    v_other_fee = v_other_fee - v_tmp_other_fee;

    // set @其他佣金# = @其他佣金# - @临时_其他佣金#;
    v_other_commis = v_other_commis - v_tmp_other_commis;

    // set @交易费# = @交易费# - @临时_交易费#;
    v_trade_cost_fee = v_trade_cost_fee - v_tmp_trade_cost_fee;

    // set @交易征费# = @交易征费# - @临时_交易征费#;
    v_trade_tax = v_trade_tax - v_tmp_trade_tax;

    // set @股份交收费# = @股份交收费# - @临时_股份交收费#;
    v_stock_settle_fee = v_stock_settle_fee - v_tmp_stock_settle_fee;
    //费用处理

    // set @成交价格# = @临时_成交价格#;
    v_strike_price = v_tmp_strike_price;

    // set @成交金额# = @临时_成交金额#;
    v_strike_amt = v_tmp_strike_amt;

    // set @成交数量# = @临时_成交数量#;
    v_strike_qty = v_tmp_strike_qty;

    // if @订单方向# = 《订单方向-融资买入》 or @订单方向# = 《订单方向-融券卖出》 or  @订单方向# = 《订单方向-卖券还款》  or  @订单方向# = 《订单方向-买券还券》 then
    if (v_order_dir == 5 || v_order_dir == 6 ||  v_order_dir == 7  ||  v_order_dir == 8)
    {
        //调用过程[事务_交易证券_报盘_处理融资融券成交回报费用]
        //组织事务请求
        if(lpTSCall1Ans12)
        {
          lpTSCall1Ans12->FreeMsg();
          lpTSCall1Ans12=NULL;
        }
        lpTSCall1Req12=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.135", 0);
        lpTSCall1Req12->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req12->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req12->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req12->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req12->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req12->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req12->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req12->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req12->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req12->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req12->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req12->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req12->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req12->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
        lpTSCall1Req12->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpTSCall1Req12->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req12->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpTSCall1Req12->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
        lpTSCall1Req12->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req12->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpTSCall1Req12->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req12->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
        lpTSCall1Req12->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
        lpTSCall1Req12->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req12->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpTSCall1Req12->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
        lpTSCall1Req12->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req12->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpTSCall1Req12->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpTSCall1Req12->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req12->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpTSCall1Req12->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
        lpTSCall1Req12->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
        lpTSCall1Req12->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
        lpTSCall1Req12->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
        lpTSCall1Req12->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
        lpTSCall1Req12->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
        lpTSCall1Req12->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
        lpTSCall1Req12->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
        lpTSCall1Req12->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
        lpTSCall1Req12->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
        lpTSCall1Req12->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
        lpTSCall1Req12->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
        lpTSCall1Req12->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
        lpTSCall1Req12->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
        lpTSCall1Req12->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
        lpTSCall1Req12->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
        lpTSCall1Req12->SetString(LDBIZ_TARGET_CODE_STR,v_target_code);
        lpTSCall1Req12->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
        lpTSCall1Req12->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpTSCall1Req12->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
        lpTSCall1Req12->SetInt32(LDBIZ_INTRST_DAYS_INT,v_intrst_days);
        lpTSCall1Req12->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpTSCall1Req12->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpTSCall1Req12->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
        lpTSCall1Req12->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
        lpTSCall1Req12->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
        lpTSCall1Req12->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
        lpTSCall1Req12->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
        lpTSCall1Req12->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        lpTSCall1Req12->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
        lpTSCall1Req12->SetInt32(LDBIZ_COST_CALC_TYPE_INT,v_cost_calc_type);
        lpTSCall1Req12->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpTSCall1Req12->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpTSCall1Req12->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
        lpTSCall1Req12->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpTSCall1Req12->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpTSCall1Req12->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
        lpTSCall1Req12->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
        lpTSCall1Req12->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
        lpTSCall1Req12->SetDouble(LDBIZ_STRIKE_OCCUR_AMT_FLOAT,v_strike_occur_amt);
        lpTSCall1Req12->SetDouble(LDBIZ_STRIKE_OCCUR_QTY_FLOAT,v_strike_occur_qty);
        lpTSCall1Req12->SetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT,v_trade_occur_amt);
        lpTSCall1Req12->SetDouble(LDBIZ_TRADE_OCCUR_QTY_FLOAT,v_trade_occur_qty);
        lpTSCall1Req12->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpTSCall1Req12->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        lpTSCall1Req12->SetString(LDBIZ_DETAIL_POSI_ID_STR_STR,v_detail_posi_id_str);
        lpTSCall1Req12->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpTSCall1Req12->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
        lpTSCall1Req12->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
        lpTSCall1Req12->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpTSCall1Req12->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpTSCall1Req12->SetInt32(LDBIZ_FINA_RETURN_TYPE_INT,v_fina_return_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req12, &lpTSCall1Ans12, 5000);
        if(!lpTSCall1Ans12)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.135]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans12->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans12->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
        v_debt_type = lpTSCall1Ans12->GetInt32(LDBIZ_DEBT_TYPE_INT);
        strcpy(v_stock_code_no_str, lpTSCall1Ans12->GetString(LDBIZ_STOCK_CODE_NO_STR_STR));
        strcpy(v_exgp_detail_posi_id_str, lpTSCall1Ans12->GetString(LDBIZ_EXGP_DETAIL_POSI_ID_STR_STR));
        strcpy(v_asac_detail_posi_id_str, lpTSCall1Ans12->GetString(LDBIZ_ASAC_DETAIL_POSI_ID_STR_STR));
        strcpy(v_asac_stock_code_no_str, lpTSCall1Ans12->GetString(LDBIZ_ASAC_STOCK_CODE_NO_STR_STR));

    }
    // else
    else
    {

        //调用过程[事务_交易证券_报盘_处理成交回报费用]
        //组织事务请求
        if(lpTSCall1Ans13)
        {
          lpTSCall1Ans13->FreeMsg();
          lpTSCall1Ans13=NULL;
        }
        lpTSCall1Req13=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.23", 0);
        lpTSCall1Req13->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req13->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req13->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req13->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req13->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req13->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req13->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req13->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req13->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req13->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req13->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req13->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req13->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req13->SetString(LDBIZ_CRNCY_TYPE_STR,v_crncy_type);
        lpTSCall1Req13->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpTSCall1Req13->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpTSCall1Req13->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpTSCall1Req13->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
        lpTSCall1Req13->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req13->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
        lpTSCall1Req13->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req13->SetInt32(LDBIZ_TARGET_CODE_NO_INT,v_target_code_no);
        lpTSCall1Req13->SetInt32(LDBIZ_TRADE_CODE_NO_INT,v_trade_code_no);
        lpTSCall1Req13->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
        lpTSCall1Req13->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpTSCall1Req13->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
        lpTSCall1Req13->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpTSCall1Req13->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpTSCall1Req13->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpTSCall1Req13->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
        lpTSCall1Req13->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpTSCall1Req13->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
        lpTSCall1Req13->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
        lpTSCall1Req13->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
        lpTSCall1Req13->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
        lpTSCall1Req13->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
        lpTSCall1Req13->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
        lpTSCall1Req13->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
        lpTSCall1Req13->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
        lpTSCall1Req13->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
        lpTSCall1Req13->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
        lpTSCall1Req13->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
        lpTSCall1Req13->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
        lpTSCall1Req13->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
        lpTSCall1Req13->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
        lpTSCall1Req13->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
        lpTSCall1Req13->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
        lpTSCall1Req13->SetString(LDBIZ_TARGET_CODE_STR,v_target_code);
        lpTSCall1Req13->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
        lpTSCall1Req13->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpTSCall1Req13->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
        lpTSCall1Req13->SetInt32(LDBIZ_INTRST_DAYS_INT,v_intrst_days);
        lpTSCall1Req13->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpTSCall1Req13->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpTSCall1Req13->SetInt32(LDBIZ_REPO_DAYS_INT,v_repo_days);
        lpTSCall1Req13->SetInt32(LDBIZ_REPO_CALE_DAYS_INT,v_repo_cale_days);
        lpTSCall1Req13->SetInt32(LDBIZ_REPO_BACK_DATE_INT,v_repo_back_date);
        lpTSCall1Req13->SetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT,v_capit_reback_days);
        lpTSCall1Req13->SetInt32(LDBIZ_POSI_REBACK_DAYS_INT,v_posi_reback_days);
        lpTSCall1Req13->SetInt32(LDBIZ_BUSI_OPOR_NO_INT,v_busi_opor_no);
        lpTSCall1Req13->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
        lpTSCall1Req13->SetInt32(LDBIZ_COST_CALC_TYPE_INT,v_cost_calc_type);
        lpTSCall1Req13->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpTSCall1Req13->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpTSCall1Req13->SetDouble(LDBIZ_EXGP_CURR_QTY_FLOAT,v_exgp_curr_qty);
        lpTSCall1Req13->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpTSCall1Req13->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpTSCall1Req13->SetDouble(LDBIZ_ASAC_CURR_QTY_FLOAT,v_asac_curr_qty);
        lpTSCall1Req13->SetDouble(LDBIZ_BUY_REF_RATE_FLOAT,v_buy_ref_rate);
        lpTSCall1Req13->SetDouble(LDBIZ_SELL_REF_RATE_FLOAT,v_sell_ref_rate);
        lpTSCall1Req13->SetDouble(LDBIZ_TRADE_OCCUR_AMT_FLOAT,v_trade_occur_amt);
        lpTSCall1Req13->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
        lpTSCall1Req13->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
        glpTSSubcallSerives->SubCall(lpTSCall1Req13, &lpTSCall1Ans13, 5000);
        if(!lpTSCall1Ans13)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.23]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans13->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans13->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans13->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans13->GetString(LDBIZ_ERROR_INFO_STR));

    // end if;
    }


    // set @当笔成交价格# = @临时_成交价格#;
    v_curr_strike_price = v_tmp_strike_price;

    // set @当笔成交金额# = @临时_成交金额#;
    v_curr_strike_amt = v_tmp_strike_amt;

    // set @当笔成交数量# = @临时_成交数量#;
    v_curr_strike_qty = v_tmp_strike_qty;

    // set @操作员编号# =@业务操作员编号#;
    v_opor_no =v_busi_opor_no;

    // set @更新次数# = 1;
    v_update_times = 1;

    // set @记录有效标志# =《记录有效标志-有效》;
    v_record_valid_flag =1;

    // [主动推送][secu.rptstrike][证券主推_报盘_成交主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.33", 0);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpPubMsg->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpPubMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_PRICE_FLOAT,v_strike_price);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetDouble(LDBIZ_STAMP_TAX_FLOAT,v_stamp_tax);
    lpPubMsg->SetDouble(LDBIZ_TRANS_FEE_FLOAT,v_trans_fee);
    lpPubMsg->SetDouble(LDBIZ_BRKAGE_FEE_FLOAT,v_brkage_fee);
    lpPubMsg->SetDouble(LDBIZ_SEC_CHARGES_FLOAT,v_SEC_charges);
    lpPubMsg->SetDouble(LDBIZ_OTHER_FEE_FLOAT,v_other_fee);
    lpPubMsg->SetDouble(LDBIZ_TRADE_COMMIS_FLOAT,v_trade_commis);
    lpPubMsg->SetDouble(LDBIZ_OTHER_COMMIS_FLOAT,v_other_commis);
    lpPubMsg->SetDouble(LDBIZ_TRADE_TAX_FLOAT,v_trade_tax);
    lpPubMsg->SetDouble(LDBIZ_TRADE_COST_FEE_FLOAT,v_trade_cost_fee);
    lpPubMsg->SetDouble(LDBIZ_TRADE_SYSTEM_USE_FEE_FLOAT,v_trade_system_use_fee);
    lpPubMsg->SetDouble(LDBIZ_STOCK_SETTLE_FEE_FLOAT,v_stock_settle_fee);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
    lpPubMsg->SetInt32(LDBIZ_RECORD_VALID_FLAG_INT,v_record_valid_flag);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.rptstrike", lpPubMsg);


    // set @成交金额# = @总成交金额#;
    v_strike_amt = v_total_strike_amt;

    // set @成交数量# = @总成交数量#;
    v_strike_qty = v_total_strike_qty;

    // set @更新次数# = @临时_更新次数#;
    v_update_times = v_tmp_update_times;

    // set @撤单状态# = "0";
    strcpy(v_wtdraw_status,"0");

    // [主动推送][secu.order][证券主推_订单_订单主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
    lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
    lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);

    //调用过程[事务_交易证券_主推接口_获取汇总订单成交信息]
    //组织事务请求
    if(lpTSCall1Ans14)
    {
      lpTSCall1Ans14->FreeMsg();
      lpTSCall1Ans14=NULL;
    }
    lpTSCall1Req14=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.21", 0);
    lpTSCall1Req14->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req14->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req14->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req14->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req14->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req14->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req14->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req14->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req14->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req14->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpTSCall1Req14->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpTSCall1Req14->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpTSCall1Req14->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    glpTSSubcallSerives->SubCall(lpTSCall1Req14, &lpTSCall1Ans14, 5000);
    if(!lpTSCall1Ans14)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.21]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans14->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans14->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans14->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans14->GetString(LDBIZ_ERROR_INFO_STR));
    v_sum_order_row_id = lpTSCall1Ans14->GetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64);
    v_sum_order_opor_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT);
    v_sum_order_co_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_CO_NO_INT);
    v_sum_order_pd_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_PD_NO_INT);
    v_sum_order_exch_group_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT);
    v_sum_order_asset_acco_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT);
    v_sum_order_pass_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT);
    strcpy(v_sum_order_exch_crncy_type, lpTSCall1Ans14->GetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR));
    v_sum_order_stock_code_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT);
    v_sum_order_trade_code_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT);
    v_sum_order_target_code_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT);
    v_sum_order_external_no = lpTSCall1Ans14->GetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64);
    v_sum_order_date = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_DATE_INT);
    v_sum_order_batch_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT);
    v_sum_order_dir = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_DIR_INT);
    v_sum_order_price_type = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT);
    v_sum_order_price = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT);
    v_sum_order_qty = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT);
    strcpy(v_order_sum_status, lpTSCall1Ans14->GetString(LDBIZ_ORDER_SUM_STATUS_STR));
    v_sum_order_wtdraw_qty = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT);
    v_sum_order_waste_qty = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT);
    v_sum_order_strike_amt = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT);
    v_sum_order_strike_qty = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT);
    v_sum_order_strike_aver_price = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT);
    v_sum_order_net_price_flag = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT);
    v_sum_order_bond_accr_intrst = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT);
    v_sum_order_bond_rate_type = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT);
    v_sum_order_par_value = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT);
    v_sum_order_impawn_ratio = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT);
    strcpy(v_sum_order_oper_way, lpTSCall1Ans14->GetString(LDBIZ_SUM_ORDER_OPER_WAY_STR));
    v_sum_order_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT);
    v_sum_strike_row_id = lpTSCall1Ans14->GetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64);
    v_sum_strike_opor_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT);
    v_sum_strike_co_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT);
    v_sum_strike_pd_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT);
    v_sum_strike_exch_group_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT);
    v_sum_strike_asset_acco_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT);
    v_sum_strike_pass_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT);
    strcpy(v_sum_strike_out_acco, lpTSCall1Ans14->GetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR));
    v_sum_strike_stock_acco_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT);
    v_sum_strike_stock_code_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT);
    v_sum_strike_comm_id = lpTSCall1Ans14->GetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64);
    v_sum_strike_report_date = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT);
    strcpy(v_sum_strike_report_no, lpTSCall1Ans14->GetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR));
    v_sum_strike_order_date = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT);
    v_sum_strike_order_id = lpTSCall1Ans14->GetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64);
    v_sum_strike_order_dir = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT);
    v_sum_strike_order_price = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT);
    v_sum_strike_order_qty = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT);
    v_sum_strike_strike_qty = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT);
    v_sum_strike_strike_amt = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT);
    v_sum_strike_all_fee = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT);
    v_sum_strike_stamp_tax = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT);
    v_sum_strike_trans_fee = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT);
    v_sum_strike_brkage_fee = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT);
    v_sum_strike_SEC_charges = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT);
    v_sum_strike_other_fee = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT);
    v_sum_strike_trade_commis = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT);
    v_sum_strike_other_commis = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT);
    v_sum_trade_tax = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT);
    v_sum_trade_cost_fee = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT);
    v_sum_trade_system_use_fee = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT);
    v_sum_stock_settle_fee = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT);
    v_sum_strike_net_price_flag = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT);
    v_sum_strike_bond_accr_intrst = lpTSCall1Ans14->GetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT);
    v_sum_strike_bond_rate_type = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT);
    strcpy(v_sum_strike_order_oper_way, lpTSCall1Ans14->GetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR));
    v_sum_strike_exter_comm_flag = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT);
    v_sum_strike_update_times = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT);
    v_sum_strike_order_batch_no = lpTSCall1Ans14->GetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT);
    v_sum_external_no = lpTSCall1Ans14->GetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64);


    // if @订单批号# <> 0 then
    if (v_order_batch_no != 0)
    {

        // [主动推送][secu.ordertotal][证券主推_订单_订单汇总主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.21", 0);
        lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64,v_sum_order_row_id);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT,v_sum_order_opor_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_CO_NO_INT,v_sum_order_co_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PD_NO_INT,v_sum_order_pd_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT,v_sum_order_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT,v_sum_order_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT,v_sum_order_pass_no);
        lpPubMsg->SetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR,v_sum_order_exch_crncy_type);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT,v_sum_order_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT,v_sum_order_trade_code_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT,v_sum_order_target_code_no);
        lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64,v_sum_order_external_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DATE_INT,v_sum_order_date);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT,v_sum_order_batch_no);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DIR_INT,v_sum_order_dir);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT,v_sum_order_price_type);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT,v_sum_order_price);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT,v_sum_order_qty);
        lpPubMsg->SetString(LDBIZ_ORDER_SUM_STATUS_STR,v_order_sum_status);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT,v_sum_order_wtdraw_qty);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT,v_sum_order_waste_qty);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT,v_sum_order_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT,v_sum_order_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT,v_sum_order_strike_aver_price);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT,v_sum_order_net_price_flag);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT,v_sum_order_bond_accr_intrst);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT,v_sum_order_bond_rate_type);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT,v_sum_order_par_value);
        lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT,v_sum_order_impawn_ratio);
        lpPubMsg->SetString(LDBIZ_SUM_ORDER_OPER_WAY_STR,v_sum_order_oper_way);
        lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT,v_sum_order_update_times);
        glpPubSub_Interface->PubTopics("secu.ordertotal", lpPubMsg);

    // end if;
    }


    // [主动推送][secu.rptstriketotal][证券主推_报盘_成交汇总主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.34", 0);
    lpPubMsg->SetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64,v_sum_strike_row_id);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT,v_sum_strike_opor_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT,v_sum_strike_co_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT,v_sum_strike_pd_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT,v_sum_strike_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT,v_sum_strike_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT,v_sum_strike_pass_no);
    lpPubMsg->SetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR,v_sum_strike_out_acco);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT,v_sum_strike_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT,v_sum_strike_stock_code_no);
    lpPubMsg->SetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64,v_sum_strike_comm_id);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT,v_sum_strike_report_date);
    lpPubMsg->SetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR,v_sum_strike_report_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT,v_sum_strike_order_date);
    lpPubMsg->SetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64,v_sum_strike_order_id);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT,v_sum_strike_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT,v_sum_strike_order_dir);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT,v_sum_strike_order_price);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT,v_sum_strike_order_qty);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT,v_sum_strike_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT,v_sum_strike_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT,v_sum_strike_all_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT,v_sum_strike_stamp_tax);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT,v_sum_strike_trans_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT,v_sum_strike_brkage_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT,v_sum_strike_SEC_charges);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT,v_sum_strike_other_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT,v_sum_strike_trade_commis);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT,v_sum_strike_other_commis);
    lpPubMsg->SetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT,v_sum_trade_tax);
    lpPubMsg->SetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT,v_sum_trade_cost_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT,v_sum_trade_system_use_fee);
    lpPubMsg->SetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT,v_sum_stock_settle_fee);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT,v_sum_strike_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT,v_sum_strike_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT,v_sum_strike_bond_rate_type);
    lpPubMsg->SetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR,v_sum_strike_order_oper_way);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT,v_sum_strike_exter_comm_flag);
    lpPubMsg->SetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64,v_sum_external_no);
    lpPubMsg->SetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT,v_sum_strike_update_times);
    glpPubSub_Interface->PubTopics("secu.rptstriketotal", lpPubMsg);


    // if @指令序号# > 0 then
    if (v_comm_id > 0)
    {
        //调用过程[事务_交易证券_主推接口_获取指令混合信息]
        //组织事务请求
        if(lpTSCall1Ans15)
        {
          lpTSCall1Ans15->FreeMsg();
          lpTSCall1Ans15=NULL;
        }
        lpTSCall1Req15=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
        lpTSCall1Req15->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req15->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req15->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req15->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req15->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req15->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req15->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req15->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req15->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        glpTSSubcallSerives->SubCall(lpTSCall1Req15, &lpTSCall1Ans15, 5000);
        if(!lpTSCall1Ans15)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans15->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans15->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans15->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans15->GetString(LDBIZ_ERROR_INFO_STR));
        v_init_date = lpTSCall1Ans15->GetInt32(LDBIZ_INIT_DATE_INT);
        v_co_no = lpTSCall1Ans15->GetInt32(LDBIZ_CO_NO_INT);
        v_pd_no = lpTSCall1Ans15->GetInt32(LDBIZ_PD_NO_INT);
        v_exch_group_no = lpTSCall1Ans15->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
        v_asset_acco_no = lpTSCall1Ans15->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
        v_pass_no = lpTSCall1Ans15->GetInt32(LDBIZ_PASS_NO_INT);
        strcpy(v_out_acco, lpTSCall1Ans15->GetString(LDBIZ_OUT_ACCO_STR));
        strcpy(v_exch_crncy_type, lpTSCall1Ans15->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
        v_stock_acco_no = lpTSCall1Ans15->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
        v_stock_code_no = lpTSCall1Ans15->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
        v_stock_type = lpTSCall1Ans15->GetInt32(LDBIZ_STOCK_TYPE_INT);
        v_comm_date = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_DATE_INT);
        v_comm_time = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_TIME_INT);
        v_comm_batch_no = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
        v_comm_opor = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_OPOR_INT);
        v_comm_executor = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
        v_comm_dir = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_DIR_INT);
        v_comm_limit_price = lpTSCall1Ans15->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
        v_limit_actual_price = lpTSCall1Ans15->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
        v_comm_qty = lpTSCall1Ans15->GetDouble(LDBIZ_COMM_QTY_FLOAT);
        v_comm_amt = lpTSCall1Ans15->GetDouble(LDBIZ_COMM_AMT_FLOAT);
        v_order_qty = lpTSCall1Ans15->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
        v_comm_cancel_qty = lpTSCall1Ans15->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
        v_strike_amt = lpTSCall1Ans15->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
        v_strike_qty = lpTSCall1Ans15->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
        v_comm_frozen_amt = lpTSCall1Ans15->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
        v_comm_frozen_qty = lpTSCall1Ans15->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
        strcpy(v_strike_status, lpTSCall1Ans15->GetString(LDBIZ_STRIKE_STATUS_STR));
        strcpy(v_comm_status, lpTSCall1Ans15->GetString(LDBIZ_COMM_STATUS_STR));
        v_comm_begin_date = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
        v_comm_end_date = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_END_DATE_INT);
        v_comm_begin_time = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
        v_comm_end_time = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_END_TIME_INT);
        v_comm_comple_date = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
        v_comm_comple_time = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
        v_comm_appr_date = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
        v_comm_appr_time = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
        strcpy(v_comm_appr_status, lpTSCall1Ans15->GetString(LDBIZ_COMM_APPR_STATUS_STR));
        v_comm_appr_oper = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
        strcpy(v_comm_appr_remark, lpTSCall1Ans15->GetString(LDBIZ_COMM_APPR_REMARK_STR));
        v_basket_id = lpTSCall1Ans15->GetInt64(LDBIZ_BASKET_ID_INT64);
        v_net_price_flag = lpTSCall1Ans15->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
        v_bond_accr_intrst = lpTSCall1Ans15->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
        v_bond_rate_type = lpTSCall1Ans15->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
        strcpy(v_comm_oper_way, lpTSCall1Ans15->GetString(LDBIZ_COMM_OPER_WAY_STR));
        v_exter_comm_flag = lpTSCall1Ans15->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
        v_comm_comple_flag = lpTSCall1Ans15->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
        v_strategy_capt_qty = lpTSCall1Ans15->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
        v_strategy_order_qty = lpTSCall1Ans15->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
        strcpy(v_contra_no, lpTSCall1Ans15->GetString(LDBIZ_CONTRA_NO_STR));
        strcpy(v_comm_remark_info, lpTSCall1Ans15->GetString(LDBIZ_COMM_REMARK_INFO_STR));
        v_disp_opor = lpTSCall1Ans15->GetInt32(LDBIZ_DISP_OPOR_INT);
        v_disp_status = lpTSCall1Ans15->GetInt32(LDBIZ_DISP_STATUS_INT);
        v_read_flag = lpTSCall1Ans15->GetInt32(LDBIZ_READ_FLAG_INT);
        v_update_times = lpTSCall1Ans15->GetInt32(LDBIZ_UPDATE_TIMES_INT);
        v_sum_comm_row_id = lpTSCall1Ans15->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
        v_sum_comm_co_no = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
        v_sum_comm_pd_no = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
        v_sum_comm_exch_group_no = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
        v_sum_comm_asset_acco_no = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
        v_sum_comm_pass_no = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
        strcpy(v_sum_comm_out_acco, lpTSCall1Ans15->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
        strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans15->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
        v_sum_comm_stock_code_no = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
        v_sum_comm_date = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
        v_sum_comm_time = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
        v_sum_comm_batch_no = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
        v_sum_comm_opor = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
        v_sum_comm_executor = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
        v_sum_comm_dir = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
        v_sum_comm_limit_price = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
        v_sum_comm_qty = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
        v_sum_comm_amt = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
        v_sum_comm_order_qty = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
        v_sum_comm_cancel_qty = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
        v_sum_comm_await_cancel_qty = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
        v_sum_comm_strike_amt = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
        v_sum_comm_strike_qty = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
        strcpy(v_sum_comm_strike_status, lpTSCall1Ans15->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
        strcpy(v_comm_sum_status, lpTSCall1Ans15->GetString(LDBIZ_COMM_SUM_STATUS_STR));
        v_sum_comm_begin_date = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
        v_sum_comm_end_date = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
        v_sum_comm_begin_time = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
        v_sum_comm_end_time = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
        v_sum_comm_comple_date = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
        v_sum_comm_comple_time = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
        v_sum_comm_max_comm_comple_date = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
        v_sum_comm_max_comm_comple_time = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
        v_sum_comm_appr_date = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
        v_sum_comm_appr_time = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
        v_sum_comm_appr_qty = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
        strcpy(v_comm_sum_approve_status, lpTSCall1Ans15->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
        v_sum_comm_basket_id = lpTSCall1Ans15->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
        v_sum_comm_net_price_flag = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
        v_sum_comm_bond_accr_intrst = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
        v_sum_comm_bond_rate_type = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
        strcpy(v_sum_comm_oper_way, lpTSCall1Ans15->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
        v_sum_comm_exter_comm_flag = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
        v_sum_buy_order_qty = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
        v_sum_sell_order_qty = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
        v_sum_buy_comm_qty = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
        v_sum_sell_comm_qty = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
        v_sum_buy_strike_qty = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
        v_sum_sell_strike_qty = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
        v_sum_buy_strike_amt = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
        v_sum_sell_strike_amt = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
        v_sum_buy_comm_amt = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
        v_sum_sell_comm_amt = lpTSCall1Ans15->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
        strcpy(v_sum_comm_remark_info, lpTSCall1Ans15->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
        v_sum_comm_update_times = lpTSCall1Ans15->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
        strcpy(v_acco_concat_info, lpTSCall1Ans15->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


        // [主动推送][secu.comm][证券主推_指令_指令主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
        lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
        lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
        lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
        lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
        lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
        lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
        lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
        lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
        lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
        lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
        lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
        lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
        lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
        lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
        lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
        lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
        lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
        lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
        lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
        lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
        lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
        lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
        lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
        lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
        lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
        lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
        lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


        // if @指令批号# > 0 then
        if (v_comm_batch_no > 0)
        {

            // set @指令备注信息#= @汇总指令备注信息#;
            strcpy(v_comm_remark_info,v_sum_comm_remark_info);

            // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
            lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
            lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
            lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
            lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
            lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
            lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
            lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
            lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
            glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

        // end if;
        }

    // end if;
    }


    // set @交易组提交质押数量# = 0;
    v_exgp_put_impawn_qty = 0;

    // set @资产账户提交质押数量# = 0;
    v_asac_put_impawn_qty = 0;
    //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
    //组织事务请求
    if(lpTSCall1Ans16)
    {
      lpTSCall1Ans16->FreeMsg();
      lpTSCall1Ans16=NULL;
    }
    lpTSCall1Req16=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
    lpTSCall1Req16->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req16->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req16->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req16->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req16->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req16->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req16->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req16->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req16->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req16->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req16->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req16->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req16->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpTSCall1Req16->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req16->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    glpTSSubcallSerives->SubCall(lpTSCall1Req16, &lpTSCall1Ans16, 5000);
    if(!lpTSCall1Ans16)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans16->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans16->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans16->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans16->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans16->GetString(LDBIZ_ERROR_INFO_STR));
    v_exgp_cash_id = lpTSCall1Ans16->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
    v_exgp_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
    v_exgp_unfroz_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
    v_exgp_comm_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
    v_exgp_comm_unfroz_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
    v_exgp_comm_capt_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
    v_exgp_comm_releas_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
    v_exgp_trade_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
    v_exgp_trade_unfroz_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
    v_exgp_trade_capt_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
    v_exgp_trade_releas_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
    v_exgp_strike_capt_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
    v_exgp_strike_releas_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
    v_exgp_cash_update_times = lpTSCall1Ans16->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
    v_exgp_posi_id = lpTSCall1Ans16->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
    v_exgp_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
    v_exgp_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
    v_exgp_comm_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
    v_exgp_comm_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
    v_exgp_comm_capt_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
    v_exgp_comm_releas_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
    v_exgp_trade_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
    v_exgp_trade_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
    v_exgp_trade_capt_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
    v_exgp_trade_releas_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
    v_exgp_strike_capt_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
    v_exgp_strike_releas_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
    v_exgp_strike_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
    v_exgp_strike_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
    v_exgp_realize_pandl = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
    v_exgp_cost_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
    v_exgp_intrst_cost_amt = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
    v_exgp_intrst_pandl = lpTSCall1Ans16->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
    v_exgp_posi_update_times = lpTSCall1Ans16->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
    v_asac_cash_id = lpTSCall1Ans16->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
    v_asac_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
    v_asac_unfroz_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
    v_asac_comm_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
    v_asac_comm_unfroz_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
    v_asac_comm_capt_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
    v_asac_comm_releas_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
    v_asac_trade_frozen_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
    v_asac_trade_unfroz_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
    v_asac_trade_capt_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
    v_asac_trade_releas_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
    v_asac_strike_capt_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
    v_asac_strike_releas_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
    v_asac_cash_update_times = lpTSCall1Ans16->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
    v_asac_posi_id = lpTSCall1Ans16->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
    v_asac_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
    v_asac_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
    v_asac_comm_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
    v_asac_comm_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
    v_asac_comm_capt_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
    v_asac_comm_releas_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
    v_asac_trade_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
    v_asac_trade_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
    v_asac_trade_capt_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
    v_asac_trade_releas_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
    v_asac_strike_capt_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
    v_asac_strike_releas_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
    v_asac_strike_frozen_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
    v_asac_strike_unfroz_qty = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
    v_asac_realize_pandl = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
    v_asac_cost_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
    v_asac_intrst_cost_amt = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
    v_asac_intrst_pandl = lpTSCall1Ans16->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
    v_asac_posi_update_times = lpTSCall1Ans16->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


    // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
    lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
    lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
    glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


    // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
    lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
    lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
    lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
    lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
    lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
    lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
    glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


    // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
    lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
    lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
    glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


    // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
    lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
    lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
    lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
    lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
    lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
    lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
    glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

    //主推：交易证券_账户_交易组业务资金负债表、交易证券_账户_资产账户业务资金负债表、交易证券_账户_交易组业务持仓负债表、交易证券_账户_资产账户业务持仓负债表、交易证券_            账户_资产账户负债明细表、交易证券_账户_交易组负债明细表
    //调用过程[事务_交易证券_账户_查询交易组业务持仓负债]
    //组织事务请求
    if(lpTSCall1Ans17)
    {
      lpTSCall1Ans17->FreeMsg();
      lpTSCall1Ans17=NULL;
    }
    lpTSCall1Req17=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.76", 0);
    lpTSCall1Req17->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req17->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req17->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req17->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req17->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req17->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req17->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req17->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req17->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req17->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req17->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req17->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req17->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpTSCall1Req17->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpTSCall1Req17->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req17->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
    glpTSSubcallSerives->SubCall(lpTSCall1Req17, &lpTSCall1Ans17, 5000);
    if(!lpTSCall1Ans17)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.76]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans17->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans17->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans17->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans17->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans17->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans17->GetString(LDBIZ_ERROR_INFO_STR));
    v_row_id = lpTSCall1Ans17->GetInt64(LDBIZ_ROW_ID_INT64);
    v_exch_no = lpTSCall1Ans17->GetInt32(LDBIZ_EXCH_NO_INT);
    v_stock_type = lpTSCall1Ans17->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans17->GetInt32(LDBIZ_ASSET_TYPE_INT);
    v_invest_type = lpTSCall1Ans17->GetInt32(LDBIZ_INVEST_TYPE_INT);
    v_debt_fina_buy_strike_qty = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT);
    v_fina_return_strike_qty = lpTSCall1Ans17->GetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT);
    v_debt_loan_sell_strike_qty = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT);
    v_loan_return_strike_qty = lpTSCall1Ans17->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT);
    v_debt_fina_buy_order_qty = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT);
    v_fina_return_order_qty = lpTSCall1Ans17->GetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT);
    v_debt_loan_sell_order_qty = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT);
    v_loan_return_order_qty = lpTSCall1Ans17->GetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT);
    v_debt_fina_buy_comm_qty = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT);
    v_fina_return_comm_qty = lpTSCall1Ans17->GetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT);
    v_debt_loan_sell_comm_qty = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT);
    v_loan_return_comm_qty = lpTSCall1Ans17->GetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT);
    v_debt_fina_buy_strike_amt = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT);
    v_fina_return_strike_amt = lpTSCall1Ans17->GetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT);
    v_debt_loan_sell_strike_amt = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
    v_loan_return_strike_amt = lpTSCall1Ans17->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
    v_debt_fina_buy_order_amt = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT);
    v_fina_return_order_amt = lpTSCall1Ans17->GetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT);
    v_debt_loan_sell_order_amt = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT);
    v_loan_return_order_amt = lpTSCall1Ans17->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
    v_debt_fina_buy_comm_amt = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT);
    v_fina_return_comm_amt = lpTSCall1Ans17->GetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT);
    v_debt_loan_sell_comm_amt = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT);
    v_loan_return_comm_amt = lpTSCall1Ans17->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
    v_debt_strike_fee = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
    v_return_strike_fee = lpTSCall1Ans17->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
    v_debt_interest = lpTSCall1Ans17->GetDouble(LDBIZ_DEBT_INTEREST_FLOAT);
    v_return_interest_amt = lpTSCall1Ans17->GetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT);
    v_update_times = lpTSCall1Ans17->GetInt32(LDBIZ_UPDATE_TIMES_INT);


    // [主动推送][secu.exgpposidebt][证券主推_持仓_交易组业务持仓负债主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.928", 0);
    lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
    lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
    lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
    lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
    lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
    lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
    lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.exgpposidebt", lpPubMsg);

    //调用过程[事务_交易证券_账户_查询资产账户业务持仓负债]
    //组织事务请求
    if(lpTSCall1Ans18)
    {
      lpTSCall1Ans18->FreeMsg();
      lpTSCall1Ans18=NULL;
    }
    lpTSCall1Req18=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.77", 0);
    lpTSCall1Req18->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req18->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req18->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req18->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req18->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req18->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req18->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req18->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req18->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req18->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req18->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req18->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req18->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpTSCall1Req18->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpTSCall1Req18->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
    glpTSSubcallSerives->SubCall(lpTSCall1Req18, &lpTSCall1Ans18, 5000);
    if(!lpTSCall1Ans18)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.77]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans18->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans18->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans18->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans18->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans18->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans18->GetString(LDBIZ_ERROR_INFO_STR));


    // [主动推送][secu.asacposidebt][证券主推_持仓_资产账户业务持仓负债主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.929", 0);
    lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
    lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
    lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
    lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
    lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
    lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
    lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
    lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.asacposidebt", lpPubMsg);

    //调用过程[事务_交易证券_账户_查询资产账户业务资金负债]
    //组织事务请求
    if(lpTSCall1Ans19)
    {
      lpTSCall1Ans19->FreeMsg();
      lpTSCall1Ans19=NULL;
    }
    lpTSCall1Req19=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.75", 0);
    lpTSCall1Req19->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req19->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req19->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req19->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req19->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req19->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req19->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req19->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req19->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req19->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req19->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req19->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req19, &lpTSCall1Ans19, 5000);
    if(!lpTSCall1Ans19)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.75]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans19->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans19->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans19->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans19->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans19->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans19->GetString(LDBIZ_ERROR_INFO_STR));
    v_row_id = lpTSCall1Ans19->GetInt64(LDBIZ_ROW_ID_INT64);
    v_debt_loan_sell_strike_amt = lpTSCall1Ans19->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
    v_debt_strike_fee = lpTSCall1Ans19->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
    v_loan_return_strike_amt = lpTSCall1Ans19->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
    v_loan_return_order_amt = lpTSCall1Ans19->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
    v_loan_return_comm_amt = lpTSCall1Ans19->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
    v_return_strike_fee = lpTSCall1Ans19->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
    v_update_times = lpTSCall1Ans19->GetInt32(LDBIZ_UPDATE_TIMES_INT);


    // [主动推送][secu.asaccapitaldebt][证券主推_资金_资产账户业务资金负债主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.930", 0);
    lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
    lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
    lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.asaccapitaldebt", lpPubMsg);

    //调用过程[事务_交易证券_账户_查询交易组业务资金负债]
    //组织事务请求
    if(lpTSCall1Ans20)
    {
      lpTSCall1Ans20->FreeMsg();
      lpTSCall1Ans20=NULL;
    }
    lpTSCall1Req20=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.74", 0);
    lpTSCall1Req20->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req20->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req20->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req20->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req20->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req20->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req20->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req20->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req20->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req20->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpTSCall1Req20->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpTSCall1Req20->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpTSCall1Req20->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req20, &lpTSCall1Ans20, 5000);
    if(!lpTSCall1Ans20)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.74]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans20->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans20->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans20->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans20->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans20->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans20->GetString(LDBIZ_ERROR_INFO_STR));
    v_row_id = lpTSCall1Ans20->GetInt64(LDBIZ_ROW_ID_INT64);
    v_debt_loan_sell_strike_amt = lpTSCall1Ans20->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
    v_debt_strike_fee = lpTSCall1Ans20->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
    v_loan_return_strike_amt = lpTSCall1Ans20->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
    v_loan_return_order_amt = lpTSCall1Ans20->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
    v_loan_return_comm_amt = lpTSCall1Ans20->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
    v_return_strike_fee = lpTSCall1Ans20->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
    v_update_times = lpTSCall1Ans20->GetInt32(LDBIZ_UPDATE_TIMES_INT);


    // [主动推送][secu.exgpcapitaldebt][证券主推_资金_交易组业务资金负债主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.931", 0);
    lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
    lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
    lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
    lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.exgpcapitaldebt", lpPubMsg);

    //调用过程[事务_交易证券_账户_根据记录序号串查询交易组负债明细结果集]
    //组织事务请求
    if(lpTSCall1Ans21)
    {
      lpTSCall1Ans21->FreeMsg();
      lpTSCall1Ans21=NULL;
    }
    lpTSCall1Req21=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.78", 0);
    lpTSCall1Req21->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req21->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req21->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req21->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req21->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req21->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req21->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req21->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req21->SetString(LDBIZ_DETAIL_POSI_ID_STR_STR,v_detail_posi_id_str);
    glpTSSubcallSerives->SubCall(lpTSCall1Req21, &lpTSCall1Ans21, 5000);
    if(!lpTSCall1Ans21)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.78]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans21->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans21->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans21->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans21->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans21->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans21->GetString(LDBIZ_ERROR_INFO_STR));


    // [获取结果集][lpMainMsg]
    lpMainMsg=lpTSCall1Ans21->GetGroup(LDTAG_NO_RESULTSET);


    // [遍历结果集开始][lpMainMsg]
    iRecordCount = lpMainMsg->GetRecordCount();
    for (int i = 0; i < iRecordCount;i++) 
    {
        IRecord* lpRecord =lpMainMsg->GetRecord(i);
        if(lpRecord)
        {

            //获取记录字段值
            v_row_id = lpRecord->GetInt64(LDBIZ_ROW_ID_INT64);
            v_init_date = lpRecord->GetInt32(LDBIZ_INIT_DATE_INT);
            v_co_no = lpRecord->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpRecord->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpRecord->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpRecord->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_exch_no = lpRecord->GetInt32(LDBIZ_EXCH_NO_INT);
            v_stock_acco_no = lpRecord->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_stock_code_no = lpRecord->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            v_stock_type = lpRecord->GetInt32(LDBIZ_STOCK_TYPE_INT);
            v_asset_type = lpRecord->GetInt32(LDBIZ_ASSET_TYPE_INT);
            v_debt_type = lpRecord->GetInt32(LDBIZ_DEBT_TYPE_INT);
            v_strike_qty = lpRecord->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
            v_strike_amt = lpRecord->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
            v_strike_fee = lpRecord->GetDouble(LDBIZ_STRIKE_FEE_FLOAT);
            v_debt_order_no = lpRecord->GetInt32(LDBIZ_DEBT_ORDER_NO_INT);
            strcpy(v_report_no, lpRecord->GetString(LDBIZ_REPORT_NO_STR));
            v_order_date = lpRecord->GetInt32(LDBIZ_ORDER_DATE_INT);
            v_order_time = lpRecord->GetInt32(LDBIZ_ORDER_TIME_INT);
            v_order_dir = lpRecord->GetInt32(LDBIZ_ORDER_DIR_INT);
            v_order_price = lpRecord->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
            v_order_qty = lpRecord->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
            v_debt_amt = lpRecord->GetDouble(LDBIZ_DEBT_AMT_FLOAT);
            v_debt_qty = lpRecord->GetDouble(LDBIZ_DEBT_QTY_FLOAT);
            v_debt_fee = lpRecord->GetDouble(LDBIZ_DEBT_FEE_FLOAT);
            v_debt_interest = lpRecord->GetDouble(LDBIZ_DEBT_INTEREST_FLOAT);
            v_intrst_base_amt = lpRecord->GetDouble(LDBIZ_INTRST_BASE_AMT_FLOAT);
            v_debt_return_amt = lpRecord->GetDouble(LDBIZ_DEBT_RETURN_AMT_FLOAT);
            v_debt_return_qty = lpRecord->GetDouble(LDBIZ_DEBT_RETURN_QTY_FLOAT);
            v_return_interest_amt = lpRecord->GetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT);
            v_debt_status = lpRecord->GetInt32(LDBIZ_DEBT_STATUS_INT);
            strcpy(v_remark_info, lpRecord->GetString(LDBIZ_REMARK_INFO_STR));
            v_update_times = lpRecord->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.exgpposidebtjour][证券主推_持仓_交易组负债明细主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.932", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
        lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_STRIKE_FEE_FLOAT,v_strike_fee);
        lpPubMsg->SetInt32(LDBIZ_DEBT_ORDER_NO_INT,v_debt_order_no);
        lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
        lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
        lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
        lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
        lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
        lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_AMT_FLOAT,v_debt_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_QTY_FLOAT,v_debt_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FEE_FLOAT,v_debt_fee);
        lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
        lpPubMsg->SetDouble(LDBIZ_INTRST_BASE_AMT_FLOAT,v_intrst_base_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_RETURN_AMT_FLOAT,v_debt_return_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_RETURN_QTY_FLOAT,v_debt_return_qty);
        lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
        lpPubMsg->SetInt32(LDBIZ_DEBT_STATUS_INT,v_debt_status);
        lpPubMsg->SetString(LDBIZ_REMARK_INFO_STR,v_remark_info);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.exgpposidebtjour", lpPubMsg);


    // [遍历结果集结束][lpMainMsg]
        }
    }


END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans22)
        {
          lpTSCall1Ans22->FreeMsg();
          lpTSCall1Ans22=NULL;
        }
        lpTSCall1Req22=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req22->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req22->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req22->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req22->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req22->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req22->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req22->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req22->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req22->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req22->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req22, &lpTSCall1Ans22, 5000);
        if (lpTSCall1Ans22)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans22->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans22->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans22->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans22->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans22->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
    lpOutBizMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpOutBizMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpOutBizMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpOutBizMsg->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpOutBizMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpOutBizMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpOutBizMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpOutBizMsg->SetInt32(LDBIZ_STRIKE_DATE_INT,v_strike_date);
    lpOutBizMsg->SetInt32(LDBIZ_STRIKE_TIME_INT,v_strike_time);
    lpOutBizMsg->SetString(LDBIZ_STRIKE_NO_STR,v_strike_no);
    lpOutBizMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpOutBizMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpOutBizMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpOutBizMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpOutBizMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpOutBizMsg->SetInt32(LDBIZ_STRIKE_DEAL_TYPE_INT,v_strike_deal_type);
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    if(lpTSCall1Ans3)
        lpTSCall1Ans3->FreeMsg();
    if(lpTSCall1Ans4)
        lpTSCall1Ans4->FreeMsg();
    if(lpTSCall1Ans5)
        lpTSCall1Ans5->FreeMsg();
    if(lpTSCall1Ans6)
        lpTSCall1Ans6->FreeMsg();
    if(lpTSCall1Ans7)
        lpTSCall1Ans7->FreeMsg();
    if(lpTSCall1Ans8)
        lpTSCall1Ans8->FreeMsg();
    if(lpTSCall1Ans9)
        lpTSCall1Ans9->FreeMsg();
    if(lpTSCall1Ans10)
        lpTSCall1Ans10->FreeMsg();
    if(lpTSCall1Ans11)
        lpTSCall1Ans11->FreeMsg();
    if(lpTSCall1Ans12)
        lpTSCall1Ans12->FreeMsg();
    if(lpTSCall1Ans13)
        lpTSCall1Ans13->FreeMsg();
    if(lpTSCall1Ans14)
        lpTSCall1Ans14->FreeMsg();
    if(lpTSCall1Ans15)
        lpTSCall1Ans15->FreeMsg();
    if(lpTSCall1Ans16)
        lpTSCall1Ans16->FreeMsg();
    if(lpTSCall1Ans17)
        lpTSCall1Ans17->FreeMsg();
    if(lpTSCall1Ans18)
        lpTSCall1Ans18->FreeMsg();
    if(lpTSCall1Ans19)
        lpTSCall1Ans19->FreeMsg();
    if(lpTSCall1Ans20)
        lpTSCall1Ans20->FreeMsg();
    if(lpTSCall1Ans21)
        lpTSCall1Ans21->FreeMsg();
    if(lpTSCall1Ans22)
        lpTSCall1Ans22->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_融资融券处理撤单回报
int LD_CALL_MODE fnFunc18(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    char v_stock_code[7];
    int v_report_date;
    int v_report_time;
    char v_report_no[33];
    double v_wtdraw_qty;
    char v_rsp_status[3];
    char v_rsp_info[256];
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_pd_no;
    int v_exch_group_no;
    int v_asset_acco_no;
    int64 v_order_id;
    int64 v_external_no;
    int v_order_batch_no;
    char v_order_status[3];
    char v_wtdraw_status[3];
    int v_tmp_opor_no;
    int v_init_date;
    char v_co_busi_config_str[65];
    int v_co_no;
    int v_stock_acco_no;
    char v_stock_acco[17];
    int v_stock_code_no;
    int v_stock_type;
    int v_asset_type;
    int64 v_comm_id;
    int v_order_date;
    int v_order_time;
    int v_order_dir;
    double v_order_price;
    double v_order_qty;
    double v_order_frozen_amt;
    int v_price_type;
    int v_busi_opor_no;
    char v_order_oper_way[3];
    char v_combo_code[33];
    int64 v_combo_posi_id;
    char v_mac_addr[33];
    char v_ip_addr[33];
    int64 v_strategy_id;
    char v_target_stock_code[7];
    int v_target_stock_code_no;
    char v_contra_no[33];
    int v_asset_acco_type;
    int v_exist_debt_flag;
    int64 v_ori_order_id;
    double v_tmp_order_qty;
    char v_sys_config_str[65];
    char v_crncy_type[4];
    char v_exch_crncy_type[4];
    double v_buy_ref_rate;
    double v_sell_ref_rate;
    int v_capit_reback_days;
    int v_posi_reback_days;
    int v_trade_code_no;
    int v_target_code_no;
    int v_net_price_flag;
    double v_bond_accr_intrst;
    int v_bond_rate_type;
    double v_par_value;
    double v_impawn_ratio;
    int v_min_unit;
    int v_comm_date;
    int v_comm_batch_no;
    int v_comm_executor;
    int v_comm_opor;
    int v_intrst_days;
    double v_strike_qty;
    double v_strike_amt;
    double v_strike_bond_accr_intrst;
    double v_order_frozen_qty;
    char v_old_order_status[3];
    int v_open_posi_date;
    int v_update_times;
    int v_debt_type;
    double v_curr_strike_price;
    double v_curr_strike_amt;
    double v_curr_strike_qty;
    int64 v_strike_id;
    double v_all_fee;
    int64 v_sum_order_row_id;
    int v_sum_order_opor_no;
    int v_sum_order_co_no;
    int v_sum_order_pd_no;
    int v_sum_order_exch_group_no;
    int v_sum_order_asset_acco_no;
    int v_sum_order_pass_no;
    char v_sum_order_exch_crncy_type[4];
    int v_sum_order_stock_code_no;
    int v_sum_order_trade_code_no;
    int v_sum_order_target_code_no;
    int64 v_sum_order_external_no;
    int v_sum_order_date;
    int v_sum_order_batch_no;
    int v_sum_order_dir;
    int v_sum_order_price_type;
    double v_sum_order_price;
    double v_sum_order_qty;
    char v_order_sum_status[3];
    double v_sum_order_wtdraw_qty;
    double v_sum_order_waste_qty;
    double v_sum_order_strike_amt;
    double v_sum_order_strike_qty;
    double v_sum_order_strike_aver_price;
    int v_sum_order_net_price_flag;
    double v_sum_order_bond_accr_intrst;
    int v_sum_order_bond_rate_type;
    double v_sum_order_par_value;
    double v_sum_order_impawn_ratio;
    char v_sum_order_oper_way[3];
    int v_sum_order_update_times;
    int64 v_sum_strike_row_id;
    int v_sum_strike_opor_no;
    int v_sum_strike_co_no;
    int v_sum_strike_pd_no;
    int v_sum_strike_exch_group_no;
    int v_sum_strike_asset_acco_no;
    int v_sum_strike_pass_no;
    char v_sum_strike_out_acco[33];
    int v_sum_strike_stock_acco_no;
    int v_sum_strike_stock_code_no;
    int64 v_sum_strike_comm_id;
    int v_sum_strike_report_date;
    char v_sum_strike_report_no[33];
    int v_sum_strike_order_date;
    int64 v_sum_strike_order_id;
    int v_sum_strike_order_dir;
    double v_sum_strike_order_price;
    double v_sum_strike_order_qty;
    double v_sum_strike_strike_qty;
    double v_sum_strike_strike_amt;
    double v_sum_strike_all_fee;
    double v_sum_strike_stamp_tax;
    double v_sum_strike_trans_fee;
    double v_sum_strike_brkage_fee;
    double v_sum_strike_SEC_charges;
    double v_sum_strike_other_fee;
    double v_sum_strike_trade_commis;
    double v_sum_strike_other_commis;
    double v_sum_trade_tax;
    double v_sum_trade_cost_fee;
    double v_sum_trade_system_use_fee;
    double v_sum_stock_settle_fee;
    int v_sum_strike_net_price_flag;
    double v_sum_strike_bond_accr_intrst;
    int v_sum_strike_bond_rate_type;
    char v_sum_strike_order_oper_way[3];
    int v_sum_strike_exter_comm_flag;
    int v_sum_strike_update_times;
    int v_sum_strike_order_batch_no;
    int64 v_sum_external_no;
    int v_comm_time;
    int v_comm_dir;
    double v_comm_limit_price;
    double v_limit_actual_price;
    double v_comm_qty;
    double v_comm_amt;
    double v_comm_cancel_qty;
    double v_comm_frozen_amt;
    double v_comm_frozen_qty;
    char v_strike_status[3];
    char v_comm_status[3];
    int v_comm_begin_date;
    int v_comm_end_date;
    int v_comm_begin_time;
    int v_comm_end_time;
    int v_comm_comple_date;
    int v_comm_comple_time;
    int v_comm_appr_date;
    int v_comm_appr_time;
    char v_comm_appr_status[3];
    int v_comm_appr_oper;
    char v_comm_appr_remark[256];
    int64 v_basket_id;
    char v_comm_oper_way[3];
    int v_exter_comm_flag;
    int v_comm_comple_flag;
    double v_strategy_capt_qty;
    double v_strategy_order_qty;
    char v_comm_remark_info[1025];
    int v_disp_opor;
    int v_disp_status;
    int v_read_flag;
    int64 v_sum_comm_row_id;
    int v_sum_comm_co_no;
    int v_sum_comm_pd_no;
    int v_sum_comm_exch_group_no;
    int v_sum_comm_asset_acco_no;
    int v_sum_comm_pass_no;
    char v_sum_comm_out_acco[33];
    char v_sum_comm_exch_crncy_type[4];
    int v_sum_comm_stock_code_no;
    int v_sum_comm_date;
    int v_sum_comm_time;
    int v_sum_comm_batch_no;
    int v_sum_comm_opor;
    int v_sum_comm_executor;
    int v_sum_comm_dir;
    double v_sum_comm_limit_price;
    double v_sum_comm_qty;
    double v_sum_comm_amt;
    double v_sum_comm_order_qty;
    double v_sum_comm_cancel_qty;
    double v_sum_comm_await_cancel_qty;
    double v_sum_comm_strike_amt;
    double v_sum_comm_strike_qty;
    char v_sum_comm_strike_status[3];
    char v_comm_sum_status[3];
    int v_sum_comm_begin_date;
    int v_sum_comm_end_date;
    int v_sum_comm_begin_time;
    int v_sum_comm_end_time;
    int v_sum_comm_comple_date;
    int v_sum_comm_comple_time;
    int v_sum_comm_max_comm_comple_date;
    int v_sum_comm_max_comm_comple_time;
    int v_sum_comm_appr_date;
    int v_sum_comm_appr_time;
    double v_sum_comm_appr_qty;
    char v_comm_sum_approve_status[3];
    int64 v_sum_comm_basket_id;
    int v_sum_comm_net_price_flag;
    double v_sum_comm_bond_accr_intrst;
    int v_sum_comm_bond_rate_type;
    char v_sum_comm_oper_way[3];
    int v_sum_comm_exter_comm_flag;
    double v_sum_buy_order_qty;
    double v_sum_sell_order_qty;
    double v_sum_buy_comm_qty;
    double v_sum_sell_comm_qty;
    double v_sum_buy_strike_qty;
    double v_sum_sell_strike_qty;
    double v_sum_buy_strike_amt;
    double v_sum_sell_strike_amt;
    double v_sum_buy_comm_amt;
    double v_sum_sell_comm_amt;
    char v_sum_comm_remark_info[256];
    int v_sum_comm_update_times;
    char v_acco_concat_info[4097];
    double v_exgp_put_impawn_qty;
    double v_asac_put_impawn_qty;
    int64 v_exgp_cash_id;
    double v_exgp_frozen_amt;
    double v_exgp_unfroz_amt;
    double v_exgp_comm_frozen_amt;
    double v_exgp_comm_unfroz_amt;
    double v_exgp_comm_capt_amt;
    double v_exgp_comm_releas_amt;
    double v_exgp_trade_frozen_amt;
    double v_exgp_trade_unfroz_amt;
    double v_exgp_trade_capt_amt;
    double v_exgp_trade_releas_amt;
    double v_exgp_strike_capt_amt;
    double v_exgp_strike_releas_amt;
    int v_exgp_cash_update_times;
    int64 v_exgp_posi_id;
    double v_exgp_frozen_qty;
    double v_exgp_unfroz_qty;
    double v_exgp_comm_frozen_qty;
    double v_exgp_comm_unfroz_qty;
    double v_exgp_comm_capt_qty;
    double v_exgp_comm_releas_qty;
    double v_exgp_trade_frozen_qty;
    double v_exgp_trade_unfroz_qty;
    double v_exgp_trade_capt_qty;
    double v_exgp_trade_releas_qty;
    double v_exgp_strike_capt_qty;
    double v_exgp_strike_releas_qty;
    double v_exgp_strike_frozen_qty;
    double v_exgp_strike_unfroz_qty;
    double v_exgp_realize_pandl;
    double v_exgp_cost_amt;
    double v_exgp_intrst_cost_amt;
    double v_exgp_intrst_pandl;
    int v_exgp_posi_update_times;
    int64 v_asac_cash_id;
    double v_asac_frozen_amt;
    double v_asac_unfroz_amt;
    double v_asac_comm_frozen_amt;
    double v_asac_comm_unfroz_amt;
    double v_asac_comm_capt_amt;
    double v_asac_comm_releas_amt;
    double v_asac_trade_frozen_amt;
    double v_asac_trade_unfroz_amt;
    double v_asac_trade_capt_amt;
    double v_asac_trade_releas_amt;
    double v_asac_strike_capt_amt;
    double v_asac_strike_releas_amt;
    int v_asac_cash_update_times;
    int64 v_asac_posi_id;
    double v_asac_frozen_qty;
    double v_asac_unfroz_qty;
    double v_asac_comm_frozen_qty;
    double v_asac_comm_unfroz_qty;
    double v_asac_comm_capt_qty;
    double v_asac_comm_releas_qty;
    double v_asac_trade_frozen_qty;
    double v_asac_trade_unfroz_qty;
    double v_asac_trade_capt_qty;
    double v_asac_trade_releas_qty;
    double v_asac_strike_capt_qty;
    double v_asac_strike_releas_qty;
    double v_asac_strike_frozen_qty;
    double v_asac_strike_unfroz_qty;
    double v_asac_realize_pandl;
    double v_asac_cost_amt;
    double v_asac_intrst_cost_amt;
    double v_asac_intrst_pandl;
    int v_asac_posi_update_times;
    int64 v_row_id;
    int v_invest_type;
    double v_debt_fina_buy_strike_qty;
    double v_fina_return_strike_qty;
    double v_debt_loan_sell_strike_qty;
    double v_loan_return_strike_qty;
    double v_debt_fina_buy_order_qty;
    double v_fina_return_order_qty;
    double v_debt_loan_sell_order_qty;
    double v_loan_return_order_qty;
    double v_debt_fina_buy_comm_qty;
    double v_fina_return_comm_qty;
    double v_debt_loan_sell_comm_qty;
    double v_loan_return_comm_qty;
    double v_debt_fina_buy_strike_amt;
    double v_fina_return_strike_amt;
    double v_debt_loan_sell_strike_amt;
    double v_loan_return_strike_amt;
    double v_debt_fina_buy_order_amt;
    double v_fina_return_order_amt;
    double v_debt_loan_sell_order_amt;
    double v_loan_return_order_amt;
    double v_debt_fina_buy_comm_amt;
    double v_fina_return_comm_amt;
    double v_debt_loan_sell_comm_amt;
    double v_loan_return_comm_amt;
    double v_debt_strike_fee;
    double v_return_strike_fee;
    double v_debt_interest;
    double v_return_interest_amt;
    char v_log_error_code[33];
    char v_log_error_info[256];


IFastMessage* lpPubMsg = NULL;
int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    strcpy(v_stock_code, " ");
    v_report_date=0;
    v_report_time=0;
    strcpy(v_report_no, " ");
    v_wtdraw_qty=0;
    strcpy(v_rsp_status, "0");
    strcpy(v_rsp_info, " ");
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_pd_no=0;
    v_exch_group_no=0;
    v_asset_acco_no=0;
    v_order_id=0;
    v_external_no=0;
    v_order_batch_no=0;
    strcpy(v_order_status, "0");
    strcpy(v_wtdraw_status, "0");
    v_tmp_opor_no=0;
    v_init_date=0;
    strcpy(v_co_busi_config_str, " ");
    v_co_no=0;
    v_stock_acco_no=0;
    strcpy(v_stock_acco, " ");
    v_stock_code_no=0;
    v_stock_type=0;
    v_asset_type=0;
    v_comm_id=0;
    v_order_date=0;
    v_order_time=0;
    v_order_dir=0;
    v_order_price=0;
    v_order_qty=0;
    v_order_frozen_amt=0;
    v_price_type=0;
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    strcpy(v_combo_code, " ");
    v_combo_posi_id=0;
    strcpy(v_mac_addr, " ");
    strcpy(v_ip_addr, " ");
    v_strategy_id=0;
    strcpy(v_target_stock_code, " ");
    v_target_stock_code_no=0;
    strcpy(v_contra_no, " ");
    v_asset_acco_type=0;
    v_exist_debt_flag=0;
    v_ori_order_id=0;
    v_tmp_order_qty=0;
    strcpy(v_sys_config_str, " ");
    strcpy(v_crncy_type, "CNY");
    strcpy(v_exch_crncy_type, "CNY");
    v_buy_ref_rate=0;
    v_sell_ref_rate=0;
    v_capit_reback_days=0;
    v_posi_reback_days=0;
    v_trade_code_no=0;
    v_target_code_no=0;
    v_net_price_flag=0;
    v_bond_accr_intrst=0;
    v_bond_rate_type=0;
    v_par_value=0;
    v_impawn_ratio=0;
    v_min_unit=0;
    v_comm_date=0;
    v_comm_batch_no=0;
    v_comm_executor=0;
    v_comm_opor=0;
    v_intrst_days=0;
    v_strike_qty=0;
    v_strike_amt=0;
    v_strike_bond_accr_intrst=0;
    v_order_frozen_qty=0;
    strcpy(v_old_order_status, "0");
    v_open_posi_date=0;
    v_update_times=1;
    v_debt_type=0;
    v_curr_strike_price=0;
    v_curr_strike_amt=0;
    v_curr_strike_qty=0;
    v_strike_id=0;
    v_all_fee=0;
    v_sum_order_row_id=0;
    v_sum_order_opor_no=0;
    v_sum_order_co_no=0;
    v_sum_order_pd_no=0;
    v_sum_order_exch_group_no=0;
    v_sum_order_asset_acco_no=0;
    v_sum_order_pass_no=0;
    strcpy(v_sum_order_exch_crncy_type, "CNY");
    v_sum_order_stock_code_no=0;
    v_sum_order_trade_code_no=0;
    v_sum_order_target_code_no=0;
    v_sum_order_external_no=0;
    v_sum_order_date=0;
    v_sum_order_batch_no=0;
    v_sum_order_dir=0;
    v_sum_order_price_type=0;
    v_sum_order_price=0;
    v_sum_order_qty=0;
    strcpy(v_order_sum_status, "0");
    v_sum_order_wtdraw_qty=0;
    v_sum_order_waste_qty=0;
    v_sum_order_strike_amt=0;
    v_sum_order_strike_qty=0;
    v_sum_order_strike_aver_price=0;
    v_sum_order_net_price_flag=0;
    v_sum_order_bond_accr_intrst=0;
    v_sum_order_bond_rate_type=0;
    v_sum_order_par_value=0;
    v_sum_order_impawn_ratio=0;
    strcpy(v_sum_order_oper_way, " ");
    v_sum_order_update_times=1;
    v_sum_strike_row_id=0;
    v_sum_strike_opor_no=0;
    v_sum_strike_co_no=0;
    v_sum_strike_pd_no=0;
    v_sum_strike_exch_group_no=0;
    v_sum_strike_asset_acco_no=0;
    v_sum_strike_pass_no=0;
    strcpy(v_sum_strike_out_acco, " ");
    v_sum_strike_stock_acco_no=0;
    v_sum_strike_stock_code_no=0;
    v_sum_strike_comm_id=0;
    v_sum_strike_report_date=0;
    strcpy(v_sum_strike_report_no, " ");
    v_sum_strike_order_date=0;
    v_sum_strike_order_id=0;
    v_sum_strike_order_dir=0;
    v_sum_strike_order_price=0;
    v_sum_strike_order_qty=0;
    v_sum_strike_strike_qty=0;
    v_sum_strike_strike_amt=0;
    v_sum_strike_all_fee=0;
    v_sum_strike_stamp_tax=0;
    v_sum_strike_trans_fee=0;
    v_sum_strike_brkage_fee=0;
    v_sum_strike_SEC_charges=0;
    v_sum_strike_other_fee=0;
    v_sum_strike_trade_commis=0;
    v_sum_strike_other_commis=0;
    v_sum_trade_tax=0;
    v_sum_trade_cost_fee=0;
    v_sum_trade_system_use_fee=0;
    v_sum_stock_settle_fee=0;
    v_sum_strike_net_price_flag=0;
    v_sum_strike_bond_accr_intrst=0;
    v_sum_strike_bond_rate_type=0;
    strcpy(v_sum_strike_order_oper_way, " ");
    v_sum_strike_exter_comm_flag=0;
    v_sum_strike_update_times=1;
    v_sum_strike_order_batch_no=0;
    v_sum_external_no=0;
    v_comm_time=0;
    v_comm_dir=0;
    v_comm_limit_price=0;
    v_limit_actual_price=0;
    v_comm_qty=0;
    v_comm_amt=0;
    v_comm_cancel_qty=0;
    v_comm_frozen_amt=0;
    v_comm_frozen_qty=0;
    strcpy(v_strike_status, "0");
    strcpy(v_comm_status, "0");
    v_comm_begin_date=0;
    v_comm_end_date=0;
    v_comm_begin_time=0;
    v_comm_end_time=0;
    v_comm_comple_date=0;
    v_comm_comple_time=0;
    v_comm_appr_date=0;
    v_comm_appr_time=0;
    strcpy(v_comm_appr_status, " ");
    v_comm_appr_oper=0;
    strcpy(v_comm_appr_remark, " ");
    v_basket_id=0;
    strcpy(v_comm_oper_way, " ");
    v_exter_comm_flag=0;
    v_comm_comple_flag=0;
    v_strategy_capt_qty=0;
    v_strategy_order_qty=0;
    strcpy(v_comm_remark_info, " ");
    v_disp_opor=0;
    v_disp_status=0;
    v_read_flag=0;
    v_sum_comm_row_id=0;
    v_sum_comm_co_no=0;
    v_sum_comm_pd_no=0;
    v_sum_comm_exch_group_no=0;
    v_sum_comm_asset_acco_no=0;
    v_sum_comm_pass_no=0;
    strcpy(v_sum_comm_out_acco, " ");
    strcpy(v_sum_comm_exch_crncy_type, "CNY");
    v_sum_comm_stock_code_no=0;
    v_sum_comm_date=0;
    v_sum_comm_time=0;
    v_sum_comm_batch_no=0;
    v_sum_comm_opor=0;
    v_sum_comm_executor=0;
    v_sum_comm_dir=0;
    v_sum_comm_limit_price=0;
    v_sum_comm_qty=0;
    v_sum_comm_amt=0;
    v_sum_comm_order_qty=0;
    v_sum_comm_cancel_qty=0;
    v_sum_comm_await_cancel_qty=0;
    v_sum_comm_strike_amt=0;
    v_sum_comm_strike_qty=0;
    strcpy(v_sum_comm_strike_status, "0");
    strcpy(v_comm_sum_status, "0");
    v_sum_comm_begin_date=0;
    v_sum_comm_end_date=0;
    v_sum_comm_begin_time=0;
    v_sum_comm_end_time=0;
    v_sum_comm_comple_date=0;
    v_sum_comm_comple_time=0;
    v_sum_comm_max_comm_comple_date=0;
    v_sum_comm_max_comm_comple_time=0;
    v_sum_comm_appr_date=0;
    v_sum_comm_appr_time=0;
    v_sum_comm_appr_qty=0;
    strcpy(v_comm_sum_approve_status, "0");
    v_sum_comm_basket_id=0;
    v_sum_comm_net_price_flag=0;
    v_sum_comm_bond_accr_intrst=0;
    v_sum_comm_bond_rate_type=0;
    strcpy(v_sum_comm_oper_way, " ");
    v_sum_comm_exter_comm_flag=0;
    v_sum_buy_order_qty=0;
    v_sum_sell_order_qty=0;
    v_sum_buy_comm_qty=0;
    v_sum_sell_comm_qty=0;
    v_sum_buy_strike_qty=0;
    v_sum_sell_strike_qty=0;
    v_sum_buy_strike_amt=0;
    v_sum_sell_strike_amt=0;
    v_sum_buy_comm_amt=0;
    v_sum_sell_comm_amt=0;
    strcpy(v_sum_comm_remark_info, " ");
    v_sum_comm_update_times=1;
    strcpy(v_acco_concat_info, " ");
    v_exgp_put_impawn_qty=0;
    v_asac_put_impawn_qty=0;
    v_exgp_cash_id=0;
    v_exgp_frozen_amt=0;
    v_exgp_unfroz_amt=0;
    v_exgp_comm_frozen_amt=0;
    v_exgp_comm_unfroz_amt=0;
    v_exgp_comm_capt_amt=0;
    v_exgp_comm_releas_amt=0;
    v_exgp_trade_frozen_amt=0;
    v_exgp_trade_unfroz_amt=0;
    v_exgp_trade_capt_amt=0;
    v_exgp_trade_releas_amt=0;
    v_exgp_strike_capt_amt=0;
    v_exgp_strike_releas_amt=0;
    v_exgp_cash_update_times=1;
    v_exgp_posi_id=0;
    v_exgp_frozen_qty=0;
    v_exgp_unfroz_qty=0;
    v_exgp_comm_frozen_qty=0;
    v_exgp_comm_unfroz_qty=0;
    v_exgp_comm_capt_qty=0;
    v_exgp_comm_releas_qty=0;
    v_exgp_trade_frozen_qty=0;
    v_exgp_trade_unfroz_qty=0;
    v_exgp_trade_capt_qty=0;
    v_exgp_trade_releas_qty=0;
    v_exgp_strike_capt_qty=0;
    v_exgp_strike_releas_qty=0;
    v_exgp_strike_frozen_qty=0;
    v_exgp_strike_unfroz_qty=0;
    v_exgp_realize_pandl=0;
    v_exgp_cost_amt=0;
    v_exgp_intrst_cost_amt=0;
    v_exgp_intrst_pandl=0;
    v_exgp_posi_update_times=1;
    v_asac_cash_id=0;
    v_asac_frozen_amt=0;
    v_asac_unfroz_amt=0;
    v_asac_comm_frozen_amt=0;
    v_asac_comm_unfroz_amt=0;
    v_asac_comm_capt_amt=0;
    v_asac_comm_releas_amt=0;
    v_asac_trade_frozen_amt=0;
    v_asac_trade_unfroz_amt=0;
    v_asac_trade_capt_amt=0;
    v_asac_trade_releas_amt=0;
    v_asac_strike_capt_amt=0;
    v_asac_strike_releas_amt=0;
    v_asac_cash_update_times=1;
    v_asac_posi_id=0;
    v_asac_frozen_qty=0;
    v_asac_unfroz_qty=0;
    v_asac_comm_frozen_qty=0;
    v_asac_comm_unfroz_qty=0;
    v_asac_comm_capt_qty=0;
    v_asac_comm_releas_qty=0;
    v_asac_trade_frozen_qty=0;
    v_asac_trade_unfroz_qty=0;
    v_asac_trade_capt_qty=0;
    v_asac_trade_releas_qty=0;
    v_asac_strike_capt_qty=0;
    v_asac_strike_releas_qty=0;
    v_asac_strike_frozen_qty=0;
    v_asac_strike_unfroz_qty=0;
    v_asac_realize_pandl=0;
    v_asac_cost_amt=0;
    v_asac_intrst_cost_amt=0;
    v_asac_intrst_pandl=0;
    v_asac_posi_update_times=1;
    v_row_id=0;
    v_invest_type=0;
    v_debt_fina_buy_strike_qty=0;
    v_fina_return_strike_qty=0;
    v_debt_loan_sell_strike_qty=0;
    v_loan_return_strike_qty=0;
    v_debt_fina_buy_order_qty=0;
    v_fina_return_order_qty=0;
    v_debt_loan_sell_order_qty=0;
    v_loan_return_order_qty=0;
    v_debt_fina_buy_comm_qty=0;
    v_fina_return_comm_qty=0;
    v_debt_loan_sell_comm_qty=0;
    v_loan_return_comm_qty=0;
    v_debt_fina_buy_strike_amt=0;
    v_fina_return_strike_amt=0;
    v_debt_loan_sell_strike_amt=0;
    v_loan_return_strike_amt=0;
    v_debt_fina_buy_order_amt=0;
    v_fina_return_order_amt=0;
    v_debt_loan_sell_order_amt=0;
    v_loan_return_order_amt=0;
    v_debt_fina_buy_comm_amt=0;
    v_fina_return_comm_amt=0;
    v_debt_loan_sell_comm_amt=0;
    v_loan_return_comm_amt=0;
    v_debt_strike_fee=0;
    v_return_strike_fee=0;
    v_debt_interest=0;
    v_return_interest_amt=0;
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_pass_no = lpInBizMsg->GetInt32(LDBIZ_PASS_NO_INT);
    strncpy(v_out_acco, lpInBizMsg->GetString(LDBIZ_OUT_ACCO_STR),32);
    v_out_acco[32] = '\0';
    v_exch_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_NO_INT);
    strncpy(v_stock_code, lpInBizMsg->GetString(LDBIZ_STOCK_CODE_STR),6);
    v_stock_code[6] = '\0';
    v_report_date = lpInBizMsg->GetInt32(LDBIZ_REPORT_DATE_INT);
    v_report_time = lpInBizMsg->GetInt32(LDBIZ_REPORT_TIME_INT);
    strncpy(v_report_no, lpInBizMsg->GetString(LDBIZ_REPORT_NO_STR),32);
    v_report_no[32] = '\0';
    v_wtdraw_qty = lpInBizMsg->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
    strncpy(v_rsp_status, lpInBizMsg->GetString(LDBIZ_RSP_STATUS_STR),2);
    v_rsp_status[2] = '\0';
    strncpy(v_rsp_info, lpInBizMsg->GetString(LDBIZ_RSP_INFO_STR),255);
    v_rsp_info[255] = '\0';

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;
    IFastMessage* lpTSCall1Req3 = NULL;
    IFastMessage* lpTSCall1Ans3 = NULL;
    IFastMessage* lpTSCall1Req4 = NULL;
    IFastMessage* lpTSCall1Ans4 = NULL;
    IFastMessage* lpTSCall1Req5 = NULL;
    IFastMessage* lpTSCall1Ans5 = NULL;
    IFastMessage* lpTSCall1Req6 = NULL;
    IFastMessage* lpTSCall1Ans6 = NULL;
    IFastMessage* lpTSCall1Req7 = NULL;
    IFastMessage* lpTSCall1Ans7 = NULL;
    IFastMessage* lpTSCall1Req8 = NULL;
    IFastMessage* lpTSCall1Ans8 = NULL;
    IFastMessage* lpTSCall1Req9 = NULL;
    IFastMessage* lpTSCall1Ans9 = NULL;
    IFastMessage* lpTSCall1Req10 = NULL;
    IFastMessage* lpTSCall1Ans10 = NULL;
    IFastMessage* lpTSCall1Req11 = NULL;
    IFastMessage* lpTSCall1Ans11 = NULL;
    IFastMessage* lpTSCall1Req12 = NULL;
    IFastMessage* lpTSCall1Ans12 = NULL;


    // set @临时_操作员编号# = @操作员编号#;
    v_tmp_opor_no = v_opor_no;
    //调用过程[事务_公共_公共接口_检查系统状态权限身份]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.1", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.1]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));

    //取原委托信息
    //调用过程[事务_交易证券_交易_获取回报订单信息]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.72", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req1->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req1->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req1->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpTSCall1Req1->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.72]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
    v_co_no = lpTSCall1Ans1->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpTSCall1Ans1->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans1->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans1->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    v_stock_acco_no = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_acco, lpTSCall1Ans1->GetString(LDBIZ_STOCK_ACCO_STR));
    v_stock_code_no = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strcpy(v_stock_code, lpTSCall1Ans1->GetString(LDBIZ_STOCK_CODE_STR));
    v_stock_type = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans1->GetInt32(LDBIZ_ASSET_TYPE_INT);
    v_comm_id = lpTSCall1Ans1->GetInt64(LDBIZ_COMM_ID_INT64);
    v_order_date = lpTSCall1Ans1->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_time = lpTSCall1Ans1->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_order_id = lpTSCall1Ans1->GetInt64(LDBIZ_ORDER_ID_INT64);
    v_order_batch_no = lpTSCall1Ans1->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    v_order_dir = lpTSCall1Ans1->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_order_price = lpTSCall1Ans1->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans1->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    v_order_frozen_amt = lpTSCall1Ans1->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans1->GetString(LDBIZ_ORDER_STATUS_STR));
    v_price_type = lpTSCall1Ans1->GetInt32(LDBIZ_PRICE_TYPE_INT);
    v_busi_opor_no = lpTSCall1Ans1->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strcpy(v_order_oper_way, lpTSCall1Ans1->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    strcpy(v_combo_code, lpTSCall1Ans1->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans1->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    strcpy(v_mac_addr, lpTSCall1Ans1->GetString(LDBIZ_MAC_ADDR_STR));
    strcpy(v_ip_addr, lpTSCall1Ans1->GetString(LDBIZ_IP_ADDR_STR));
    v_strategy_id = lpTSCall1Ans1->GetInt64(LDBIZ_STRATEGY_ID_INT64);
    strcpy(v_target_stock_code, lpTSCall1Ans1->GetString(LDBIZ_TARGET_STOCK_CODE_STR));
    v_target_stock_code_no = lpTSCall1Ans1->GetInt32(LDBIZ_TARGET_STOCK_CODE_NO_INT);
    strcpy(v_contra_no, lpTSCall1Ans1->GetString(LDBIZ_CONTRA_NO_STR));
    v_asset_acco_type = lpTSCall1Ans1->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    v_exist_debt_flag = lpTSCall1Ans1->GetInt32(LDBIZ_EXIST_DEBT_FLAG_INT);


    // set @原订单序号# = @订单序号#;
    v_ori_order_id = v_order_id;
    //回报状态为3的时候，报盘给不了撤单数量，所以进行特殊处理

    // if @回报状态# = 《回报状态-特殊撤单》 then
    if (strcmp(v_rsp_status , "3")==0)
    {

        // set @撤单数量# = @订单数量#;
        v_wtdraw_qty = v_order_qty;
    // end if;
    }


    // set @临时_订单数量# = @订单数量#;
    v_tmp_order_qty = v_order_qty;

    // set @操作MAC# = @MAC地址#;
    strcpy(v_oper_mac,v_mac_addr);

    // set @操作IP# = @IP地址#;
    strcpy(v_oper_ip_addr,v_ip_addr);

    // set @操作员编号# =@业务操作员编号#;
    v_opor_no =v_busi_opor_no;

    // set @操作员机构编号# =@机构编号#;
    v_opor_co_no =v_co_no;
    //调用过程[事务_公共_交易接口_检查交易系统状态权限]
    //组织事务请求
    if(lpTSCall1Ans2)
    {
      lpTSCall1Ans2->FreeMsg();
      lpTSCall1Ans2=NULL;
    }
    lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.25.232", 0);
    lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req2->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
    if(!lpTSCall1Ans2)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.232]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans2->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
    strcpy(v_co_busi_config_str, lpTSCall1Ans2->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));

    //公共子系统检查
    //调用过程[事务_公共_交易接口_检查回报业务控制]
    //组织事务请求
    if(lpTSCall1Ans3)
    {
      lpTSCall1Ans3->FreeMsg();
      lpTSCall1Ans3=NULL;
    }
    lpTSCall1Req3=glpFastMsgFactory->CreateFastMessage("pubT.25.31", 0);
    lpTSCall1Req3->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req3->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req3->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req3->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req3->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req3->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req3->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req3->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req3->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    glpTSSubcallSerives->SubCall(lpTSCall1Req3, &lpTSCall1Ans3, 5000);
    if(!lpTSCall1Ans3)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.31]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans3->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans3->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_sys_config_str, lpTSCall1Ans3->GetString(LDBIZ_SYS_CONFIG_STR_STR));
    strcpy(v_crncy_type, lpTSCall1Ans3->GetString(LDBIZ_CRNCY_TYPE_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans3->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_buy_ref_rate = lpTSCall1Ans3->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
    v_sell_ref_rate = lpTSCall1Ans3->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
    v_stock_code_no = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_capit_reback_days = lpTSCall1Ans3->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
    v_posi_reback_days = lpTSCall1Ans3->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);
    v_trade_code_no = lpTSCall1Ans3->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans3->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_net_price_flag = lpTSCall1Ans3->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_bond_accr_intrst = lpTSCall1Ans3->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans3->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_par_value = lpTSCall1Ans3->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans3->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_min_unit = lpTSCall1Ans3->GetInt32(LDBIZ_MIN_UNIT_INT);

    //处理撤单回报
    //调用过程[事务_交易证券_报盘_融资融券处理撤单回报]
    //组织事务请求
    if(lpTSCall1Ans4)
    {
      lpTSCall1Ans4->FreeMsg();
      lpTSCall1Ans4=NULL;
    }
    lpTSCall1Req4=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.133", 0);
    lpTSCall1Req4->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req4->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req4->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req4->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req4->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req4->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req4->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req4->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req4->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpTSCall1Req4->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpTSCall1Req4->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpTSCall1Req4->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req4->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req4->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req4->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpTSCall1Req4->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpTSCall1Req4->SetString(LDBIZ_RSP_STATUS_STR,v_rsp_status);
    lpTSCall1Req4->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    glpTSSubcallSerives->SubCall(lpTSCall1Req4, &lpTSCall1Ans4, 5000);
    if(!lpTSCall1Ans4)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.133]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans4->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
    v_co_no = lpTSCall1Ans4->GetInt32(LDBIZ_CO_NO_INT);
    v_busi_opor_no = lpTSCall1Ans4->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    v_pd_no = lpTSCall1Ans4->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans4->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans4->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    v_stock_acco_no = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    v_stock_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_trade_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans4->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_external_no = lpTSCall1Ans4->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
    strcpy(v_exch_crncy_type, lpTSCall1Ans4->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_comm_date = lpTSCall1Ans4->GetInt32(LDBIZ_COMM_DATE_INT);
    v_comm_id = lpTSCall1Ans4->GetInt64(LDBIZ_COMM_ID_INT64);
    v_comm_batch_no = lpTSCall1Ans4->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
    v_comm_executor = lpTSCall1Ans4->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
    v_comm_opor = lpTSCall1Ans4->GetInt32(LDBIZ_COMM_OPOR_INT);
    v_order_date = lpTSCall1Ans4->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_batch_no = lpTSCall1Ans4->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    v_order_dir = lpTSCall1Ans4->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_price_type = lpTSCall1Ans4->GetInt32(LDBIZ_PRICE_TYPE_INT);
    v_order_price = lpTSCall1Ans4->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans4->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans4->GetString(LDBIZ_ORDER_STATUS_STR));
    v_net_price_flag = lpTSCall1Ans4->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_intrst_days = lpTSCall1Ans4->GetInt32(LDBIZ_INTRST_DAYS_INT);
    v_par_value = lpTSCall1Ans4->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_bond_accr_intrst = lpTSCall1Ans4->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_strike_qty = lpTSCall1Ans4->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_amt = lpTSCall1Ans4->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    v_strike_bond_accr_intrst = lpTSCall1Ans4->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
    v_impawn_ratio = lpTSCall1Ans4->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_order_frozen_amt = lpTSCall1Ans4->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    v_order_frozen_qty = lpTSCall1Ans4->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
    strcpy(v_wtdraw_status, lpTSCall1Ans4->GetString(LDBIZ_WTDRAW_STATUS_STR));
    strcpy(v_old_order_status, lpTSCall1Ans4->GetString(LDBIZ_OLD_ORDER_STATUS_STR));
    strcpy(v_combo_code, lpTSCall1Ans4->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans4->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    v_open_posi_date = lpTSCall1Ans4->GetInt32(LDBIZ_OPEN_POSI_DATE_INT);
    v_update_times = lpTSCall1Ans4->GetInt32(LDBIZ_UPDATE_TIMES_INT);
    v_debt_type = lpTSCall1Ans4->GetInt32(LDBIZ_DEBT_TYPE_INT);


    // set @当笔成交价格# = 0;
    v_curr_strike_price = 0;

    // set @当笔成交金额# = 0;
    v_curr_strike_amt = 0;

    // set @当笔成交数量# = 0;
    v_curr_strike_qty = 0;

    // set @成交序号# = 0;
    v_strike_id = 0;

    // set @全部费用# = 0;
    v_all_fee = 0;
    //主动推送

    // [主动推送][secu.order][证券主推_订单_订单主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
    lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
    lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


    // if @撤单状态# = 《撤单状态-成功》 then
    if (strcmp(v_wtdraw_status , "3")==0)
    {

        // if  @订单批号# > 0 then
        if ( v_order_batch_no > 0)
        {

            // set @成交序号# = 0;
            v_strike_id = 0;
            //调用过程[事务_交易证券_主推接口_获取汇总订单成交信息]
            //组织事务请求
            if(lpTSCall1Ans5)
            {
              lpTSCall1Ans5->FreeMsg();
              lpTSCall1Ans5=NULL;
            }
            lpTSCall1Req5=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.21", 0);
            lpTSCall1Req5->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req5->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req5->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req5->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req5->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req5->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req5->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req5->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req5->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req5->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpTSCall1Req5->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req5->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
            lpTSCall1Req5->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req5, &lpTSCall1Ans5, 5000);
            if(!lpTSCall1Ans5)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.21]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans5->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
            v_sum_order_row_id = lpTSCall1Ans5->GetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64);
            v_sum_order_opor_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT);
            v_sum_order_co_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_CO_NO_INT);
            v_sum_order_pd_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_PD_NO_INT);
            v_sum_order_exch_group_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT);
            v_sum_order_asset_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT);
            v_sum_order_pass_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT);
            strcpy(v_sum_order_exch_crncy_type, lpTSCall1Ans5->GetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR));
            v_sum_order_stock_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT);
            v_sum_order_trade_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT);
            v_sum_order_target_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT);
            v_sum_order_external_no = lpTSCall1Ans5->GetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64);
            v_sum_order_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_DATE_INT);
            v_sum_order_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT);
            v_sum_order_dir = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_DIR_INT);
            v_sum_order_price_type = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT);
            v_sum_order_price = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT);
            v_sum_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT);
            strcpy(v_order_sum_status, lpTSCall1Ans5->GetString(LDBIZ_ORDER_SUM_STATUS_STR));
            v_sum_order_wtdraw_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT);
            v_sum_order_waste_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT);
            v_sum_order_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT);
            v_sum_order_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT);
            v_sum_order_strike_aver_price = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT);
            v_sum_order_net_price_flag = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT);
            v_sum_order_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT);
            v_sum_order_bond_rate_type = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT);
            v_sum_order_par_value = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT);
            v_sum_order_impawn_ratio = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT);
            strcpy(v_sum_order_oper_way, lpTSCall1Ans5->GetString(LDBIZ_SUM_ORDER_OPER_WAY_STR));
            v_sum_order_update_times = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT);
            v_sum_strike_row_id = lpTSCall1Ans5->GetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64);
            v_sum_strike_opor_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT);
            v_sum_strike_co_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT);
            v_sum_strike_pd_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT);
            v_sum_strike_exch_group_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT);
            v_sum_strike_asset_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT);
            v_sum_strike_pass_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT);
            strcpy(v_sum_strike_out_acco, lpTSCall1Ans5->GetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR));
            v_sum_strike_stock_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT);
            v_sum_strike_stock_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT);
            v_sum_strike_comm_id = lpTSCall1Ans5->GetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64);
            v_sum_strike_report_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT);
            strcpy(v_sum_strike_report_no, lpTSCall1Ans5->GetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR));
            v_sum_strike_order_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT);
            v_sum_strike_order_id = lpTSCall1Ans5->GetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64);
            v_sum_strike_order_dir = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT);
            v_sum_strike_order_price = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT);
            v_sum_strike_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT);
            v_sum_strike_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT);
            v_sum_strike_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT);
            v_sum_strike_all_fee = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT);
            v_sum_strike_stamp_tax = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT);
            v_sum_strike_trans_fee = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT);
            v_sum_strike_brkage_fee = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT);
            v_sum_strike_SEC_charges = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT);
            v_sum_strike_other_fee = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT);
            v_sum_strike_trade_commis = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT);
            v_sum_strike_other_commis = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT);
            v_sum_trade_tax = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT);
            v_sum_trade_cost_fee = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT);
            v_sum_trade_system_use_fee = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT);
            v_sum_stock_settle_fee = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT);
            v_sum_strike_net_price_flag = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT);
            v_sum_strike_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT);
            v_sum_strike_bond_rate_type = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT);
            strcpy(v_sum_strike_order_oper_way, lpTSCall1Ans5->GetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR));
            v_sum_strike_exter_comm_flag = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT);
            v_sum_strike_update_times = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT);
            v_sum_strike_order_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT);
            v_sum_external_no = lpTSCall1Ans5->GetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64);


            // [主动推送][secu.ordertotal][证券主推_订单_订单汇总主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.21", 0);
            lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64,v_sum_order_row_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT,v_sum_order_opor_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_CO_NO_INT,v_sum_order_co_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PD_NO_INT,v_sum_order_pd_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT,v_sum_order_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT,v_sum_order_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT,v_sum_order_pass_no);
            lpPubMsg->SetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR,v_sum_order_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT,v_sum_order_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT,v_sum_order_trade_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT,v_sum_order_target_code_no);
            lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64,v_sum_order_external_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DATE_INT,v_sum_order_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT,v_sum_order_batch_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DIR_INT,v_sum_order_dir);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT,v_sum_order_price_type);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT,v_sum_order_price);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT,v_sum_order_qty);
            lpPubMsg->SetString(LDBIZ_ORDER_SUM_STATUS_STR,v_order_sum_status);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT,v_sum_order_wtdraw_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT,v_sum_order_waste_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT,v_sum_order_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT,v_sum_order_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT,v_sum_order_strike_aver_price);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT,v_sum_order_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT,v_sum_order_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT,v_sum_order_bond_rate_type);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT,v_sum_order_par_value);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT,v_sum_order_impawn_ratio);
            lpPubMsg->SetString(LDBIZ_SUM_ORDER_OPER_WAY_STR,v_sum_order_oper_way);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT,v_sum_order_update_times);
            glpPubSub_Interface->PubTopics("secu.ordertotal", lpPubMsg);

        // end if;
        }


        // if @指令序号# > 0 then
        if (v_comm_id > 0)
        {
            //调用过程[事务_交易证券_主推接口_获取指令混合信息]
            //组织事务请求
            if(lpTSCall1Ans6)
            {
              lpTSCall1Ans6->FreeMsg();
              lpTSCall1Ans6=NULL;
            }
            lpTSCall1Req6=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
            lpTSCall1Req6->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req6->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req6->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req6->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req6->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req6->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req6->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req6->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req6->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req6, &lpTSCall1Ans6, 5000);
            if(!lpTSCall1Ans6)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans6->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
            v_init_date = lpTSCall1Ans6->GetInt32(LDBIZ_INIT_DATE_INT);
            v_co_no = lpTSCall1Ans6->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans6->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpTSCall1Ans6->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_pass_no = lpTSCall1Ans6->GetInt32(LDBIZ_PASS_NO_INT);
            strcpy(v_out_acco, lpTSCall1Ans6->GetString(LDBIZ_OUT_ACCO_STR));
            strcpy(v_exch_crncy_type, lpTSCall1Ans6->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
            v_stock_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_stock_code_no = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            v_stock_type = lpTSCall1Ans6->GetInt32(LDBIZ_STOCK_TYPE_INT);
            v_comm_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_DATE_INT);
            v_comm_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_TIME_INT);
            v_comm_batch_no = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
            v_comm_opor = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_OPOR_INT);
            v_comm_executor = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
            v_comm_dir = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_DIR_INT);
            v_comm_limit_price = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
            v_limit_actual_price = lpTSCall1Ans6->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
            v_comm_qty = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_QTY_FLOAT);
            v_comm_amt = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_AMT_FLOAT);
            v_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
            v_comm_cancel_qty = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
            v_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
            v_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
            v_comm_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
            v_comm_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
            strcpy(v_strike_status, lpTSCall1Ans6->GetString(LDBIZ_STRIKE_STATUS_STR));
            strcpy(v_comm_status, lpTSCall1Ans6->GetString(LDBIZ_COMM_STATUS_STR));
            v_comm_begin_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
            v_comm_end_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_END_DATE_INT);
            v_comm_begin_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
            v_comm_end_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_END_TIME_INT);
            v_comm_comple_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
            v_comm_comple_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
            v_comm_appr_date = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
            v_comm_appr_time = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
            strcpy(v_comm_appr_status, lpTSCall1Ans6->GetString(LDBIZ_COMM_APPR_STATUS_STR));
            v_comm_appr_oper = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
            strcpy(v_comm_appr_remark, lpTSCall1Ans6->GetString(LDBIZ_COMM_APPR_REMARK_STR));
            v_basket_id = lpTSCall1Ans6->GetInt64(LDBIZ_BASKET_ID_INT64);
            v_net_price_flag = lpTSCall1Ans6->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
            v_bond_accr_intrst = lpTSCall1Ans6->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
            v_bond_rate_type = lpTSCall1Ans6->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
            strcpy(v_comm_oper_way, lpTSCall1Ans6->GetString(LDBIZ_COMM_OPER_WAY_STR));
            v_exter_comm_flag = lpTSCall1Ans6->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
            v_comm_comple_flag = lpTSCall1Ans6->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
            v_strategy_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
            v_strategy_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
            strcpy(v_contra_no, lpTSCall1Ans6->GetString(LDBIZ_CONTRA_NO_STR));
            strcpy(v_comm_remark_info, lpTSCall1Ans6->GetString(LDBIZ_COMM_REMARK_INFO_STR));
            v_disp_opor = lpTSCall1Ans6->GetInt32(LDBIZ_DISP_OPOR_INT);
            v_disp_status = lpTSCall1Ans6->GetInt32(LDBIZ_DISP_STATUS_INT);
            v_read_flag = lpTSCall1Ans6->GetInt32(LDBIZ_READ_FLAG_INT);
            v_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_UPDATE_TIMES_INT);
            v_sum_comm_row_id = lpTSCall1Ans6->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
            v_sum_comm_co_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
            v_sum_comm_pd_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
            v_sum_comm_exch_group_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
            v_sum_comm_asset_acco_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
            v_sum_comm_pass_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
            strcpy(v_sum_comm_out_acco, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
            strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
            v_sum_comm_stock_code_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
            v_sum_comm_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
            v_sum_comm_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
            v_sum_comm_batch_no = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
            v_sum_comm_opor = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
            v_sum_comm_executor = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
            v_sum_comm_dir = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
            v_sum_comm_limit_price = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
            v_sum_comm_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
            v_sum_comm_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
            v_sum_comm_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
            v_sum_comm_cancel_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
            v_sum_comm_await_cancel_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
            v_sum_comm_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
            v_sum_comm_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
            strcpy(v_sum_comm_strike_status, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
            strcpy(v_comm_sum_status, lpTSCall1Ans6->GetString(LDBIZ_COMM_SUM_STATUS_STR));
            v_sum_comm_begin_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
            v_sum_comm_end_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
            v_sum_comm_begin_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
            v_sum_comm_end_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
            v_sum_comm_comple_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
            v_sum_comm_comple_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
            v_sum_comm_max_comm_comple_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
            v_sum_comm_max_comm_comple_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
            v_sum_comm_appr_date = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
            v_sum_comm_appr_time = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
            v_sum_comm_appr_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
            strcpy(v_comm_sum_approve_status, lpTSCall1Ans6->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
            v_sum_comm_basket_id = lpTSCall1Ans6->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
            v_sum_comm_net_price_flag = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
            v_sum_comm_bond_accr_intrst = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
            v_sum_comm_bond_rate_type = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
            strcpy(v_sum_comm_oper_way, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
            v_sum_comm_exter_comm_flag = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
            v_sum_buy_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
            v_sum_sell_order_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
            v_sum_buy_comm_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
            v_sum_sell_comm_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
            v_sum_buy_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
            v_sum_sell_strike_qty = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
            v_sum_buy_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
            v_sum_sell_strike_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
            v_sum_buy_comm_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
            v_sum_sell_comm_amt = lpTSCall1Ans6->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
            strcpy(v_sum_comm_remark_info, lpTSCall1Ans6->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
            v_sum_comm_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
            strcpy(v_acco_concat_info, lpTSCall1Ans6->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


            // [主动推送][secu.comm][证券主推_指令_指令主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
            lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
            lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
            lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
            lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
            lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
            lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
            lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
            lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
            lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
            lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
            lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
            lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
            lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
            lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
            lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
            lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
            lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
            lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
            lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


            // if @指令批号# > 0 then
            if (v_comm_batch_no > 0)
            {

                // set @指令备注信息#= @汇总指令备注信息#;
                strcpy(v_comm_remark_info,v_sum_comm_remark_info);

                // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
                lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
                lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
                lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
                lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
                lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
                glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

            // end if;
            }

        // end if;
        }


        // set @交易组提交质押数量# = 0;
        v_exgp_put_impawn_qty = 0;

        // set @资产账户提交质押数量# = 0;
        v_asac_put_impawn_qty = 0;
        //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
        //组织事务请求
        if(lpTSCall1Ans7)
        {
          lpTSCall1Ans7->FreeMsg();
          lpTSCall1Ans7=NULL;
        }
        lpTSCall1Req7=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
        lpTSCall1Req7->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req7->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req7->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req7->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req7->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req7->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req7->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req7->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req7->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req7->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req7->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req7->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req7->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req7->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req7->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req7, &lpTSCall1Ans7, 5000);
        if(!lpTSCall1Ans7)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans7->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
        v_exgp_cash_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
        v_exgp_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
        v_exgp_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
        v_exgp_comm_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
        v_exgp_comm_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
        v_exgp_comm_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
        v_exgp_comm_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
        v_exgp_trade_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
        v_exgp_trade_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
        v_exgp_trade_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
        v_exgp_trade_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
        v_exgp_strike_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
        v_exgp_strike_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
        v_exgp_cash_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
        v_exgp_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
        v_exgp_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
        v_exgp_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
        v_exgp_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
        v_exgp_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
        v_exgp_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
        v_exgp_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
        v_exgp_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
        v_exgp_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
        v_exgp_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
        v_exgp_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
        v_exgp_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
        v_exgp_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
        v_exgp_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
        v_exgp_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
        v_exgp_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
        v_exgp_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
        v_exgp_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
        v_exgp_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
        v_exgp_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
        v_asac_cash_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
        v_asac_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
        v_asac_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
        v_asac_comm_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
        v_asac_comm_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
        v_asac_comm_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
        v_asac_comm_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
        v_asac_trade_frozen_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
        v_asac_trade_unfroz_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
        v_asac_trade_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
        v_asac_trade_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
        v_asac_strike_capt_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
        v_asac_strike_releas_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
        v_asac_cash_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
        v_asac_posi_id = lpTSCall1Ans7->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
        v_asac_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
        v_asac_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
        v_asac_comm_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
        v_asac_comm_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
        v_asac_comm_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
        v_asac_comm_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
        v_asac_trade_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
        v_asac_trade_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
        v_asac_trade_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
        v_asac_trade_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
        v_asac_strike_capt_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
        v_asac_strike_releas_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
        v_asac_strike_frozen_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
        v_asac_strike_unfroz_qty = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
        v_asac_realize_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
        v_asac_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
        v_asac_intrst_cost_amt = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
        v_asac_intrst_pandl = lpTSCall1Ans7->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
        v_asac_posi_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


        // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
        glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


        // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


        // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
        glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


        // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

        //主推：交易证券_账户_交易组业务资金负债表、交易证券_账户_资产账户业务资金负债表、交易证券_账户_交易组业务持仓负债表、交易证券_账户_资产账户业务持仓负债表、交易证券_            账户_资产账户负债明细表、交易证券_账户_交易组负债明细表
        //调用过程[事务_交易证券_账户_查询交易组业务持仓负债]
        //组织事务请求
        if(lpTSCall1Ans8)
        {
          lpTSCall1Ans8->FreeMsg();
          lpTSCall1Ans8=NULL;
        }
        lpTSCall1Req8=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.76", 0);
        lpTSCall1Req8->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req8->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req8->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req8->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req8->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req8->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req8->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req8->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req8->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req8->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req8->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req8->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req8->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req8->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req8->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req8->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req8, &lpTSCall1Ans8, 5000);
        if(!lpTSCall1Ans8)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.76]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans8->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans8->GetInt64(LDBIZ_ROW_ID_INT64);
        v_exch_no = lpTSCall1Ans8->GetInt32(LDBIZ_EXCH_NO_INT);
        v_stock_type = lpTSCall1Ans8->GetInt32(LDBIZ_STOCK_TYPE_INT);
        v_asset_type = lpTSCall1Ans8->GetInt32(LDBIZ_ASSET_TYPE_INT);
        v_invest_type = lpTSCall1Ans8->GetInt32(LDBIZ_INVEST_TYPE_INT);
        v_debt_fina_buy_strike_qty = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT);
        v_fina_return_strike_qty = lpTSCall1Ans8->GetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT);
        v_debt_loan_sell_strike_qty = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT);
        v_loan_return_strike_qty = lpTSCall1Ans8->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT);
        v_debt_fina_buy_order_qty = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT);
        v_fina_return_order_qty = lpTSCall1Ans8->GetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT);
        v_debt_loan_sell_order_qty = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT);
        v_loan_return_order_qty = lpTSCall1Ans8->GetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT);
        v_debt_fina_buy_comm_qty = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT);
        v_fina_return_comm_qty = lpTSCall1Ans8->GetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT);
        v_debt_loan_sell_comm_qty = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT);
        v_loan_return_comm_qty = lpTSCall1Ans8->GetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT);
        v_debt_fina_buy_strike_amt = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT);
        v_fina_return_strike_amt = lpTSCall1Ans8->GetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT);
        v_debt_loan_sell_strike_amt = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
        v_loan_return_strike_amt = lpTSCall1Ans8->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
        v_debt_fina_buy_order_amt = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT);
        v_fina_return_order_amt = lpTSCall1Ans8->GetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT);
        v_debt_loan_sell_order_amt = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT);
        v_loan_return_order_amt = lpTSCall1Ans8->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
        v_debt_fina_buy_comm_amt = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT);
        v_fina_return_comm_amt = lpTSCall1Ans8->GetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT);
        v_debt_loan_sell_comm_amt = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT);
        v_loan_return_comm_amt = lpTSCall1Ans8->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
        v_debt_strike_fee = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
        v_return_strike_fee = lpTSCall1Ans8->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
        v_debt_interest = lpTSCall1Ans8->GetDouble(LDBIZ_DEBT_INTEREST_FLOAT);
        v_return_interest_amt = lpTSCall1Ans8->GetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT);
        v_update_times = lpTSCall1Ans8->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.exgpposidebt][证券主推_持仓_交易组业务持仓负债主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.928", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
        lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
        lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
        lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.exgpposidebt", lpPubMsg);

        //调用过程[事务_交易证券_账户_查询资产账户业务持仓负债]
        //组织事务请求
        if(lpTSCall1Ans9)
        {
          lpTSCall1Ans9->FreeMsg();
          lpTSCall1Ans9=NULL;
        }
        lpTSCall1Req9=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.77", 0);
        lpTSCall1Req9->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req9->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req9->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req9->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req9->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req9->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req9->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req9->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req9->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req9->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req9->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req9->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req9->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req9->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req9->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req9, &lpTSCall1Ans9, 5000);
        if(!lpTSCall1Ans9)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.77]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans9->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));


        // [主动推送][secu.asacposidebt][证券主推_持仓_资产账户业务持仓负债主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.929", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
        lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
        lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
        lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.asacposidebt", lpPubMsg);

        //调用过程[事务_交易证券_账户_查询资产账户业务资金负债]
        //组织事务请求
        if(lpTSCall1Ans10)
        {
          lpTSCall1Ans10->FreeMsg();
          lpTSCall1Ans10=NULL;
        }
        lpTSCall1Req10=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.75", 0);
        lpTSCall1Req10->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req10->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req10->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req10->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req10->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req10->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req10->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req10->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req10->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req10->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req10->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req10->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req10, &lpTSCall1Ans10, 5000);
        if(!lpTSCall1Ans10)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.75]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans10->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans10->GetInt64(LDBIZ_ROW_ID_INT64);
        v_debt_loan_sell_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
        v_debt_strike_fee = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
        v_loan_return_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
        v_loan_return_order_amt = lpTSCall1Ans10->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
        v_loan_return_comm_amt = lpTSCall1Ans10->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
        v_return_strike_fee = lpTSCall1Ans10->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
        v_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.asaccapitaldebt][证券主推_资金_资产账户业务资金负债主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.930", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.asaccapitaldebt", lpPubMsg);

        //调用过程[事务_交易证券_账户_查询交易组业务资金负债]
        //组织事务请求
        if(lpTSCall1Ans11)
        {
          lpTSCall1Ans11->FreeMsg();
          lpTSCall1Ans11=NULL;
        }
        lpTSCall1Req11=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.74", 0);
        lpTSCall1Req11->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req11->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req11->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req11->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req11->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req11->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req11->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req11->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req11->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req11->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req11->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req11->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req11->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req11, &lpTSCall1Ans11, 5000);
        if(!lpTSCall1Ans11)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.74]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans11->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans11->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans11->GetInt64(LDBIZ_ROW_ID_INT64);
        v_debt_loan_sell_strike_amt = lpTSCall1Ans11->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
        v_debt_strike_fee = lpTSCall1Ans11->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
        v_loan_return_strike_amt = lpTSCall1Ans11->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
        v_loan_return_order_amt = lpTSCall1Ans11->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
        v_loan_return_comm_amt = lpTSCall1Ans11->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
        v_return_strike_fee = lpTSCall1Ans11->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
        v_update_times = lpTSCall1Ans11->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.exgpcapitaldebt][证券主推_资金_交易组业务资金负债主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.931", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.exgpcapitaldebt", lpPubMsg);

    // end if;
    }


END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans12)
        {
          lpTSCall1Ans12->FreeMsg();
          lpTSCall1Ans12=NULL;
        }
        lpTSCall1Req12=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req12->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req12->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req12->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req12->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req12->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req12->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req12->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req12->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req12->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req12->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req12, &lpTSCall1Ans12, 5000);
        if (lpTSCall1Ans12)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans12->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans12->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans12->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans12->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans12->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
    lpOutBizMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpOutBizMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpOutBizMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpOutBizMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpOutBizMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpOutBizMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpOutBizMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpOutBizMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpOutBizMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpOutBizMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpOutBizMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpOutBizMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpOutBizMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpOutBizMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpOutBizMsg->SetString(LDBIZ_WTDRAW_STATUS_STR,v_wtdraw_status);
    lpOutBizMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpOutBizMsg->SetString(LDBIZ_RSP_STATUS_STR,v_rsp_status);
    lpOutBizMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    if(lpTSCall1Ans3)
        lpTSCall1Ans3->FreeMsg();
    if(lpTSCall1Ans4)
        lpTSCall1Ans4->FreeMsg();
    if(lpTSCall1Ans5)
        lpTSCall1Ans5->FreeMsg();
    if(lpTSCall1Ans6)
        lpTSCall1Ans6->FreeMsg();
    if(lpTSCall1Ans7)
        lpTSCall1Ans7->FreeMsg();
    if(lpTSCall1Ans8)
        lpTSCall1Ans8->FreeMsg();
    if(lpTSCall1Ans9)
        lpTSCall1Ans9->FreeMsg();
    if(lpTSCall1Ans10)
        lpTSCall1Ans10->FreeMsg();
    if(lpTSCall1Ans11)
        lpTSCall1Ans11->FreeMsg();
    if(lpTSCall1Ans12)
        lpTSCall1Ans12->FreeMsg();
    return iRet;
}

//逻辑_交易证券_报盘_融资融券处理订单回报
int LD_CALL_MODE fnFunc19(const char* lpFuncID, IFastMessage* lpInBizMsg, IFastMessage* lpOutBizMsg, IDB_Connection* lpDBConnect)
{
    int iRet=0;
    //先声明内部变量，包括输入参数，调用的过程的输出参数，以供内部各过程使用
    int v_opor_co_no;
    int v_opor_no;
    char v_opor_pwd[65];
    char v_oper_mac[33];
    char v_oper_ip_addr[33];
    char v_oper_info[1025];
    char v_oper_way[3];
    int v_menu_no;
    char v_func_code[17];
    int v_pass_no;
    char v_out_acco[33];
    int v_exch_no;
    char v_stock_acco[17];
    char v_stock_code[7];
    int v_report_date;
    int v_report_time;
    char v_report_no[33];
    int v_order_date;
    int64 v_order_id;
    int v_order_dir;
    double v_order_price;
    double v_order_qty;
    char v_rsp_info[256];
    char v_order_rsp_status[3];
    int v_price_type;
    char v_contra_no[33];
    char v_error_code[33];
    char v_error_info[256];
    int v_error_level;
    char v_error_deal[1025];
    char v_error_prompt[256];
    int v_init_date;
    char v_co_busi_config_str[65];
    int v_tmp_pass_no;
    char v_tmp_out_acco[33];
    int v_tmp_report_date;
    int v_tmp_report_time;
    char v_tmp_report_no[33];
    int v_busi_opor_no;
    char v_order_oper_way[3];
    int v_co_no;
    int v_pd_no;
    int v_exch_group_no;
    int v_asset_acco_no;
    int v_stock_acco_no;
    int v_stock_code_no;
    int v_stock_type;
    int v_asset_type;
    int64 v_comm_id;
    int v_comm_batch_no;
    int v_order_time;
    double v_order_frozen_qty;
    double v_order_frozen_amt;
    char v_order_status[3];
    double v_strike_qty;
    double v_strike_amt;
    double v_all_fee;
    double v_wtdraw_qty;
    int v_wtdraw_time;
    int v_exter_comm_flag;
    int v_cost_calc_type;
    char v_combo_code[33];
    int64 v_combo_posi_id;
    int64 v_strategy_id;
    int v_order_batch_no;
    int v_asset_acco_type;
    int v_exist_debt_flag;
    int v_update_times;
    char v_sys_config_str[65];
    char v_crncy_type[4];
    char v_exch_crncy_type[4];
    double v_buy_ref_rate;
    double v_sell_ref_rate;
    int v_capit_reback_days;
    int v_posi_reback_days;
    int v_trade_code_no;
    int v_target_code_no;
    int v_net_price_flag;
    double v_bond_accr_intrst;
    int v_bond_rate_type;
    double v_par_value;
    double v_impawn_ratio;
    int v_min_unit;
    int64 v_external_no;
    int v_comm_date;
    int v_comm_executor;
    double v_strike_bond_accr_intrst;
    char v_old_order_status[3];
    int64 v_row_id;
    int v_debt_type;
    double v_curr_strike_price;
    double v_curr_strike_amt;
    double v_curr_strike_qty;
    int64 v_strike_id;
    char v_wtdraw_status[3];
    int64 v_sum_order_row_id;
    int v_sum_order_opor_no;
    int v_sum_order_co_no;
    int v_sum_order_pd_no;
    int v_sum_order_exch_group_no;
    int v_sum_order_asset_acco_no;
    int v_sum_order_pass_no;
    char v_sum_order_exch_crncy_type[4];
    int v_sum_order_stock_code_no;
    int v_sum_order_trade_code_no;
    int v_sum_order_target_code_no;
    int64 v_sum_order_external_no;
    int v_sum_order_date;
    int v_sum_order_batch_no;
    int v_sum_order_dir;
    int v_sum_order_price_type;
    double v_sum_order_price;
    double v_sum_order_qty;
    char v_order_sum_status[3];
    double v_sum_order_wtdraw_qty;
    double v_sum_order_waste_qty;
    double v_sum_order_strike_amt;
    double v_sum_order_strike_qty;
    double v_sum_order_strike_aver_price;
    int v_sum_order_net_price_flag;
    double v_sum_order_bond_accr_intrst;
    int v_sum_order_bond_rate_type;
    double v_sum_order_par_value;
    double v_sum_order_impawn_ratio;
    char v_sum_order_oper_way[3];
    int v_sum_order_update_times;
    int64 v_sum_strike_row_id;
    int v_sum_strike_opor_no;
    int v_sum_strike_co_no;
    int v_sum_strike_pd_no;
    int v_sum_strike_exch_group_no;
    int v_sum_strike_asset_acco_no;
    int v_sum_strike_pass_no;
    char v_sum_strike_out_acco[33];
    int v_sum_strike_stock_acco_no;
    int v_sum_strike_stock_code_no;
    int64 v_sum_strike_comm_id;
    int v_sum_strike_report_date;
    char v_sum_strike_report_no[33];
    int v_sum_strike_order_date;
    int64 v_sum_strike_order_id;
    int v_sum_strike_order_dir;
    double v_sum_strike_order_price;
    double v_sum_strike_order_qty;
    double v_sum_strike_strike_qty;
    double v_sum_strike_strike_amt;
    double v_sum_strike_all_fee;
    double v_sum_strike_stamp_tax;
    double v_sum_strike_trans_fee;
    double v_sum_strike_brkage_fee;
    double v_sum_strike_SEC_charges;
    double v_sum_strike_other_fee;
    double v_sum_strike_trade_commis;
    double v_sum_strike_other_commis;
    double v_sum_trade_tax;
    double v_sum_trade_cost_fee;
    double v_sum_trade_system_use_fee;
    double v_sum_stock_settle_fee;
    int v_sum_strike_net_price_flag;
    double v_sum_strike_bond_accr_intrst;
    int v_sum_strike_bond_rate_type;
    char v_sum_strike_order_oper_way[3];
    int v_sum_strike_exter_comm_flag;
    int v_sum_strike_update_times;
    int v_sum_strike_order_batch_no;
    int64 v_sum_external_no;
    int v_comm_time;
    int v_comm_opor;
    int v_comm_dir;
    double v_comm_limit_price;
    double v_limit_actual_price;
    double v_comm_qty;
    double v_comm_amt;
    double v_comm_cancel_qty;
    double v_comm_frozen_amt;
    double v_comm_frozen_qty;
    char v_strike_status[3];
    char v_comm_status[3];
    int v_comm_begin_date;
    int v_comm_end_date;
    int v_comm_begin_time;
    int v_comm_end_time;
    int v_comm_comple_date;
    int v_comm_comple_time;
    int v_comm_appr_date;
    int v_comm_appr_time;
    char v_comm_appr_status[3];
    int v_comm_appr_oper;
    char v_comm_appr_remark[256];
    int64 v_basket_id;
    char v_comm_oper_way[3];
    int v_comm_comple_flag;
    double v_strategy_capt_qty;
    double v_strategy_order_qty;
    char v_comm_remark_info[1025];
    int v_disp_opor;
    int v_disp_status;
    int v_read_flag;
    int64 v_sum_comm_row_id;
    int v_sum_comm_co_no;
    int v_sum_comm_pd_no;
    int v_sum_comm_exch_group_no;
    int v_sum_comm_asset_acco_no;
    int v_sum_comm_pass_no;
    char v_sum_comm_out_acco[33];
    char v_sum_comm_exch_crncy_type[4];
    int v_sum_comm_stock_code_no;
    int v_sum_comm_date;
    int v_sum_comm_time;
    int v_sum_comm_batch_no;
    int v_sum_comm_opor;
    int v_sum_comm_executor;
    int v_sum_comm_dir;
    double v_sum_comm_limit_price;
    double v_sum_comm_qty;
    double v_sum_comm_amt;
    double v_sum_comm_order_qty;
    double v_sum_comm_cancel_qty;
    double v_sum_comm_await_cancel_qty;
    double v_sum_comm_strike_amt;
    double v_sum_comm_strike_qty;
    char v_sum_comm_strike_status[3];
    char v_comm_sum_status[3];
    int v_sum_comm_begin_date;
    int v_sum_comm_end_date;
    int v_sum_comm_begin_time;
    int v_sum_comm_end_time;
    int v_sum_comm_comple_date;
    int v_sum_comm_comple_time;
    int v_sum_comm_max_comm_comple_date;
    int v_sum_comm_max_comm_comple_time;
    int v_sum_comm_appr_date;
    int v_sum_comm_appr_time;
    double v_sum_comm_appr_qty;
    char v_comm_sum_approve_status[3];
    int64 v_sum_comm_basket_id;
    int v_sum_comm_net_price_flag;
    double v_sum_comm_bond_accr_intrst;
    int v_sum_comm_bond_rate_type;
    char v_sum_comm_oper_way[3];
    int v_sum_comm_exter_comm_flag;
    double v_sum_buy_order_qty;
    double v_sum_sell_order_qty;
    double v_sum_buy_comm_qty;
    double v_sum_sell_comm_qty;
    double v_sum_buy_strike_qty;
    double v_sum_sell_strike_qty;
    double v_sum_buy_strike_amt;
    double v_sum_sell_strike_amt;
    double v_sum_buy_comm_amt;
    double v_sum_sell_comm_amt;
    char v_sum_comm_remark_info[256];
    int v_sum_comm_update_times;
    char v_acco_concat_info[4097];
    double v_exgp_put_impawn_qty;
    double v_asac_put_impawn_qty;
    int64 v_exgp_cash_id;
    double v_exgp_frozen_amt;
    double v_exgp_unfroz_amt;
    double v_exgp_comm_frozen_amt;
    double v_exgp_comm_unfroz_amt;
    double v_exgp_comm_capt_amt;
    double v_exgp_comm_releas_amt;
    double v_exgp_trade_frozen_amt;
    double v_exgp_trade_unfroz_amt;
    double v_exgp_trade_capt_amt;
    double v_exgp_trade_releas_amt;
    double v_exgp_strike_capt_amt;
    double v_exgp_strike_releas_amt;
    int v_exgp_cash_update_times;
    int64 v_exgp_posi_id;
    double v_exgp_frozen_qty;
    double v_exgp_unfroz_qty;
    double v_exgp_comm_frozen_qty;
    double v_exgp_comm_unfroz_qty;
    double v_exgp_comm_capt_qty;
    double v_exgp_comm_releas_qty;
    double v_exgp_trade_frozen_qty;
    double v_exgp_trade_unfroz_qty;
    double v_exgp_trade_capt_qty;
    double v_exgp_trade_releas_qty;
    double v_exgp_strike_capt_qty;
    double v_exgp_strike_releas_qty;
    double v_exgp_strike_frozen_qty;
    double v_exgp_strike_unfroz_qty;
    double v_exgp_realize_pandl;
    double v_exgp_cost_amt;
    double v_exgp_intrst_cost_amt;
    double v_exgp_intrst_pandl;
    int v_exgp_posi_update_times;
    int64 v_asac_cash_id;
    double v_asac_frozen_amt;
    double v_asac_unfroz_amt;
    double v_asac_comm_frozen_amt;
    double v_asac_comm_unfroz_amt;
    double v_asac_comm_capt_amt;
    double v_asac_comm_releas_amt;
    double v_asac_trade_frozen_amt;
    double v_asac_trade_unfroz_amt;
    double v_asac_trade_capt_amt;
    double v_asac_trade_releas_amt;
    double v_asac_strike_capt_amt;
    double v_asac_strike_releas_amt;
    int v_asac_cash_update_times;
    int64 v_asac_posi_id;
    double v_asac_frozen_qty;
    double v_asac_unfroz_qty;
    double v_asac_comm_frozen_qty;
    double v_asac_comm_unfroz_qty;
    double v_asac_comm_capt_qty;
    double v_asac_comm_releas_qty;
    double v_asac_trade_frozen_qty;
    double v_asac_trade_unfroz_qty;
    double v_asac_trade_capt_qty;
    double v_asac_trade_releas_qty;
    double v_asac_strike_capt_qty;
    double v_asac_strike_releas_qty;
    double v_asac_strike_frozen_qty;
    double v_asac_strike_unfroz_qty;
    double v_asac_realize_pandl;
    double v_asac_cost_amt;
    double v_asac_intrst_cost_amt;
    double v_asac_intrst_pandl;
    int v_asac_posi_update_times;
    int v_invest_type;
    double v_debt_fina_buy_strike_qty;
    double v_fina_return_strike_qty;
    double v_debt_loan_sell_strike_qty;
    double v_loan_return_strike_qty;
    double v_debt_fina_buy_order_qty;
    double v_fina_return_order_qty;
    double v_debt_loan_sell_order_qty;
    double v_loan_return_order_qty;
    double v_debt_fina_buy_comm_qty;
    double v_fina_return_comm_qty;
    double v_debt_loan_sell_comm_qty;
    double v_loan_return_comm_qty;
    double v_debt_fina_buy_strike_amt;
    double v_fina_return_strike_amt;
    double v_debt_loan_sell_strike_amt;
    double v_loan_return_strike_amt;
    double v_debt_fina_buy_order_amt;
    double v_fina_return_order_amt;
    double v_debt_loan_sell_order_amt;
    double v_loan_return_order_amt;
    double v_debt_fina_buy_comm_amt;
    double v_fina_return_comm_amt;
    double v_debt_loan_sell_comm_amt;
    double v_loan_return_comm_amt;
    double v_debt_strike_fee;
    double v_return_strike_fee;
    double v_debt_interest;
    double v_return_interest_amt;
    char v_log_error_code[33];
    char v_log_error_info[256];


IFastMessage* lpPubMsg = NULL;
int iPriority=lpInBizMsg->GetInt32(LDTAG_PRIORITY);

    //初始化内部变量值
    v_opor_co_no=0;
    v_opor_no=0;
    strcpy(v_opor_pwd, " ");
    strcpy(v_oper_mac, " ");
    strcpy(v_oper_ip_addr, " ");
    strcpy(v_oper_info, " ");
    strcpy(v_oper_way, "0");
    v_menu_no=0;
    strcpy(v_func_code, " ");
    v_pass_no=0;
    strcpy(v_out_acco, " ");
    v_exch_no=0;
    strcpy(v_stock_acco, " ");
    strcpy(v_stock_code, " ");
    v_report_date=0;
    v_report_time=0;
    strcpy(v_report_no, " ");
    v_order_date=0;
    v_order_id=0;
    v_order_dir=0;
    v_order_price=0;
    v_order_qty=0;
    strcpy(v_rsp_info, " ");
    strcpy(v_order_rsp_status, "0");
    v_price_type=0;
    strcpy(v_contra_no, " ");
    strcpy(v_error_code, "0");
    strcpy(v_error_info, " ");
    v_error_level=0;
    strcpy(v_error_deal, " ");
    strcpy(v_error_prompt, " ");
    v_init_date=0;
    strcpy(v_co_busi_config_str, " ");
    v_tmp_pass_no=0;
    strcpy(v_tmp_out_acco, " ");
    v_tmp_report_date=0;
    v_tmp_report_time=0;
    strcpy(v_tmp_report_no, " ");
    v_busi_opor_no=0;
    strcpy(v_order_oper_way, " ");
    v_co_no=0;
    v_pd_no=0;
    v_exch_group_no=0;
    v_asset_acco_no=0;
    v_stock_acco_no=0;
    v_stock_code_no=0;
    v_stock_type=0;
    v_asset_type=0;
    v_comm_id=0;
    v_comm_batch_no=0;
    v_order_time=0;
    v_order_frozen_qty=0;
    v_order_frozen_amt=0;
    strcpy(v_order_status, "0");
    v_strike_qty=0;
    v_strike_amt=0;
    v_all_fee=0;
    v_wtdraw_qty=0;
    v_wtdraw_time=0;
    v_exter_comm_flag=0;
    v_cost_calc_type=0;
    strcpy(v_combo_code, " ");
    v_combo_posi_id=0;
    v_strategy_id=0;
    v_order_batch_no=0;
    v_asset_acco_type=0;
    v_exist_debt_flag=0;
    v_update_times=1;
    strcpy(v_sys_config_str, " ");
    strcpy(v_crncy_type, "CNY");
    strcpy(v_exch_crncy_type, "CNY");
    v_buy_ref_rate=0;
    v_sell_ref_rate=0;
    v_capit_reback_days=0;
    v_posi_reback_days=0;
    v_trade_code_no=0;
    v_target_code_no=0;
    v_net_price_flag=0;
    v_bond_accr_intrst=0;
    v_bond_rate_type=0;
    v_par_value=0;
    v_impawn_ratio=0;
    v_min_unit=0;
    v_external_no=0;
    v_comm_date=0;
    v_comm_executor=0;
    v_strike_bond_accr_intrst=0;
    strcpy(v_old_order_status, "0");
    v_row_id=0;
    v_debt_type=0;
    v_curr_strike_price=0;
    v_curr_strike_amt=0;
    v_curr_strike_qty=0;
    v_strike_id=0;
    strcpy(v_wtdraw_status, "0");
    v_sum_order_row_id=0;
    v_sum_order_opor_no=0;
    v_sum_order_co_no=0;
    v_sum_order_pd_no=0;
    v_sum_order_exch_group_no=0;
    v_sum_order_asset_acco_no=0;
    v_sum_order_pass_no=0;
    strcpy(v_sum_order_exch_crncy_type, "CNY");
    v_sum_order_stock_code_no=0;
    v_sum_order_trade_code_no=0;
    v_sum_order_target_code_no=0;
    v_sum_order_external_no=0;
    v_sum_order_date=0;
    v_sum_order_batch_no=0;
    v_sum_order_dir=0;
    v_sum_order_price_type=0;
    v_sum_order_price=0;
    v_sum_order_qty=0;
    strcpy(v_order_sum_status, "0");
    v_sum_order_wtdraw_qty=0;
    v_sum_order_waste_qty=0;
    v_sum_order_strike_amt=0;
    v_sum_order_strike_qty=0;
    v_sum_order_strike_aver_price=0;
    v_sum_order_net_price_flag=0;
    v_sum_order_bond_accr_intrst=0;
    v_sum_order_bond_rate_type=0;
    v_sum_order_par_value=0;
    v_sum_order_impawn_ratio=0;
    strcpy(v_sum_order_oper_way, " ");
    v_sum_order_update_times=1;
    v_sum_strike_row_id=0;
    v_sum_strike_opor_no=0;
    v_sum_strike_co_no=0;
    v_sum_strike_pd_no=0;
    v_sum_strike_exch_group_no=0;
    v_sum_strike_asset_acco_no=0;
    v_sum_strike_pass_no=0;
    strcpy(v_sum_strike_out_acco, " ");
    v_sum_strike_stock_acco_no=0;
    v_sum_strike_stock_code_no=0;
    v_sum_strike_comm_id=0;
    v_sum_strike_report_date=0;
    strcpy(v_sum_strike_report_no, " ");
    v_sum_strike_order_date=0;
    v_sum_strike_order_id=0;
    v_sum_strike_order_dir=0;
    v_sum_strike_order_price=0;
    v_sum_strike_order_qty=0;
    v_sum_strike_strike_qty=0;
    v_sum_strike_strike_amt=0;
    v_sum_strike_all_fee=0;
    v_sum_strike_stamp_tax=0;
    v_sum_strike_trans_fee=0;
    v_sum_strike_brkage_fee=0;
    v_sum_strike_SEC_charges=0;
    v_sum_strike_other_fee=0;
    v_sum_strike_trade_commis=0;
    v_sum_strike_other_commis=0;
    v_sum_trade_tax=0;
    v_sum_trade_cost_fee=0;
    v_sum_trade_system_use_fee=0;
    v_sum_stock_settle_fee=0;
    v_sum_strike_net_price_flag=0;
    v_sum_strike_bond_accr_intrst=0;
    v_sum_strike_bond_rate_type=0;
    strcpy(v_sum_strike_order_oper_way, " ");
    v_sum_strike_exter_comm_flag=0;
    v_sum_strike_update_times=1;
    v_sum_strike_order_batch_no=0;
    v_sum_external_no=0;
    v_comm_time=0;
    v_comm_opor=0;
    v_comm_dir=0;
    v_comm_limit_price=0;
    v_limit_actual_price=0;
    v_comm_qty=0;
    v_comm_amt=0;
    v_comm_cancel_qty=0;
    v_comm_frozen_amt=0;
    v_comm_frozen_qty=0;
    strcpy(v_strike_status, "0");
    strcpy(v_comm_status, "0");
    v_comm_begin_date=0;
    v_comm_end_date=0;
    v_comm_begin_time=0;
    v_comm_end_time=0;
    v_comm_comple_date=0;
    v_comm_comple_time=0;
    v_comm_appr_date=0;
    v_comm_appr_time=0;
    strcpy(v_comm_appr_status, " ");
    v_comm_appr_oper=0;
    strcpy(v_comm_appr_remark, " ");
    v_basket_id=0;
    strcpy(v_comm_oper_way, " ");
    v_comm_comple_flag=0;
    v_strategy_capt_qty=0;
    v_strategy_order_qty=0;
    strcpy(v_comm_remark_info, " ");
    v_disp_opor=0;
    v_disp_status=0;
    v_read_flag=0;
    v_sum_comm_row_id=0;
    v_sum_comm_co_no=0;
    v_sum_comm_pd_no=0;
    v_sum_comm_exch_group_no=0;
    v_sum_comm_asset_acco_no=0;
    v_sum_comm_pass_no=0;
    strcpy(v_sum_comm_out_acco, " ");
    strcpy(v_sum_comm_exch_crncy_type, "CNY");
    v_sum_comm_stock_code_no=0;
    v_sum_comm_date=0;
    v_sum_comm_time=0;
    v_sum_comm_batch_no=0;
    v_sum_comm_opor=0;
    v_sum_comm_executor=0;
    v_sum_comm_dir=0;
    v_sum_comm_limit_price=0;
    v_sum_comm_qty=0;
    v_sum_comm_amt=0;
    v_sum_comm_order_qty=0;
    v_sum_comm_cancel_qty=0;
    v_sum_comm_await_cancel_qty=0;
    v_sum_comm_strike_amt=0;
    v_sum_comm_strike_qty=0;
    strcpy(v_sum_comm_strike_status, "0");
    strcpy(v_comm_sum_status, "0");
    v_sum_comm_begin_date=0;
    v_sum_comm_end_date=0;
    v_sum_comm_begin_time=0;
    v_sum_comm_end_time=0;
    v_sum_comm_comple_date=0;
    v_sum_comm_comple_time=0;
    v_sum_comm_max_comm_comple_date=0;
    v_sum_comm_max_comm_comple_time=0;
    v_sum_comm_appr_date=0;
    v_sum_comm_appr_time=0;
    v_sum_comm_appr_qty=0;
    strcpy(v_comm_sum_approve_status, "0");
    v_sum_comm_basket_id=0;
    v_sum_comm_net_price_flag=0;
    v_sum_comm_bond_accr_intrst=0;
    v_sum_comm_bond_rate_type=0;
    strcpy(v_sum_comm_oper_way, " ");
    v_sum_comm_exter_comm_flag=0;
    v_sum_buy_order_qty=0;
    v_sum_sell_order_qty=0;
    v_sum_buy_comm_qty=0;
    v_sum_sell_comm_qty=0;
    v_sum_buy_strike_qty=0;
    v_sum_sell_strike_qty=0;
    v_sum_buy_strike_amt=0;
    v_sum_sell_strike_amt=0;
    v_sum_buy_comm_amt=0;
    v_sum_sell_comm_amt=0;
    strcpy(v_sum_comm_remark_info, " ");
    v_sum_comm_update_times=1;
    strcpy(v_acco_concat_info, " ");
    v_exgp_put_impawn_qty=0;
    v_asac_put_impawn_qty=0;
    v_exgp_cash_id=0;
    v_exgp_frozen_amt=0;
    v_exgp_unfroz_amt=0;
    v_exgp_comm_frozen_amt=0;
    v_exgp_comm_unfroz_amt=0;
    v_exgp_comm_capt_amt=0;
    v_exgp_comm_releas_amt=0;
    v_exgp_trade_frozen_amt=0;
    v_exgp_trade_unfroz_amt=0;
    v_exgp_trade_capt_amt=0;
    v_exgp_trade_releas_amt=0;
    v_exgp_strike_capt_amt=0;
    v_exgp_strike_releas_amt=0;
    v_exgp_cash_update_times=1;
    v_exgp_posi_id=0;
    v_exgp_frozen_qty=0;
    v_exgp_unfroz_qty=0;
    v_exgp_comm_frozen_qty=0;
    v_exgp_comm_unfroz_qty=0;
    v_exgp_comm_capt_qty=0;
    v_exgp_comm_releas_qty=0;
    v_exgp_trade_frozen_qty=0;
    v_exgp_trade_unfroz_qty=0;
    v_exgp_trade_capt_qty=0;
    v_exgp_trade_releas_qty=0;
    v_exgp_strike_capt_qty=0;
    v_exgp_strike_releas_qty=0;
    v_exgp_strike_frozen_qty=0;
    v_exgp_strike_unfroz_qty=0;
    v_exgp_realize_pandl=0;
    v_exgp_cost_amt=0;
    v_exgp_intrst_cost_amt=0;
    v_exgp_intrst_pandl=0;
    v_exgp_posi_update_times=1;
    v_asac_cash_id=0;
    v_asac_frozen_amt=0;
    v_asac_unfroz_amt=0;
    v_asac_comm_frozen_amt=0;
    v_asac_comm_unfroz_amt=0;
    v_asac_comm_capt_amt=0;
    v_asac_comm_releas_amt=0;
    v_asac_trade_frozen_amt=0;
    v_asac_trade_unfroz_amt=0;
    v_asac_trade_capt_amt=0;
    v_asac_trade_releas_amt=0;
    v_asac_strike_capt_amt=0;
    v_asac_strike_releas_amt=0;
    v_asac_cash_update_times=1;
    v_asac_posi_id=0;
    v_asac_frozen_qty=0;
    v_asac_unfroz_qty=0;
    v_asac_comm_frozen_qty=0;
    v_asac_comm_unfroz_qty=0;
    v_asac_comm_capt_qty=0;
    v_asac_comm_releas_qty=0;
    v_asac_trade_frozen_qty=0;
    v_asac_trade_unfroz_qty=0;
    v_asac_trade_capt_qty=0;
    v_asac_trade_releas_qty=0;
    v_asac_strike_capt_qty=0;
    v_asac_strike_releas_qty=0;
    v_asac_strike_frozen_qty=0;
    v_asac_strike_unfroz_qty=0;
    v_asac_realize_pandl=0;
    v_asac_cost_amt=0;
    v_asac_intrst_cost_amt=0;
    v_asac_intrst_pandl=0;
    v_asac_posi_update_times=1;
    v_invest_type=0;
    v_debt_fina_buy_strike_qty=0;
    v_fina_return_strike_qty=0;
    v_debt_loan_sell_strike_qty=0;
    v_loan_return_strike_qty=0;
    v_debt_fina_buy_order_qty=0;
    v_fina_return_order_qty=0;
    v_debt_loan_sell_order_qty=0;
    v_loan_return_order_qty=0;
    v_debt_fina_buy_comm_qty=0;
    v_fina_return_comm_qty=0;
    v_debt_loan_sell_comm_qty=0;
    v_loan_return_comm_qty=0;
    v_debt_fina_buy_strike_amt=0;
    v_fina_return_strike_amt=0;
    v_debt_loan_sell_strike_amt=0;
    v_loan_return_strike_amt=0;
    v_debt_fina_buy_order_amt=0;
    v_fina_return_order_amt=0;
    v_debt_loan_sell_order_amt=0;
    v_loan_return_order_amt=0;
    v_debt_fina_buy_comm_amt=0;
    v_fina_return_comm_amt=0;
    v_debt_loan_sell_comm_amt=0;
    v_loan_return_comm_amt=0;
    v_debt_strike_fee=0;
    v_return_strike_fee=0;
    v_debt_interest=0;
    v_return_interest_amt=0;
    strcpy(v_log_error_code, "0");
    strcpy(v_log_error_info, " ");

    //获取输入参数值
    v_opor_co_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_CO_NO_INT);
    v_opor_no = lpInBizMsg->GetInt32(LDBIZ_OPOR_NO_INT);
    strncpy(v_opor_pwd, lpInBizMsg->GetString(LDBIZ_OPOR_PWD_STR),64);
    v_opor_pwd[64] = '\0';
    strncpy(v_oper_mac, lpInBizMsg->GetString(LDBIZ_OPER_MAC_STR),32);
    v_oper_mac[32] = '\0';
    strncpy(v_oper_ip_addr, lpInBizMsg->GetString(LDBIZ_OPER_IP_ADDR_STR),32);
    v_oper_ip_addr[32] = '\0';
    strncpy(v_oper_info, lpInBizMsg->GetString(LDBIZ_OPER_INFO_STR),1024);
    v_oper_info[1024] = '\0';
    strncpy(v_oper_way, lpInBizMsg->GetString(LDBIZ_OPER_WAY_STR),2);
    v_oper_way[2] = '\0';
    v_menu_no = lpInBizMsg->GetInt32(LDBIZ_MENU_NO_INT);
    strncpy(v_func_code, lpInBizMsg->GetString(LDBIZ_FUNC_CODE_STR),16);
    v_func_code[16] = '\0';
    v_pass_no = lpInBizMsg->GetInt32(LDBIZ_PASS_NO_INT);
    strncpy(v_out_acco, lpInBizMsg->GetString(LDBIZ_OUT_ACCO_STR),32);
    v_out_acco[32] = '\0';
    v_exch_no = lpInBizMsg->GetInt32(LDBIZ_EXCH_NO_INT);
    strncpy(v_stock_acco, lpInBizMsg->GetString(LDBIZ_STOCK_ACCO_STR),16);
    v_stock_acco[16] = '\0';
    strncpy(v_stock_code, lpInBizMsg->GetString(LDBIZ_STOCK_CODE_STR),6);
    v_stock_code[6] = '\0';
    v_report_date = lpInBizMsg->GetInt32(LDBIZ_REPORT_DATE_INT);
    v_report_time = lpInBizMsg->GetInt32(LDBIZ_REPORT_TIME_INT);
    strncpy(v_report_no, lpInBizMsg->GetString(LDBIZ_REPORT_NO_STR),32);
    v_report_no[32] = '\0';
    v_order_date = lpInBizMsg->GetInt32(LDBIZ_ORDER_DATE_INT);
    v_order_id = lpInBizMsg->GetInt64(LDBIZ_ORDER_ID_INT64);
    v_order_dir = lpInBizMsg->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_order_price = lpInBizMsg->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpInBizMsg->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    strncpy(v_rsp_info, lpInBizMsg->GetString(LDBIZ_RSP_INFO_STR),255);
    v_rsp_info[255] = '\0';
    strncpy(v_order_rsp_status, lpInBizMsg->GetString(LDBIZ_ORDER_RSP_STATUS_STR),2);
    v_order_rsp_status[2] = '\0';
    v_price_type = lpInBizMsg->GetInt32(LDBIZ_PRICE_TYPE_INT);
    strncpy(v_contra_no, lpInBizMsg->GetString(LDBIZ_CONTRA_NO_STR),32);
    v_contra_no[32] = '\0';

    IFastMessage* lpTSCall1Req0 = NULL;
    IFastMessage* lpTSCall1Ans0 = NULL;
    IFastMessage* lpTSCall1Req1 = NULL;
    IFastMessage* lpTSCall1Ans1 = NULL;
    IFastMessage* lpTSCall1Req2 = NULL;
    IFastMessage* lpTSCall1Ans2 = NULL;
    IFastMessage* lpTSCall1Req3 = NULL;
    IFastMessage* lpTSCall1Ans3 = NULL;
    IFastMessage* lpTSCall1Req4 = NULL;
    IFastMessage* lpTSCall1Ans4 = NULL;
    IFastMessage* lpTSCall1Req5 = NULL;
    IFastMessage* lpTSCall1Ans5 = NULL;
    IFastMessage* lpTSCall1Req6 = NULL;
    IFastMessage* lpTSCall1Ans6 = NULL;
    IFastMessage* lpTSCall1Req7 = NULL;
    IFastMessage* lpTSCall1Ans7 = NULL;
    IFastMessage* lpTSCall1Req8 = NULL;
    IFastMessage* lpTSCall1Ans8 = NULL;
    IFastMessage* lpTSCall1Req9 = NULL;
    IFastMessage* lpTSCall1Ans9 = NULL;
    IFastMessage* lpTSCall1Req10 = NULL;
    IFastMessage* lpTSCall1Ans10 = NULL;
    IFastMessage* lpTSCall1Req11 = NULL;
    IFastMessage* lpTSCall1Ans11 = NULL;

    //调用过程[事务_公共_公共接口_检查系统状态权限身份]
    //组织事务请求
    if(lpTSCall1Ans0)
    {
      lpTSCall1Ans0->FreeMsg();
      lpTSCall1Ans0=NULL;
    }
    lpTSCall1Req0=glpFastMsgFactory->CreateFastMessage("pubT.24.1", 0);
    lpTSCall1Req0->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req0->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req0->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req0->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req0->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req0->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req0->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req0->SetInt32(LDBIZ_MENU_NO_INT,v_menu_no);
    lpTSCall1Req0->SetString(LDBIZ_OPOR_PWD_STR,v_opor_pwd);
    glpTSSubcallSerives->SubCall(lpTSCall1Req0, &lpTSCall1Ans0, 5000);
    if(!lpTSCall1Ans0)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.24.1]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans0->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans0->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans0->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans0->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans0->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_co_busi_config_str, lpTSCall1Ans0->GetString(LDBIZ_CO_BUSI_CONFIG_STR_STR));

    //预防报盘接口有些字段不正确，取原订单信息的值

    // set @临时_通道编号# = @通道编号#;
    v_tmp_pass_no = v_pass_no;

    // set @临时_外部账号# = @外部账号#;
    strcpy(v_tmp_out_acco,v_out_acco);

    // set @临时_申报日期# = @申报日期#;
    v_tmp_report_date = v_report_date;

    // set @临时_申报时间# = @申报时间#;
    v_tmp_report_time = v_report_time;

    // set @临时_申报编号# = @申报编号#;
    strcpy(v_tmp_report_no,v_report_no);
    //调用过程[事务_交易证券_交易_获取订单信息]
    //组织事务请求
    if(lpTSCall1Ans1)
    {
      lpTSCall1Ans1->FreeMsg();
      lpTSCall1Ans1=NULL;
    }
    lpTSCall1Req1=glpFastMsgFactory->CreateFastMessage("tdsecuT.4.71", 0);
    lpTSCall1Req1->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req1->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req1->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req1->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req1->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req1->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req1->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req1->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpTSCall1Req1->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    glpTSSubcallSerives->SubCall(lpTSCall1Req1, &lpTSCall1Ans1, 5000);
    if(!lpTSCall1Ans1)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.4.71]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans1->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans1->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans1->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans1->GetString(LDBIZ_ERROR_INFO_STR));
    v_busi_opor_no = lpTSCall1Ans1->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    strcpy(v_order_oper_way, lpTSCall1Ans1->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    v_co_no = lpTSCall1Ans1->GetInt32(LDBIZ_CO_NO_INT);
    v_pd_no = lpTSCall1Ans1->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans1->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans1->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    v_pass_no = lpTSCall1Ans1->GetInt32(LDBIZ_PASS_NO_INT);
    v_exch_no = lpTSCall1Ans1->GetInt32(LDBIZ_EXCH_NO_INT);
    v_stock_acco_no = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    strcpy(v_stock_acco, lpTSCall1Ans1->GetString(LDBIZ_STOCK_ACCO_STR));
    v_stock_code_no = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    strcpy(v_stock_code, lpTSCall1Ans1->GetString(LDBIZ_STOCK_CODE_STR));
    v_stock_type = lpTSCall1Ans1->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_asset_type = lpTSCall1Ans1->GetInt32(LDBIZ_ASSET_TYPE_INT);
    v_comm_id = lpTSCall1Ans1->GetInt64(LDBIZ_COMM_ID_INT64);
    v_comm_batch_no = lpTSCall1Ans1->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
    v_report_date = lpTSCall1Ans1->GetInt32(LDBIZ_REPORT_DATE_INT);
    v_report_time = lpTSCall1Ans1->GetInt32(LDBIZ_REPORT_TIME_INT);
    strcpy(v_report_no, lpTSCall1Ans1->GetString(LDBIZ_REPORT_NO_STR));
    v_order_time = lpTSCall1Ans1->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_order_dir = lpTSCall1Ans1->GetInt32(LDBIZ_ORDER_DIR_INT);
    v_order_price = lpTSCall1Ans1->GetDouble(LDBIZ_ORDER_PRICE_FLOAT);
    v_order_qty = lpTSCall1Ans1->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
    v_order_frozen_qty = lpTSCall1Ans1->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
    v_order_frozen_amt = lpTSCall1Ans1->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans1->GetString(LDBIZ_ORDER_STATUS_STR));
    v_price_type = lpTSCall1Ans1->GetInt32(LDBIZ_PRICE_TYPE_INT);
    v_strike_qty = lpTSCall1Ans1->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_amt = lpTSCall1Ans1->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    v_all_fee = lpTSCall1Ans1->GetDouble(LDBIZ_ALL_FEE_FLOAT);
    v_wtdraw_qty = lpTSCall1Ans1->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
    v_wtdraw_time = lpTSCall1Ans1->GetInt32(LDBIZ_WTDRAW_TIME_INT);
    v_exter_comm_flag = lpTSCall1Ans1->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
    v_cost_calc_type = lpTSCall1Ans1->GetInt32(LDBIZ_COST_CALC_TYPE_INT);
    strcpy(v_combo_code, lpTSCall1Ans1->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans1->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    v_strategy_id = lpTSCall1Ans1->GetInt64(LDBIZ_STRATEGY_ID_INT64);
    v_order_batch_no = lpTSCall1Ans1->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    strcpy(v_out_acco, lpTSCall1Ans1->GetString(LDBIZ_OUT_ACCO_STR));
    v_asset_acco_type = lpTSCall1Ans1->GetInt32(LDBIZ_ASSET_ACCO_TYPE_INT);
    strcpy(v_contra_no, lpTSCall1Ans1->GetString(LDBIZ_CONTRA_NO_STR));
    v_exist_debt_flag = lpTSCall1Ans1->GetInt32(LDBIZ_EXIST_DEBT_FLAG_INT);
    v_update_times = lpTSCall1Ans1->GetInt32(LDBIZ_UPDATE_TIMES_INT);


    // set @通道编号# = @临时_通道编号#;
    v_pass_no = v_tmp_pass_no;

    // set @外部账号# = @临时_外部账号#;
    strcpy(v_out_acco,v_tmp_out_acco);

    // set @申报日期# = @临时_申报日期#;
    v_report_date = v_tmp_report_date;

    // set @申报时间# = @临时_申报时间#;
    v_report_time = v_tmp_report_time;

    // set @申报编号# = @临时_申报编号#;
    strcpy(v_report_no,v_tmp_report_no);
    //公共子系统检查
    //调用过程[事务_公共_交易接口_检查回报业务控制]
    //组织事务请求
    if(lpTSCall1Ans2)
    {
      lpTSCall1Ans2->FreeMsg();
      lpTSCall1Ans2=NULL;
    }
    lpTSCall1Req2=glpFastMsgFactory->CreateFastMessage("pubT.25.31", 0);
    lpTSCall1Req2->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req2->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req2->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req2->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req2->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req2->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req2->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req2->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req2->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req2->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    glpTSSubcallSerives->SubCall(lpTSCall1Req2, &lpTSCall1Ans2, 5000);
    if(!lpTSCall1Ans2)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[pubT.25.31]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans2->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans2->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans2->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans2->GetString(LDBIZ_ERROR_INFO_STR));
    v_init_date = lpTSCall1Ans2->GetInt32(LDBIZ_INIT_DATE_INT);
    strcpy(v_sys_config_str, lpTSCall1Ans2->GetString(LDBIZ_SYS_CONFIG_STR_STR));
    strcpy(v_crncy_type, lpTSCall1Ans2->GetString(LDBIZ_CRNCY_TYPE_STR));
    strcpy(v_exch_crncy_type, lpTSCall1Ans2->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_buy_ref_rate = lpTSCall1Ans2->GetDouble(LDBIZ_BUY_REF_RATE_FLOAT);
    v_sell_ref_rate = lpTSCall1Ans2->GetDouble(LDBIZ_SELL_REF_RATE_FLOAT);
    v_stock_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_type = lpTSCall1Ans2->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_capit_reback_days = lpTSCall1Ans2->GetInt32(LDBIZ_CAPIT_REBACK_DAYS_INT);
    v_posi_reback_days = lpTSCall1Ans2->GetInt32(LDBIZ_POSI_REBACK_DAYS_INT);
    v_trade_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_TRADE_CODE_NO_INT);
    v_target_code_no = lpTSCall1Ans2->GetInt32(LDBIZ_TARGET_CODE_NO_INT);
    v_net_price_flag = lpTSCall1Ans2->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_bond_accr_intrst = lpTSCall1Ans2->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans2->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_par_value = lpTSCall1Ans2->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans2->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_min_unit = lpTSCall1Ans2->GetInt32(LDBIZ_MIN_UNIT_INT);

    //处理订单回报
    //调用过程[事务_交易证券_报盘_融资融券处理订单回报]
    //组织事务请求
    if(lpTSCall1Ans3)
    {
      lpTSCall1Ans3->FreeMsg();
      lpTSCall1Ans3=NULL;
    }
    lpTSCall1Req3=glpFastMsgFactory->CreateFastMessage("tdsecuT.5.134", 0);
    lpTSCall1Req3->SetInt32(LDTAG_PRIORITY, iPriority);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
    lpTSCall1Req3->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpTSCall1Req3->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
    lpTSCall1Req3->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
    lpTSCall1Req3->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
    lpTSCall1Req3->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
    lpTSCall1Req3->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
    lpTSCall1Req3->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
    lpTSCall1Req3->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpTSCall1Req3->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpTSCall1Req3->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpTSCall1Req3->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpTSCall1Req3->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpTSCall1Req3->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpTSCall1Req3->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpTSCall1Req3->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpTSCall1Req3->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpTSCall1Req3->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpTSCall1Req3->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpTSCall1Req3->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpTSCall1Req3->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpTSCall1Req3->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpTSCall1Req3->SetString(LDBIZ_ORDER_RSP_STATUS_STR,v_order_rsp_status);
    lpTSCall1Req3->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpTSCall1Req3->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
    glpTSSubcallSerives->SubCall(lpTSCall1Req3, &lpTSCall1Ans3, 5000);
    if(!lpTSCall1Ans3)  //  超时错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.5.134]subcall timed out!");
        iRet=-2;
        goto ENDSYS;
    }
    else if(lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
    {
        lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans3->GetInt32(LDTAG_ERRORNO));
        lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans3->GetString(LDTAG_ERRORINFO));
        iRet=-2;
        goto ENDSYS;
    }
    else if(strcmp(lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
    {
        strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
        iRet=-1;
        goto END;
    }
    //获取输出参数值
    strcpy(v_error_code, lpTSCall1Ans3->GetString(LDBIZ_ERROR_CODE_STR));
    strcpy(v_error_info, lpTSCall1Ans3->GetString(LDBIZ_ERROR_INFO_STR));
    v_co_no = lpTSCall1Ans3->GetInt32(LDBIZ_CO_NO_INT);
    v_busi_opor_no = lpTSCall1Ans3->GetInt32(LDBIZ_BUSI_OPOR_NO_INT);
    v_pd_no = lpTSCall1Ans3->GetInt32(LDBIZ_PD_NO_INT);
    v_exch_group_no = lpTSCall1Ans3->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
    v_asset_acco_no = lpTSCall1Ans3->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
    v_stock_code_no = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
    v_stock_acco_no = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
    v_external_no = lpTSCall1Ans3->GetInt64(LDBIZ_EXTERNAL_NO_INT64);
    strcpy(v_exch_crncy_type, lpTSCall1Ans3->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
    v_comm_date = lpTSCall1Ans3->GetInt32(LDBIZ_COMM_DATE_INT);
    v_comm_id = lpTSCall1Ans3->GetInt64(LDBIZ_COMM_ID_INT64);
    v_comm_batch_no = lpTSCall1Ans3->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
    v_comm_executor = lpTSCall1Ans3->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
    v_order_time = lpTSCall1Ans3->GetInt32(LDBIZ_ORDER_TIME_INT);
    v_stock_type = lpTSCall1Ans3->GetInt32(LDBIZ_STOCK_TYPE_INT);
    v_net_price_flag = lpTSCall1Ans3->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
    v_bond_accr_intrst = lpTSCall1Ans3->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
    v_bond_rate_type = lpTSCall1Ans3->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
    v_par_value = lpTSCall1Ans3->GetDouble(LDBIZ_PAR_VALUE_FLOAT);
    v_impawn_ratio = lpTSCall1Ans3->GetDouble(LDBIZ_IMPAWN_RATIO_FLOAT);
    v_order_frozen_amt = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT);
    v_order_frozen_qty = lpTSCall1Ans3->GetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT);
    strcpy(v_order_status, lpTSCall1Ans3->GetString(LDBIZ_ORDER_STATUS_STR));
    v_order_batch_no = lpTSCall1Ans3->GetInt32(LDBIZ_ORDER_BATCH_NO_INT);
    v_wtdraw_qty = lpTSCall1Ans3->GetDouble(LDBIZ_WTDRAW_QTY_FLOAT);
    v_strike_amt = lpTSCall1Ans3->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
    v_strike_qty = lpTSCall1Ans3->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
    v_strike_bond_accr_intrst = lpTSCall1Ans3->GetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT);
    strcpy(v_order_oper_way, lpTSCall1Ans3->GetString(LDBIZ_ORDER_OPER_WAY_STR));
    strcpy(v_old_order_status, lpTSCall1Ans3->GetString(LDBIZ_OLD_ORDER_STATUS_STR));
    v_row_id = lpTSCall1Ans3->GetInt64(LDBIZ_ROW_ID_INT64);
    strcpy(v_combo_code, lpTSCall1Ans3->GetString(LDBIZ_COMBO_CODE_STR));
    v_combo_posi_id = lpTSCall1Ans3->GetInt64(LDBIZ_COMBO_POSI_ID_INT64);
    v_strategy_id = lpTSCall1Ans3->GetInt64(LDBIZ_STRATEGY_ID_INT64);
    v_update_times = lpTSCall1Ans3->GetInt32(LDBIZ_UPDATE_TIMES_INT);
    v_debt_type = lpTSCall1Ans3->GetInt32(LDBIZ_DEBT_TYPE_INT);


    // set @操作员编号# =@业务操作员编号#;
    v_opor_no =v_busi_opor_no;

    // set @当笔成交价格# = 0;
    v_curr_strike_price = 0;

    // set @当笔成交金额# = 0;
    v_curr_strike_amt = 0;

    // set @当笔成交数量# = 0;
    v_curr_strike_qty = 0;

    // set @成交序号# = 0;
    v_strike_id = 0;

    // set @全部费用# = 0;
    v_all_fee = 0;

    // set @撤单状态# = "0";
    strcpy(v_wtdraw_status,"0");

    // [主动推送][secu.order][证券主推_订单_订单主推消息]
    lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.20", 0);
    lpPubMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
    lpPubMsg->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
    lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
    lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
    lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
    lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
    lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpPubMsg->SetInt64(LDBIZ_EXTERNAL_NO_INT64,v_external_no);
    lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
    lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
    lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpPubMsg->SetInt32(LDBIZ_ORDER_TIME_INT,v_order_time);
    lpPubMsg->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
    lpPubMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpPubMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpPubMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpPubMsg->SetString(LDBIZ_ORDER_STATUS_STR,v_order_status);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_AMT_FLOAT,v_order_frozen_amt);
    lpPubMsg->SetDouble(LDBIZ_ORDER_FROZEN_QTY_FLOAT,v_order_frozen_qty);
    lpPubMsg->SetDouble(LDBIZ_WTDRAW_QTY_FLOAT,v_wtdraw_qty);
    lpPubMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpPubMsg->SetInt32(LDBIZ_REPORT_TIME_INT,v_report_time);
    lpPubMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
    lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
    lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
    lpPubMsg->SetDouble(LDBIZ_PAR_VALUE_FLOAT,v_par_value);
    lpPubMsg->SetDouble(LDBIZ_IMPAWN_RATIO_FLOAT,v_impawn_ratio);
    lpPubMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_STRIKE_BOND_ACCR_INTRST_FLOAT,v_strike_bond_accr_intrst);
    lpPubMsg->SetString(LDBIZ_ORDER_OPER_WAY_STR,v_order_oper_way);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_QTY_FLOAT,v_curr_strike_qty);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_AMT_FLOAT,v_curr_strike_amt);
    lpPubMsg->SetDouble(LDBIZ_CURR_STRIKE_PRICE_FLOAT,v_curr_strike_price);
    lpPubMsg->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
    lpPubMsg->SetDouble(LDBIZ_ALL_FEE_FLOAT,v_all_fee);
    lpPubMsg->SetString(LDBIZ_COMBO_CODE_STR,v_combo_code);
    lpPubMsg->SetInt64(LDBIZ_COMBO_POSI_ID_INT64,v_combo_posi_id);
    lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_TYPE_INT,v_asset_acco_type);
    lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
    lpPubMsg->SetInt64(LDBIZ_STRATEGY_ID_INT64,v_strategy_id);
    lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
    glpPubSub_Interface->PubTopics("secu.order", lpPubMsg);


    // if @订单回报状态# <> 《订单回报状态-已报》 then
    if (strcmp(v_order_rsp_status , "1")!=0)
    {

        // if  @订单批号# > 0 then
        if ( v_order_batch_no > 0)
        {

            // set @成交序号# = 0;
            v_strike_id = 0;
            //调用过程[事务_交易证券_主推接口_获取汇总订单成交信息]
            //组织事务请求
            if(lpTSCall1Ans4)
            {
              lpTSCall1Ans4->FreeMsg();
              lpTSCall1Ans4=NULL;
            }
            lpTSCall1Req4=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.21", 0);
            lpTSCall1Req4->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req4->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req4->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req4->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req4->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req4->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req4->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req4->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req4->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpTSCall1Req4->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
            lpTSCall1Req4->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
            lpTSCall1Req4->SetInt32(LDBIZ_ORDER_BATCH_NO_INT,v_order_batch_no);
            lpTSCall1Req4->SetInt64(LDBIZ_STRIKE_ID_INT64,v_strike_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req4, &lpTSCall1Ans4, 5000);
            if(!lpTSCall1Ans4)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.21]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans4->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans4->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans4->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans4->GetString(LDBIZ_ERROR_INFO_STR));
            v_sum_order_row_id = lpTSCall1Ans4->GetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64);
            v_sum_order_opor_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT);
            v_sum_order_co_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_CO_NO_INT);
            v_sum_order_pd_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_PD_NO_INT);
            v_sum_order_exch_group_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT);
            v_sum_order_asset_acco_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT);
            v_sum_order_pass_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT);
            strcpy(v_sum_order_exch_crncy_type, lpTSCall1Ans4->GetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR));
            v_sum_order_stock_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT);
            v_sum_order_trade_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT);
            v_sum_order_target_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT);
            v_sum_order_external_no = lpTSCall1Ans4->GetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64);
            v_sum_order_date = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_DATE_INT);
            v_sum_order_batch_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT);
            v_sum_order_dir = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_DIR_INT);
            v_sum_order_price_type = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT);
            v_sum_order_price = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT);
            v_sum_order_qty = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT);
            strcpy(v_order_sum_status, lpTSCall1Ans4->GetString(LDBIZ_ORDER_SUM_STATUS_STR));
            v_sum_order_wtdraw_qty = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT);
            v_sum_order_waste_qty = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT);
            v_sum_order_strike_amt = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT);
            v_sum_order_strike_qty = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT);
            v_sum_order_strike_aver_price = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT);
            v_sum_order_net_price_flag = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT);
            v_sum_order_bond_accr_intrst = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT);
            v_sum_order_bond_rate_type = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT);
            v_sum_order_par_value = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT);
            v_sum_order_impawn_ratio = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT);
            strcpy(v_sum_order_oper_way, lpTSCall1Ans4->GetString(LDBIZ_SUM_ORDER_OPER_WAY_STR));
            v_sum_order_update_times = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT);
            v_sum_strike_row_id = lpTSCall1Ans4->GetInt64(LDBIZ_SUM_STRIKE_ROW_ID_INT64);
            v_sum_strike_opor_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_OPOR_NO_INT);
            v_sum_strike_co_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_CO_NO_INT);
            v_sum_strike_pd_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_PD_NO_INT);
            v_sum_strike_exch_group_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_EXCH_GROUP_NO_INT);
            v_sum_strike_asset_acco_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_ASSET_ACCO_NO_INT);
            v_sum_strike_pass_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_PASS_NO_INT);
            strcpy(v_sum_strike_out_acco, lpTSCall1Ans4->GetString(LDBIZ_SUM_STRIKE_OUT_ACCO_STR));
            v_sum_strike_stock_acco_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_STOCK_ACCO_NO_INT);
            v_sum_strike_stock_code_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_STOCK_CODE_NO_INT);
            v_sum_strike_comm_id = lpTSCall1Ans4->GetInt64(LDBIZ_SUM_STRIKE_COMM_ID_INT64);
            v_sum_strike_report_date = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_REPORT_DATE_INT);
            strcpy(v_sum_strike_report_no, lpTSCall1Ans4->GetString(LDBIZ_SUM_STRIKE_REPORT_NO_STR));
            v_sum_strike_order_date = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DATE_INT);
            v_sum_strike_order_id = lpTSCall1Ans4->GetInt64(LDBIZ_SUM_STRIKE_ORDER_ID_INT64);
            v_sum_strike_order_dir = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_ORDER_DIR_INT);
            v_sum_strike_order_price = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_ORDER_PRICE_FLOAT);
            v_sum_strike_order_qty = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_ORDER_QTY_FLOAT);
            v_sum_strike_strike_qty = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_QTY_FLOAT);
            v_sum_strike_strike_amt = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_STRIKE_AMT_FLOAT);
            v_sum_strike_all_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_ALL_FEE_FLOAT);
            v_sum_strike_stamp_tax = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_STAMP_TAX_FLOAT);
            v_sum_strike_trans_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_TRANS_FEE_FLOAT);
            v_sum_strike_brkage_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_BRKAGE_FEE_FLOAT);
            v_sum_strike_SEC_charges = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_SEC_CHARGES_FLOAT);
            v_sum_strike_other_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_OTHER_FEE_FLOAT);
            v_sum_strike_trade_commis = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_TRADE_COMMIS_FLOAT);
            v_sum_strike_other_commis = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_OTHER_COMMIS_FLOAT);
            v_sum_trade_tax = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_TRADE_TAX_FLOAT);
            v_sum_trade_cost_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_TRADE_COST_FEE_FLOAT);
            v_sum_trade_system_use_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_TRADE_SYSTEM_USE_FEE_FLOAT);
            v_sum_stock_settle_fee = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STOCK_SETTLE_FEE_FLOAT);
            v_sum_strike_net_price_flag = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_NET_PRICE_FLAG_INT);
            v_sum_strike_bond_accr_intrst = lpTSCall1Ans4->GetDouble(LDBIZ_SUM_STRIKE_BOND_ACCR_INTRST_FLOAT);
            v_sum_strike_bond_rate_type = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_BOND_RATE_TYPE_INT);
            strcpy(v_sum_strike_order_oper_way, lpTSCall1Ans4->GetString(LDBIZ_SUM_STRIKE_ORDER_OPER_WAY_STR));
            v_sum_strike_exter_comm_flag = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_EXTER_COMM_FLAG_INT);
            v_sum_strike_update_times = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_UPDATE_TIMES_INT);
            v_sum_strike_order_batch_no = lpTSCall1Ans4->GetInt32(LDBIZ_SUM_STRIKE_ORDER_BATCH_NO_INT);
            v_sum_external_no = lpTSCall1Ans4->GetInt64(LDBIZ_SUM_EXTERNAL_NO_INT64);


            // [主动推送][secu.ordertotal][证券主推_订单_订单汇总主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.21", 0);
            lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_ROW_ID_INT64,v_sum_order_row_id);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_OPOR_NO_INT,v_sum_order_opor_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_CO_NO_INT,v_sum_order_co_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PD_NO_INT,v_sum_order_pd_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_EXCH_GROUP_NO_INT,v_sum_order_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_ASSET_ACCO_NO_INT,v_sum_order_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PASS_NO_INT,v_sum_order_pass_no);
            lpPubMsg->SetString(LDBIZ_SUM_ORDER_EXCH_CRNCY_TYPE_STR,v_sum_order_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_STOCK_CODE_NO_INT,v_sum_order_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TRADE_CODE_NO_INT,v_sum_order_trade_code_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_TARGET_CODE_NO_INT,v_sum_order_target_code_no);
            lpPubMsg->SetInt64(LDBIZ_SUM_ORDER_EXTERNAL_NO_INT64,v_sum_order_external_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DATE_INT,v_sum_order_date);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BATCH_NO_INT,v_sum_order_batch_no);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_DIR_INT,v_sum_order_dir);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_PRICE_TYPE_INT,v_sum_order_price_type);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PRICE_FLOAT,v_sum_order_price);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_QTY_FLOAT,v_sum_order_qty);
            lpPubMsg->SetString(LDBIZ_ORDER_SUM_STATUS_STR,v_order_sum_status);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WTDRAW_QTY_FLOAT,v_sum_order_wtdraw_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_WASTE_QTY_FLOAT,v_sum_order_waste_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AMT_FLOAT,v_sum_order_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_QTY_FLOAT,v_sum_order_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_STRIKE_AVER_PRICE_FLOAT,v_sum_order_strike_aver_price);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_NET_PRICE_FLAG_INT,v_sum_order_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_BOND_ACCR_INTRST_FLOAT,v_sum_order_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_BOND_RATE_TYPE_INT,v_sum_order_bond_rate_type);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_PAR_VALUE_FLOAT,v_sum_order_par_value);
            lpPubMsg->SetDouble(LDBIZ_SUM_ORDER_IMPAWN_RATIO_FLOAT,v_sum_order_impawn_ratio);
            lpPubMsg->SetString(LDBIZ_SUM_ORDER_OPER_WAY_STR,v_sum_order_oper_way);
            lpPubMsg->SetInt32(LDBIZ_SUM_ORDER_UPDATE_TIMES_INT,v_sum_order_update_times);
            glpPubSub_Interface->PubTopics("secu.ordertotal", lpPubMsg);

        // end if;
        }


        // if @指令序号# > 0 then
        if (v_comm_id > 0)
        {
            //调用过程[事务_交易证券_主推接口_获取指令混合信息]
            //组织事务请求
            if(lpTSCall1Ans5)
            {
              lpTSCall1Ans5->FreeMsg();
              lpTSCall1Ans5=NULL;
            }
            lpTSCall1Req5=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.3", 0);
            lpTSCall1Req5->SetInt32(LDTAG_PRIORITY, iPriority);
            lpTSCall1Req5->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
            lpTSCall1Req5->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
            lpTSCall1Req5->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
            lpTSCall1Req5->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
            lpTSCall1Req5->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
            lpTSCall1Req5->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
            lpTSCall1Req5->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
            lpTSCall1Req5->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            glpTSSubcallSerives->SubCall(lpTSCall1Req5, &lpTSCall1Ans5, 5000);
            if(!lpTSCall1Ans5)  //  超时错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.3]subcall timed out!");
                iRet=-2;
                goto ENDSYS;
            }
            else if(lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
            {
                lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans5->GetInt32(LDTAG_ERRORNO));
                lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans5->GetString(LDTAG_ERRORINFO));
                iRet=-2;
                goto ENDSYS;
            }
            else if(strcmp(lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
            {
                strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
                strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
                iRet=-1;
                goto END;
            }
            //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans5->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans5->GetString(LDBIZ_ERROR_INFO_STR));
            v_init_date = lpTSCall1Ans5->GetInt32(LDBIZ_INIT_DATE_INT);
            v_co_no = lpTSCall1Ans5->GetInt32(LDBIZ_CO_NO_INT);
            v_pd_no = lpTSCall1Ans5->GetInt32(LDBIZ_PD_NO_INT);
            v_exch_group_no = lpTSCall1Ans5->GetInt32(LDBIZ_EXCH_GROUP_NO_INT);
            v_asset_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_ASSET_ACCO_NO_INT);
            v_pass_no = lpTSCall1Ans5->GetInt32(LDBIZ_PASS_NO_INT);
            strcpy(v_out_acco, lpTSCall1Ans5->GetString(LDBIZ_OUT_ACCO_STR));
            strcpy(v_exch_crncy_type, lpTSCall1Ans5->GetString(LDBIZ_EXCH_CRNCY_TYPE_STR));
            v_stock_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_ACCO_NO_INT);
            v_stock_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_CODE_NO_INT);
            v_stock_type = lpTSCall1Ans5->GetInt32(LDBIZ_STOCK_TYPE_INT);
            v_comm_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_DATE_INT);
            v_comm_time = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_TIME_INT);
            v_comm_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_BATCH_NO_INT);
            v_comm_opor = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_OPOR_INT);
            v_comm_executor = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_EXECUTOR_INT);
            v_comm_dir = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_DIR_INT);
            v_comm_limit_price = lpTSCall1Ans5->GetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT);
            v_limit_actual_price = lpTSCall1Ans5->GetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT);
            v_comm_qty = lpTSCall1Ans5->GetDouble(LDBIZ_COMM_QTY_FLOAT);
            v_comm_amt = lpTSCall1Ans5->GetDouble(LDBIZ_COMM_AMT_FLOAT);
            v_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_ORDER_QTY_FLOAT);
            v_comm_cancel_qty = lpTSCall1Ans5->GetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT);
            v_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_AMT_FLOAT);
            v_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_STRIKE_QTY_FLOAT);
            v_comm_frozen_amt = lpTSCall1Ans5->GetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT);
            v_comm_frozen_qty = lpTSCall1Ans5->GetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT);
            strcpy(v_strike_status, lpTSCall1Ans5->GetString(LDBIZ_STRIKE_STATUS_STR));
            strcpy(v_comm_status, lpTSCall1Ans5->GetString(LDBIZ_COMM_STATUS_STR));
            v_comm_begin_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_BEGIN_DATE_INT);
            v_comm_end_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_END_DATE_INT);
            v_comm_begin_time = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_BEGIN_TIME_INT);
            v_comm_end_time = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_END_TIME_INT);
            v_comm_comple_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_COMPLE_DATE_INT);
            v_comm_comple_time = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_COMPLE_TIME_INT);
            v_comm_appr_date = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_APPR_DATE_INT);
            v_comm_appr_time = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_APPR_TIME_INT);
            strcpy(v_comm_appr_status, lpTSCall1Ans5->GetString(LDBIZ_COMM_APPR_STATUS_STR));
            v_comm_appr_oper = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_APPR_OPER_INT);
            strcpy(v_comm_appr_remark, lpTSCall1Ans5->GetString(LDBIZ_COMM_APPR_REMARK_STR));
            v_basket_id = lpTSCall1Ans5->GetInt64(LDBIZ_BASKET_ID_INT64);
            v_net_price_flag = lpTSCall1Ans5->GetInt32(LDBIZ_NET_PRICE_FLAG_INT);
            v_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT);
            v_bond_rate_type = lpTSCall1Ans5->GetInt32(LDBIZ_BOND_RATE_TYPE_INT);
            strcpy(v_comm_oper_way, lpTSCall1Ans5->GetString(LDBIZ_COMM_OPER_WAY_STR));
            v_exter_comm_flag = lpTSCall1Ans5->GetInt32(LDBIZ_EXTER_COMM_FLAG_INT);
            v_comm_comple_flag = lpTSCall1Ans5->GetInt32(LDBIZ_COMM_COMPLE_FLAG_INT);
            v_strategy_capt_qty = lpTSCall1Ans5->GetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT);
            v_strategy_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT);
            strcpy(v_contra_no, lpTSCall1Ans5->GetString(LDBIZ_CONTRA_NO_STR));
            strcpy(v_comm_remark_info, lpTSCall1Ans5->GetString(LDBIZ_COMM_REMARK_INFO_STR));
            v_disp_opor = lpTSCall1Ans5->GetInt32(LDBIZ_DISP_OPOR_INT);
            v_disp_status = lpTSCall1Ans5->GetInt32(LDBIZ_DISP_STATUS_INT);
            v_read_flag = lpTSCall1Ans5->GetInt32(LDBIZ_READ_FLAG_INT);
            v_update_times = lpTSCall1Ans5->GetInt32(LDBIZ_UPDATE_TIMES_INT);
            v_sum_comm_row_id = lpTSCall1Ans5->GetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64);
            v_sum_comm_co_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_CO_NO_INT);
            v_sum_comm_pd_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_PD_NO_INT);
            v_sum_comm_exch_group_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT);
            v_sum_comm_asset_acco_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT);
            v_sum_comm_pass_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_PASS_NO_INT);
            strcpy(v_sum_comm_out_acco, lpTSCall1Ans5->GetString(LDBIZ_SUM_COMM_OUT_ACCO_STR));
            strcpy(v_sum_comm_exch_crncy_type, lpTSCall1Ans5->GetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR));
            v_sum_comm_stock_code_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT);
            v_sum_comm_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_DATE_INT);
            v_sum_comm_time = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_TIME_INT);
            v_sum_comm_batch_no = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT);
            v_sum_comm_opor = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_OPOR_INT);
            v_sum_comm_executor = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT);
            v_sum_comm_dir = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_DIR_INT);
            v_sum_comm_limit_price = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT);
            v_sum_comm_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_QTY_FLOAT);
            v_sum_comm_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_AMT_FLOAT);
            v_sum_comm_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT);
            v_sum_comm_cancel_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT);
            v_sum_comm_await_cancel_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT);
            v_sum_comm_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT);
            v_sum_comm_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT);
            strcpy(v_sum_comm_strike_status, lpTSCall1Ans5->GetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR));
            strcpy(v_comm_sum_status, lpTSCall1Ans5->GetString(LDBIZ_COMM_SUM_STATUS_STR));
            v_sum_comm_begin_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT);
            v_sum_comm_end_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_END_DATE_INT);
            v_sum_comm_begin_time = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT);
            v_sum_comm_end_time = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_END_TIME_INT);
            v_sum_comm_comple_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT);
            v_sum_comm_comple_time = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT);
            v_sum_comm_max_comm_comple_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT);
            v_sum_comm_max_comm_comple_time = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT);
            v_sum_comm_appr_date = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT);
            v_sum_comm_appr_time = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT);
            v_sum_comm_appr_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT);
            strcpy(v_comm_sum_approve_status, lpTSCall1Ans5->GetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR));
            v_sum_comm_basket_id = lpTSCall1Ans5->GetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64);
            v_sum_comm_net_price_flag = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT);
            v_sum_comm_bond_accr_intrst = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT);
            v_sum_comm_bond_rate_type = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT);
            strcpy(v_sum_comm_oper_way, lpTSCall1Ans5->GetString(LDBIZ_SUM_COMM_OPER_WAY_STR));
            v_sum_comm_exter_comm_flag = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT);
            v_sum_buy_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT);
            v_sum_sell_order_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT);
            v_sum_buy_comm_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT);
            v_sum_sell_comm_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT);
            v_sum_buy_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT);
            v_sum_sell_strike_qty = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT);
            v_sum_buy_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT);
            v_sum_sell_strike_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT);
            v_sum_buy_comm_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT);
            v_sum_sell_comm_amt = lpTSCall1Ans5->GetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT);
            strcpy(v_sum_comm_remark_info, lpTSCall1Ans5->GetString(LDBIZ_SUM_COMM_REMARK_INFO_STR));
            v_sum_comm_update_times = lpTSCall1Ans5->GetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT);
            strcpy(v_acco_concat_info, lpTSCall1Ans5->GetString(LDBIZ_ACCO_CONCAT_INFO_STR));


            // [主动推送][secu.comm][证券主推_指令_指令主推消息]
            lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.40", 0);
            lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
            lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
            lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
            lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
            lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
            lpPubMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
            lpPubMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
            lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
            lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
            lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
            lpPubMsg->SetInt64(LDBIZ_COMM_ID_INT64,v_comm_id);
            lpPubMsg->SetInt32(LDBIZ_COMM_DATE_INT,v_comm_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_TIME_INT,v_comm_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_BATCH_NO_INT,v_comm_batch_no);
            lpPubMsg->SetInt32(LDBIZ_COMM_OPOR_INT,v_comm_opor);
            lpPubMsg->SetInt32(LDBIZ_COMM_EXECUTOR_INT,v_comm_executor);
            lpPubMsg->SetInt32(LDBIZ_COMM_DIR_INT,v_comm_dir);
            lpPubMsg->SetDouble(LDBIZ_COMM_LIMIT_PRICE_FLOAT,v_comm_limit_price);
            lpPubMsg->SetDouble(LDBIZ_LIMIT_ACTUAL_PRICE_FLOAT,v_limit_actual_price);
            lpPubMsg->SetDouble(LDBIZ_COMM_QTY_FLOAT,v_comm_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_AMT_FLOAT,v_comm_amt);
            lpPubMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_CANCEL_QTY_FLOAT,v_comm_cancel_qty);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_AMT_FLOAT,v_strike_amt);
            lpPubMsg->SetDouble(LDBIZ_STRIKE_QTY_FLOAT,v_strike_qty);
            lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_AMT_FLOAT,v_comm_frozen_amt);
            lpPubMsg->SetDouble(LDBIZ_COMM_FROZEN_QTY_FLOAT,v_comm_frozen_qty);
            lpPubMsg->SetString(LDBIZ_STRIKE_STATUS_STR,v_strike_status);
            lpPubMsg->SetString(LDBIZ_COMM_STATUS_STR,v_comm_status);
            lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_DATE_INT,v_comm_begin_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_END_DATE_INT,v_comm_end_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_BEGIN_TIME_INT,v_comm_begin_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_END_TIME_INT,v_comm_end_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_DATE_INT,v_comm_comple_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_TIME_INT,v_comm_comple_time);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_DATE_INT,v_comm_appr_date);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_TIME_INT,v_comm_appr_time);
            lpPubMsg->SetString(LDBIZ_COMM_APPR_STATUS_STR,v_comm_appr_status);
            lpPubMsg->SetInt32(LDBIZ_COMM_APPR_OPER_INT,v_comm_appr_oper);
            lpPubMsg->SetString(LDBIZ_COMM_APPR_REMARK_STR,v_comm_appr_remark);
            lpPubMsg->SetInt64(LDBIZ_BASKET_ID_INT64,v_basket_id);
            lpPubMsg->SetInt32(LDBIZ_NET_PRICE_FLAG_INT,v_net_price_flag);
            lpPubMsg->SetDouble(LDBIZ_BOND_ACCR_INTRST_FLOAT,v_bond_accr_intrst);
            lpPubMsg->SetInt32(LDBIZ_BOND_RATE_TYPE_INT,v_bond_rate_type);
            lpPubMsg->SetString(LDBIZ_COMM_OPER_WAY_STR,v_comm_oper_way);
            lpPubMsg->SetInt32(LDBIZ_EXTER_COMM_FLAG_INT,v_exter_comm_flag);
            lpPubMsg->SetInt32(LDBIZ_COMM_COMPLE_FLAG_INT,v_comm_comple_flag);
            lpPubMsg->SetDouble(LDBIZ_STRATEGY_CAPT_QTY_FLOAT,v_strategy_capt_qty);
            lpPubMsg->SetDouble(LDBIZ_STRATEGY_ORDER_QTY_FLOAT,v_strategy_order_qty);
            lpPubMsg->SetString(LDBIZ_CONTRA_NO_STR,v_contra_no);
            lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
            lpPubMsg->SetInt32(LDBIZ_DISP_OPOR_INT,v_disp_opor);
            lpPubMsg->SetInt32(LDBIZ_DISP_STATUS_INT,v_disp_status);
            lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
            lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
            glpPubSub_Interface->PubTopics("secu.comm", lpPubMsg);


            // if @指令批号# > 0 then
            if (v_comm_batch_no > 0)
            {

                // set @指令备注信息#= @汇总指令备注信息#;
                strcpy(v_comm_remark_info,v_sum_comm_remark_info);

                // [主动推送][secu.commtotal][证券主推_指令_指令汇总主推消息]
                lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.41", 0);
                lpPubMsg->SetInt64(LDBIZ_SUM_COMM_ROW_ID_INT64,v_sum_comm_row_id);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_CO_NO_INT,v_sum_comm_co_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PD_NO_INT,v_sum_comm_pd_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXCH_GROUP_NO_INT,v_sum_comm_exch_group_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_ASSET_ACCO_NO_INT,v_sum_comm_asset_acco_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_PASS_NO_INT,v_sum_comm_pass_no);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_OUT_ACCO_STR,v_sum_comm_out_acco);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_EXCH_CRNCY_TYPE_STR,v_sum_comm_exch_crncy_type);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_STOCK_CODE_NO_INT,v_sum_comm_stock_code_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DATE_INT,v_sum_comm_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_TIME_INT,v_sum_comm_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BATCH_NO_INT,v_sum_comm_batch_no);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_OPOR_INT,v_sum_comm_opor);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXECUTOR_INT,v_sum_comm_executor);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_DIR_INT,v_sum_comm_dir);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_LIMIT_PRICE_FLOAT,v_sum_comm_limit_price);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_QTY_FLOAT,v_sum_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AMT_FLOAT,v_sum_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_ORDER_QTY_FLOAT,v_sum_comm_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_CANCEL_QTY_FLOAT,v_sum_comm_cancel_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_AWAIT_CANCEL_QTY_FLOAT,v_sum_comm_await_cancel_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_AMT_FLOAT,v_sum_comm_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_STRIKE_QTY_FLOAT,v_sum_comm_strike_qty);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_STRIKE_STATUS_STR,v_sum_comm_strike_status);
                lpPubMsg->SetString(LDBIZ_COMM_SUM_STATUS_STR,v_comm_sum_status);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_DATE_INT,v_sum_comm_begin_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_DATE_INT,v_sum_comm_end_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BEGIN_TIME_INT,v_sum_comm_begin_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_END_TIME_INT,v_sum_comm_end_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_DATE_INT,v_sum_comm_comple_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_COMPLE_TIME_INT,v_sum_comm_comple_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_DATE_INT,v_sum_comm_max_comm_comple_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_MAX_COMM_COMPLE_TIME_INT,v_sum_comm_max_comm_comple_time);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_DATE_INT,v_sum_comm_appr_date);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_APPR_TIME_INT,v_sum_comm_appr_time);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_APPR_QTY_FLOAT,v_sum_comm_appr_qty);
                lpPubMsg->SetString(LDBIZ_COMM_SUM_APPROVE_STATUS_STR,v_comm_sum_approve_status);
                lpPubMsg->SetInt64(LDBIZ_SUM_COMM_BASKET_ID_INT64,v_sum_comm_basket_id);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_NET_PRICE_FLAG_INT,v_sum_comm_net_price_flag);
                lpPubMsg->SetDouble(LDBIZ_SUM_COMM_BOND_ACCR_INTRST_FLOAT,v_sum_comm_bond_accr_intrst);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_BOND_RATE_TYPE_INT,v_sum_comm_bond_rate_type);
                lpPubMsg->SetString(LDBIZ_SUM_COMM_OPER_WAY_STR,v_sum_comm_oper_way);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_EXTER_COMM_FLAG_INT,v_sum_comm_exter_comm_flag);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_ORDER_QTY_FLOAT,v_sum_buy_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_ORDER_QTY_FLOAT,v_sum_sell_order_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_QTY_FLOAT,v_sum_buy_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_QTY_FLOAT,v_sum_sell_comm_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_QTY_FLOAT,v_sum_buy_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_QTY_FLOAT,v_sum_sell_strike_qty);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_STRIKE_AMT_FLOAT,v_sum_buy_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_STRIKE_AMT_FLOAT,v_sum_sell_strike_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_BUY_COMM_AMT_FLOAT,v_sum_buy_comm_amt);
                lpPubMsg->SetDouble(LDBIZ_SUM_SELL_COMM_AMT_FLOAT,v_sum_sell_comm_amt);
                lpPubMsg->SetString(LDBIZ_COMM_REMARK_INFO_STR,v_comm_remark_info);
                lpPubMsg->SetInt32(LDBIZ_READ_FLAG_INT,v_read_flag);
                lpPubMsg->SetString(LDBIZ_ACCO_CONCAT_INFO_STR,v_acco_concat_info);
                lpPubMsg->SetInt32(LDBIZ_SUM_COMM_UPDATE_TIMES_INT,v_sum_comm_update_times);
                glpPubSub_Interface->PubTopics("secu.commtotal", lpPubMsg);

            // end if;
            }

        // end if;
        }


        // set @交易组提交质押数量# = 0;
        v_exgp_put_impawn_qty = 0;

        // set @资产账户提交质押数量# = 0;
        v_asac_put_impawn_qty = 0;
        //调用过程[事务_交易证券_主推接口_获取资金持仓信息]
        //组织事务请求
        if(lpTSCall1Ans6)
        {
          lpTSCall1Ans6->FreeMsg();
          lpTSCall1Ans6=NULL;
        }
        lpTSCall1Req6=glpFastMsgFactory->CreateFastMessage("tdsecuT.9.13", 0);
        lpTSCall1Req6->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req6->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req6->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req6->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req6->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req6->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req6->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req6->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req6->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req6->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req6->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req6->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req6->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req6->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req6, &lpTSCall1Ans6, 5000);
        if(!lpTSCall1Ans6)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.9.13]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans6->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans6->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans6->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans6->GetString(LDBIZ_ERROR_INFO_STR));
        v_exgp_cash_id = lpTSCall1Ans6->GetInt64(LDBIZ_EXGP_CASH_ID_INT64);
        v_exgp_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT);
        v_exgp_unfroz_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT);
        v_exgp_comm_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT);
        v_exgp_comm_unfroz_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT);
        v_exgp_comm_capt_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT);
        v_exgp_comm_releas_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT);
        v_exgp_trade_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT);
        v_exgp_trade_unfroz_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT);
        v_exgp_trade_capt_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT);
        v_exgp_trade_releas_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT);
        v_exgp_strike_capt_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT);
        v_exgp_strike_releas_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT);
        v_exgp_cash_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT);
        v_exgp_posi_id = lpTSCall1Ans6->GetInt64(LDBIZ_EXGP_POSI_ID_INT64);
        v_exgp_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT);
        v_exgp_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT);
        v_exgp_comm_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT);
        v_exgp_comm_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT);
        v_exgp_comm_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT);
        v_exgp_comm_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT);
        v_exgp_trade_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT);
        v_exgp_trade_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT);
        v_exgp_trade_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT);
        v_exgp_trade_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT);
        v_exgp_strike_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT);
        v_exgp_strike_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT);
        v_exgp_strike_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT);
        v_exgp_strike_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT);
        v_exgp_realize_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT);
        v_exgp_cost_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_COST_AMT_FLOAT);
        v_exgp_intrst_cost_amt = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT);
        v_exgp_intrst_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT);
        v_exgp_posi_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT);
        v_asac_cash_id = lpTSCall1Ans6->GetInt64(LDBIZ_ASAC_CASH_ID_INT64);
        v_asac_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT);
        v_asac_unfroz_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT);
        v_asac_comm_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT);
        v_asac_comm_unfroz_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT);
        v_asac_comm_capt_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT);
        v_asac_comm_releas_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT);
        v_asac_trade_frozen_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT);
        v_asac_trade_unfroz_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT);
        v_asac_trade_capt_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT);
        v_asac_trade_releas_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT);
        v_asac_strike_capt_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT);
        v_asac_strike_releas_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT);
        v_asac_cash_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT);
        v_asac_posi_id = lpTSCall1Ans6->GetInt64(LDBIZ_ASAC_POSI_ID_INT64);
        v_asac_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT);
        v_asac_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT);
        v_asac_comm_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT);
        v_asac_comm_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT);
        v_asac_comm_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT);
        v_asac_comm_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT);
        v_asac_trade_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT);
        v_asac_trade_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT);
        v_asac_trade_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT);
        v_asac_trade_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT);
        v_asac_strike_capt_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT);
        v_asac_strike_releas_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT);
        v_asac_strike_frozen_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT);
        v_asac_strike_unfroz_qty = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT);
        v_asac_realize_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT);
        v_asac_cost_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_COST_AMT_FLOAT);
        v_asac_intrst_cost_amt = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT);
        v_asac_intrst_pandl = lpTSCall1Ans6->GetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT);
        v_asac_posi_update_times = lpTSCall1Ans6->GetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT);


        // [主动推送][secu.exgpcapital][证券主推_资金_交易组资金主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.50", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_CASH_ID_INT64,v_exgp_cash_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_AMT_FLOAT,v_exgp_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_AMT_FLOAT,v_exgp_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_AMT_FLOAT,v_exgp_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_AMT_FLOAT,v_exgp_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_AMT_FLOAT,v_exgp_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_AMT_FLOAT,v_exgp_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_AMT_FLOAT,v_exgp_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_AMT_FLOAT,v_exgp_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_AMT_FLOAT,v_exgp_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_AMT_FLOAT,v_exgp_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_AMT_FLOAT,v_exgp_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_AMT_FLOAT,v_exgp_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_EXGP_CASH_UPDATE_TIMES_INT,v_exgp_cash_update_times);
        glpPubSub_Interface->PubTopics("secu.exgpcapital", lpPubMsg);


        // [主动推送][secu.exgpposi][证券主推_持仓_交易组持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.60", 0);
        lpPubMsg->SetInt64(LDBIZ_EXGP_POSI_ID_INT64,v_exgp_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_EXGP_FROZEN_QTY_FLOAT,v_exgp_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_UNFROZ_QTY_FLOAT,v_exgp_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_FROZEN_QTY_FLOAT,v_exgp_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_UNFROZ_QTY_FLOAT,v_exgp_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_CAPT_QTY_FLOAT,v_exgp_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COMM_RELEAS_QTY_FLOAT,v_exgp_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_FROZEN_QTY_FLOAT,v_exgp_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_UNFROZ_QTY_FLOAT,v_exgp_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_CAPT_QTY_FLOAT,v_exgp_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_TRADE_RELEAS_QTY_FLOAT,v_exgp_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_CAPT_QTY_FLOAT,v_exgp_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_RELEAS_QTY_FLOAT,v_exgp_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_FROZEN_QTY_FLOAT,v_exgp_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_STRIKE_UNFROZ_QTY_FLOAT,v_exgp_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_EXGP_REALIZE_PANDL_FLOAT,v_exgp_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_EXGP_COST_AMT_FLOAT,v_exgp_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_COST_AMT_FLOAT,v_exgp_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_EXGP_INTRST_PANDL_FLOAT,v_exgp_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_EXGP_POSI_UPDATE_TIMES_INT,v_exgp_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_EXGP_PUT_IMPAWN_QTY_FLOAT,v_exgp_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.exgpposi", lpPubMsg);


        // [主动推送][secu.asaccapital][证券主推_资金_资产账户资金主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.51", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_CASH_ID_INT64,v_asac_cash_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetString(LDBIZ_EXCH_CRNCY_TYPE_STR,v_exch_crncy_type);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_AMT_FLOAT,v_asac_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_AMT_FLOAT,v_asac_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_AMT_FLOAT,v_asac_comm_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_AMT_FLOAT,v_asac_comm_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_AMT_FLOAT,v_asac_comm_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_AMT_FLOAT,v_asac_comm_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_AMT_FLOAT,v_asac_trade_frozen_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_AMT_FLOAT,v_asac_trade_unfroz_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_AMT_FLOAT,v_asac_trade_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_AMT_FLOAT,v_asac_trade_releas_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_AMT_FLOAT,v_asac_strike_capt_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_AMT_FLOAT,v_asac_strike_releas_amt);
        lpPubMsg->SetInt32(LDBIZ_ASAC_CASH_UPDATE_TIMES_INT,v_asac_cash_update_times);
        glpPubSub_Interface->PubTopics("secu.asaccapital", lpPubMsg);


        // [主动推送][secu.asacposi][证券主推_持仓_资产账户持仓主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.61", 0);
        lpPubMsg->SetInt64(LDBIZ_ASAC_POSI_ID_INT64,v_asac_posi_id);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetDouble(LDBIZ_ASAC_FROZEN_QTY_FLOAT,v_asac_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_UNFROZ_QTY_FLOAT,v_asac_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_FROZEN_QTY_FLOAT,v_asac_comm_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_UNFROZ_QTY_FLOAT,v_asac_comm_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_CAPT_QTY_FLOAT,v_asac_comm_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COMM_RELEAS_QTY_FLOAT,v_asac_comm_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_FROZEN_QTY_FLOAT,v_asac_trade_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_UNFROZ_QTY_FLOAT,v_asac_trade_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_CAPT_QTY_FLOAT,v_asac_trade_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_TRADE_RELEAS_QTY_FLOAT,v_asac_trade_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_CAPT_QTY_FLOAT,v_asac_strike_capt_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_RELEAS_QTY_FLOAT,v_asac_strike_releas_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_FROZEN_QTY_FLOAT,v_asac_strike_frozen_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_STRIKE_UNFROZ_QTY_FLOAT,v_asac_strike_unfroz_qty);
        lpPubMsg->SetDouble(LDBIZ_ASAC_REALIZE_PANDL_FLOAT,v_asac_realize_pandl);
        lpPubMsg->SetDouble(LDBIZ_ASAC_COST_AMT_FLOAT,v_asac_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_COST_AMT_FLOAT,v_asac_intrst_cost_amt);
        lpPubMsg->SetDouble(LDBIZ_ASAC_INTRST_PANDL_FLOAT,v_asac_intrst_pandl);
        lpPubMsg->SetInt32(LDBIZ_ASAC_POSI_UPDATE_TIMES_INT,v_asac_posi_update_times);
        lpPubMsg->SetDouble(LDBIZ_ASAC_PUT_IMPAWN_QTY_FLOAT,v_asac_put_impawn_qty);
        glpPubSub_Interface->PubTopics("secu.asacposi", lpPubMsg);

        //主推：交易证券_账户_交易组业务资金负债表、交易证券_账户_资产账户业务资金负债表、交易证券_账户_交易组业务持仓负债表、交易证券_账户_资产账户业务持仓负债表、交易证券_账户_资产账户负债明细表、交易证券_账户_交易组负债明细表
        //调用过程[事务_交易证券_账户_查询交易组业务持仓负债]
        //组织事务请求
        if(lpTSCall1Ans7)
        {
          lpTSCall1Ans7->FreeMsg();
          lpTSCall1Ans7=NULL;
        }
        lpTSCall1Req7=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.76", 0);
        lpTSCall1Req7->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req7->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req7->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req7->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req7->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req7->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req7->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req7->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req7->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req7->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req7->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req7->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req7->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpTSCall1Req7->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req7->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req7->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req7, &lpTSCall1Ans7, 5000);
        if(!lpTSCall1Ans7)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.76]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans7->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans7->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans7->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans7->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans7->GetInt64(LDBIZ_ROW_ID_INT64);
        v_exch_no = lpTSCall1Ans7->GetInt32(LDBIZ_EXCH_NO_INT);
        v_stock_type = lpTSCall1Ans7->GetInt32(LDBIZ_STOCK_TYPE_INT);
        v_asset_type = lpTSCall1Ans7->GetInt32(LDBIZ_ASSET_TYPE_INT);
        v_invest_type = lpTSCall1Ans7->GetInt32(LDBIZ_INVEST_TYPE_INT);
        v_debt_fina_buy_strike_qty = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT);
        v_fina_return_strike_qty = lpTSCall1Ans7->GetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT);
        v_debt_loan_sell_strike_qty = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT);
        v_loan_return_strike_qty = lpTSCall1Ans7->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT);
        v_debt_fina_buy_order_qty = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT);
        v_fina_return_order_qty = lpTSCall1Ans7->GetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT);
        v_debt_loan_sell_order_qty = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT);
        v_loan_return_order_qty = lpTSCall1Ans7->GetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT);
        v_debt_fina_buy_comm_qty = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT);
        v_fina_return_comm_qty = lpTSCall1Ans7->GetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT);
        v_debt_loan_sell_comm_qty = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT);
        v_loan_return_comm_qty = lpTSCall1Ans7->GetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT);
        v_debt_fina_buy_strike_amt = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT);
        v_fina_return_strike_amt = lpTSCall1Ans7->GetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT);
        v_debt_loan_sell_strike_amt = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
        v_loan_return_strike_amt = lpTSCall1Ans7->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
        v_debt_fina_buy_order_amt = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT);
        v_fina_return_order_amt = lpTSCall1Ans7->GetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT);
        v_debt_loan_sell_order_amt = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT);
        v_loan_return_order_amt = lpTSCall1Ans7->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
        v_debt_fina_buy_comm_amt = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT);
        v_fina_return_comm_amt = lpTSCall1Ans7->GetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT);
        v_debt_loan_sell_comm_amt = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT);
        v_loan_return_comm_amt = lpTSCall1Ans7->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
        v_debt_strike_fee = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
        v_return_strike_fee = lpTSCall1Ans7->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
        v_debt_interest = lpTSCall1Ans7->GetDouble(LDBIZ_DEBT_INTEREST_FLOAT);
        v_return_interest_amt = lpTSCall1Ans7->GetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT);
        v_update_times = lpTSCall1Ans7->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.exgpposidebt][证券主推_持仓_交易组业务持仓负债主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.928", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
        lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
        lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
        lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.exgpposidebt", lpPubMsg);

        //调用过程[事务_交易证券_账户_查询资产账户业务持仓负债]
        //组织事务请求
        if(lpTSCall1Ans8)
        {
          lpTSCall1Ans8->FreeMsg();
          lpTSCall1Ans8=NULL;
        }
        lpTSCall1Req8=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.77", 0);
        lpTSCall1Req8->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req8->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req8->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req8->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req8->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req8->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req8->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req8->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req8->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req8->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req8->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req8->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req8->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpTSCall1Req8->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpTSCall1Req8->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
        glpTSSubcallSerives->SubCall(lpTSCall1Req8, &lpTSCall1Ans8, 5000);
        if(!lpTSCall1Ans8)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.77]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans8->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans8->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans8->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans8->GetString(LDBIZ_ERROR_INFO_STR));


        // [主动推送][secu.asacposidebt][证券主推_持仓_资产账户业务持仓负债主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.929", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_ACCO_NO_INT,v_stock_acco_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_CODE_NO_INT,v_stock_code_no);
        lpPubMsg->SetInt32(LDBIZ_STOCK_TYPE_INT,v_stock_type);
        lpPubMsg->SetInt32(LDBIZ_ASSET_TYPE_INT,v_asset_type);
        lpPubMsg->SetInt32(LDBIZ_INVEST_TYPE_INT,v_invest_type);
        lpPubMsg->SetInt32(LDBIZ_DEBT_TYPE_INT,v_debt_type);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_QTY_FLOAT,v_debt_fina_buy_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_QTY_FLOAT,v_fina_return_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_QTY_FLOAT,v_debt_loan_sell_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_QTY_FLOAT,v_loan_return_strike_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_QTY_FLOAT,v_debt_fina_buy_order_qty);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_QTY_FLOAT,v_fina_return_order_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_QTY_FLOAT,v_debt_loan_sell_order_qty);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_QTY_FLOAT,v_loan_return_order_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_QTY_FLOAT,v_debt_fina_buy_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_QTY_FLOAT,v_fina_return_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_QTY_FLOAT,v_debt_loan_sell_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_QTY_FLOAT,v_loan_return_comm_qty);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_STRIKE_AMT_FLOAT,v_debt_fina_buy_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_STRIKE_AMT_FLOAT,v_fina_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_ORDER_AMT_FLOAT,v_debt_fina_buy_order_amt);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_ORDER_AMT_FLOAT,v_fina_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_ORDER_AMT_FLOAT,v_debt_loan_sell_order_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_FINA_BUY_COMM_AMT_FLOAT,v_debt_fina_buy_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_FINA_RETURN_COMM_AMT_FLOAT,v_fina_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_COMM_AMT_FLOAT,v_debt_loan_sell_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_DEBT_INTEREST_FLOAT,v_debt_interest);
        lpPubMsg->SetDouble(LDBIZ_RETURN_INTEREST_AMT_FLOAT,v_return_interest_amt);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.asacposidebt", lpPubMsg);

        //调用过程[事务_交易证券_账户_查询资产账户业务资金负债]
        //组织事务请求
        if(lpTSCall1Ans9)
        {
          lpTSCall1Ans9->FreeMsg();
          lpTSCall1Ans9=NULL;
        }
        lpTSCall1Req9=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.75", 0);
        lpTSCall1Req9->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req9->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req9->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req9->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req9->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req9->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req9->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req9->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req9->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req9->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req9->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req9->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req9, &lpTSCall1Ans9, 5000);
        if(!lpTSCall1Ans9)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.75]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans9->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans9->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans9->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans9->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans9->GetInt64(LDBIZ_ROW_ID_INT64);
        v_debt_loan_sell_strike_amt = lpTSCall1Ans9->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
        v_debt_strike_fee = lpTSCall1Ans9->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
        v_loan_return_strike_amt = lpTSCall1Ans9->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
        v_loan_return_order_amt = lpTSCall1Ans9->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
        v_loan_return_comm_amt = lpTSCall1Ans9->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
        v_return_strike_fee = lpTSCall1Ans9->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
        v_update_times = lpTSCall1Ans9->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.asaccapitaldebt][证券主推_资金_资产账户业务资金负债主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.930", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.asaccapitaldebt", lpPubMsg);

        //调用过程[事务_交易证券_账户_查询交易组业务资金负债]
        //组织事务请求
        if(lpTSCall1Ans10)
        {
          lpTSCall1Ans10->FreeMsg();
          lpTSCall1Ans10=NULL;
        }
        lpTSCall1Req10=glpFastMsgFactory->CreateFastMessage("tdsecuT.2.74", 0);
        lpTSCall1Req10->SetInt32(LDTAG_PRIORITY, iPriority);
        lpTSCall1Req10->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req10->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req10->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req10->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req10->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req10->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req10->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req10->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpTSCall1Req10->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpTSCall1Req10->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpTSCall1Req10->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpTSCall1Req10->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        glpTSSubcallSerives->SubCall(lpTSCall1Req10, &lpTSCall1Ans10, 5000);
        if(!lpTSCall1Ans10)  //  超时错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, -1);
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, "[tdsecuT.2.74]subcall timed out!");
            iRet=-2;
            goto ENDSYS;
        }
        else if(lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO)!=0)  //  中间件层面错误
        {
            lpOutBizMsg->SetInt32(LDTAG_ERRORNO, lpTSCall1Ans10->GetInt32(LDTAG_ERRORNO));
            lpOutBizMsg->SetString(LDTAG_ERRORINFO, lpTSCall1Ans10->GetString(LDTAG_ERRORINFO));
            iRet=-2;
            goto ENDSYS;
        }
        else if(strcmp(lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR), "0")!=0) //  业务层面错误
        {
            strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
            iRet=-1;
            goto END;
        }
        //获取输出参数值
        strcpy(v_error_code, lpTSCall1Ans10->GetString(LDBIZ_ERROR_CODE_STR));
        strcpy(v_error_info, lpTSCall1Ans10->GetString(LDBIZ_ERROR_INFO_STR));
        v_row_id = lpTSCall1Ans10->GetInt64(LDBIZ_ROW_ID_INT64);
        v_debt_loan_sell_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT);
        v_debt_strike_fee = lpTSCall1Ans10->GetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT);
        v_loan_return_strike_amt = lpTSCall1Ans10->GetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT);
        v_loan_return_order_amt = lpTSCall1Ans10->GetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT);
        v_loan_return_comm_amt = lpTSCall1Ans10->GetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT);
        v_return_strike_fee = lpTSCall1Ans10->GetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT);
        v_update_times = lpTSCall1Ans10->GetInt32(LDBIZ_UPDATE_TIMES_INT);


        // [主动推送][secu.exgpcapitaldebt][证券主推_资金_交易组业务资金负债主推消息]
        lpPubMsg = glpFastMsgFactory->CreateFastMessage("pushL.2.931", 0);
        lpPubMsg->SetInt64(LDBIZ_ROW_ID_INT64,v_row_id);
        lpPubMsg->SetInt32(LDBIZ_INIT_DATE_INT,v_init_date);
        lpPubMsg->SetInt32(LDBIZ_CO_NO_INT,v_co_no);
        lpPubMsg->SetInt32(LDBIZ_PD_NO_INT,v_pd_no);
        lpPubMsg->SetInt32(LDBIZ_ASSET_ACCO_NO_INT,v_asset_acco_no);
        lpPubMsg->SetInt32(LDBIZ_EXCH_GROUP_NO_INT,v_exch_group_no);
        lpPubMsg->SetDouble(LDBIZ_DEBT_LOAN_SELL_STRIKE_AMT_FLOAT,v_debt_loan_sell_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_DEBT_STRIKE_FEE_FLOAT,v_debt_strike_fee);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_STRIKE_AMT_FLOAT,v_loan_return_strike_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_ORDER_AMT_FLOAT,v_loan_return_order_amt);
        lpPubMsg->SetDouble(LDBIZ_LOAN_RETURN_COMM_AMT_FLOAT,v_loan_return_comm_amt);
        lpPubMsg->SetDouble(LDBIZ_RETURN_STRIKE_FEE_FLOAT,v_return_strike_fee);
        lpPubMsg->SetInt32(LDBIZ_UPDATE_TIMES_INT,v_update_times);
        glpPubSub_Interface->PubTopics("secu.exgpcapitaldebt", lpPubMsg);

    // end if;
    }


END:
    //对输出参数进行赋值处理
    lpOutBizMsg->SetString(LDBIZ_ERROR_CODE_STR,v_error_code);
    lpOutBizMsg->SetString(LDBIZ_ERROR_INFO_STR,v_error_info);
    if (iRet == -1)
    {
        //调用错误翻译过程
        //调用过程[事务_公共_公共接口_获取错误信息]
        //组织事务请求
        if(lpTSCall1Ans11)
        {
          lpTSCall1Ans11->FreeMsg();
          lpTSCall1Ans11=NULL;
        }
        lpTSCall1Req11=glpFastMsgFactory->CreateFastMessage("pubT.24.154", 0);
        lpTSCall1Req11->SetInt32(LDTAG_PRIORITY, iPriority);
        strcpy(v_log_error_code, v_error_code);
        strcpy(v_log_error_info, v_error_info);
        lpTSCall1Req11->SetInt32(LDBIZ_OPOR_CO_NO_INT,v_opor_co_no);
        lpTSCall1Req11->SetInt32(LDBIZ_OPOR_NO_INT,v_opor_no);
        lpTSCall1Req11->SetString(LDBIZ_OPER_MAC_STR,v_oper_mac);
        lpTSCall1Req11->SetString(LDBIZ_OPER_IP_ADDR_STR,v_oper_ip_addr);
        lpTSCall1Req11->SetString(LDBIZ_OPER_INFO_STR,v_oper_info);
        lpTSCall1Req11->SetString(LDBIZ_OPER_WAY_STR,v_oper_way);
        lpTSCall1Req11->SetString(LDBIZ_FUNC_CODE_STR,v_func_code);
        lpTSCall1Req11->SetString(LDBIZ_LOG_ERROR_CODE_STR,v_log_error_code);
        lpTSCall1Req11->SetString(LDBIZ_LOG_ERROR_INFO_STR,v_log_error_info);
        glpTSSubcallSerives->SubCall(lpTSCall1Req11, &lpTSCall1Ans11, 5000);
        if (lpTSCall1Ans11)
        {
        //获取输出参数值
            strcpy(v_error_code, lpTSCall1Ans11->GetString(LDBIZ_ERROR_CODE_STR));
            strcpy(v_error_info, lpTSCall1Ans11->GetString(LDBIZ_ERROR_INFO_STR));
            strcpy(v_error_prompt, lpTSCall1Ans11->GetString(LDBIZ_ERROR_PROMPT_STR));
            v_error_level = lpTSCall1Ans11->GetInt32(LDBIZ_ERROR_LEVEL_INT);
            strcpy(v_error_deal, lpTSCall1Ans11->GetString(LDBIZ_ERROR_DEAL_STR));
        }

    }
    lpOutBizMsg->SetInt32(LDBIZ_ERROR_LEVEL_INT,v_error_level);
    lpOutBizMsg->SetString(LDBIZ_ERROR_DEAL_STR,v_error_deal);
    lpOutBizMsg->SetString(LDBIZ_ERROR_PROMPT_STR,v_error_prompt);
    //对输出参数进行赋值处理
    lpOutBizMsg->SetInt32(LDBIZ_PASS_NO_INT,v_pass_no);
    lpOutBizMsg->SetString(LDBIZ_OUT_ACCO_STR,v_out_acco);
    lpOutBizMsg->SetInt32(LDBIZ_EXCH_NO_INT,v_exch_no);
    lpOutBizMsg->SetString(LDBIZ_STOCK_ACCO_STR,v_stock_acco);
    lpOutBizMsg->SetString(LDBIZ_STOCK_CODE_STR,v_stock_code);
    lpOutBizMsg->SetInt32(LDBIZ_REPORT_DATE_INT,v_report_date);
    lpOutBizMsg->SetString(LDBIZ_REPORT_NO_STR,v_report_no);
    lpOutBizMsg->SetInt32(LDBIZ_ORDER_DATE_INT,v_order_date);
    lpOutBizMsg->SetInt32(LDBIZ_ORDER_DIR_INT,v_order_dir);
    lpOutBizMsg->SetDouble(LDBIZ_ORDER_PRICE_FLOAT,v_order_price);
    lpOutBizMsg->SetDouble(LDBIZ_ORDER_QTY_FLOAT,v_order_qty);
    lpOutBizMsg->SetString(LDBIZ_RSP_INFO_STR,v_rsp_info);
    lpOutBizMsg->SetString(LDBIZ_ORDER_RSP_STATUS_STR,v_order_rsp_status);
    lpOutBizMsg->SetInt32(LDBIZ_PRICE_TYPE_INT,v_price_type);
    lpOutBizMsg->SetInt64(LDBIZ_ORDER_ID_INT64,v_order_id);
ENDSYS:
    if(lpTSCall1Ans0)
        lpTSCall1Ans0->FreeMsg();
    if(lpTSCall1Ans1)
        lpTSCall1Ans1->FreeMsg();
    if(lpTSCall1Ans2)
        lpTSCall1Ans2->FreeMsg();
    if(lpTSCall1Ans3)
        lpTSCall1Ans3->FreeMsg();
    if(lpTSCall1Ans4)
        lpTSCall1Ans4->FreeMsg();
    if(lpTSCall1Ans5)
        lpTSCall1Ans5->FreeMsg();
    if(lpTSCall1Ans6)
        lpTSCall1Ans6->FreeMsg();
    if(lpTSCall1Ans7)
        lpTSCall1Ans7->FreeMsg();
    if(lpTSCall1Ans8)
        lpTSCall1Ans8->FreeMsg();
    if(lpTSCall1Ans9)
        lpTSCall1Ans9->FreeMsg();
    if(lpTSCall1Ans10)
        lpTSCall1Ans10->FreeMsg();
    if(lpTSCall1Ans11)
        lpTSCall1Ans11->FreeMsg();
    return iRet;
}

